<!DOCTYPE html>
<html lang="en" dir="auto">

<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>SSR를 이용한 SEO 최적화 (구글, 네이버 최상단 노출 성공) | 채수현 개발일지</title>
<meta name="keywords" content="Next.js, SSR, SEO, next-sitemap">
<meta name="description" content="Next.js의 꽃 SSR &amp; SEO, Lighthouse, 네이버 서치어드바이저, 구글 웹마스터도구">
<meta name="author" content="cha2hyun">
<link rel="canonical" href="https://cha2hyun.blog/content/projects/%ED%81%90%EC%B0%BE%EC%82%AC/ssrandseo/">
<link crossorigin="anonymous" href="/assets/css/stylesheet.06cc1401233af506ee36c5cc89872a4bb4866704e48f666797e0ab85a990bd8f.css" integrity="sha256-BswUASM69QbuNsXMiYcqS7SGZwTkj2Znl&#43;CrhamQvY8=" rel="preload stylesheet" as="style">
<link rel="icon" href="https://cha2hyun.blog/favicon/favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="https://cha2hyun.blog/favicon/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="https://cha2hyun.blog/favicon/favicon-32x32.png">
<link rel="apple-touch-icon" href="https://cha2hyun.blog/favicon/apple-icon-76x76.png">
<link rel="mask-icon" href="https://cha2hyun.blog/safari-pinned-tab.svg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: rgb(29, 30, 32);
                --entry: rgb(46, 46, 51);
                --primary: rgb(218, 218, 219);
                --secondary: rgb(155, 156, 157);
                --tertiary: rgb(65, 66, 68);
                --content: rgb(196, 196, 197);
                --hljs-bg: rgb(46, 46, 51);
                --code-bg: rgb(55, 56, 62);
                --border: rgb(51, 51, 51);
            }

            .list {
                background: var(--theme);
            }

            .list:not(.dark)::-webkit-scrollbar-track {
                background: 0 0;
            }

            .list:not(.dark)::-webkit-scrollbar-thumb {
                border-color: var(--theme);
            }
        }

    </style>
</noscript><meta property="og:title" content="SSR를 이용한 SEO 최적화 (구글, 네이버 최상단 노출 성공)" />
<meta property="og:description" content="Next.js의 꽃 SSR &amp; SEO, Lighthouse, 네이버 서치어드바이저, 구글 웹마스터도구" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cha2hyun.blog/content/projects/%ED%81%90%EC%B0%BE%EC%82%AC/ssrandseo/" /><meta property="og:image" content="https://cha2hyun.blog/papermod-cover.png"/><meta property="article:section" content="content" />
<meta property="article:published_time" content="2023-02-17T00:00:00+00:00" />
<meta property="article:modified_time" content="2023-02-17T00:00:00+00:00" />

<meta name="twitter:card" content="summary_large_image"/>
<meta name="twitter:image" content="https://cha2hyun.blog/papermod-cover.png"/>

<meta name="twitter:title" content="SSR를 이용한 SEO 최적화 (구글, 네이버 최상단 노출 성공)"/>
<meta name="twitter:description" content="Next.js의 꽃 SSR &amp; SEO, Lighthouse, 네이버 서치어드바이저, 구글 웹마스터도구"/>


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position":  1 ,
      "name": "Contents",
      "item": "https://cha2hyun.blog/content/"
    }, 
    {
      "@type": "ListItem",
      "position":  2 ,
      "name": "Projects",
      "item": "https://cha2hyun.blog/content/projects/"
    }, 
    {
      "@type": "ListItem",
      "position":  4 ,
      "name": "SSR를 이용한 SEO 최적화 (구글, 네이버 최상단 노출 성공)",
      "item": "https://cha2hyun.blog/content/projects/%ED%81%90%EC%B0%BE%EC%82%AC/ssrandseo/"
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "SSR를 이용한 SEO 최적화 (구글, 네이버 최상단 노출 성공)",
  "name": "SSR를 이용한 SEO 최적화 (구글, 네이버 최상단 노출 성공)",
  "description": "Next.js의 꽃 SSR \u0026amp; SEO, Lighthouse, 네이버 서치어드바이저, 구글 웹마스터도구",
  "keywords": [
    "Next.js", "SSR", "SEO", "next-sitemap"
  ],
  "articleBody": "이전글) 무한스크롤 리스트 구현 CHECK 👉 Next.js] InfiniteScroll로 무한 스크롤 구현하기\n결과 미리보기 중고큐 키워드 검색시 최상단 노출에 성공 했습니다 👏👏 당연히 다른 키워드나 상품명 (브랜드, 카테고리 등) 전부 검색엔진에 잘 표시 됩니다.\n구글 검색\n네이버 검색\n들어가며 위 글에서 다룬 내용중 무한스크롤 + Modal로 상품상세페이지를 빠르게 표시하는 방법이 있었습니다. API에서 리스트를 불러올때 리스트안에 상품상세페이지를 구성하는 모든 값들이 있었기 때문에 해당 인자를 Modal로 넘겨주면 새로운 Fetch가 필요 없으므로 로딩이 필요 없는 것이 중요한 포인트였습니다. 최상의 로딩속도 경험을 제공해주는데 비해 여러가지 문제점들이 있었습니다.\n문제점 모달은 SEO가 되지 않으므로 구글검색에서 상품이 표시되지 않는 문제 😵 모바일 기기에서 자연스럽게 왼쪽으로 스와이프로 뒤로가기시 모달이 닫히는 것 이 아니라 페이지 이동이 되어버림. Google Analytics에서 모달을 페이지로 인식하지 못하는 문제. 리스트에서 상세를 모달로 오픈하는 것은 속도나 경험 측면에서 유리한 점을 제공하기도 하지만 일반적인 상품상세페이지에서는 득보다 실이 더 많다고 판단되어 Next.js의 꽃이라고도 할 수 있는 Dynamic Route를 이용해 모달 방식이 아닌 상세페이지로 링크 이동되게 진행하였습니다. (리퀘스트 1번이 API서버에 영향을 주진 않겠지만, 유저의 속도 경험을 위해 고민했던 내용입니다.)\n궁금했던점 나는 이미 리스트에서 상세페이지에 대한 내용을 전부 가지고 있는데 이동되면서 한번더 Fetch를 하게되면 손해가 발생하는 것이 아닐까? 라는 생각을 했습니다. 상세페이지로 이동하는 경우의수는 두가지입니다.\n리스트에서 상품을 클릭하여 상세페이지로 넘어가는 경우 (이때 불필요한 request 발생) 검색이나 링크로 직접 상세페이지로 접속하는 경우 따라서 1번의 경우에 에 인자를 넣어서 넘겨주거나, LocalStorage에 인자를 저장해놓고 [id].tsx에서 인자가 있는지 없는지 여부를 확인하여 부분적 SSR를 이용할 수 있지 않을까? 라는 생각이 들었습니다.\n해당 내용은 vercel/next.js에 Discussion을 통해 질문하였습니다. 상세한 답변과 내용은 링크를 확인해주세요 👉 Is there a trick on getServerSideProps to check if user types the URL directly #45077\n결론 리스트에서 이미 Fetch된 데이터를 모달 or 상세페이지로 인자로 넘겨주고 상세페이지에서는 인자가 있는지 없는지 여부를 확인해 부분적으로 Fetch 하는 것은 오히려 비효율적이다 !!! 특히 SEO가 안되므로 !!\nSSR (Server-Side-Rendering) SEO 최적화를 위해서는 🔥꼭 서버 사이드 렌더링을🔥 사용해야합니다. Next.js에서 페이지가 생성된 이후에 Fetch된 Data는 인식하지 못하고 Undefined로 표시됩니다. 따라서 useEffect (조건문에 의한 Axios or Request)로 불러올 경우에는 SEO가 적용되지 않습니다. DynamicRoute에서 SSR을 적용한 코드는 다음과 같습니다. 단 [id].tsx처럼 다이나믹 라우트가 적용된 페이지에서는 별도의 사이트맵을 생성해주어야 합니다\nsrc \u003e pages \u003e findcue \u003e [id].tsx src \u003e pages \u003e findcue \u003e [id].tsx 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 export default function CueDetail({ cue }: { cue: Results }) { ... return ( \u003cLayout\u003e // \u003c-- 카카오 공유하기 sdk 초기화 // SEO {cue ? ( \u003cSeo title={seo_title(cue)} description={seo_description(cue)} image={seo_OG_images(cue)} /\u003e ) : ( \u003cSeo /\u003e )} \u003cmain\u003e \u003csection className=\"bg-white\"\u003e \u003cdiv className=\"layout\"\u003e \u003cdiv\u003e {/* 큐 영역 보여지는 구간 */} {cue \u0026\u0026 \u003cdiv data-aos=\"fade-up\"\u003e...\u003c/div\u003e} \u003c/div\u003e \u003c/div\u003e \u003c/section\u003e \u003c/main\u003e \u003c/Layout\u003e ); } // SERVER SIDE RENDERING export const getServerSideProps: GetServerSideProps = async (context) =\u003e { const fetchUrl = `${apiUrl}/.../v3/?id=${context.params?.id}`; const res = await axios.get(fetchUrl); const cue = await res.data.results[0]; // 못불러오면 404 페이지로 if (!cue) { return { notFound: true, }; } return { props: { cue }, }; }; 찾으려는 id가 없을 경우에는 notFound = true를 리턴해야 404 페이지로 넘어갑니다. API에 따라서 catch문을 사용해야할 수 도 있습니다. 해당 코드에서는 정상적으로 리턴된 데이터 값을 cue로 인자를 전달하였습니다.\nSEO 공통 컴포넌트 만들기 SEO 최적화를 위해 모든 페이지에서 SEO를 불러드릴 컴포넌트를 만듭니다. 해당 컴포넌트는 @theodorusclarence/ts-nextjs-tailwind-starter 를 사용하였습니다.\nsrc \u003e components \u003e Seo.tsx src \u003e components \u003e Seo.tsx 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99 100 101 102 103 104 105 106 107 108 109 110 111 112 113 114 115 116 117 118 119 120 121 122 123 124 125 126 127 128 129 130 131 132 133 134 135 136 137 138 139 140 141 142 143 144 145 146 147 148 149 150 151 152 153 154 155 156 157 158 import Head from \"next/head\"; import { useRouter } from \"next/router\"; import { openGraph } from \"@/lib/helper\"; const defaultMeta = { title: \"큐찾사 | 중고큐 거래는 큐찾사\", siteName: \"큐찾사 | 중고큐 거래는 큐찾사\", description: \"1,000만 당구인을 위해 (주)김치빌리아드가 제작 운영하는 안전한 중고큐 거래 어플리케이션\", url: \"https://www.cue8949.com\", type: \"website\", robots: \"follow, index\", image: \"https://www.cue8949.com/....../default.png\", }; type SeoProps = { date?: string; templateTitle?: string; } \u0026 Partial\u003ctypeof defaultMeta\u003e; export default function Seo(props: SeoProps) { const router = useRouter(); const meta = { ...defaultMeta, ...props, }; meta[\"title\"] = props.templateTitle ? `${props.templateTitle} | ${meta.siteName}` : meta.title; return ( \u003cHead\u003e \u003ctitle\u003e{meta.title}\u003c/title\u003e \u003cmeta name=\"robots\" content={meta.robots} /\u003e \u003cmeta content={meta.description} name=\"description\" /\u003e \u003cmeta property=\"og:url\" content={`${meta?.url}${router.asPath}`} /\u003e \u003clink rel=\"canonical\" href={`${meta?.url}${router.asPath}`} /\u003e {/* Open Graph */} \u003cmeta property=\"og:type\" content={meta.type} /\u003e \u003cmeta property=\"og:site_name\" content={meta.siteName} /\u003e \u003cmeta property=\"og:description\" content={meta.description} /\u003e \u003cmeta property=\"og:title\" content={meta.title} /\u003e \u003cmeta name=\"image\" property=\"og:image\" content={meta.image} /\u003e {/* Twitter */} {/* */} {meta.date \u0026\u0026 ( \u003c\u003e \u003cmeta property=\"article:published_time\" content={meta.date} /\u003e \u003cmeta name=\"publish_date\" property=\"og:publish_date\" content={meta.date} /\u003e \u003cmeta name=\"author\" property=\"article:author\" content=\"Cuechatsa\" /\u003e \u003c/\u003e )} {/* Favicons */} {favicons.map((linkProps) =\u003e ( \u003clink key={linkProps.href} {...linkProps} /\u003e ))} \u003cmeta name=\"msapplication-TileColor\" content=\"#ffffff\" /\u003e \u003cmeta name=\"msapplication-TileImage\" content=\"/favicon/ms-icon-144x144.png\" /\u003e \u003cmeta name=\"theme-color\" content=\"#ffffff\" /\u003e \u003c/Head\u003e ); } type Favicons = { rel: string; href: string; sizes?: string; type?: string; }; const favicons: Array\u003cFavicons\u003e = [ { rel: \"apple-touch-icon\", sizes: \"57x57\", href: \"/favicon/apple-icon-57x57.png\", }, { rel: \"apple-touch-icon\", sizes: \"60x60\", href: \"/favicon/apple-icon-60x60.png\", }, { rel: \"apple-touch-icon\", sizes: \"72x72\", href: \"/favicon/apple-icon-72x72.png\", }, { rel: \"apple-touch-icon\", sizes: \"76x76\", href: \"/favicon/apple-icon-76x76.png\", }, { rel: \"apple-touch-icon\", sizes: \"114x114\", href: \"/favicon/apple-icon-114x114.png\", }, { rel: \"apple-touch-icon\", sizes: \"120x120\", href: \"/favicon/apple-icon-120x120.png\", }, { rel: \"apple-touch-icon\", sizes: \"144x144\", href: \"/favicon/apple-icon-144x144.png\", }, { rel: \"apple-touch-icon\", sizes: \"152x152\", href: \"/favicon/apple-icon-152x152.png\", }, { rel: \"apple-touch-icon\", sizes: \"180x180\", href: \"/favicon/apple-icon-180x180.png\", }, { rel: \"icon\", type: \"image/png\", sizes: \"192x192\", href: \"/favicon/android-icon-192x192.png\", }, { rel: \"icon\", type: \"image/png\", sizes: \"32x32\", href: \"/favicon/favicon-32x32.png\", }, { rel: \"icon\", type: \"image/png\", sizes: \"96x96\", href: \"/favicon/favicon-96x96.png\", }, { rel: \"icon\", type: \"image/png\", sizes: \"16x16\", href: \"/favicon/favicon-16x16.png\", }, { rel: \"manifest\", href: \"/favicon/manifest.json\", }, ]; 어느 페이지에서든 SEO 컴포넌트를 불러올 때 Override가 필요한 인자값들을 입력하면 됩니다.\nsrc/pages/findcue/[id].tsx src \u003e components \u003e src/pages/findcue/[id].tsx 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 export default function CueDetail({ cue }: { cue: Results }) { return ( \u003cLayout\u003e {/* */} {cue ? ( \u003cSeo title={seo_title(cue)} description={seo_description(cue)} image={cue.images.length \u003e 0 ? cue.images[0].image : DefaultOGImage} /\u003e ) : ( \u003cSeo /\u003e )} \u003csection\u003e...\u003c/section\u003e \u003c/Layout\u003e ); } 파비콘 만들기 파비콘의 경우 https://www.favicon-generator.org/ 여기서 기기별, 사이즈별 한번에 제작할 수 있습니다. 해당 사이트에서 제작한 파비콘을 통째로 /public/favicon 경로에 넣어주었습니다.\n다운로드하면 사이즈별로 알아서 제작됩니다.\nOpenGraph 테스트 카카오톡 OG 디버깅 : https://developers.kakao.com/tool/debugger/sharing\n배포된 서버만 테스트가 가능합니다. 카카오 공화국에선 OG는 필수\n여러 플랫폼 OG 테스트 : https://www.opengraph.xyz/\nlocalhost로는 테스트가 불가하므로 포트포워딩을 통해 ip로 접근해야합니다.\n사이트에서 수정해서 어떻게 보여지는지 볼 수 있다\n결과 위 컴포넌트만 잘 활용하신다면 Lighthouse SEO 테스트 100점은 쉽게 가져가실 수 있습니다. 나머지 점수도 100점을 향해 고도화가 되어야 겠습니다. 100점!!\nnext-sitemap (네이버, 구글이 SSR을 인식하게하자) Next는 [id].tsx 와 같은 다이나믹 라우팅에 대해서 사이트맵을 생성하지 않습니다. 당연하게도 id가 0부터 100까지인지 aaa부터 zzzzz까지 인지 모르기 때문이죠. 따라서 운영하는 사이트에서 어떤 글들이 있는지 상품들이 있는지 직접 추가해야합니다.\n하지만 !! 여기서 핵심은 새로 게시글이나 상품이 올라왔을때 자동으로 해당 페이지를 사이트맵에 포함시켜야합니다. 정확히 말하자면 서치 로봇이 크롤링을 돌때마다 해당 페이지를 사이트맵에 포함시켜줘야합니다. 그러기 위해서는 사이트맵 또한 다이나믹하게 API로 부터 추가된 내용을 받아서 변경되어야합니다.next-sitemap#generating-dynamicserver-side-sitemaps를 참고하여 제작하였습니다.\n어떤 글들이 있는지, 어떤 상품들이 있는지 리턴해주는 API 예를들어 내큐찾기의 상품의 경우 /findcue/[상품번호] url을 가지고 있는데 어떤 상품번호들이 유저에게 보여져도 되는지, 구글 네이버가 수집해도 좋을지를 Robots.txt를 통해 알려주어야 합니다. 그래서 조건에 맞는 상품번호들과 최초 생성일을 알려주는 간단한 API를 제작해야합니다. Django로 제작하였습니다.\nviews.py 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 class SiteModelModelViewWeb_V3(viewsets.ModelViewSet): \"\"\" 네이버, 구글 서치어드바이저에 사이트맵 제출 위해서 필요한 도큐멘트 ID만 리턴해준다. \"\"\" queryset = ContentModel.objects.exclude(Q(\"쿼리셋 조건\")).all() permission_classes = (\"권한\") serializer_class = ContentWebSitemapSerializer pagination_class = LimitOffsetPagination filter_backends = (DjangoFilterBackend, filters.OrderingFilter) ordering_fields = ('document_id') ordering = ('-document_id') def list(self, request, *args,**kwargs): data = super().list(request, *args, **kwargs).data return Response(data=data) serializer.py 1 2 3 4 5 6 7 class ContentWebSitemapSerializer(serializers.ModelSerializer): class Meta: model = ContentModel fields = ( 'document_id', 'updated_at', ) 리턴 결과 sitemap을 위한 api\n동적 페이지를 사이트맵에 추가하자 next-sitemap라이브러리 설치가 필요합니다.\n설치 이후 pages \u003e server-sitemap.xml \u003e index.tsx 를 생성해줍니다. 해당 server-sitemap.xml 에서 기본적인 사이트맵 이외에 다이나믹 라우트를 활용한 즉, SSR되는 리스트들을 사이트맵에 추가해줍니다.\npages \u003e server-sitemap.xml \u003e index.tsx pages \u003e server-sitemap.xml \u003e index.tsx 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 /* eslint-disable import/no-anonymous-default-export */ /* eslint-disable @typescript-eslint/no-empty-function */ import { GetServerSideProps } from \"next\"; import { getServerSideSitemap, ISitemapField } from \"next-sitemap\"; import { getGoodsSiteMap, getPostsSiteMap } from \"@/pages/api\"; type Posts = { id: string; created_at: string; }; type Goods = { document_id: string; updated_at: string; }; export const getServerSideProps: GetServerSideProps = async (ctx) =\u003e { // Method to source urls from cms const posts: Posts[] = await getPostsSiteMap(); const posts_sitemap_fields: ISitemapField[] = posts.map((post) =\u003e { return { loc: `${process.env.NEXT_PUBLIC_URL}/community/post/${post[\"id\"]}`, lastmod: post[\"created_at\"], changefreq: \"always\", priority: 1.0, }; }); const goods: Goods[] = await getGoodsSiteMap(); const goods_sitemap_fields: ISitemapField[] = goods.map((good) =\u003e { return { loc: `${process.env.NEXT_PUBLIC_URL}/goods/${good[\"document_id\"]}`, lastmod: good[\"updated_at\"], changefreq: \"always\", priority: 1.0, }; }); const sitemap_fields = [...posts_sitemap_fields, ...goods_sitemap_fields]; return getServerSideSitemap(ctx, sitemap_fields); }; // Default export to prevent next.js errors export default function Sitemap() {} /server-sitemap.xml에 접속하면 다음과 같이 xml파일이 잘 만들어진 것을 확인할 수 있습니다.\n실행결과\n잘 만들어진 사이트맵을 빌드할 때 robots.txt에 포함될 수 있도록 설정해주어야 합니다.\nnext-sitemap.config.js next-sitemap.config.js 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 /** * @type {import('next-sitemap').IConfig} * @see https://github.com/iamvishnusankar/next-sitemap#readme */ module.exports = { siteUrl: `${process.env.NEXT_PUBLIC_URL}`, generateRobotsTxt: true, exclude: [ \"/mypage\", \"/404\", \"/sandbox/dialog-zustand\", \"/findcue/utils\", \"/components\", ], robotsTxtOptions: { policies: [{ userAgent: \"*\", allow: \"/\" }], additionalSitemaps: [`${process.env.NEXT_PUBLIC_URL}/server-sitemap.xml`], // \u003c-- 여기 }, }; package.json package.json 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 { \"name\": \"cuechatsa_apppage_v3\", \"version\": \"0.1.1\", \"private\": true, \"scripts\": { \"dev\": \"next dev -p 3001\", \"build\": \"next build\", \"export\": \"next export -o out\", \"start\": \"next start\", \"lint\": \"next lint\", \"lint:fix\": \"eslint src --fix \u0026\u0026 yarn format\", \"lint:strict\": \"eslint --max-warnings=0 src\", \"typecheck\": \"tsc --noEmit --incremental false\", \"test:watch\": \"jest --watch\", \"test\": \"jest\", \"format\": \"prettier -w .\", \"format:check\": \"prettier -c .\", \"postbuild\": \"next-sitemap --config next-sitemap.config.js\", // \u003c- 이부분 \"prepare\": \"husky install\" }, ... } 이후에 yarn build하면 robots.txt에 자동으로 추가되는걸 볼 수 있습니다.\n1 2 3 4 5 6 7 8 9 10 # * User-agent: * Allow: / # Host Host: https://www.cue8949.com # Sitemaps Sitemap: https://www.cue8949.com/sitemap.xml Sitemap: https://www.cue8949.com/server-sitemap.xml \u003c\u003c 여기 네이버, 구글 웹마스터도구 등록 네이버 서치어드바이저(웹마스터도구)에 등록 후 몇가지 추가로 해야할 것 이 있습니다. 이 url이 나의 소유임을 확인하는 Meta 태그를 추가해야합니다. 이는 구글과 동일한 방식을 사용합니다. 네이버 서치어드바이저에서 활용할 수 잇는 사이트 연관채널도 추가하려합니다.\n네이버 검색 연관채널\n앞서 만들었던 Seo.tsx 컴포넌트를 활용합니다. 연관채널은 가이드를 참고하여 JSON-LD 형식으로 구현합니다.\n네이버 검색 연관채널 가이드\nsrc \u003e components \u003e Seo.tsx src \u003e components \u003e Seo.tsx 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 \u003cHead\u003e ... ... {/* 네이버 서치어드바이저 */} \u003cmeta name=\"naver-site-verification\" content=\"발급받은 문자열\" /\u003e // 연관채널 \u003cscript type=\"application/ld+json\" dangerouslySetInnerHTML={{ __html: JSON.stringify({ \"@context\": \"http://schema.org\", \"@type\": \"Person\", name: \"큐찾사 | 중고큐 거래는 큐찾사\", url: \"https://www.cue8949.com\", sameAs: [ \"https://www.facebook.com/kimchibilliards\", \"https://www.youtube.com/channel/UCO_ynY-y2HaR9LiHr03beVw\", \"https://www.instagram.com/kimchibilliards\", \"https://play.google.com/store/apps/details?id=com.cuechatsaapp\", \"https://apps.apple.com/app/id1524591264\", ], }), }} /\u003e {/* 구글 서치어드바이저 */} \u003cmeta name=\"google-site-verification\" content=\"발급받은 문자열\" /\u003e ... ... \u003c/Head\u003e 네이버 서치어드바이저에서 수집된 robots.txt를 보면 잘 수집된걸 볼 수 잇습니다. 네이버 서치어드바이저\n구글 웹마스터도구에서도 사이트맵 제출이 잘 되는걸 볼 수 있습니다. 구글 웹마스터도구\n만들어진 사이트맵은 저처럼 직접 제출해도 되고 (빠름), 검색 로봇이 서치하게 두어도 됩니다(느림).\n카카오 공유하기 좌: 카카오 공유하기 | 우: OpenGraph\n카카오 공화국인 한국인 만큼 카카오 공유하기도 추가해야겠다고 생각하였습니다. 커스텀 템플릿을 이용하면 매우 쉽게 카카오 공유하기를 입맛대로 구성할 수 있습니다.\n카카오디벨로퍼에서 키 발급 카카오디벨로퍼에서 애플리케이션을 만들고 Javascript 키를 .env에 복사해줍니다.\n.env .env 1 2 3 ... NEXT_PUBLIC_KAKAO_API_KEY=\"발급받은 Javascript 키\" ... 변수명에 NEXT_PUBLIC을 붙혀주지 않으면 페이지에서 불러올 수 없으니 유의해주세요. 카카오 SDK 설치 src \u003e pages \u003e _app.tsx 에서 Window 인터페이스를 선언해줍니다. src \u003e pages \u003e _app.tsx 1 2 3 4 5 6 7 8 9 10 11 12 13 declare global { interface Window { Kakao: any; } } const MyApp = ({...}: {...}) =\u003e { return ( ... ); }; export default MyApp; src \u003e pages \u003e _document.tsx에서 카카오 sdk를 실행합니다. src \u003e pages \u003e _document.tsx 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 import Document, { Head, Html, Main, NextScript, } from 'next/document'; class MyDocument extends Document { ... render() { return ( \u003cHtml lang='en'\u003e \u003cHead\u003e ... {/* kakao */} \u003cscript defer src='https://developers.kakao.com/sdk/js/kakao.min.js' \u003e\u003c/script\u003e \u003c/Head\u003e ... \u003cbody\u003e \u003cMain /\u003e \u003cNextScript /\u003e \u003c/body\u003e \u003c/Html\u003e ); } } export default MyDocument; src \u003e components \u003e layout \u003e Layout.tsx Window.kakao를 초기화 해주어야 합니다. 꼭 해당 컴포넌트에서 안해도 되지만 프로젝트 구성상 Layout 컴포넌트가 모든 페이지의 뼈대가 되므로 저는 Layout에서 초기화 해주었습니다. 초기화를 여러번 진행하면 에러가 발생하므로 useEffect로 이미 초기화가 진행되었는지 확인해주어야합니다.\nsrc \u003e components \u003e layout \u003e Layout.tsx 1 2 3 4 5 6 7 8 9 10 11 12 13 14 export default function Layout({ children }: { children: React.ReactNode }) { ... // kakao 공유하기 React.useEffect(() =\u003e { if (!window.Kakao.isInitialized()) { window.Kakao.init(process.env.NEXT_PUBLIC_KAKAO_API_KEY); } // eslint-disable-next-line react-hooks/exhaustive-deps }, []); ... return ( ... ); } 카카오 메세지 템플릿 만들기 카카오디벨로퍼 \u003e 도구 \u003e 메세지템플릿 에서 템플릿을 만들 수 있습니다. 피드형으로 진행하였습니다. 파라미터는 입력필드에 포맷으로 ${key변수명}을 입력하면 해당 값은 변수처럼 사용될 수 있습니다. 코드 적용하기 KakaoBtn 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 const KakaoBtn = ({ title, description, price, state, document_id, imageUrl, like_cnt, view_cnt, ... }: { title: string; description: string; price: number; state: string; document_id: string; imageUrl: string; like_cnt: number; view_cnt: number; ... }) =\u003e { const onClick = () =\u003e { // eslint-disable-next-line unused-imports/no-unused-vars const { Kakao, location } = window; Kakao.Link.sendCustom({ templateId: 89436, // \u003c-- 자신의 템플릿 ID를 입력 templateArgs: { // \u003c-- 템플릿에서 만들었던 변수명을 보냄 title: `${title}`, description: `${description}`, sub_title: `${sub_title}`, sub_description: `${sub_description}`, button_title: `${button_title}`, document_id: `${document_id}`, imageUrl: `${imageUrl}`, header: `${document_id}`, like_cnt: `${like_cnt}`, view_cnt: `${view_cnt}`, price: `${price}`, }, }); }; return ( \u003c\u003e \u003cdiv onClick={onClick} className=\"mb-3 flex cursor-pointer justify-center\" \u003e \u003cdiv className=\"flex h-[45px] w-full flex-row rounded-xl bg-[#FFEB01] py-2 px-5 md:flex md:h-[55px]\"\u003e \u003cKakaoSVG className=\"my-auto w-12 text-3xl md:text-4xl\" /\u003e \u003cdiv className=\"h5 md:h4 my-auto w-full pl-4 text-[#3C1E1E]\"\u003e 카카오톡으로 공유하기 \u003c/div\u003e \u003c/div\u003e \u003c/div\u003e \u003c/\u003e ); }; 만들어진 버튼은 다음과 같습니다. 해당 버튼을 누르면 PC는 새로운 창이 열리면서 공유할 친구 목록 선택 할 수 있으며 모바일은 카톡앱이 켜진 후 보낼 대상을 선택할 수 있습니다. 마치며 이로서 SSR + SEO + Sitemap 모두 적용되어 네이버, 구글 검색결과에 표시될 준비가 모두 끝났습니다. 🔥\n구글, 네이버 검색결과에 상위에 노출되기만 남았습니다(제발~~).\nReference https://github.com/iamvishnusankar/next-sitemap#generating-dynamicserver-side-sitemaps https://github.com/theodorusclarence/ts-nextjs-tailwind-starter https://github.com/vercel/next.js/discussions/45077#discussioncomment-4774680 https://www.opengraph.xyz https://developers.kakao.com/tool/debugger/sharing 해당글이 Next.js를 이용해서 SEO 최적화 하시는데 도움이 되셨길 바랍니다 😆\n궁금하신 점이 있으시면 아래 Comments 남겨주세요 👇\n",
  "wordCount" : "2615",
  "inLanguage": "en",
  "datePublished": "2023-02-17T00:00:00Z",
  "dateModified": "2023-02-17T00:00:00Z",
  "author":{
    "@type": "Person",
    "name": "cha2hyun"
  },
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https://cha2hyun.blog/content/projects/%ED%81%90%EC%B0%BE%EC%82%AC/ssrandseo/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "채수현 개발일지",
    "logo": {
      "@type": "ImageObject",
      "url": "https://cha2hyun.blog/favicon/favicon.ico"
    }
  }
}
</script>
</head>

<body class="" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    } else if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }

</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="https://cha2hyun.blog/" accesskey="h" title="채수현 개발일지 (Alt + H)">채수현 개발일지<span style="justify-content: center; padding-left:7px;">
                    <img src="https://hits.seeyoufarm.com/api/count/incr/badge.svg?url=https%3A%2F%2Fcha2hyun.blog&count_bg=%23000000&title_bg=%23000000&icon=&icon_color=%23E7E7E7&title=HITS&edge_flat=false"/>
                </span>
                <div style="font-size: 14px; margin-top:-30px; font-weight: normal;">📚 기억은 유한하나, 기록은 무한하다</div>
            </a>            
        </div>
        <ul id="menu">
            <li>
                <a href="https://cha2hyun.blog/archives" title="전체">
                    <span style="font-weight: bold;">전체</span>
                </a>
            </li>
            <li>
                <a href="https://cha2hyun.blog/content/posts/" title="개발일상">
                    <span style="font-weight: bold;">개발일상</span>
                </a>
            </li>
            <li>
                <a href="https://cha2hyun.blog/content/projects/" title="프로젝트">
                    <span style="font-weight: bold;">프로젝트</span>
                </a>
            </li>
            <li>
                <a href="https://cha2hyun.blog/content/algorithm/" title="알고리즘">
                    <span style="font-weight: bold;">알고리즘</span>
                </a>
            </li>
            <li>
                <a href="https://cha2hyun.blog/search/" title="검색">
                    <span style="font-weight: bold;">검색</span>
                </a>
            </li>
            <li>
                <div class="logo-switches">
                    <button id="theme-toggle" accesskey="t" title="(Alt + T)">
                        <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                            fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                            stroke-linejoin="round">
                            <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                        </svg>
                        <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                            fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                            stroke-linejoin="round">
                            <circle cx="12" cy="12" r="5"></circle>
                            <line x1="12" y1="1" x2="12" y2="3"></line>
                            <line x1="12" y1="21" x2="12" y2="23"></line>
                            <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                            <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                            <line x1="1" y1="12" x2="3" y2="12"></line>
                            <line x1="21" y1="12" x2="23" y2="12"></line>
                            <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                            <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                        </svg>
                    </button>
                </div>
            </li>
        </ul>
        
    </nav>
    
    
</header>
<main class="main">

<article class="post-single">
  <header class="post-header">
    <div class="breadcrumbs"><a href="https://cha2hyun.blog/">Home</a>&nbsp;»&nbsp;<a href="https://cha2hyun.blog/content/">Contents</a>&nbsp;»&nbsp;<a href="https://cha2hyun.blog/content/projects/">Projects</a></div>
    <h1 class="post-title entry-hint-parent">
      SSR를 이용한 SEO 최적화 (구글, 네이버 최상단 노출 성공)
    </h1>
    <div class="post-meta"><span title='2023-02-17 00:00:00 +0000 UTC'>February 17, 2023</span>&nbsp;·&nbsp;13 min&nbsp;·&nbsp;cha2hyun


    </div>
  </header> <div class="toc">
    <details  open>
        <summary accesskey="c" title="(Alt + C)">
            <span class="details">Table of Contents</span>
        </summary>

        <div class="inner"><ul>
                <li>
                    <a href="#%ec%9d%b4%ec%a0%84%ea%b8%80-%eb%ac%b4%ed%95%9c%ec%8a%a4%ed%81%ac%eb%a1%a4-%eb%a6%ac%ec%8a%a4%ed%8a%b8-%ea%b5%ac%ed%98%84" aria-label="이전글) 무한스크롤 리스트 구현">이전글) 무한스크롤 리스트 구현</a></li>
                <li>
                    <a href="#%ea%b2%b0%ea%b3%bc-%eb%af%b8%eb%a6%ac%eb%b3%b4%ea%b8%b0" aria-label="결과 미리보기">결과 미리보기</a></li>
                <li>
                    <a href="#%eb%93%a4%ec%96%b4%ea%b0%80%eb%a9%b0" aria-label="들어가며">들어가며</a><ul>
                        
                <li>
                    <a href="#%eb%ac%b8%ec%a0%9c%ec%a0%90" aria-label="문제점">문제점</a></li>
                <li>
                    <a href="#%ea%b6%81%ea%b8%88%ed%96%88%eb%8d%98%ec%a0%90" aria-label="궁금했던점">궁금했던점</a></li>
                <li>
                    <a href="#%ea%b2%b0%eb%a1%a0" aria-label="결론">결론</a></li></ul>
                </li>
                <li>
                    <a href="#ssr-server-side-rendering" aria-label="SSR (Server-Side-Rendering)">SSR (Server-Side-Rendering)</a></li>
                <li>
                    <a href="#seo" aria-label="SEO">SEO</a><ul>
                        
                <li>
                    <a href="#%ea%b3%b5%ed%86%b5-%ec%bb%b4%ed%8f%ac%eb%84%8c%ed%8a%b8-%eb%a7%8c%eb%93%a4%ea%b8%b0" aria-label="공통 컴포넌트 만들기">공통 컴포넌트 만들기</a></li>
                <li>
                    <a href="#%ed%8c%8c%eb%b9%84%ec%bd%98-%eb%a7%8c%eb%93%a4%ea%b8%b0" aria-label="파비콘 만들기">파비콘 만들기</a></li>
                <li>
                    <a href="#opengraph-%ed%85%8c%ec%8a%a4%ed%8a%b8" aria-label="OpenGraph 테스트">OpenGraph 테스트</a></li>
                <li>
                    <a href="#%ea%b2%b0%ea%b3%bc" aria-label="결과">결과</a></li></ul>
                </li>
                <li>
                    <a href="#next-sitemap-%eb%84%a4%ec%9d%b4%eb%b2%84-%ea%b5%ac%ea%b8%80%ec%9d%b4-ssr%ec%9d%84-%ec%9d%b8%ec%8b%9d%ed%95%98%ea%b2%8c%ed%95%98%ec%9e%90" aria-label="next-sitemap (네이버, 구글이 SSR을 인식하게하자)">next-sitemap (네이버, 구글이 SSR을 인식하게하자)</a><ul>
                        
                <li>
                    <a href="#%ec%96%b4%eb%96%a4-%ea%b8%80%eb%93%a4%ec%9d%b4-%ec%9e%88%eb%8a%94%ec%a7%80-%ec%96%b4%eb%96%a4-%ec%83%81%ed%92%88%eb%93%a4%ec%9d%b4-%ec%9e%88%eb%8a%94%ec%a7%80-%eb%a6%ac%ed%84%b4%ed%95%b4%ec%a3%bc%eb%8a%94-api" aria-label="어떤 글들이 있는지, 어떤 상품들이 있는지 리턴해주는 API">어떤 글들이 있는지, 어떤 상품들이 있는지 리턴해주는 API</a></li>
                <li>
                    <a href="#%eb%8f%99%ec%a0%81-%ed%8e%98%ec%9d%b4%ec%a7%80%eb%a5%bc-%ec%82%ac%ec%9d%b4%ed%8a%b8%eb%a7%b5%ec%97%90-%ec%b6%94%ea%b0%80%ed%95%98%ec%9e%90" aria-label="동적 페이지를 사이트맵에 추가하자">동적 페이지를 사이트맵에 추가하자</a></li></ul>
                </li>
                <li>
                    <a href="#%eb%84%a4%ec%9d%b4%eb%b2%84-%ea%b5%ac%ea%b8%80-%ec%9b%b9%eb%a7%88%ec%8a%a4%ed%84%b0%eb%8f%84%ea%b5%ac-%eb%93%b1%eb%a1%9d" aria-label="네이버, 구글 웹마스터도구 등록">네이버, 구글 웹마스터도구 등록</a></li>
                <li>
                    <a href="#%ec%b9%b4%ec%b9%b4%ec%98%a4-%ea%b3%b5%ec%9c%a0%ed%95%98%ea%b8%b0" aria-label="카카오 공유하기">카카오 공유하기</a><ul>
                        
                <li>
                    <a href="#%ec%b9%b4%ec%b9%b4%ec%98%a4%eb%94%94%eb%b2%a8%eb%a1%9c%ed%8d%bc%ec%97%90%ec%84%9c-%ed%82%a4-%eb%b0%9c%ea%b8%89" aria-label="카카오디벨로퍼에서 키 발급">카카오디벨로퍼에서 키 발급</a></li>
                <li>
                    <a href="#%ec%b9%b4%ec%b9%b4%ec%98%a4-sdk-%ec%84%a4%ec%b9%98" aria-label="카카오 SDK 설치">카카오 SDK 설치</a></li>
                <li>
                    <a href="#%ec%b9%b4%ec%b9%b4%ec%98%a4-%eb%a9%94%ec%84%b8%ec%a7%80-%ed%85%9c%ed%94%8c%eb%a6%bf-%eb%a7%8c%eb%93%a4%ea%b8%b0" aria-label="카카오 메세지 템플릿 만들기">카카오 메세지 템플릿 만들기</a></li>
                <li>
                    <a href="#%ec%bd%94%eb%93%9c-%ec%a0%81%ec%9a%a9%ed%95%98%ea%b8%b0" aria-label="코드 적용하기">코드 적용하기</a></li></ul>
                </li>
                <li>
                    <a href="#%eb%a7%88%ec%b9%98%eb%a9%b0" aria-label="마치며">마치며</a><ul>
                        
                <li>
                    <a href="#reference" aria-label="Reference">Reference</a>
                </li>
            </ul>
            </li>
            </ul>
        </div>
    </details>
</div>

  <div class="post-content"><h3 id="이전글-무한스크롤-리스트-구현">이전글) 무한스크롤 리스트 구현<a hidden class="anchor" aria-hidden="true" href="#이전글-무한스크롤-리스트-구현">#</a></h3>
<p><strong>CHECK</strong> 👉 <a href="/projects/큐찾사/infinitescroll">Next.js] InfiniteScroll로 무한 스크롤 구현하기</a></p>
<hr>
<br>
<h3 id="결과-미리보기">결과 미리보기<a hidden class="anchor" aria-hidden="true" href="#결과-미리보기">#</a></h3>
<p><code>중고큐</code> 키워드 검색시 <strong>최상단</strong> 노출에 성공 했습니다 👏👏 당연히 다른 키워드나 상품명 (브랜드, 카테고리 등) 전부 검색엔진에 잘 표시 됩니다.</p>
<figure class="align-center ">
    <img loading="lazy" src="../img/20.png#center"
         alt="구글 검색"/> <figcaption>
            <p>구글 검색</p>
        </figcaption>
</figure>

<figure class="align-center ">
    <img loading="lazy" src="../img/21.png#center"
         alt="네이버 검색"/> <figcaption>
            <p>네이버 검색</p>
        </figcaption>
</figure>

<hr>
<br>
<h3 id="들어가며">들어가며<a hidden class="anchor" aria-hidden="true" href="#들어가며">#</a></h3>
<p>위 글에서 다룬 내용중 <code>무한스크롤 + Modal</code>로 상품상세페이지를 빠르게 표시하는 방법이 있었습니다. API에서 리스트를 불러올때 리스트안에 상품상세페이지를 구성하는 모든 값들이 있었기 때문에 해당 인자를 Modal로 넘겨주면 새로운 Fetch가 필요 없으므로 로딩이 필요 없는 것이 중요한 포인트였습니다. 최상의 로딩속도 경험을 제공해주는데 비해 여러가지 문제점들이 있었습니다.</p>
<h4 id="문제점">문제점<a hidden class="anchor" aria-hidden="true" href="#문제점">#</a></h4>
<ol>
<li>모달은 SEO가 되지 않으므로 구글검색에서 상품이 표시되지 않는 문제 😵</li>
<li>모바일 기기에서 자연스럽게 <code>왼쪽으로 스와이프</code>로 뒤로가기시 모달이 닫히는 것 이 아니라 페이지 이동이 되어버림.</li>
<li>Google Analytics에서 모달을 페이지로 인식하지 못하는 문제.</li>
</ol>
<p>리스트에서 상세를 모달로 오픈하는 것은 속도나 경험 측면에서 유리한 점을 제공하기도 하지만 일반적인 상품상세페이지에서는 득보다 실이 더 많다고 판단되어 Next.js의 꽃이라고도 할 수 있는 Dynamic Route를 이용해 모달 방식이 아닌 상세페이지로 링크 이동되게 진행하였습니다. (리퀘스트 1번이 API서버에 영향을 주진 않겠지만, 유저의 속도 경험을 위해 고민했던 내용입니다.)</p>
<h4 id="궁금했던점">궁금했던점<a hidden class="anchor" aria-hidden="true" href="#궁금했던점">#</a></h4>
<p>나는 이미 리스트에서 상세페이지에 대한 내용을 전부 가지고 있는데 이동되면서 한번더 Fetch를 하게되면 손해가 발생하는 것이 아닐까? 라는 생각을 했습니다. 상세페이지로 이동하는 경우의수는 두가지입니다.</p>
<ol>
<li>리스트에서 상품을 클릭하여 상세페이지로 넘어가는 경우 (이때 불필요한 request 발생)</li>
<li>검색이나 링크로 직접 상세페이지로 접속하는 경우</li>
</ol>
<p>따라서 1번의 경우에 <code>&lt;Link&gt;</code>에 인자를 넣어서 넘겨주거나, <code>LocalStorage</code>에 인자를 저장해놓고 <code>[id].tsx</code>에서 인자가 있는지 없는지 여부를 확인하여 <strong>부분적 SSR</strong>를 이용할 수 있지 않을까? 라는 생각이 들었습니다.</p>
<p>해당 내용은 vercel/next.js에 Discussion을 통해 질문하였습니다. 상세한 답변과 내용은 링크를 확인해주세요 <strong>👉 Is there a trick on getServerSideProps to check if user types the URL directly<a href="https://github.com/vercel/next.js/discussions/45077#discussioncomment-4774680" target="_blank"> #45077</a></strong></p>
<h4 id="결론">결론<a hidden class="anchor" aria-hidden="true" href="#결론">#</a></h4>
<blockquote>
<p>리스트에서 이미 Fetch된 데이터를 <code>모달 or 상세페이지</code>로 인자로 넘겨주고 상세페이지에서는 인자가 있는지 없는지 여부를 확인해 부분적으로 <code>Fetch</code> 하는 것은 오히려 <strong>비효율적</strong>이다 !!! 특히 SEO가 안되므로 !!</p>
</blockquote>
<br>
<hr>
<br>
<h3 id="ssr-server-side-rendering">SSR (Server-Side-Rendering)<a hidden class="anchor" aria-hidden="true" href="#ssr-server-side-rendering">#</a></h3>
<p>SEO 최적화를 위해서는 <strong>🔥꼭 서버 사이드 렌더링을🔥</strong> 사용해야합니다. Next.js에서 페이지가 생성된 이후에 <code>Fetch된 Data는 인식하지 못하고 Undefined</code>로 표시됩니다. 따라서 <code>useEffect (조건문에 의한 Axios or Request)</code>로 불러올 경우에는 SEO가 적용되지 않습니다. <code>DynamicRoute</code>에서 SSR을 적용한 코드는 다음과 같습니다. <strong>단 <code>[id].tsx</code>처럼 다이나믹 라우트가 적용된 페이지에서는 별도의 사이트맵을 생성해주어야 합니다</strong></p>
<p><code>src &gt; pages &gt; findcue &gt; [id].tsx</code>


<div class="terminal space shadow">
  <div class="top">
    <div class="btns">
      <span class="circle red"></span>
      <span class="circle yellow"></span>
      <span class="circle green"></span>
    </div>
    <div class="title">
      src &gt; pages &gt; findcue &gt; [id].tsx
    </div>
  </div>
  <div class="terminalbody"><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-ts" data-lang="ts"><span class="line"><span class="cl"><span class="kr">export</span> <span class="k">default</span> <span class="kd">function</span> <span class="nx">CueDetail</span><span class="p">({</span> <span class="nx">cue</span> <span class="p">}</span><span class="o">:</span> <span class="p">{</span> <span class="nx">cue</span>: <span class="kt">Results</span> <span class="p">})</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="p">...</span>
</span></span><span class="line"><span class="cl">  <span class="k">return</span> <span class="p">(</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">Layout</span><span class="p">&gt;</span> <span class="c1">// &lt;-- 카카오 공유하기 sdk 초기화
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>
</span></span><span class="line"><span class="cl">      <span class="c1">// SEO
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>      <span class="p">{</span><span class="nx">cue</span> <span class="o">?</span> <span class="p">(</span>
</span></span><span class="line"><span class="cl">        <span class="p">&lt;</span><span class="nt">Seo</span>
</span></span><span class="line"><span class="cl">          <span class="na">title</span><span class="o">=</span><span class="p">{</span><span class="nx">seo_title</span><span class="p">(</span><span class="nx">cue</span><span class="p">)}</span>
</span></span><span class="line"><span class="cl">          <span class="na">description</span><span class="o">=</span><span class="p">{</span><span class="nx">seo_description</span><span class="p">(</span><span class="nx">cue</span><span class="p">)}</span>
</span></span><span class="line"><span class="cl">          <span class="na">image</span><span class="o">=</span><span class="p">{</span><span class="nx">seo_OG_images</span><span class="p">(</span><span class="nx">cue</span><span class="p">)}</span>
</span></span><span class="line"><span class="cl">        <span class="p">/&gt;</span>
</span></span><span class="line"><span class="cl">      <span class="p">)</span> <span class="o">:</span> <span class="p">(</span>
</span></span><span class="line"><span class="cl">        <span class="p">&lt;</span><span class="nt">Seo</span> <span class="p">/&gt;</span>
</span></span><span class="line"><span class="cl">      <span class="p">)}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">      <span class="p">&lt;</span><span class="nt">main</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="p">&lt;</span><span class="nt">section</span> <span class="na">className</span><span class="o">=</span><span class="s">&#34;bg-white&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">          <span class="p">&lt;</span><span class="nt">div</span> <span class="na">className</span><span class="o">=</span><span class="s">&#34;layout&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="p">&lt;</span><span class="nt">div</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">              <span class="p">{</span><span class="cm">/* 큐 영역 보여지는 구간 */</span><span class="p">}</span>
</span></span><span class="line"><span class="cl">              <span class="p">{</span><span class="nx">cue</span> <span class="o">&amp;&amp;</span> <span class="p">&lt;</span><span class="nt">div</span> <span class="na">data</span><span class="err">-</span><span class="na">aos</span><span class="o">=</span><span class="s">&#34;fade-up&#34;</span><span class="p">&gt;...&lt;/</span><span class="nt">div</span><span class="p">&gt;}</span>
</span></span><span class="line"><span class="cl">            <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">          <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="p">&lt;/</span><span class="nt">section</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">      <span class="p">&lt;/</span><span class="nt">main</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;/</span><span class="nt">Layout</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// SERVER SIDE RENDERING
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kr">export</span> <span class="kr">const</span> <span class="nx">getServerSideProps</span>: <span class="kt">GetServerSideProps</span> <span class="o">=</span> <span class="kr">async</span> <span class="p">(</span><span class="nx">context</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="kr">const</span> <span class="nx">fetchUrl</span> <span class="o">=</span> <span class="sb">`</span><span class="si">${</span><span class="nx">apiUrl</span><span class="si">}</span><span class="sb">/.../v3/?id=</span><span class="si">${</span><span class="nx">context</span><span class="p">.</span><span class="nx">params</span><span class="o">?</span><span class="p">.</span><span class="nx">id</span><span class="si">}</span><span class="sb">`</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="kr">const</span> <span class="nx">res</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">axios</span><span class="p">.</span><span class="kr">get</span><span class="p">(</span><span class="nx">fetchUrl</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">  <span class="kr">const</span> <span class="nx">cue</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">res</span><span class="p">.</span><span class="nx">data</span><span class="p">.</span><span class="nx">results</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="c1">// 못불러오면 404 페이지로
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">cue</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="nx">notFound</span>: <span class="kt">true</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="p">};</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="k">return</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">props</span><span class="o">:</span> <span class="p">{</span> <span class="nx">cue</span> <span class="p">},</span>
</span></span><span class="line"><span class="cl">  <span class="p">};</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span></code></pre></td></tr></table>
</div>
</div></div>
</div>
<br />
</p>
<p>찾으려는 id가 없을 경우에는 <code>notFound = true</code>를 리턴해야 404 페이지로 넘어갑니다. API에 따라서 catch문을 사용해야할 수 도 있습니다. 해당 코드에서는 정상적으로 리턴된 데이터 값을 <code>cue</code>로 인자를 전달하였습니다.</p>
<hr>
<br>
<h3 id="seo">SEO<a hidden class="anchor" aria-hidden="true" href="#seo">#</a></h3>
<h4 id="공통-컴포넌트-만들기">공통 컴포넌트 만들기<a hidden class="anchor" aria-hidden="true" href="#공통-컴포넌트-만들기">#</a></h4>
<p>SEO 최적화를 위해 모든 페이지에서 SEO를 불러드릴 컴포넌트를 만듭니다. 해당 컴포넌트는 <a href="https://github.com/theodorusclarence/ts-nextjs-tailwind-starter/blob/main/src/components/Seo.tsx" target="_blank">@theodorusclarence/ts-nextjs-tailwind-starter</a> 를 사용하였습니다.</p>
<p><code>src &gt; components &gt; Seo.tsx</code>


<div class="terminal space shadow">
  <div class="top">
    <div class="btns">
      <span class="circle red"></span>
      <span class="circle yellow"></span>
      <span class="circle green"></span>
    </div>
    <div class="title">
      src &gt; components &gt; Seo.tsx
    </div>
  </div>
  <div class="terminalbody"><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">  1
</span><span class="lnt">  2
</span><span class="lnt">  3
</span><span class="lnt">  4
</span><span class="lnt">  5
</span><span class="lnt">  6
</span><span class="lnt">  7
</span><span class="lnt">  8
</span><span class="lnt">  9
</span><span class="lnt"> 10
</span><span class="lnt"> 11
</span><span class="lnt"> 12
</span><span class="lnt"> 13
</span><span class="lnt"> 14
</span><span class="lnt"> 15
</span><span class="lnt"> 16
</span><span class="lnt"> 17
</span><span class="lnt"> 18
</span><span class="lnt"> 19
</span><span class="lnt"> 20
</span><span class="lnt"> 21
</span><span class="lnt"> 22
</span><span class="lnt"> 23
</span><span class="lnt"> 24
</span><span class="lnt"> 25
</span><span class="lnt"> 26
</span><span class="lnt"> 27
</span><span class="lnt"> 28
</span><span class="lnt"> 29
</span><span class="lnt"> 30
</span><span class="lnt"> 31
</span><span class="lnt"> 32
</span><span class="lnt"> 33
</span><span class="lnt"> 34
</span><span class="lnt"> 35
</span><span class="lnt"> 36
</span><span class="lnt"> 37
</span><span class="lnt"> 38
</span><span class="lnt"> 39
</span><span class="lnt"> 40
</span><span class="lnt"> 41
</span><span class="lnt"> 42
</span><span class="lnt"> 43
</span><span class="lnt"> 44
</span><span class="lnt"> 45
</span><span class="lnt"> 46
</span><span class="lnt"> 47
</span><span class="lnt"> 48
</span><span class="lnt"> 49
</span><span class="lnt"> 50
</span><span class="lnt"> 51
</span><span class="lnt"> 52
</span><span class="lnt"> 53
</span><span class="lnt"> 54
</span><span class="lnt"> 55
</span><span class="lnt"> 56
</span><span class="lnt"> 57
</span><span class="lnt"> 58
</span><span class="lnt"> 59
</span><span class="lnt"> 60
</span><span class="lnt"> 61
</span><span class="lnt"> 62
</span><span class="lnt"> 63
</span><span class="lnt"> 64
</span><span class="lnt"> 65
</span><span class="lnt"> 66
</span><span class="lnt"> 67
</span><span class="lnt"> 68
</span><span class="lnt"> 69
</span><span class="lnt"> 70
</span><span class="lnt"> 71
</span><span class="lnt"> 72
</span><span class="lnt"> 73
</span><span class="lnt"> 74
</span><span class="lnt"> 75
</span><span class="lnt"> 76
</span><span class="lnt"> 77
</span><span class="lnt"> 78
</span><span class="lnt"> 79
</span><span class="lnt"> 80
</span><span class="lnt"> 81
</span><span class="lnt"> 82
</span><span class="lnt"> 83
</span><span class="lnt"> 84
</span><span class="lnt"> 85
</span><span class="lnt"> 86
</span><span class="lnt"> 87
</span><span class="lnt"> 88
</span><span class="lnt"> 89
</span><span class="lnt"> 90
</span><span class="lnt"> 91
</span><span class="lnt"> 92
</span><span class="lnt"> 93
</span><span class="lnt"> 94
</span><span class="lnt"> 95
</span><span class="lnt"> 96
</span><span class="lnt"> 97
</span><span class="lnt"> 98
</span><span class="lnt"> 99
</span><span class="lnt">100
</span><span class="lnt">101
</span><span class="lnt">102
</span><span class="lnt">103
</span><span class="lnt">104
</span><span class="lnt">105
</span><span class="lnt">106
</span><span class="lnt">107
</span><span class="lnt">108
</span><span class="lnt">109
</span><span class="lnt">110
</span><span class="lnt">111
</span><span class="lnt">112
</span><span class="lnt">113
</span><span class="lnt">114
</span><span class="lnt">115
</span><span class="lnt">116
</span><span class="lnt">117
</span><span class="lnt">118
</span><span class="lnt">119
</span><span class="lnt">120
</span><span class="lnt">121
</span><span class="lnt">122
</span><span class="lnt">123
</span><span class="lnt">124
</span><span class="lnt">125
</span><span class="lnt">126
</span><span class="lnt">127
</span><span class="lnt">128
</span><span class="lnt">129
</span><span class="lnt">130
</span><span class="lnt">131
</span><span class="lnt">132
</span><span class="lnt">133
</span><span class="lnt">134
</span><span class="lnt">135
</span><span class="lnt">136
</span><span class="lnt">137
</span><span class="lnt">138
</span><span class="lnt">139
</span><span class="lnt">140
</span><span class="lnt">141
</span><span class="lnt">142
</span><span class="lnt">143
</span><span class="lnt">144
</span><span class="lnt">145
</span><span class="lnt">146
</span><span class="lnt">147
</span><span class="lnt">148
</span><span class="lnt">149
</span><span class="lnt">150
</span><span class="lnt">151
</span><span class="lnt">152
</span><span class="lnt">153
</span><span class="lnt">154
</span><span class="lnt">155
</span><span class="lnt">156
</span><span class="lnt">157
</span><span class="lnt">158
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-ts" data-lang="ts"><span class="line"><span class="cl"><span class="kr">import</span> <span class="nx">Head</span> <span class="kr">from</span> <span class="s2">&#34;next/head&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="kr">import</span> <span class="p">{</span> <span class="nx">useRouter</span> <span class="p">}</span> <span class="kr">from</span> <span class="s2">&#34;next/router&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kr">import</span> <span class="p">{</span> <span class="nx">openGraph</span> <span class="p">}</span> <span class="kr">from</span> <span class="s2">&#34;@/lib/helper&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">defaultMeta</span> <span class="o">=</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">title</span><span class="o">:</span> <span class="s2">&#34;큐찾사 | 중고큐 거래는 큐찾사&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="nx">siteName</span><span class="o">:</span> <span class="s2">&#34;큐찾사 | 중고큐 거래는 큐찾사&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="nx">description</span><span class="o">:</span>
</span></span><span class="line"><span class="cl">    <span class="s2">&#34;1,000만 당구인을 위해 (주)김치빌리아드가 제작 운영하는 안전한 중고큐 거래 어플리케이션&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="nx">url</span><span class="o">:</span> <span class="s2">&#34;https://www.cue8949.com&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="kr">type</span><span class="o">:</span> <span class="s2">&#34;website&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="nx">robots</span><span class="o">:</span> <span class="s2">&#34;follow, index&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="nx">image</span><span class="o">:</span> <span class="s2">&#34;https://www.cue8949.com/....../default.png&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kr">type</span> <span class="nx">SeoProps</span> <span class="o">=</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">date?</span>: <span class="kt">string</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="nx">templateTitle?</span>: <span class="kt">string</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span> <span class="o">&amp;</span> <span class="nx">Partial</span><span class="p">&lt;</span><span class="nt">typeof</span> <span class="na">defaultMeta</span><span class="p">&gt;;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kr">export</span> <span class="k">default</span> <span class="kd">function</span> <span class="nx">Seo</span><span class="p">(</span><span class="nx">props</span>: <span class="kt">SeoProps</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="kr">const</span> <span class="nx">router</span> <span class="o">=</span> <span class="nx">useRouter</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">  <span class="kr">const</span> <span class="nx">meta</span> <span class="o">=</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="p">...</span><span class="nx">defaultMeta</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="p">...</span><span class="nx">props</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="p">};</span>
</span></span><span class="line"><span class="cl">  <span class="nx">meta</span><span class="p">[</span><span class="s2">&#34;title&#34;</span><span class="p">]</span> <span class="o">=</span> <span class="nx">props</span><span class="p">.</span><span class="nx">templateTitle</span>
</span></span><span class="line"><span class="cl">    <span class="o">?</span> <span class="sb">`</span><span class="si">${</span><span class="nx">props</span><span class="p">.</span><span class="nx">templateTitle</span><span class="si">}</span><span class="sb"> | </span><span class="si">${</span><span class="nx">meta</span><span class="p">.</span><span class="nx">siteName</span><span class="si">}</span><span class="sb">`</span>
</span></span><span class="line"><span class="cl">    <span class="o">:</span> <span class="nx">meta</span><span class="p">.</span><span class="nx">title</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="k">return</span> <span class="p">(</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">Head</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">      <span class="p">&lt;</span><span class="nt">title</span><span class="p">&gt;{</span><span class="nx">meta</span><span class="p">.</span><span class="nx">title</span><span class="p">}&lt;/</span><span class="nt">title</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">      <span class="p">&lt;</span><span class="nt">meta</span> <span class="na">name</span><span class="o">=</span><span class="s">&#34;robots&#34;</span> <span class="na">content</span><span class="o">=</span><span class="p">{</span><span class="nx">meta</span><span class="p">.</span><span class="nx">robots</span><span class="p">}</span> <span class="p">/&gt;</span>
</span></span><span class="line"><span class="cl">      <span class="p">&lt;</span><span class="nt">meta</span> <span class="na">content</span><span class="o">=</span><span class="p">{</span><span class="nx">meta</span><span class="p">.</span><span class="nx">description</span><span class="p">}</span> <span class="na">name</span><span class="o">=</span><span class="s">&#34;description&#34;</span> <span class="p">/&gt;</span>
</span></span><span class="line"><span class="cl">      <span class="p">&lt;</span><span class="nt">meta</span> <span class="na">property</span><span class="o">=</span><span class="s">&#34;og:url&#34;</span> <span class="na">content</span><span class="o">=</span><span class="p">{</span><span class="sb">`</span><span class="si">${</span><span class="nx">meta</span><span class="o">?</span><span class="p">.</span><span class="nx">url</span><span class="si">}${</span><span class="nx">router</span><span class="p">.</span><span class="nx">asPath</span><span class="si">}</span><span class="sb">`</span><span class="p">}</span> <span class="p">/&gt;</span>
</span></span><span class="line"><span class="cl">      <span class="p">&lt;</span><span class="nt">link</span> <span class="na">rel</span><span class="o">=</span><span class="s">&#34;canonical&#34;</span> <span class="na">href</span><span class="o">=</span><span class="p">{</span><span class="sb">`</span><span class="si">${</span><span class="nx">meta</span><span class="o">?</span><span class="p">.</span><span class="nx">url</span><span class="si">}${</span><span class="nx">router</span><span class="p">.</span><span class="nx">asPath</span><span class="si">}</span><span class="sb">`</span><span class="p">}</span> <span class="p">/&gt;</span>
</span></span><span class="line"><span class="cl">      <span class="p">{</span><span class="cm">/* Open Graph */</span><span class="p">}</span>
</span></span><span class="line"><span class="cl">      <span class="p">&lt;</span><span class="nt">meta</span> <span class="na">property</span><span class="o">=</span><span class="s">&#34;og:type&#34;</span> <span class="na">content</span><span class="o">=</span><span class="p">{</span><span class="nx">meta</span><span class="p">.</span><span class="kr">type</span><span class="p">}</span> <span class="p">/&gt;</span>
</span></span><span class="line"><span class="cl">      <span class="p">&lt;</span><span class="nt">meta</span> <span class="na">property</span><span class="o">=</span><span class="s">&#34;og:site_name&#34;</span> <span class="na">content</span><span class="o">=</span><span class="p">{</span><span class="nx">meta</span><span class="p">.</span><span class="nx">siteName</span><span class="p">}</span> <span class="p">/&gt;</span>
</span></span><span class="line"><span class="cl">      <span class="p">&lt;</span><span class="nt">meta</span> <span class="na">property</span><span class="o">=</span><span class="s">&#34;og:description&#34;</span> <span class="na">content</span><span class="o">=</span><span class="p">{</span><span class="nx">meta</span><span class="p">.</span><span class="nx">description</span><span class="p">}</span> <span class="p">/&gt;</span>
</span></span><span class="line"><span class="cl">      <span class="p">&lt;</span><span class="nt">meta</span> <span class="na">property</span><span class="o">=</span><span class="s">&#34;og:title&#34;</span> <span class="na">content</span><span class="o">=</span><span class="p">{</span><span class="nx">meta</span><span class="p">.</span><span class="nx">title</span><span class="p">}</span> <span class="p">/&gt;</span>
</span></span><span class="line"><span class="cl">      <span class="p">&lt;</span><span class="nt">meta</span> <span class="na">name</span><span class="o">=</span><span class="s">&#34;image&#34;</span> <span class="na">property</span><span class="o">=</span><span class="s">&#34;og:image&#34;</span> <span class="na">content</span><span class="o">=</span><span class="p">{</span><span class="nx">meta</span><span class="p">.</span><span class="nx">image</span><span class="p">}</span> <span class="p">/&gt;</span>
</span></span><span class="line"><span class="cl">      <span class="p">{</span><span class="cm">/* Twitter */</span><span class="p">}</span>
</span></span><span class="line"><span class="cl">      <span class="p">{</span><span class="cm">/* &lt;meta name=&#39;twitter:card&#39; content=&#39;summary_large_image&#39; /&gt;
</span></span></span><span class="line"><span class="cl"><span class="cm">      &lt;meta name=&#39;twitter:site&#39; content=&#39;@th_clarence&#39; /&gt;
</span></span></span><span class="line"><span class="cl"><span class="cm">      &lt;meta name=&#39;twitter:title&#39; content={meta.title} /&gt;
</span></span></span><span class="line"><span class="cl"><span class="cm">      &lt;meta name=&#39;twitter:description&#39; content={meta.description} /&gt;
</span></span></span><span class="line"><span class="cl"><span class="cm">      &lt;meta name=&#39;twitter:image&#39; content={meta.image} /&gt; */</span><span class="p">}</span>
</span></span><span class="line"><span class="cl">      <span class="p">{</span><span class="nx">meta</span><span class="p">.</span><span class="nx">date</span> <span class="o">&amp;&amp;</span> <span class="p">(</span>
</span></span><span class="line"><span class="cl">        <span class="p">&lt;&gt;</span>
</span></span><span class="line"><span class="cl">          <span class="p">&lt;</span><span class="nt">meta</span> <span class="na">property</span><span class="o">=</span><span class="s">&#34;article:published_time&#34;</span> <span class="na">content</span><span class="o">=</span><span class="p">{</span><span class="nx">meta</span><span class="p">.</span><span class="nx">date</span><span class="p">}</span> <span class="p">/&gt;</span>
</span></span><span class="line"><span class="cl">          <span class="p">&lt;</span><span class="nt">meta</span>
</span></span><span class="line"><span class="cl">            <span class="na">name</span><span class="o">=</span><span class="s">&#34;publish_date&#34;</span>
</span></span><span class="line"><span class="cl">            <span class="na">property</span><span class="o">=</span><span class="s">&#34;og:publish_date&#34;</span>
</span></span><span class="line"><span class="cl">            <span class="na">content</span><span class="o">=</span><span class="p">{</span><span class="nx">meta</span><span class="p">.</span><span class="nx">date</span><span class="p">}</span>
</span></span><span class="line"><span class="cl">          <span class="p">/&gt;</span>
</span></span><span class="line"><span class="cl">          <span class="p">&lt;</span><span class="nt">meta</span> <span class="na">name</span><span class="o">=</span><span class="s">&#34;author&#34;</span> <span class="na">property</span><span class="o">=</span><span class="s">&#34;article:author&#34;</span> <span class="na">content</span><span class="o">=</span><span class="s">&#34;Cuechatsa&#34;</span> <span class="p">/&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="p">&lt;/&gt;</span>
</span></span><span class="line"><span class="cl">      <span class="p">)}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">      <span class="p">{</span><span class="cm">/* Favicons */</span><span class="p">}</span>
</span></span><span class="line"><span class="cl">      <span class="p">{</span><span class="nx">favicons</span><span class="p">.</span><span class="nx">map</span><span class="p">((</span><span class="nx">linkProps</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">(</span>
</span></span><span class="line"><span class="cl">        <span class="p">&lt;</span><span class="nt">link</span> <span class="na">key</span><span class="o">=</span><span class="p">{</span><span class="nx">linkProps</span><span class="p">.</span><span class="nx">href</span><span class="p">}</span> <span class="p">{</span><span class="na">...linkProps</span><span class="p">}</span> <span class="p">/&gt;</span>
</span></span><span class="line"><span class="cl">      <span class="p">))}</span>
</span></span><span class="line"><span class="cl">      <span class="p">&lt;</span><span class="nt">meta</span> <span class="na">name</span><span class="o">=</span><span class="s">&#34;msapplication-TileColor&#34;</span> <span class="na">content</span><span class="o">=</span><span class="s">&#34;#ffffff&#34;</span> <span class="p">/&gt;</span>
</span></span><span class="line"><span class="cl">      <span class="p">&lt;</span><span class="nt">meta</span>
</span></span><span class="line"><span class="cl">        <span class="na">name</span><span class="o">=</span><span class="s">&#34;msapplication-TileImage&#34;</span>
</span></span><span class="line"><span class="cl">        <span class="na">content</span><span class="o">=</span><span class="s">&#34;/favicon/ms-icon-144x144.png&#34;</span>
</span></span><span class="line"><span class="cl">      <span class="p">/&gt;</span>
</span></span><span class="line"><span class="cl">      <span class="p">&lt;</span><span class="nt">meta</span> <span class="na">name</span><span class="o">=</span><span class="s">&#34;theme-color&#34;</span> <span class="na">content</span><span class="o">=</span><span class="s">&#34;#ffffff&#34;</span> <span class="p">/&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;/</span><span class="nt">Head</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kr">type</span> <span class="nx">Favicons</span> <span class="o">=</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">rel</span>: <span class="kt">string</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="nx">href</span>: <span class="kt">string</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="nx">sizes?</span>: <span class="kt">string</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="kr">type</span><span class="o">?:</span> <span class="kt">string</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">favicons</span>: <span class="kt">Array</span><span class="p">&lt;</span><span class="nt">Favicons</span><span class="p">&gt;</span> <span class="o">=</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">  <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">rel</span><span class="o">:</span> <span class="s2">&#34;apple-touch-icon&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nx">sizes</span><span class="o">:</span> <span class="s2">&#34;57x57&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nx">href</span><span class="o">:</span> <span class="s2">&#34;/favicon/apple-icon-57x57.png&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="p">},</span>
</span></span><span class="line"><span class="cl">  <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">rel</span><span class="o">:</span> <span class="s2">&#34;apple-touch-icon&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nx">sizes</span><span class="o">:</span> <span class="s2">&#34;60x60&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nx">href</span><span class="o">:</span> <span class="s2">&#34;/favicon/apple-icon-60x60.png&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="p">},</span>
</span></span><span class="line"><span class="cl">  <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">rel</span><span class="o">:</span> <span class="s2">&#34;apple-touch-icon&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nx">sizes</span><span class="o">:</span> <span class="s2">&#34;72x72&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nx">href</span><span class="o">:</span> <span class="s2">&#34;/favicon/apple-icon-72x72.png&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="p">},</span>
</span></span><span class="line"><span class="cl">  <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">rel</span><span class="o">:</span> <span class="s2">&#34;apple-touch-icon&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nx">sizes</span><span class="o">:</span> <span class="s2">&#34;76x76&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nx">href</span><span class="o">:</span> <span class="s2">&#34;/favicon/apple-icon-76x76.png&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="p">},</span>
</span></span><span class="line"><span class="cl">  <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">rel</span><span class="o">:</span> <span class="s2">&#34;apple-touch-icon&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nx">sizes</span><span class="o">:</span> <span class="s2">&#34;114x114&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nx">href</span><span class="o">:</span> <span class="s2">&#34;/favicon/apple-icon-114x114.png&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="p">},</span>
</span></span><span class="line"><span class="cl">  <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">rel</span><span class="o">:</span> <span class="s2">&#34;apple-touch-icon&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nx">sizes</span><span class="o">:</span> <span class="s2">&#34;120x120&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nx">href</span><span class="o">:</span> <span class="s2">&#34;/favicon/apple-icon-120x120.png&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="p">},</span>
</span></span><span class="line"><span class="cl">  <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">rel</span><span class="o">:</span> <span class="s2">&#34;apple-touch-icon&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nx">sizes</span><span class="o">:</span> <span class="s2">&#34;144x144&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nx">href</span><span class="o">:</span> <span class="s2">&#34;/favicon/apple-icon-144x144.png&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="p">},</span>
</span></span><span class="line"><span class="cl">  <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">rel</span><span class="o">:</span> <span class="s2">&#34;apple-touch-icon&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nx">sizes</span><span class="o">:</span> <span class="s2">&#34;152x152&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nx">href</span><span class="o">:</span> <span class="s2">&#34;/favicon/apple-icon-152x152.png&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="p">},</span>
</span></span><span class="line"><span class="cl">  <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">rel</span><span class="o">:</span> <span class="s2">&#34;apple-touch-icon&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nx">sizes</span><span class="o">:</span> <span class="s2">&#34;180x180&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nx">href</span><span class="o">:</span> <span class="s2">&#34;/favicon/apple-icon-180x180.png&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="p">},</span>
</span></span><span class="line"><span class="cl">  <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">rel</span><span class="o">:</span> <span class="s2">&#34;icon&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="kr">type</span><span class="o">:</span> <span class="s2">&#34;image/png&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nx">sizes</span><span class="o">:</span> <span class="s2">&#34;192x192&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nx">href</span><span class="o">:</span> <span class="s2">&#34;/favicon/android-icon-192x192.png&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="p">},</span>
</span></span><span class="line"><span class="cl">  <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">rel</span><span class="o">:</span> <span class="s2">&#34;icon&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="kr">type</span><span class="o">:</span> <span class="s2">&#34;image/png&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nx">sizes</span><span class="o">:</span> <span class="s2">&#34;32x32&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nx">href</span><span class="o">:</span> <span class="s2">&#34;/favicon/favicon-32x32.png&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="p">},</span>
</span></span><span class="line"><span class="cl">  <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">rel</span><span class="o">:</span> <span class="s2">&#34;icon&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="kr">type</span><span class="o">:</span> <span class="s2">&#34;image/png&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nx">sizes</span><span class="o">:</span> <span class="s2">&#34;96x96&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nx">href</span><span class="o">:</span> <span class="s2">&#34;/favicon/favicon-96x96.png&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="p">},</span>
</span></span><span class="line"><span class="cl">  <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">rel</span><span class="o">:</span> <span class="s2">&#34;icon&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="kr">type</span><span class="o">:</span> <span class="s2">&#34;image/png&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nx">sizes</span><span class="o">:</span> <span class="s2">&#34;16x16&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nx">href</span><span class="o">:</span> <span class="s2">&#34;/favicon/favicon-16x16.png&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="p">},</span>
</span></span><span class="line"><span class="cl">  <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">rel</span><span class="o">:</span> <span class="s2">&#34;manifest&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nx">href</span><span class="o">:</span> <span class="s2">&#34;/favicon/manifest.json&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="p">},</span>
</span></span><span class="line"><span class="cl"><span class="p">];</span>
</span></span></code></pre></td></tr></table>
</div>
</div></div>
</div>
<br />
</p>
<p>어느 페이지에서든 SEO 컴포넌트를 불러올 때 Override가 필요한 인자값들을 입력하면 됩니다.</p>
<p><code>src/pages/findcue/[id].tsx</code>


<div class="terminal space shadow">
  <div class="top">
    <div class="btns">
      <span class="circle red"></span>
      <span class="circle yellow"></span>
      <span class="circle green"></span>
    </div>
    <div class="title">
      src &gt; components &gt; src/pages/findcue/[id].tsx
    </div>
  </div>
  <div class="terminalbody"><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-ts" data-lang="ts"><span class="line"><span class="cl"><span class="kr">export</span> <span class="k">default</span> <span class="kd">function</span> <span class="nx">CueDetail</span><span class="p">({</span> <span class="nx">cue</span> <span class="p">}</span><span class="o">:</span> <span class="p">{</span> <span class="nx">cue</span>: <span class="kt">Results</span> <span class="p">})</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="k">return</span> <span class="p">(</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">Layout</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">      <span class="p">{</span><span class="cm">/* &lt;Seo templateTitle=&#39;Home&#39; /&gt; */</span><span class="p">}</span>
</span></span><span class="line"><span class="cl">      <span class="p">{</span><span class="nx">cue</span> <span class="o">?</span> <span class="p">(</span>
</span></span><span class="line"><span class="cl">        <span class="p">&lt;</span><span class="nt">Seo</span>
</span></span><span class="line"><span class="cl">          <span class="na">title</span><span class="o">=</span><span class="p">{</span><span class="nx">seo_title</span><span class="p">(</span><span class="nx">cue</span><span class="p">)}</span>
</span></span><span class="line"><span class="cl">          <span class="na">description</span><span class="o">=</span><span class="p">{</span><span class="nx">seo_description</span><span class="p">(</span><span class="nx">cue</span><span class="p">)}</span>
</span></span><span class="line"><span class="cl">          <span class="na">image</span><span class="o">=</span><span class="p">{</span><span class="nx">cue</span><span class="p">.</span><span class="nx">images</span><span class="p">.</span><span class="nx">length</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="o">?</span> <span class="nx">cue</span><span class="p">.</span><span class="nx">images</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">image</span> : <span class="kt">DefaultOGImage</span><span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="p">/&gt;</span>
</span></span><span class="line"><span class="cl">      <span class="p">)</span> <span class="o">:</span> <span class="p">(</span>
</span></span><span class="line"><span class="cl">        <span class="p">&lt;</span><span class="nt">Seo</span> <span class="p">/&gt;</span>
</span></span><span class="line"><span class="cl">      <span class="p">)}</span>
</span></span><span class="line"><span class="cl">      <span class="p">&lt;</span><span class="nt">section</span><span class="p">&gt;...&lt;/</span><span class="nt">section</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;/</span><span class="nt">Layout</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div></div>
</div>
<br />
</p>
<h4 id="파비콘-만들기">파비콘 만들기<a hidden class="anchor" aria-hidden="true" href="#파비콘-만들기">#</a></h4>
<p>파비콘의 경우 <a href="https://www.favicon-generator.org/" target="_blank"><a href="https://www.favicon-generator.org/">https://www.favicon-generator.org/</a></a> 여기서 기기별, 사이즈별 한번에 제작할 수 있습니다. 해당 사이트에서 제작한 파비콘을 통째로 <code>/public/favicon</code> 경로에 넣어주었습니다.</p>
<figure class="align-center ">
    <img loading="lazy" src="../img/7.png#center"
         alt="다운로드하면 사이즈별로 알아서 제작됩니다."/> <figcaption>
            <p>다운로드하면 사이즈별로 알아서 제작됩니다.</p>
        </figcaption>
</figure>

<h4 id="opengraph-테스트">OpenGraph 테스트<a hidden class="anchor" aria-hidden="true" href="#opengraph-테스트">#</a></h4>
<p>카카오톡 OG 디버깅 : <a href="https://developers.kakao.com/tool/debugger/sharing" target="_blank"><a href="https://developers.kakao.com/tool/debugger/sharing">https://developers.kakao.com/tool/debugger/sharing</a></a><br>배포된 서버만 테스트가 가능합니다.
<figure class="align-center ">
    <img loading="lazy" src="../img/6.png#center"
         alt="카카오 공화국에선 OG는 필수"/> <figcaption>
            <p>카카오 공화국에선 OG는 필수</p>
        </figcaption>
</figure>

<br>
여러 플랫폼 OG 테스트 : <a href="https://www.opengraph.xyz/" target="_blank"><a href="https://www.opengraph.xyz/">https://www.opengraph.xyz/</a></a><br><code>localhost</code>로는 테스트가 불가하므로 포트포워딩을 통해 ip로 접근해야합니다.</p>
<figure class="align-center ">
    <img loading="lazy" src="../img/8.png#center"
         alt="사이트에서 수정해서 어떻게 보여지는지 볼 수 있다"/> <figcaption>
            <p>사이트에서 수정해서 어떻게 보여지는지 볼 수 있다</p>
        </figcaption>
</figure>

<h4 id="결과">결과<a hidden class="anchor" aria-hidden="true" href="#결과">#</a></h4>
<p>위 컴포넌트만 잘 활용하신다면 Lighthouse SEO 테스트 100점은 쉽게 가져가실 수 있습니다. 나머지 점수도 100점을 향해 고도화가 되어야 겠습니다.
<figure class="align-center ">
    <img loading="lazy" src="../img/9.png#center"
         alt="100점!!"/> <figcaption>
            <p>100점!!</p>
        </figcaption>
</figure>
</p>
<hr>
<br>
<h3 id="next-sitemap-네이버-구글이-ssr을-인식하게하자">next-sitemap (네이버, 구글이 SSR을 인식하게하자)<a hidden class="anchor" aria-hidden="true" href="#next-sitemap-네이버-구글이-ssr을-인식하게하자">#</a></h3>
<p>Next는 [id].tsx 와 같은 다이나믹 라우팅에 대해서 사이트맵을 생성하지 않습니다. 당연하게도 id가 <code>0</code>부터 <code>100</code>까지인지 <code>aaa</code>부터 <code>zzzzz</code>까지 인지 모르기 때문이죠. 따라서 운영하는 사이트에서 어떤 글들이 있는지 상품들이 있는지 직접 추가해야합니다.</p>
<p>하지만 !! <strong>여기서 핵심은 새로 게시글이나 상품이 올라왔을때 <code>자동으로</code> 해당 페이지를 사이트맵에 포함</strong>시켜야합니다. 정확히 말하자면 서치 로봇이 크롤링을 돌때마다 해당 페이지를 사이트맵에 포함시켜줘야합니다. 그러기 위해서는 사이트맵 또한 다이나믹하게 API로 부터 추가된 내용을 받아서 변경되어야합니다.<a href="https://github.com/iamvishnusankar/next-sitemap#generating-dynamicserver-side-sitemaps" target="_blank">next-sitemap#generating-dynamicserver-side-sitemaps</a>를 참고하여 제작하였습니다.</p>
<br/>
<h4 id="어떤-글들이-있는지-어떤-상품들이-있는지-리턴해주는-api">어떤 글들이 있는지, 어떤 상품들이 있는지 리턴해주는 API<a hidden class="anchor" aria-hidden="true" href="#어떤-글들이-있는지-어떤-상품들이-있는지-리턴해주는-api">#</a></h4>
<p>예를들어 내큐찾기의 상품의 경우 <code>/findcue/[상품번호]</code> url을 가지고 있는데 어떤 상품번호들이 유저에게 보여져도 되는지, 구글 네이버가 수집해도 좋을지를 Robots.txt를 통해 알려주어야 합니다. 그래서 조건에 맞는 상품번호들과 최초 생성일을 알려주는 간단한 API를 제작해야합니다. Django로 제작하였습니다.</p>


<div class="terminal space shadow">
  <div class="top">
    <div class="btns">
      <span class="circle red"></span>
      <span class="circle yellow"></span>
      <span class="circle green"></span>
    </div>
    <div class="title">
      views.py
    </div>
  </div>
  <div class="terminalbody"><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">SiteModelModelViewWeb_V3</span><span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ModelViewSet</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">    <span class="s2">&#34;&#34;&#34;
</span></span></span><span class="line"><span class="cl"><span class="s2">        네이버, 구글 서치어드바이저에 사이트맵 제출 위해서 필요한 도큐멘트 ID만 리턴해준다.
</span></span></span><span class="line"><span class="cl"><span class="s2">    &#34;&#34;&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="n">queryset</span> <span class="o">=</span> <span class="n">ContentModel</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">exclude</span><span class="p">(</span><span class="n">Q</span><span class="p">(</span><span class="s2">&#34;쿼리셋 조건&#34;</span><span class="p">))</span><span class="o">.</span><span class="n">all</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">    <span class="n">permission_classes</span> <span class="o">=</span> <span class="p">(</span><span class="s2">&#34;권한&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="n">serializer_class</span> <span class="o">=</span> <span class="n">ContentWebSitemapSerializer</span>
</span></span><span class="line"><span class="cl">    <span class="n">pagination_class</span> <span class="o">=</span> <span class="n">LimitOffsetPagination</span>
</span></span><span class="line"><span class="cl">    <span class="n">filter_backends</span> <span class="o">=</span> <span class="p">(</span><span class="n">DjangoFilterBackend</span><span class="p">,</span> <span class="n">filters</span><span class="o">.</span><span class="n">OrderingFilter</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="n">ordering_fields</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;document_id&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="n">ordering</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;-document_id&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="k">def</span> <span class="nf">list</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span><span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">        <span class="n">data</span> <span class="o">=</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">list</span><span class="p">(</span><span class="n">request</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span><span class="o">.</span><span class="n">data</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">data</span><span class="p">)</span>
</span></span></code></pre></td></tr></table>
</div>
</div></div>
</div>
<br />



<div class="terminal space shadow">
  <div class="top">
    <div class="btns">
      <span class="circle red"></span>
      <span class="circle yellow"></span>
      <span class="circle green"></span>
    </div>
    <div class="title">
      serializer.py
    </div>
  </div>
  <div class="terminalbody"><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">ContentWebSitemapSerializer</span><span class="p">(</span><span class="n">serializers</span><span class="o">.</span><span class="n">ModelSerializer</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">    <span class="k">class</span> <span class="nc">Meta</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">        <span class="n">model</span> <span class="o">=</span> <span class="n">ContentModel</span>
</span></span><span class="line"><span class="cl">        <span class="n">fields</span> <span class="o">=</span> <span class="p">(</span>
</span></span><span class="line"><span class="cl">            <span class="s1">&#39;document_id&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">            <span class="s1">&#39;updated_at&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="p">)</span>
</span></span></code></pre></td></tr></table>
</div>
</div></div>
</div>
<br />

<p>리턴 결과
<figure class="align-center ">
    <img loading="lazy" src="../img/14.png#center"
         alt="sitemap을 위한 api"/> <figcaption>
            <p>sitemap을 위한 api</p>
        </figcaption>
</figure>
</p>
<br/>
<h4 id="동적-페이지를-사이트맵에-추가하자">동적 페이지를 사이트맵에 추가하자<a hidden class="anchor" aria-hidden="true" href="#동적-페이지를-사이트맵에-추가하자">#</a></h4>
<p><code>next-sitemap</code>라이브러리 설치가 필요합니다.</p>
<p>설치 이후 <code>pages &gt; server-sitemap.xml &gt; index.tsx</code> 를 생성해줍니다. 해당 server-sitemap.xml 에서 기본적인 사이트맵 이외에 다이나믹 라우트를 활용한 즉, SSR되는 리스트들을 사이트맵에 추가해줍니다.</p>
<p><code>pages &gt; server-sitemap.xml &gt; index.tsx</code>


<div class="terminal space shadow">
  <div class="top">
    <div class="btns">
      <span class="circle red"></span>
      <span class="circle yellow"></span>
      <span class="circle green"></span>
    </div>
    <div class="title">
      pages &gt; server-sitemap.xml &gt; index.tsx
    </div>
  </div>
  <div class="terminalbody"><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-ts" data-lang="ts"><span class="line"><span class="cl"><span class="cm">/* eslint-disable import/no-anonymous-default-export */</span>
</span></span><span class="line"><span class="cl"><span class="cm">/* eslint-disable @typescript-eslint/no-empty-function */</span>
</span></span><span class="line"><span class="cl"><span class="kr">import</span> <span class="p">{</span> <span class="nx">GetServerSideProps</span> <span class="p">}</span> <span class="kr">from</span> <span class="s2">&#34;next&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="kr">import</span> <span class="p">{</span> <span class="nx">getServerSideSitemap</span><span class="p">,</span> <span class="nx">ISitemapField</span> <span class="p">}</span> <span class="kr">from</span> <span class="s2">&#34;next-sitemap&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kr">import</span> <span class="p">{</span> <span class="nx">getGoodsSiteMap</span><span class="p">,</span> <span class="nx">getPostsSiteMap</span> <span class="p">}</span> <span class="kr">from</span> <span class="s2">&#34;@/pages/api&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kr">type</span> <span class="nx">Posts</span> <span class="o">=</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">id</span>: <span class="kt">string</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="nx">created_at</span>: <span class="kt">string</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kr">type</span> <span class="nx">Goods</span> <span class="o">=</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">document_id</span>: <span class="kt">string</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="nx">updated_at</span>: <span class="kt">string</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kr">export</span> <span class="kr">const</span> <span class="nx">getServerSideProps</span>: <span class="kt">GetServerSideProps</span> <span class="o">=</span> <span class="kr">async</span> <span class="p">(</span><span class="nx">ctx</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="c1">// Method to source urls from cms
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="kr">const</span> <span class="nx">posts</span>: <span class="kt">Posts</span><span class="p">[]</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">getPostsSiteMap</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">  <span class="kr">const</span> <span class="nx">posts_sitemap_fields</span>: <span class="kt">ISitemapField</span><span class="p">[]</span> <span class="o">=</span> <span class="nx">posts</span><span class="p">.</span><span class="nx">map</span><span class="p">((</span><span class="nx">post</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="nx">loc</span><span class="o">:</span> <span class="sb">`</span><span class="si">${</span><span class="nx">process</span><span class="p">.</span><span class="nx">env</span><span class="p">.</span><span class="nx">NEXT_PUBLIC_URL</span><span class="si">}</span><span class="sb">/community/post/</span><span class="si">${</span><span class="nx">post</span><span class="p">[</span><span class="s2">&#34;id&#34;</span><span class="p">]</span><span class="si">}</span><span class="sb">`</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="nx">lastmod</span>: <span class="kt">post</span><span class="p">[</span><span class="s2">&#34;created_at&#34;</span><span class="p">],</span>
</span></span><span class="line"><span class="cl">      <span class="nx">changefreq</span><span class="o">:</span> <span class="s2">&#34;always&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="nx">priority</span>: <span class="kt">1.0</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="p">};</span>
</span></span><span class="line"><span class="cl">  <span class="p">});</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="kr">const</span> <span class="nx">goods</span>: <span class="kt">Goods</span><span class="p">[]</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">getGoodsSiteMap</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">  <span class="kr">const</span> <span class="nx">goods_sitemap_fields</span>: <span class="kt">ISitemapField</span><span class="p">[]</span> <span class="o">=</span> <span class="nx">goods</span><span class="p">.</span><span class="nx">map</span><span class="p">((</span><span class="nx">good</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="nx">loc</span><span class="o">:</span> <span class="sb">`</span><span class="si">${</span><span class="nx">process</span><span class="p">.</span><span class="nx">env</span><span class="p">.</span><span class="nx">NEXT_PUBLIC_URL</span><span class="si">}</span><span class="sb">/goods/</span><span class="si">${</span><span class="nx">good</span><span class="p">[</span><span class="s2">&#34;document_id&#34;</span><span class="p">]</span><span class="si">}</span><span class="sb">`</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="nx">lastmod</span>: <span class="kt">good</span><span class="p">[</span><span class="s2">&#34;updated_at&#34;</span><span class="p">],</span>
</span></span><span class="line"><span class="cl">      <span class="nx">changefreq</span><span class="o">:</span> <span class="s2">&#34;always&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="nx">priority</span>: <span class="kt">1.0</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="p">};</span>
</span></span><span class="line"><span class="cl">  <span class="p">});</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="kr">const</span> <span class="nx">sitemap_fields</span> <span class="o">=</span> <span class="p">[...</span><span class="nx">posts_sitemap_fields</span><span class="p">,</span> <span class="p">...</span><span class="nx">goods_sitemap_fields</span><span class="p">];</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="k">return</span> <span class="nx">getServerSideSitemap</span><span class="p">(</span><span class="nx">ctx</span><span class="p">,</span> <span class="nx">sitemap_fields</span><span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1">// Default export to prevent next.js errors
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="kr">export</span> <span class="k">default</span> <span class="kd">function</span> <span class="nx">Sitemap() {</span><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div></div>
</div>
<br />
</p>
<p><code>/server-sitemap.xml</code>에 접속하면 다음과 같이 xml파일이 잘 만들어진 것을 확인할 수 있습니다.</p>
<figure class="align-center ">
    <img loading="lazy" src="../img/15.png#center"
         alt="실행결과"/> <figcaption>
            <p>실행결과</p>
        </figcaption>
</figure>

<p>잘 만들어진 사이트맵을 빌드할 때 robots.txt에 포함될 수 있도록 설정해주어야 합니다.</p>
<p><code>next-sitemap.config.js</code>


<div class="terminal space shadow">
  <div class="top">
    <div class="btns">
      <span class="circle red"></span>
      <span class="circle yellow"></span>
      <span class="circle green"></span>
    </div>
    <div class="title">
      next-sitemap.config.js
    </div>
  </div>
  <div class="terminalbody"><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-ts" data-lang="ts"><span class="line"><span class="cl"><span class="cm">/**
</span></span></span><span class="line"><span class="cl"><span class="cm"> * @type {import(&#39;next-sitemap&#39;).IConfig}
</span></span></span><span class="line"><span class="cl"><span class="cm"> * @see https://github.com/iamvishnusankar/next-sitemap#readme
</span></span></span><span class="line"><span class="cl"><span class="cm"> */</span>
</span></span><span class="line"><span class="cl"><span class="kr">module</span><span class="nx">.exports</span> <span class="o">=</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">siteUrl</span><span class="o">:</span> <span class="sb">`</span><span class="si">${</span><span class="nx">process</span><span class="p">.</span><span class="nx">env</span><span class="p">.</span><span class="nx">NEXT_PUBLIC_URL</span><span class="si">}</span><span class="sb">`</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="nx">generateRobotsTxt</span>: <span class="kt">true</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="nx">exclude</span><span class="o">:</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">    <span class="s2">&#34;/mypage&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="s2">&#34;/404&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="s2">&#34;/sandbox/dialog-zustand&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="s2">&#34;/findcue/utils&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="s2">&#34;/components&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="p">],</span>
</span></span><span class="line"><span class="cl">  <span class="nx">robotsTxtOptions</span><span class="o">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">policies</span><span class="o">:</span> <span class="p">[{</span> <span class="nx">userAgent</span><span class="o">:</span> <span class="s2">&#34;*&#34;</span><span class="p">,</span> <span class="nx">allow</span><span class="o">:</span> <span class="s2">&#34;/&#34;</span> <span class="p">}],</span>
</span></span><span class="line"><span class="cl">    <span class="nx">additionalSitemaps</span><span class="o">:</span> <span class="p">[</span><span class="sb">`</span><span class="si">${</span><span class="nx">process</span><span class="p">.</span><span class="nx">env</span><span class="p">.</span><span class="nx">NEXT_PUBLIC_URL</span><span class="si">}</span><span class="sb">/server-sitemap.xml`</span><span class="p">],</span> <span class="c1">// &lt;-- 여기
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="p">},</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span></code></pre></td></tr></table>
</div>
</div></div>
</div>
<br />
</p>
<p><code>package.json</code>


<div class="terminal space shadow">
  <div class="top">
    <div class="btns">
      <span class="circle red"></span>
      <span class="circle yellow"></span>
      <span class="circle green"></span>
    </div>
    <div class="title">
      package.json
    </div>
  </div>
  <div class="terminalbody"><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-json" data-lang="json"><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nt">&#34;name&#34;</span><span class="p">:</span> <span class="s2">&#34;cuechatsa_apppage_v3&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="nt">&#34;version&#34;</span><span class="p">:</span> <span class="s2">&#34;0.1.1&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="nt">&#34;private&#34;</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="nt">&#34;scripts&#34;</span><span class="p">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;dev&#34;</span><span class="p">:</span> <span class="s2">&#34;next dev -p 3001&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;build&#34;</span><span class="p">:</span> <span class="s2">&#34;next build&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;export&#34;</span><span class="p">:</span> <span class="s2">&#34;next export -o out&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;start&#34;</span><span class="p">:</span> <span class="s2">&#34;next start&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;lint&#34;</span><span class="p">:</span> <span class="s2">&#34;next lint&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;lint:fix&#34;</span><span class="p">:</span> <span class="s2">&#34;eslint src --fix &amp;&amp; yarn format&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;lint:strict&#34;</span><span class="p">:</span> <span class="s2">&#34;eslint --max-warnings=0 src&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;typecheck&#34;</span><span class="p">:</span> <span class="s2">&#34;tsc --noEmit --incremental false&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;test:watch&#34;</span><span class="p">:</span> <span class="s2">&#34;jest --watch&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;test&#34;</span><span class="p">:</span> <span class="s2">&#34;jest&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;format&#34;</span><span class="p">:</span> <span class="s2">&#34;prettier -w .&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;format:check&#34;</span><span class="p">:</span> <span class="s2">&#34;prettier -c .&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;postbuild&#34;</span><span class="p">:</span> <span class="s2">&#34;next-sitemap --config next-sitemap.config.js&#34;</span><span class="p">,</span> <span class="c1">// &lt;- 이부분
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="nt">&#34;prepare&#34;</span><span class="p">:</span> <span class="s2">&#34;husky install&#34;</span>
</span></span><span class="line"><span class="cl">  <span class="p">},</span>
</span></span><span class="line"><span class="cl">  <span class="err">...</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div></div>
</div>
<br />
</p>
<p>이후에 <code>yarn build</code>하면 <code>robots.txt</code>에 자동으로 추가되는걸 볼 수 있습니다.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-txt" data-lang="txt"><span class="line"><span class="cl"># *
</span></span><span class="line"><span class="cl">User-agent: *
</span></span><span class="line"><span class="cl">Allow: /
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"># Host
</span></span><span class="line"><span class="cl">Host: https://www.cue8949.com
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"># Sitemaps
</span></span><span class="line"><span class="cl">Sitemap: https://www.cue8949.com/sitemap.xml
</span></span><span class="line"><span class="cl">Sitemap: https://www.cue8949.com/server-sitemap.xml &lt;&lt; 여기
</span></span></code></pre></td></tr></table>
</div>
</div><hr>
<br>
<h3 id="네이버-구글-웹마스터도구-등록">네이버, 구글 웹마스터도구 등록<a hidden class="anchor" aria-hidden="true" href="#네이버-구글-웹마스터도구-등록">#</a></h3>
<p>네이버 서치어드바이저(웹마스터도구)에 등록 후 몇가지 추가로 해야할 것 이 있습니다. 이 url이 나의 소유임을 확인하는 Meta 태그를 추가해야합니다. 이는 구글과 동일한 방식을 사용합니다. 네이버 서치어드바이저에서 활용할 수 잇는 사이트 연관채널도 추가하려합니다.</p>
<figure class="align-center ">
    <img loading="lazy" src="../img/16.png#center"
         alt="네이버 검색 연관채널"/> <figcaption>
            <p>네이버 검색 연관채널</p>
        </figcaption>
</figure>

<p>앞서 만들었던 <code>Seo.tsx</code> 컴포넌트를 활용합니다. 연관채널은 가이드를 참고하여 JSON-LD 형식으로 구현합니다.</p>
<figure class="align-center ">
    <img loading="lazy" src="../img/18.png#center"
         alt="네이버 검색 연관채널 가이드"/> <figcaption>
            <p>네이버 검색 연관채널 가이드</p>
        </figcaption>
</figure>

<p><code>src &gt; components &gt; Seo.tsx</code>


<div class="terminal space shadow">
  <div class="top">
    <div class="btns">
      <span class="circle red"></span>
      <span class="circle yellow"></span>
      <span class="circle green"></span>
    </div>
    <div class="title">
      src &gt; components &gt; Seo.tsx
    </div>
  </div>
  <div class="terminalbody"><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-ts" data-lang="ts"><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">Head</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="p">...</span> <span class="p">...</span>
</span></span><span class="line"><span class="cl">  <span class="p">{</span><span class="cm">/* 네이버 서치어드바이저 */</span><span class="p">}</span>
</span></span><span class="line"><span class="cl">  <span class="p">&lt;</span><span class="nt">meta</span> <span class="na">name</span><span class="o">=</span><span class="s">&#34;naver-site-verification&#34;</span> <span class="na">content</span><span class="o">=</span><span class="s">&#34;발급받은 문자열&#34;</span> <span class="p">/&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="c1">// 연관채널
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="p">&lt;</span><span class="nt">script</span>
</span></span><span class="line"><span class="cl">    <span class="na">type</span><span class="o">=</span><span class="s">&#34;application/ld+json&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="na">dangerouslySetInnerHTML</span><span class="o">=</span><span class="p">{{</span>
</span></span><span class="line"><span class="cl">      <span class="nx">__html</span>: <span class="kt">JSON.stringify</span><span class="p">({</span>
</span></span><span class="line"><span class="cl">        <span class="s2">&#34;@context&#34;</span><span class="o">:</span> <span class="s2">&#34;http://schema.org&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="s2">&#34;@type&#34;</span><span class="o">:</span> <span class="s2">&#34;Person&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="nx">name</span><span class="o">:</span> <span class="s2">&#34;큐찾사 | 중고큐 거래는 큐찾사&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="nx">url</span><span class="o">:</span> <span class="s2">&#34;https://www.cue8949.com&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="nx">sameAs</span><span class="o">:</span> <span class="p">[</span>
</span></span><span class="line"><span class="cl">          <span class="s2">&#34;https://www.facebook.com/kimchibilliards&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">          <span class="s2">&#34;https://www.youtube.com/channel/UCO_ynY-y2HaR9LiHr03beVw&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">          <span class="s2">&#34;https://www.instagram.com/kimchibilliards&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">          <span class="s2">&#34;https://play.google.com/store/apps/details?id=com.cuechatsaapp&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">          <span class="s2">&#34;https://apps.apple.com/app/id1524591264&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="p">],</span>
</span></span><span class="line"><span class="cl">      <span class="p">}),</span>
</span></span><span class="line"><span class="cl">    <span class="p">}}</span>
</span></span><span class="line"><span class="cl">  <span class="p">/&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="p">{</span><span class="cm">/* 구글 서치어드바이저 */</span><span class="p">}</span>
</span></span><span class="line"><span class="cl">  <span class="p">&lt;</span><span class="nt">meta</span> <span class="na">name</span><span class="o">=</span><span class="s">&#34;google-site-verification&#34;</span> <span class="na">content</span><span class="o">=</span><span class="s">&#34;발급받은 문자열&#34;</span> <span class="p">/&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="p">...</span> <span class="p">...</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;/</span><span class="nt">Head</span><span class="p">&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div></div>
</div>
<br />
</p>
<br>
네이버 서치어드바이저에서 수집된 robots.txt를 보면 잘 수집된걸 볼 수 잇습니다.
<figure class="align-center ">
    <img loading="lazy" src="../img/17.png#center"
         alt="네이버 서치어드바이저"/> <figcaption>
            <p>네이버 서치어드바이저</p>
        </figcaption>
</figure>

<br>
<p>구글 웹마스터도구에서도 사이트맵 제출이 잘 되는걸 볼 수 있습니다.
<figure class="align-center ">
    <img loading="lazy" src="../img/19.png#center"
         alt="구글 웹마스터도구"/> <figcaption>
            <p>구글 웹마스터도구</p>
        </figcaption>
</figure>
</p>
<p>만들어진 사이트맵은 저처럼 직접 제출해도 되고 (빠름), 검색 로봇이 서치하게 두어도 됩니다(느림).</p>
<hr>
<br>
<h3 id="카카오-공유하기">카카오 공유하기<a hidden class="anchor" aria-hidden="true" href="#카카오-공유하기">#</a></h3>
<figure class="align-center ">
    <img loading="lazy" src="../img/10.png#center"
         alt="좌: 카카오 공유하기 | 우: OpenGraph"/> <figcaption>
            <p>좌: 카카오 공유하기 | 우: OpenGraph</p>
        </figcaption>
</figure>

<p>카카오 공화국인 한국인 만큼 카카오 공유하기도 추가해야겠다고 생각하였습니다. 커스텀 템플릿을 이용하면 매우 쉽게 카카오 공유하기를 입맛대로 구성할 수 있습니다.</p>
<h4 id="카카오디벨로퍼에서-키-발급">카카오디벨로퍼에서 키 발급<a hidden class="anchor" aria-hidden="true" href="#카카오디벨로퍼에서-키-발급">#</a></h4>
<p><a href="https://developers.kakao.com/" target="_blank">카카오디벨로퍼</a>에서 애플리케이션을 만들고 <code>Javascript 키</code>를 <code>.env</code>에 복사해줍니다.</p>
<p><code>.env</code>


<div class="terminal space shadow">
  <div class="top">
    <div class="btns">
      <span class="circle red"></span>
      <span class="circle yellow"></span>
      <span class="circle green"></span>
    </div>
    <div class="title">
      .env
    </div>
  </div>
  <div class="terminalbody"><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-.env" data-lang=".env"><span class="line"><span class="cl">...
</span></span><span class="line"><span class="cl"><span class="nv">NEXT_PUBLIC_KAKAO_API_KEY</span><span class="o">=</span><span class="s2">&#34;발급받은 Javascript 키&#34;</span>
</span></span><span class="line"><span class="cl">...
</span></span></code></pre></td></tr></table>
</div>
</div></div>
</div>
<br />

변수명에 <code>NEXT_PUBLIC</code>을 붙혀주지 않으면 페이지에서 불러올 수 없으니 유의해주세요.
<br></p>
<h4 id="카카오-sdk-설치">카카오 SDK 설치<a hidden class="anchor" aria-hidden="true" href="#카카오-sdk-설치">#</a></h4>
<p><code>src &gt; pages &gt; _app.tsx</code> 에서 Window 인터페이스를 선언해줍니다.


<div class="terminal space shadow">
  <div class="top">
    <div class="btns">
      <span class="circle red"></span>
      <span class="circle yellow"></span>
      <span class="circle green"></span>
    </div>
    <div class="title">
      src &gt; pages &gt; _app.tsx
    </div>
  </div>
  <div class="terminalbody"><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-ts" data-lang="ts"><span class="line"><span class="cl"><span class="kr">declare</span> <span class="kr">global</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="kr">interface</span> <span class="nx">Window</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">Kakao</span>: <span class="kt">any</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">MyApp</span> <span class="o">=</span> <span class="p">({...}</span><span class="o">:</span> <span class="p">{...})</span> <span class="o">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="k">return</span> <span class="p">(</span>
</span></span><span class="line"><span class="cl">  <span class="p">...</span>
</span></span><span class="line"><span class="cl">  <span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kr">export</span> <span class="k">default</span> <span class="nx">MyApp</span><span class="p">;</span>
</span></span></code></pre></td></tr></table>
</div>
</div></div>
</div>
<br />
</p>
<p><code>src &gt; pages &gt; _document.tsx</code>에서 카카오 sdk를 실행합니다.


<div class="terminal space shadow">
  <div class="top">
    <div class="btns">
      <span class="circle red"></span>
      <span class="circle yellow"></span>
      <span class="circle green"></span>
    </div>
    <div class="title">
      src &gt; pages &gt; _document.tsx
    </div>
  </div>
  <div class="terminalbody"><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-ts" data-lang="ts"><span class="line"><span class="cl"><span class="kr">import</span> <span class="nx">Document</span><span class="p">,</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">Head</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="nx">Html</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="nx">Main</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="nx">NextScript</span><span class="p">,</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span> <span class="kr">from</span> <span class="s1">&#39;next/document&#39;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kr">class</span> <span class="nx">MyDocument</span> <span class="kr">extends</span> <span class="nx">Document</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="p">...</span>
</span></span><span class="line"><span class="cl">  <span class="nx">render() {</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="p">(</span>
</span></span><span class="line"><span class="cl">      <span class="p">&lt;</span><span class="nt">Html</span> <span class="na">lang</span><span class="o">=</span><span class="s">&#39;en&#39;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="p">&lt;</span><span class="nt">Head</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">          <span class="p">...</span>
</span></span><span class="line"><span class="cl">          <span class="p">{</span><span class="cm">/* kakao */</span><span class="p">}</span>
</span></span><span class="line"><span class="cl">          <span class="p">&lt;</span><span class="nt">script</span>
</span></span><span class="line"><span class="cl">            <span class="na">defer</span>
</span></span><span class="line"><span class="cl">            <span class="na">src</span><span class="o">=</span><span class="s">&#39;https://developers.kakao.com/sdk/js/kakao.min.js&#39;</span>
</span></span><span class="line"><span class="cl">          <span class="p">&gt;&lt;/</span><span class="nt">script</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="p">&lt;/</span><span class="nt">Head</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="p">...</span>
</span></span><span class="line"><span class="cl">        <span class="p">&lt;</span><span class="nt">body</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">          <span class="p">&lt;</span><span class="nt">Main</span> <span class="p">/&gt;</span>
</span></span><span class="line"><span class="cl">          <span class="p">&lt;</span><span class="nt">NextScript</span> <span class="p">/&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="p">&lt;/</span><span class="nt">body</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">      <span class="p">&lt;/</span><span class="nt">Html</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">);</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kr">export</span> <span class="k">default</span> <span class="nx">MyDocument</span><span class="p">;</span>
</span></span></code></pre></td></tr></table>
</div>
</div></div>
</div>
<br />
</p>
<p><code>src &gt; components &gt; layout &gt; Layout.tsx</code> Window.kakao를 초기화 해주어야 합니다. 꼭 해당 컴포넌트에서 안해도 되지만 프로젝트 구성상 Layout 컴포넌트가 모든 페이지의 뼈대가 되므로 저는 Layout에서 초기화 해주었습니다. 초기화를 여러번 진행하면 에러가 발생하므로 <code>useEffect</code>로 이미 초기화가 진행되었는지 확인해주어야합니다.</p>


<div class="terminal space shadow">
  <div class="top">
    <div class="btns">
      <span class="circle red"></span>
      <span class="circle yellow"></span>
      <span class="circle green"></span>
    </div>
    <div class="title">
      src &gt; components &gt; layout &gt; Layout.tsx
    </div>
  </div>
  <div class="terminalbody"><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-ts" data-lang="ts"><span class="line"><span class="cl"><span class="kr">export</span> <span class="k">default</span> <span class="kd">function</span> <span class="nx">Layout</span><span class="p">({</span> <span class="nx">children</span> <span class="p">}</span><span class="o">:</span> <span class="p">{</span> <span class="nx">children</span>: <span class="kt">React.ReactNode</span> <span class="p">})</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="p">...</span>
</span></span><span class="line"><span class="cl">  <span class="c1">// kakao 공유하기
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="nx">React</span><span class="p">.</span><span class="nx">useEffect</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nb">window</span><span class="p">.</span><span class="nx">Kakao</span><span class="p">.</span><span class="nx">isInitialized</span><span class="p">())</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="nb">window</span><span class="p">.</span><span class="nx">Kakao</span><span class="p">.</span><span class="nx">init</span><span class="p">(</span><span class="nx">process</span><span class="p">.</span><span class="nx">env</span><span class="p">.</span><span class="nx">NEXT_PUBLIC_KAKAO_API_KEY</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// eslint-disable-next-line react-hooks/exhaustive-deps
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="p">},</span> <span class="p">[]);</span>
</span></span><span class="line"><span class="cl">  <span class="p">...</span>
</span></span><span class="line"><span class="cl">  <span class="k">return</span> <span class="p">(</span>
</span></span><span class="line"><span class="cl">    <span class="p">...</span>
</span></span><span class="line"><span class="cl">  <span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div></div>
</div>
<br />

<h4 id="카카오-메세지-템플릿-만들기">카카오 메세지 템플릿 만들기<a hidden class="anchor" aria-hidden="true" href="#카카오-메세지-템플릿-만들기">#</a></h4>
<p>카카오디벨로퍼 &gt; 도구 &gt; 메세지템플릿 에서 템플릿을 만들 수 있습니다. 피드형으로 진행하였습니다.
<figure class="align-center ">
    <img loading="lazy" src="../img/11.png#center"/> 
</figure>
</p>
<p>파라미터는 입력필드에 포맷으로 <code>${key변수명}</code>을 입력하면 해당 값은 변수처럼 사용될 수 있습니다.
<figure class="align-center ">
    <img loading="lazy" src="../img/12.png#center"/> 
</figure>
</p>
<h4 id="코드-적용하기">코드 적용하기<a hidden class="anchor" aria-hidden="true" href="#코드-적용하기">#</a></h4>


<div class="terminal space shadow">
  <div class="top">
    <div class="btns">
      <span class="circle red"></span>
      <span class="circle yellow"></span>
      <span class="circle green"></span>
    </div>
    <div class="title">
      KakaoBtn
    </div>
  </div>
  <div class="terminalbody"><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span><span class="lnt">51
</span><span class="lnt">52
</span><span class="lnt">53
</span><span class="lnt">54
</span><span class="lnt">55
</span><span class="lnt">56
</span><span class="lnt">57
</span><span class="lnt">58
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-ts" data-lang="ts"><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">KakaoBtn</span> <span class="o">=</span> <span class="p">({</span>
</span></span><span class="line"><span class="cl">  <span class="nx">title</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="nx">description</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="nx">price</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="nx">state</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="nx">document_id</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="nx">imageUrl</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="nx">like_cnt</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="nx">view_cnt</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="p">...</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span><span class="o">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">title</span>: <span class="kt">string</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="nx">description</span>: <span class="kt">string</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="nx">price</span>: <span class="kt">number</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="nx">state</span>: <span class="kt">string</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="nx">document_id</span>: <span class="kt">string</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="nx">imageUrl</span>: <span class="kt">string</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="nx">like_cnt</span>: <span class="kt">number</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="nx">view_cnt</span>: <span class="kt">number</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="p">...</span>
</span></span><span class="line"><span class="cl"><span class="p">})</span> <span class="o">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="kr">const</span> <span class="nx">onClick</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// eslint-disable-next-line unused-imports/no-unused-vars
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="kr">const</span> <span class="p">{</span> <span class="nx">Kakao</span><span class="p">,</span> <span class="nx">location</span> <span class="p">}</span> <span class="o">=</span> <span class="nb">window</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="nx">Kakao</span><span class="p">.</span><span class="nx">Link</span><span class="p">.</span><span class="nx">sendCustom</span><span class="p">({</span>
</span></span><span class="line"><span class="cl">      <span class="nx">templateId</span>: <span class="kt">89436</span><span class="p">,</span> <span class="c1">// &lt;-- 자신의 템플릿 ID를 입력
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>      <span class="nx">templateArgs</span><span class="o">:</span> <span class="p">{</span> <span class="c1">// &lt;-- 템플릿에서 만들었던 변수명을 보냄
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="nx">title</span><span class="o">:</span> <span class="sb">`</span><span class="si">${</span><span class="nx">title</span><span class="si">}</span><span class="sb">`</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="nx">description</span><span class="o">:</span> <span class="sb">`</span><span class="si">${</span><span class="nx">description</span><span class="si">}</span><span class="sb">`</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="nx">sub_title</span><span class="o">:</span> <span class="sb">`</span><span class="si">${</span><span class="nx">sub_title</span><span class="si">}</span><span class="sb">`</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="nx">sub_description</span><span class="o">:</span> <span class="sb">`</span><span class="si">${</span><span class="nx">sub_description</span><span class="si">}</span><span class="sb">`</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="nx">button_title</span><span class="o">:</span> <span class="sb">`</span><span class="si">${</span><span class="nx">button_title</span><span class="si">}</span><span class="sb">`</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="nx">document_id</span><span class="o">:</span> <span class="sb">`</span><span class="si">${</span><span class="nx">document_id</span><span class="si">}</span><span class="sb">`</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="nx">imageUrl</span><span class="o">:</span> <span class="sb">`</span><span class="si">${</span><span class="nx">imageUrl</span><span class="si">}</span><span class="sb">`</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="nx">header</span><span class="o">:</span> <span class="sb">`</span><span class="si">${</span><span class="nx">document_id</span><span class="si">}</span><span class="sb">`</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="nx">like_cnt</span><span class="o">:</span> <span class="sb">`</span><span class="si">${</span><span class="nx">like_cnt</span><span class="si">}</span><span class="sb">`</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="nx">view_cnt</span><span class="o">:</span> <span class="sb">`</span><span class="si">${</span><span class="nx">view_cnt</span><span class="si">}</span><span class="sb">`</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="nx">price</span><span class="o">:</span> <span class="sb">`</span><span class="si">${</span><span class="nx">price</span><span class="si">}</span><span class="sb">`</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="p">},</span>
</span></span><span class="line"><span class="cl">    <span class="p">});</span>
</span></span><span class="line"><span class="cl">  <span class="p">};</span>
</span></span><span class="line"><span class="cl">  <span class="k">return</span> <span class="p">(</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;&gt;</span>
</span></span><span class="line"><span class="cl">      <span class="p">&lt;</span><span class="nt">div</span>
</span></span><span class="line"><span class="cl">        <span class="na">onClick</span><span class="o">=</span><span class="p">{</span><span class="nx">onClick</span><span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="na">className</span><span class="o">=</span><span class="s">&#34;mb-3 flex cursor-pointer justify-center&#34;</span>
</span></span><span class="line"><span class="cl">      <span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="p">&lt;</span><span class="nt">div</span> <span class="na">className</span><span class="o">=</span><span class="s">&#34;flex h-[45px] w-full flex-row rounded-xl bg-[#FFEB01] py-2 px-5 md:flex md:h-[55px]&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">          <span class="p">&lt;</span><span class="nt">KakaoSVG</span> <span class="na">className</span><span class="o">=</span><span class="s">&#34;my-auto w-12 text-3xl md:text-4xl&#34;</span> <span class="p">/&gt;</span>
</span></span><span class="line"><span class="cl">          <span class="p">&lt;</span><span class="nt">div</span> <span class="na">className</span><span class="o">=</span><span class="s">&#34;h5 md:h4 my-auto w-full pl-4 text-[#3C1E1E]&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="err">카카오톡으로</span> <span class="err">공유하기</span>
</span></span><span class="line"><span class="cl">          <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">      <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;/&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span></code></pre></td></tr></table>
</div>
</div></div>
</div>
<br />

<p>만들어진 버튼은 다음과 같습니다. 해당 버튼을 누르면 PC는 새로운 창이 열리면서 공유할 친구 목록 선택 할 수 있으며 모바일은 카톡앱이 켜진 후 보낼 대상을 선택할 수 있습니다.
<figure class="align-center ">
    <img loading="lazy" src="../img/13.png#center"/> 
</figure>
</p>
<hr>
<br>
<h3 id="마치며">마치며<a hidden class="anchor" aria-hidden="true" href="#마치며">#</a></h3>
<p><strong>이로서 <code>SSR + SEO + Sitemap</code> 모두 적용되어 네이버, 구글 검색결과에 표시될 준비가 모두 끝났습니다. 🔥</strong></p>
<p>구글, 네이버 검색결과에 상위에 노출되기만 남았습니다(제발~~).</p>
<h4 id="reference">Reference<a hidden class="anchor" aria-hidden="true" href="#reference">#</a></h4>
<ul>
<li><a href="https://github.com/iamvishnusankar/next-sitemap#generating-dynamicserver-side-sitemaps">https://github.com/iamvishnusankar/next-sitemap#generating-dynamicserver-side-sitemaps</a></li>
<li><a href="https://github.com/theodorusclarence/ts-nextjs-tailwind-starter">https://github.com/theodorusclarence/ts-nextjs-tailwind-starter</a></li>
<li><a href="https://github.com/vercel/next.js/discussions/45077#discussioncomment-4774680">https://github.com/vercel/next.js/discussions/45077#discussioncomment-4774680</a></li>
<li><a href="https://www.opengraph.xyz">https://www.opengraph.xyz</a></li>
<li><a href="https://developers.kakao.com/tool/debugger/sharing">https://developers.kakao.com/tool/debugger/sharing</a></li>
</ul>
<br>
<p>해당글이 Next.js를 이용해서 SEO 최적화 하시는데 도움이 되셨길 바랍니다 😆</p>
<hr>
<p><strong>궁금하신 점이 있으시면 아래 Comments 남겨주세요 👇</strong></p>


  </div>

  <footer class="post-footer">
    <ul class="post-tags">
      <li><a href="https://cha2hyun.blog/tags/next.js/">Next.js</a></li>
      <li><a href="https://cha2hyun.blog/tags/ssr/">SSR</a></li>
      <li><a href="https://cha2hyun.blog/tags/seo/">SEO</a></li>
      <li><a href="https://cha2hyun.blog/tags/next-sitemap/">next-sitemap</a></li>
    </ul>
<nav class="paginav">
  <a class="prev" href="https://cha2hyun.blog/content/projects/%ED%81%90%EC%B0%BE%EC%82%AC/nextimage/">
    <span class="title">« Prev</span>
    <br>
    <span>next/image 그냥 쓰면 서버는 시한부입니다 💀</span>
  </a>
  <a class="next" href="https://cha2hyun.blog/content/projects/%ED%81%90%EC%B0%BE%EC%82%AC/infinitescroll/">
    <span class="title">Next »</span>
    <br>
    <span>InfiniteScroll로 무한 스크롤 구현하기</span>
  </a>
</nav>


<div
  style="
    padding-top: 15px;
    padding-bottom: 2px;
    font-size: x-large;
    font-weight: 700;
  "
>
  궁금하신 점이 있으신가요? 😀
</div>





<script
  src="https://giscus.app/client.js"
  data-repo="cha2hyun/cha2hyun.github.io"
  data-repo-id="R_kgDOICTfkg"
  data-category="Comments"
  data-category-id="DIC_kwDOICTfks4CcDAW"
  data-mapping="pathname"
  data-strict="0"
  data-reactions-enabled="1"
  data-emit-metadata="0"
  data-input-position="top"
  data-theme="dark_dimmed"
  data-lang="ko"
  crossorigin="anonymous"
  async
></script>

  </footer>
</article>
    </main>
    
<footer class="footer">
    <span>&copy; 2023 <a href="https://cha2hyun.blog/">채수현 개발일지</a></span>
    
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
<script>
    document.querySelectorAll('pre > code').forEach((codeblock) => {
        const container = codeblock.parentNode.parentNode;

        const copybutton = document.createElement('button');
        copybutton.classList.add('copy-code');
        copybutton.innerHTML = 'copy';

        function copyingDone() {
            copybutton.innerHTML = 'copied!';
            setTimeout(() => {
                copybutton.innerHTML = 'copy';
            }, 2000);
        }

        copybutton.addEventListener('click', (cb) => {
            if ('clipboard' in navigator) {
                navigator.clipboard.writeText(codeblock.textContent);
                copyingDone();
                return;
            }

            const range = document.createRange();
            range.selectNodeContents(codeblock);
            const selection = window.getSelection();
            selection.removeAllRanges();
            selection.addRange(range);
            try {
                document.execCommand('copy');
                copyingDone();
            } catch (e) { };
            selection.removeRange(range);
        });

        if (container.classList.contains("highlight")) {
            container.appendChild(copybutton);
        } else if (container.parentNode.firstChild == container) {
            
        } else if (codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName == "TABLE") {
            
            codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(copybutton);
        } else {
            
            codeblock.parentNode.appendChild(copybutton);
        }
    });
</script>
</body>

</html>
