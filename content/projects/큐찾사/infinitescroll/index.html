<!DOCTYPE html>
<html lang="en" dir="auto">

<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>InfiniteScrollë¡œ ë¬´í•œ ìŠ¤í¬ë¡¤ êµ¬í˜„í•˜ê¸° | ì±„ìˆ˜í˜„ ê°œë°œì¼ì§€</title>
<meta name="keywords" content="Next.js, React Query, Infinite Scroll, Modal, LocalStorage">
<meta name="description" content="ë¬´í•œ ìŠ¤í¬ë¡¤ê³¼ ë’¤ë¡œê°€ê¸°ì‹œ ìŠ¤í¬ë¡¤ëœ ìœ„ì¹˜ë¥¼ ê¸°ì–µí•˜ê¸°.">
<meta name="author" content="cha2hyun">
<link rel="canonical" href="https://cha2hyun.blog/content/projects/%ED%81%90%EC%B0%BE%EC%82%AC/infinitescroll/">
<link crossorigin="anonymous" href="/assets/css/stylesheet.06cc1401233af506ee36c5cc89872a4bb4866704e48f666797e0ab85a990bd8f.css" integrity="sha256-BswUASM69QbuNsXMiYcqS7SGZwTkj2Znl&#43;CrhamQvY8=" rel="preload stylesheet" as="style">
<link rel="icon" href="https://cha2hyun.blog/favicon/favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="https://cha2hyun.blog/favicon/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="https://cha2hyun.blog/favicon/favicon-32x32.png">
<link rel="apple-touch-icon" href="https://cha2hyun.blog/favicon/apple-icon-76x76.png">
<link rel="mask-icon" href="https://cha2hyun.blog/safari-pinned-tab.svg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: rgb(29, 30, 32);
                --entry: rgb(46, 46, 51);
                --primary: rgb(218, 218, 219);
                --secondary: rgb(155, 156, 157);
                --tertiary: rgb(65, 66, 68);
                --content: rgb(196, 196, 197);
                --hljs-bg: rgb(46, 46, 51);
                --code-bg: rgb(55, 56, 62);
                --border: rgb(51, 51, 51);
            }

            .list {
                background: var(--theme);
            }

            .list:not(.dark)::-webkit-scrollbar-track {
                background: 0 0;
            }

            .list:not(.dark)::-webkit-scrollbar-thumb {
                border-color: var(--theme);
            }
        }

    </style>
</noscript><meta property="og:title" content="InfiniteScrollë¡œ ë¬´í•œ ìŠ¤í¬ë¡¤ êµ¬í˜„í•˜ê¸°" />
<meta property="og:description" content="ë¬´í•œ ìŠ¤í¬ë¡¤ê³¼ ë’¤ë¡œê°€ê¸°ì‹œ ìŠ¤í¬ë¡¤ëœ ìœ„ì¹˜ë¥¼ ê¸°ì–µí•˜ê¸°." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cha2hyun.blog/content/projects/%ED%81%90%EC%B0%BE%EC%82%AC/infinitescroll/" /><meta property="og:image" content="https://cha2hyun.blog/papermod-cover.png"/><meta property="article:section" content="content" />
<meta property="article:published_time" content="2023-01-04T00:00:00+00:00" />
<meta property="article:modified_time" content="2023-01-04T00:00:00+00:00" />

<meta name="twitter:card" content="summary_large_image"/>
<meta name="twitter:image" content="https://cha2hyun.blog/papermod-cover.png"/>

<meta name="twitter:title" content="InfiniteScrollë¡œ ë¬´í•œ ìŠ¤í¬ë¡¤ êµ¬í˜„í•˜ê¸°"/>
<meta name="twitter:description" content="ë¬´í•œ ìŠ¤í¬ë¡¤ê³¼ ë’¤ë¡œê°€ê¸°ì‹œ ìŠ¤í¬ë¡¤ëœ ìœ„ì¹˜ë¥¼ ê¸°ì–µí•˜ê¸°."/>


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position":  1 ,
      "name": "Contents",
      "item": "https://cha2hyun.blog/content/"
    }, 
    {
      "@type": "ListItem",
      "position":  2 ,
      "name": "Projects",
      "item": "https://cha2hyun.blog/content/projects/"
    }, 
    {
      "@type": "ListItem",
      "position":  4 ,
      "name": "InfiniteScrollë¡œ ë¬´í•œ ìŠ¤í¬ë¡¤ êµ¬í˜„í•˜ê¸°",
      "item": "https://cha2hyun.blog/content/projects/%ED%81%90%EC%B0%BE%EC%82%AC/infinitescroll/"
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "InfiniteScrollë¡œ ë¬´í•œ ìŠ¤í¬ë¡¤ êµ¬í˜„í•˜ê¸°",
  "name": "InfiniteScrollë¡œ ë¬´í•œ ìŠ¤í¬ë¡¤ êµ¬í˜„í•˜ê¸°",
  "description": "ë¬´í•œ ìŠ¤í¬ë¡¤ê³¼ ë’¤ë¡œê°€ê¸°ì‹œ ìŠ¤í¬ë¡¤ëœ ìœ„ì¹˜ë¥¼ ê¸°ì–µí•˜ê¸°.",
  "keywords": [
    "Next.js", "React Query", "Infinite Scroll", "Modal", "LocalStorage"
  ],
  "articleBody": "\në“¤ì–´ê°€ë©° ìƒˆë¡œìš´ í™ˆí˜ì´ì§€ë¥¼ ê¸°íš, ê°œë°œí•˜ë©´ì„œ ìµœëŒ€í•œ ì•±ê³¼ ë™ì¼í•œ ì‚¬ìš©ì ê²½í—˜ì„ ì£¼ê¸° ìœ„í•´ ê³ ë¯¼ì„ ë§ì´ í–ˆìŠµë‹ˆë‹¤. ì¼ë°˜ì ì¸ í˜ì§€ë„¤ì´ì…˜ìœ¼ë¡œëŠ” ëª¨ë°”ì¼ì—ì„œ ì•±ê³¼ ê°™ì€ ê²½í—˜ì„ ì£¼ì§€ ëª»í•˜ëŠ” ì ì´ ì•„ì‰¬ìš´ ì ì´ ìˆìŠµë‹ˆë‹¤. React Queryì˜ infiniteScrollì„ infiniteScrollì„ ë„ì…í•˜ë©´ì„œ ë°°ìš´ ë‚´ìš©ë“¤ì„ ë‹¤ë£¹ë‹ˆë‹¤. ì†ë„ê°€ ì¤‘ìš”í•œ ê²ƒì€ Modalë¡œ í‘œì‹œí•˜ê³  ìƒí˜¸ì‘ìš©ì´ ì¤‘ìš”í•œ ê²ƒì€ Linkë¡œ í˜ì´ì§€ ì´ë™í•˜ì˜€ìŠµë‹ˆë‹¤. ì´ë¯¸ì§€ ìºì‹±ì„ ìœ„í•œ ë°©ë²•ê³¼ ë¶ˆëŸ¬ì˜¨ ë°ì´í„°ë¥¼ íš¨ê³¼ì ìœ¼ë¡œ ì €ì¥í•˜ëŠ” ë°©ë²•ì— ëŒ€í•´ì„œ ì•Œì•„ë´…ë‹ˆë‹¤. APIëŠ” ì¥ê³ ë¡œ ë§Œë“¤ì—ˆìŠµë‹ˆë‹¤.\nê³ ì¹˜ëŠ” ê²ƒ ë³´ë‹¤ ìƒˆë¡œ ë§Œë“œëŠ”ê²Œ ë” ë¹ ë¥¸â€¦\nCustom Modal vs Link ë¬´í•œ ìŠ¤í¬ë¡¤ì„ ë„ì…í•  ë•Œ ë‹¤ìŒê³¼ ê°™ì€ ë‚´ìš©ì´ ê³ ë ¤ë˜ì—ˆìŠµë‹ˆë‹¤.\në¬´í•œ ìŠ¤í¬ë¡¤ì´ ì ìš©ëœ ë¦¬ìŠ¤íŠ¸ë¥¼ í´ë¦­í–ˆì„ë•Œ ì–´ë–¤ ì‹ìœ¼ë¡œ ìƒì„¸í˜ì´ì§€ë¥¼ ì œê³µí•  ê²ƒì¸ê°€? ìƒì„¸í˜ì´ì§€ì—ì„œ ë‹¤ì‹œ ë¦¬ìŠ¤íŠ¸ë¡œ ëŒì•„ê°ˆë•Œ ì´ë¯¸ ë¶ˆëŸ¬ì˜¨ ë°ì´í„°ë¥¼ ë‹¤ì‹œ ë¶ˆëŸ¬ì˜¤ì§€ ì•Šì•„ì•¼í•œë‹¤. 2ë²ˆì´ ì ìš©ëœë‹¤ë©´ ë‹¤ì‹œ ë¦¬ìŠ¤íŠ¸ë¡œ ëŒì•„ê°ˆë•Œ ìŠ¤í¬ë¡¤ í–ˆë˜ ìœ„ì¹˜ë¡œ ëŒì•„ê°€ì ¸ì•¼í•œë‹¤. ë¬´í•œ ìŠ¤í¬ë¡¤ì´ ë„ì…ë  ê³³ì€ ë‚´íì°¾ê¸°ì™€ ì»¤ë®¤ë‹ˆí‹° ì˜€ìŠµë‹ˆë‹¤. ë‹¤ë§Œ ë‘ ì¹´í…Œê³ ë¦¬ëŠ” ê°ì ë‹¤ë¥¸ íŠ¹ì„±ì„ ê°€ì§€ê³  ìˆìŠµë‹ˆë‹¤. ì„œë¹„ìŠ¤ í•µì‹¬ ëª¨ë¸ì´ ì ìš”ë˜ëŠ” ë‚´íì°¾ê¸°ì—ì„œëŠ” ìµœëŒ€í•œ ë¹ ë¥´ê²Œ ìœ ì €ì—ê²Œ ë¡œë”©ë˜ëŠ” ê²½í—˜ì„ ì£¼ì–´ì•¼í•˜ê³ , ì»¤ë®¤ë‹ˆí‹°ì—ì„œëŠ” ëŒ“ê¸€, ë‹µê¸€ ë“±ì˜ ì¶”ê°€ ê¸°ëŠ¥ë“¤ì´ í•„ìš”í–ˆìŠµë‹ˆë‹¤.\nì†ë„ê°€ ì¤‘ìš”í•œ ë‚´íì°¾ê¸°ì—ëŠ” Modal ì„ ì´ìš©í•˜ì˜€ìœ¼ë©°, API ìƒí˜¸ì‘ìš© ë° ìƒˆë¡œê³ ì¹¨ì´ í•„ìš”í•œ ì»¤ë®¤ë‹ˆí‹°ì—ì„œëŠ” ìƒˆë¡œìš´ í˜ì´ì§€ë¡œ ì´ë™í•˜ê³  ë’¤ë¡œê°€ê¸° ì‹œì— LocalStorageë¥¼ ì°¸ì¡°í•˜ì—¬ ì €ì¥ëœ ScrollYê°’ìœ¼ë¡œ ìŠ¤í¬ë¡¤ ì´ë™ë˜ê²Œ í•˜ì˜€ìŠµë‹ˆë‹¤.\në‚´íì°¾ê¸° (ì ìš©ëœ í˜ì´ì§€)\ní˜„ì¬ëŠ” SEO ë¬¸ì œë¡œ ëª¨ë‹¬ë¡œ í‘œí˜„ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤. CHECK ğŸ‘‰ Next.js] SSRë¥¼ ì´ìš©í•œ ìƒì„¸í˜ì´ì§€ SEO ìµœì í™” (ëª¨ë‹¬ì„ í¬ê¸°í•œ ì´ìœ )\ní˜ì´ì§€ ì´ë™ì—†ì´ Modalì´ ë³´ì—¬ì§€ëŠ” í˜•ì‹ìœ¼ë¡œ ì œê³µí•œë‹¤. Modalì´ ì—´ë¦´ë•Œ ë”°ë¡œ APIì—ì„œ ì •ë³´ ë¶ˆëŸ¬ì˜¤ì§€ ì•Šê³  ì¦‰ì‹œ ë³´ì—¬ì§ˆ ìˆ˜ ìˆë„ë¡ ë¦¬ìŠ¤íŠ¸ ë¶ˆëŸ¬ì˜¬ ë•Œ APIë¥¼ ëª¨ë‹¬ì•ˆì˜ ì •ë³´ê¹Œì§€ ì œê³µí•  ìˆ˜ ìˆë„ë¡ ì œì‘í•œë‹¤. í•œë²ˆ ë¶ˆëŸ¬ì˜¨ ì´ë¯¸ì§€ë‚˜ ìºì‹œì— ë‚¨ê²¨ ë¡œë”©í•  ë•Œë„ ë§¤ìš°ë¹ ë¥¸ ë¡œë”©ì†ë„ë¥¼ ì œê³µí•œë‹¤. ìŠ¤í¬ë¡¤ ì‹œ ë§ˆì§€ë§‰ ì•„ì´í…œì´ ë³´ì—¬ì§ˆ ë•Œ ë§ˆë‹¤ Fade in ì• ë‹ˆë©”ì´ì…˜ì„ ì ìš©í•˜ì—¬ ë¡œë”©ì´ ì¦‰ê°ì ìœ¼ë¡œ ë˜ëŠ” ê²ƒì²˜ëŸ¼ ë³´ì—¬ì§€ê²Œ í•œë‹¤. Infinite Scroll + Modal + aos fadein\nì»¤ë®¤ë‹ˆí‹° (ì ìš©ëœ í˜ì´ì§€)\nListì—ì„œ Item í´ë¦­ ì‹œ ìƒˆë¡œìš´ ìƒì„¸í˜ì´ì§€ë¡œ ì´ë™ ì´ë™í• ë•Œ ì´ë•Œ LocalStoargeì— scrollY ê°’ì„ ì €ì¥ ìƒì„¸í˜ì´ì§€ì—ì„œ ë‹¤ì‹œ ë¦¬ìŠ¤íŠ¸ë¡œ ëŒì•„ì˜¬ ë•Œ scrollY ê°’ìœ¼ë¡œ ìŠ¤í¬ë¡¤ ìœ„ì¹˜ ì´ë™ ë‹¨, ì´ë•Œ ì²˜ìŒë¶€í„° Listë¥¼ ë‹¤ì‹œ ë¶ˆëŸ¬ì˜¨ë‹¤ë©´ ì €ì¥ëœ scrollY ê°’ìœ¼ë¡œ ê°€ì§ˆ ìˆ˜ ì—†ìœ¼ë¯€ë¡œ (1ë²ˆ ì´ìƒ ì¶”ê°€ë¡œë”©ì´ ë˜ì—ˆì„ ê²½ìš°) ë¦¬ìŠ¤íŠ¸ ë°ì´í„°ëŠ” ìƒˆë¡œ ë¶ˆëŸ¬ì˜¤ë©´ ì•ˆëœë‹¤. Infinite Scroll + Link + LocalStorage\nAPI ì¤€ë¹„ APIëŠ” Djangoë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤. ModelViewSetì„ ì‚¬ìš©í•˜ì˜€ìœ¼ë©° LimitOffsetPaginationì„ ì ìš©í•˜ì˜€ìŠµë‹ˆë‹¤.\nì¼ë°˜ì ì¸ í˜ì´ì§€ í˜ì§€ë„¤ì´ì…˜ì˜ ê²½ìš° ì‚¬ìš©ìê°€ ë‹¤ìŒ ë¦¬ìŠ¤íŠ¸ë¥¼ ë¶ˆëŸ¬ì˜¤ê¸° ì „ì— ìƒˆë¡œìš´ ì•„ì´í…œì´ 1ê°œê°€ ë“±ë¡ë˜ê³  ë¦¬ìŠ¤íŠ¸ë¥¼ ë¶ˆëŸ¬ì˜¨ë‹¤ë©´ ì¤‘ë³µë˜ëŠ” ì•„ì´í…œì´ í‘œì‹œë  ìˆ˜ ìˆìœ¼ë¯€ë¡œ offset paginationì„ ì ìš©í•˜ì—¬ ì „ì²´ ê²Œì‹œê¸€ì´ ëŠ˜ì—ˆëŠ”ì§€ í™•ì¸í•˜ê³  ëŠ˜ì€ ë§Œí¼ offsetì„ ì¶”ê°€ë¡œ ë”í•´ì£¼ì–´ì•¼ ì¤‘ë³µë˜ëŠ” ì•„ì´í…œì„ ë°©ì§€í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\në¦¬ìŠ¤íŠ¸ì—ì„œ ë¡œë”©ë  í•„í„°ë§ ì¡°ê±´ì„ parameter ë¡œ ë°›ê¸° ìœ„í•´ querysetì„ ë³€ê²½í•˜ëŠ” ê³¼ì •ì´ í•„ìš”í•˜ì˜€ìŠµë‹ˆë‹¤. offsetë˜í•œ íŒŒë¼ë¯¸í„°ë¡œ ë°›ì•„ì˜µë‹ˆë‹¤.\nviews.py views.py 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 class someview(viewsets.ModelViewSet): queryset = somemodel.objects.exclude(Q(something)).prefetch_related(Prefetch(something)).all() permission_classes = somepermission serializer_class = someSerializer pagination_class = LimitOffsetPagination filter_backends = (somefilters) ordering_fields = ('created_at','id') ordering = ('-created_at') search_fields = ['$title', '$content'] filterset_fields = ('__all__') def get_queryset(self): qs = super().get_queryset() # some condition return qs.filter(Query) ë¦¬í„´ ì˜ˆì‹œ\nGET 1 2 3 4 5 6 7 8 { \"count\": 131, \"next\": \"apiì£¼ì†Œ/?limit=20\u0026offset=55\u0026í•„í„°ë§ì¡°ê±´\", \"previous\": \"apiì£¼ì†Œ/?limit=20\u0026offset=15\u0026í•„í„°ë§ì¡°ê±´\", \"results\":[ ... ] } Next í”„ë¡œì íŠ¸ êµ¬ì¡° Next + Tailwind + Typescript ìŠ¤íƒ€í„°íŒ©ì¸ theodorusclarence/ts-nextjs-tailwind-starterë¥¼ ì„¤ì¹˜í•˜ì˜€ìŠµë‹ˆë‹¤.\ní”„ë¡œì íŠ¸ êµ¬ì¡°ëŠ” ë‹¤ìŒì„ ì°¸ê³ í•´ì£¼ì‹œë©´ ë©ë‹ˆë‹¤.\nsrc Tree 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 . â”œâ”€â”€ components â”‚ â”œâ”€â”€ dialog â”‚ â”‚ â””â”€â”€ BaseDialog.tsx â”‚ â””â”€â”€ layout â”‚ â”œâ”€â”€ DialogZustandLayout.tsx â”‚ â””â”€â”€ Layout.tsx â”œâ”€â”€ hooks â”‚ â”œâ”€â”€ useDialog.tsx â”‚ â”œâ”€â”€ useObserver.js â”‚ â””â”€â”€ useIntersectionObserver.js â”œâ”€â”€ pages â”‚ â”œâ”€â”€ sandbox â”‚ â”‚ â””â”€â”€ dialog-zustand.tsx â”‚ â””â”€â”€ somepages â”œâ”€â”€ partials â”‚ â””â”€â”€ somepartials â”œâ”€â”€ store â”‚ â””â”€â”€ useDialogStore.tsx â””â”€â”€ utils â””â”€â”€ Transition.jsx infiniteScroll ì„¤ì¹˜ react-qeuryë¥¼ ì„¤ì¹˜í•´ì¤ë‹ˆë‹¤. ì‚¬ìš©ëœ ë²„ì „ì€ ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤.\npackage.json 1 2 3 ... \"react-query\": \"^3.39.2\", ... Hydrationì„ í†µí•´ SSR(Server Side Rendering)ì„ í•  ìˆ˜ ë„ ìˆì§€ë§Œ, ì‹œë„í•´ë³¸ ê²°ê³¼ ë§¤ ë’¤ë¡œê°€ê¸°ì‹œ ìºì‹±ë˜ì§€ ì•ŠëŠ” ë¬¸ì œê°€ ìˆì—ˆìŠµë‹ˆë‹¤. ì •í™•íˆ ë§í•˜ë©´ ì´ë¯¸ ë¡œë”©í–ˆë˜ ë‚´ìš©ë“¤ì„ ë‹¤ì‹œ ì²˜ìŒë¶€í„° ë¡œë”©í•´ì•¼ í–ˆìŠµë‹ˆë‹¤. ë‚´íì°¾ê¸° ì²˜ëŸ¼ ëª¨ë‹¬ì„ ì‚¬ìš©í•  ê²½ìš° Hydration ì‚¬ìš©í•´ë„ ì§€ì¥ì—†ì§€ë§Œ, í˜ì´ì§€ ì´ë™ì´ í•„ìš”í•œ ê²½ìš° í•´ë‹¹ ë°©ë²•ì„ ì‚¬ìš©í•˜ë©´ ë¹„íš¨ìœ¨ì ì…ë‹ˆë‹¤.\n_app.tsx (Hydration) src \u003e pages \u003e _app.tsx (Hydration) 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 /* eslint-disable @typescript-eslint/no-explicit-any */ import AOS from \"aos\"; import Head from \"next/head\"; import { SessionProvider } from \"next-auth/react\"; import React, { useEffect } from \"react\"; import { QueryClient, QueryClientProvider } from \"react-query\"; import \"@/styles/aos.scss\"; import \"@/styles/globals.css\"; import \"@/styles/colors.css\"; const MyApp: NextComponentType\u003cAppContext, AppInitialProps, AppProps\u003e = ({ Component, pageProps, }) =\u003e { const queryClientRef = React.useRef\u003cQueryClient\u003e(); if (!queryClientRef.current) { queryClientRef.current = new QueryClient(); } useEffect(() =\u003e { AOS.init({ once: true, duration: 500, easing: \"ease-out-cubic\", }); }); return ( \u003c\u003e \u003cQueryClientProvider client={queryClientRef.current}\u003e \u003cHydrate state={pageProps.dehydratedState}\u003e \u003cComponent {...pageProps} /\u003e \u003c/Hydrate\u003e {/* */} \u003c/QueryClientProvider\u003e \u003c/\u003e ); }; MyApp.getInitialProps = async ({ Component, ctx, }: AppContext): Promise\u003cAppInitialProps\u003e =\u003e { let pageProps = {}; if (Component.getInitialProps) { pageProps = await Component.getInitialProps(ctx); } return { pageProps }; }; export default MyApp; ë”°ë¼ì„œ ìµœì¢…ì ìœ¼ë¡œ ë‹¤ìŒê³¼ ê°™ì´ ì ìš©í–ˆìŠµë‹ˆë‹¤. ì¤‘ê°„ì— meta íƒœê·¸ëŠ” ì•„ì´í°ì—ì„œ ëª¨ë‹¬ì´ ì—´ë¦´ë•Œ ê°€ë¡œí­ì´ ê³ ì •ë˜ì§€ ì•ŠëŠ” ë¬¸ì œì ì„ í•´ê²°í•˜ê¸° ìœ„í•´ ë„£ì—ˆìœ¼ë©° ë”°ë¡œ meta tagë¥¼ ê´€ë¦¬í•˜ëŠ” ì»´í¬ë„ŒíŠ¸ê°€ ìˆìœ¼ë©´ ì¶”ê°€í•´ì£¼ì‹œë©´ ë©ë‹ˆë‹¤. ì»¤ë®¤ë‹ˆí‹°ì—ì„œ ëŒ“ê¸€ ì‘ì„±ì´ ë¡œê·¸ì¸ ì—¬ë¶€ë¥¼ í™•ì¸í•˜ê¸° ë•Œë¬¸ì— SessionProvider (next-auth)ê°€ ìˆìŠµë‹ˆë‹¤. ë¡œê·¸ì¸ êµ¬í˜„ì´ í•„ìš” ì—†ë‹¤ë©´ ë„˜ê¸°ì…”ë„ ë©ë‹ˆë‹¤.\n_app.tsx src \u003e pages \u003e _app.tsx 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 /* eslint-disable @typescript-eslint/no-explicit-any */ import AOS from \"aos\"; import Head from \"next/head\"; import { SessionProvider } from \"next-auth/react\"; import React, { useEffect } from \"react\"; import { QueryClient, QueryClientProvider } from \"react-query\"; import \"@/styles/aos.scss\"; import \"@/styles/globals.css\"; import \"@/styles/colors.css\"; const MyApp = ({ Component, pageProps: { session, ...pageProps }, }: { Component: any; pageProps: any; }) =\u003e { const [queryClient] = React.useState(() =\u003e new QueryClient()); // AOS ì• ë‹ˆë©”ì´ì…˜ ì ìš© useEffect(() =\u003e { AOS.init({ once: true, duration: 500, easing: \"ease-out-cubic\", }); }); (\"\"); return ( // next-auth ë¡œê·¸ì¸ ì„¸ì…˜ì„ ìœ„í•´ ì‚¬ìš©ë¨ \u003cSessionProvider session={session}\u003e \u003cHead\u003e {/* ì•„ì´í° ê°€ë¡œê°’ ê³ ì •ë˜ì§€ ì•ŠëŠ” ì´ìŠˆ í•´ê²° */} \u003cmeta name=\"viewport\" content=\"width=device-width, initial-scale=1, maximum-scale=1, viewport-fit=cover\" /\u003e \u003c/Head\u003e {/* infiniteScroll ìœ„í•´ ì„ ì–¸ */} \u003cQueryClientProvider client={queryClient}\u003e {/* PageProps í‘œì‹œ ì˜ì—­ */} \u003cComponent {...pageProps} /\u003e {/* Debug ëª¨ë“œì—ì„œë§Œ í™œìš©í•  devtools */} {/* import { ReactQueryDevtools } from 'react-query/devtools'; */} \u003c/QueryClientProvider\u003e \u003c/SessionProvider\u003e ); }; export default MyApp; ë¬´í•œ ë¡œë”© ë¦¬ìŠ¤íŠ¸ë¥¼ êµ¬í˜„í•˜ëŠ” í° ë¼ˆëŒ€ëŠ” ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤. useIntersectionObserve í›…ì„ ì‚¬ìš©í•˜ì—¬ ë¦¬ìŠ¤íŠ¸ë¥¼ fetch í• ì§€ë¥¼ í™•ì¸í•©ë‹ˆë‹¤.\nInfiniteListSkeleton.tsx InfiniteListSkeleton.tsx 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99 100 101 102 103 104 105 106 107 108 109 110 111 112 113 114 115 116 117 118 119 120 121 122 123 124 125 126 127 128 const InfiniteListSkeleton = ('í•„í„°ë§ ë  ë‚´ìš©ë“¤') =\u003e { const { data, hasNextPage, fetchNextPage, refetch, isFetching } = useInfiniteQuery( 'apiRequestFunction', ({ pageParam = '' }) =\u003e // FetchList í•¨ìˆ˜ëŠ” axiosë¡œ apiì— request ë³´ë‚´ëŠ” í•¨ìˆ˜ì…ë‹ˆë‹¤. (íŒŒë¼ë¯¸í„°ë¡œ í•„í„°ë§ ë  ë‚´ìš©ì„ ë°›ìŠµë‹ˆë‹¤.) FetchList( pageParam, 'í•„í„°ë§ ë  ë‚´ìš©ë“¤' ), { // ë‹¤ìŒ í˜ì´ì§€ëŠ” offset ìœ¼ë¡œ í™•ì¸í•©ë‹ˆë‹¤. getNextPageParam: (lastPage) =\u003e { if (lastPage.next === null) { return undefined; } const url = new URL(lastPage.next); const lastOffset = url.searchParams.get('offset'); if (lastOffset) { return parseInt(lastOffset); } else { return undefined; } }, staleTime: 60 * 1000, cacheTime: 60 * 1000, keepPreviousData: true, refetchOnMount: false, refetchOnWindowFocus: false, } ); // 1. ëª¨ë‹¬ë¡œ ì˜¤í”ˆí•  ê±°ë©´ (ì»¤ìŠ¤í…€ í›…) const dialog = useDialog(); const openModal = (props: Results) =\u003e { dialog({ title: '', description: \u003c\u003e\u003c/\u003e, catchOnCancel: true, submitText: 'ë„¤', cancleText: 'ë‹«ê¸°', variant: 'warning', props: props, }) .then() .catch(); return \u003c\u003e\u003c/\u003e; }; // 2. í˜ì´ì§€ ì´ë™í›„ ìŠ¤í¬ë¡¤ Y ê°’ì„ ì €ì¥í•˜ì—¬ í•´ë‹¹ ìœ„ì¹˜ë¡œ ë°”ë¡œ ë³´ì—¬ì§€ê²Œ í•  ê²½ìš° const [scrollY, setScrollY] = useLocalStorage('someScroll', 0); React.useEffect(() =\u003e { if (scrollY !== 0) { window.scrollTo(0, Number(scrollY)); setScrollY(0); } // eslint-disable-next-line react-hooks/exhaustive-deps }, []); // í•„í„°ê°€ ì ìš©ë˜ë©´ offsetì„ ì´ˆê¸°í™”í•˜ê³  ì²˜ìŒë¶€í„° ë¡œë”©ë˜ì–´ì•¼ í•©ë‹ˆë‹¤. React.useEffect(() =\u003e { if (isRefreshing) { refetch(); } setIsRefreshing(false); }, [isRefreshing, refetch, setIsRefreshing]); // useRefë¥¼ ì´ìš©í•˜ì—¬ í•´ë‹¹ Refë¥¼ í•˜ë‹¨ì— ë‘ê³  ë³´ì—¬ì§€ë©´ ë‹¤ìŒ í˜ì´ì§€ë¥¼ ë¡œë”©í•©ë‹ˆë‹¤. const loadMoreButtonRef = React.useRef(null); // https://developer.mozilla.org/ko/docs/Web/API/IntersectionObserver useIntersectionObserver({ root: null, target: loadMoreButtonRef, onIntersect: fetchNextPage, enabled: hasNextPage, }); return ( \u003c\u003e \u003cul\u003e {/* ë¡œë”©ì¤‘ì¼ë•Œ */} {isFetching \u0026\u0026 \u003cLoadingDiv /\u003e} {/* ë¦¬ìŠ¤íŠ¸ë¥¼ í‘œì‹œí•©ã„´ë””ã…. */} {data?.pages.map((page) =\u003e page.results.map((props: Results) =\u003e ( // data-aos ë¡œ ì• ë‹ˆë©”ì´ì…˜ íš¨ê³¼ë¥¼ ì¤ë‹ˆë‹¤. (ë¼ì´ë¸ŒëŸ¬ë¦¬ ì„¤ì¹˜ í•„ìš”)) \u003cli key={props.id} data-aos='fade-up' data-aos-duration='200'\u003e {/* 1. ëª¨ë‹¬ë¡œ ì˜¤í”ˆí• êº¼ë©´ */} \u003cdiv onClick={() =\u003e openModal(props)}\u003e Click ${props.id} to open Modal \u003c/div\u003e {/* 2. í˜ì´ì§€ ì´ë™í• ê±°ë©´ */} \u003cLink href={{ pathname: `url/${props.id}`, query: { props: JSON.stringify(props) }, }} as={`url/${props.id}`} passHref \u003e \u003ca href={`url/${props.id}`} onClick={() =\u003e setScrollY(window.scrollY)} \u003e \u003cdiv\u003eClick ${props.id} to navigate\u003c/div\u003e \u003c/a\u003e \u003c/Link\u003e \u003c/li\u003e )))} \u003c/ul\u003e {/* ë¡œë”©ì¤‘ í‘œì‹œë¥¼ í•˜ê³  refê°€ focus ë ë•Œ (ë¦¬ìŠ¤íŠ¸ì˜ ëì¼ë•Œ) ë§ˆë‹¤ ë‹¤ìŒ ë¦¬ìŠ¤íŠ¸ë¥¼ ë¡œë”©í•©ë‹ˆë‹¤. */} {hasNextPage \u0026\u0026 ( \u003c\u003e \u003cLoadingDiv /\u003e \u003cbutton onClick={() =\u003e fetchNextPage()} className='text-center' /\u003e \u003c/\u003e )} \u003cdiv ref={loadMoreButtonRef} /\u003e \u003c/\u003e ); }; export default InfiniteListSkeleton; apiRequestFunction.js ì•ì—ì„œ limitOffsetPagination ìœ¼ë¡œ ë§Œë“  APIë¥¼ ë¶ˆëŸ¬ì˜µë‹ˆë‹¤. ìƒí™©ì— ë”°ë¼ì„œ paramsê°€ ì¶”ê°€ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤. (í•„í„°ë§ ì¡°ê±´ ë“±)\nsrc \u003e pages \u003e api \u003e index.tsx 1 2 3 4 5 6 export const apiRequestFunction = async (offset = 0, ... , params) =\u003e { const { data } = await axios.get( `${apiUrl}?limit=${limit}\u0026offset=${offset}...` ); return data; }; useIntersectionObserver.js src \u003e hooks \u003e useIntersectionObserver.js 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 import React from \"react\"; export default function useIntersectionObserver({ root, target, onIntersect, threshold = 1.0, rootMargin = \"0px\", enabled = true, }) { React.useEffect(() =\u003e { if (!enabled) { return; } const observer = new IntersectionObserver( (entries) =\u003e entries.forEach((entry) =\u003e entry.isIntersecting \u0026\u0026 onIntersect()), { root: root \u0026\u0026 root.current, rootMargin, threshold, } ); const el = target \u0026\u0026 target.current; if (!el) { return; } observer.observe(el); return () =\u003e { observer.unobserve(el); }; }, [target, enabled, root, threshold, rootMargin, onIntersect]); } useObserver.js src \u003e hooks \u003e useObserver.js 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 import React from \"react\"; export default function useIntersectionObserver({ root, target, onIntersect, threshold = 1.0, rootMargin = \"0px\", enabled = true, }) { React.useEffect(() =\u003e { if (!enabled) { return; } const observer = new IntersectionObserver( (entries) =\u003e entries.forEach((entry) =\u003e entry.isIntersecting \u0026\u0026 onIntersect()), { root: root \u0026\u0026 root.current, rootMargin, threshold, } ); const el = target \u0026\u0026 target.current; if (!el) { return; } observer.observe(el); return () =\u003e { observer.unobserve(el); }; }, [target, enabled, root, threshold, rootMargin, onIntersect]); } infiniteScroll + Modal ëª¨ë‹¬ì€ theodorusclarence/expansion-packì˜ Dialog using Zustandë¥¼ ì„¤ì¹˜ í›„ ì»¤ìŠ¤í…€í•˜ì˜€ìŠµë‹ˆë‹¤. ì„¤ì¹˜í•˜ë©´ DialogZustandLayout.tsx ìƒ˜í”Œì´ ìƒê¹ë‹ˆë‹¤. ì´ë¥¼ ì°¸ê³ í•˜ì—¬ ìˆ˜ë™ìœ¼ë¡œ Layout.tsx ë¥¼ ìˆ˜ì •í•´ì£¼ì–´ì•¼í•©ë‹ˆë‹¤.\nLayout.tsx src \u003e layout \u003e Layout.tsx 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 import * as React from \"react\"; import BaseDialog from \"@/components/dialog/BaseDialog\"; import Footer from \"@/components/layout/Footer\"; import useDialogStore from \"@/store/useDialogStore\"; import Header from \"./Header\"; export default function Layout({ children }: { children: React.ReactNode }) { const open = useDialogStore.useOpen(); const state = useDialogStore.useState(); const handleClose = useDialogStore.useHandleClose(); const handleSubmit = useDialogStore.useHandleSubmit(); return ( \u003c\u003e \u003cHeader mode=\"\" /\u003e \u003csection className=\"min-h-full font-primary\"\u003e{children}\u003c/section\u003e \u003cBaseDialog onClose={handleClose} onSubmit={handleSubmit} open={open} options={state} /\u003e \u003cFooter /\u003e \u003c/\u003e ); } useDialog.tsx src \u003e hooks \u003e useDialog.tsx 1 2 3 4 5 import useDialogStore from \"@/store/useDialogStore\"; export default function useDialog() { return useDialogStore.useDialog(); } ì—¬ê¸°ê¹Œì§€ ì§„í–‰ë˜ë©´ ëª¨ë‹¬ì„ ì—´ ìˆ˜ ìˆëŠ” í™˜ê²½ì´ êµ¬ì„±ë©ë‹ˆë‹¤. src \u003e components \u003e dialog \u003e baseDialog.tsx ê°€ ëª¨ë‹¬ì°½ì…ë‹ˆë‹¤. ì›ë˜ëŠ” submtì´ë‚˜ errorë¥¼ í™•ì¸í•˜ëŠ” ëª¨ë‹¬ì´ì˜€ìœ¼ë¯€ë¡œ ë¦¬ìŠ¤íŠ¸ì—ì„œ í´ë¦­í•˜ì—¬ ëª¨ë‹¬ì´ ì—´ë¦´ë•Œ propsë¥¼ ê°™ì´ ë°›ì•„ì˜¬ ìˆ˜ ìˆë„ë¡ í•´ë‹¹ ë‚´ìš©ì„ ì»¤ìŠ¤í…€ í•´ì¤ë‹ˆë‹¤. optionsì— propsë¥¼ ì¶”ê°€í•˜ë©´ ë©ë‹ˆë‹¤.\nbaseDialog.tsx src \u003e components \u003e dialog \u003e baseDialog.tsx 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99 100 101 102 103 104 105 106 107 108 109 110 111 112 113 114 115 116 117 118 119 120 121 122 123 124 125 126 127 128 129 type BaseDialogProps = { open: boolean; onSubmit: () =\u003e void; onClose: () =\u003e void; options: DialogOptions; }; export type DialogOptions = { catchOnCancel?: boolean; title: React.ReactNode; description: React.ReactNode; variant: \"success\" | \"warning\" | \"danger\"; submitText: React.ReactNode; cancleText: React.ReactNode; props: Results | null; }; export default function BaseDialog({ open, onSubmit, onClose, options: { title, description, variant, submitText, cancleText, props }, // \u003c-- ì¶”ê°€ }: BaseDialogProps) { const current = colorVariant[variant]; return ( \u003cTransition.Root show={open} as={React.Fragment}\u003e \u003cDialog as=\"div\" static className=\"fixed inset-0 z-40 overflow-y-auto\" open={open} onClose={() =\u003e onClose()} \u003e \u003cdiv className=\"flex min-h-screen items-start justify-center px-5 py-5 text-center drop-shadow-xl sm:block sm:p-0 md:mt-16\"\u003e \u003cTransition.Child as={React.Fragment} enter=\"ease-out duration-300\" enterFrom=\"opacity-0\" enterTo=\"opacity-100\" leave=\"ease-in duration-300\" leaveFrom=\"opacity-100\" leaveTo=\"opacity-0\" \u003e \u003cDialog.Overlay className=\"fixed inset-0 bg-black bg-opacity-75 transition-opacity\" /\u003e \u003c/Transition.Child\u003e \u003cspan className=\"hidden sm:inline-block sm:h-screen sm:align-middle\" aria-hidden=\"true\" \u003e \u0026#8203; \u003c/span\u003e \u003cTransition.Child as={React.Fragment} enter=\"ease-out duration-300\" enterFrom=\"opacity-0 trangray-y-4 sm:trangray-y-0 sm:scale-95\" enterTo=\"opacity-100 trangray-y-0 sm:scale-100\" leave=\"ease-in duration-200\" leaveFrom=\"opacity-100 trangray-y-0 sm:scale-100\" leaveTo=\"opacity-0 trangray-y-4 sm:trangray-y-0 sm:scale-95\" \u003e \u003cdiv className=\"z-auto inline-block w-full transform overflow-hidden rounded-lg bg-white px-4 pt-5 pb-4 text-left align-bottom shadow-xl transition-all sm:my-12 sm:min-h-[1000px] sm:max-w-6xl sm:p-6 sm:align-middle\"\u003e \u003cdiv className=\"absolute top-0 right-0 block pt-4 pr-4\"\u003e \u003cbutton type=\"button\" className={clsx( \"rounded-md bg-white text-gray-400 hover:text-gray-500\", \"focus:outline-none focus:ring-2 focus:ring-gray-400 focus:ring-offset-2\", \"disabled:cursor-wait disabled:brightness-90 disabled:filter\" )} onClick={onClose} \u003e \u003cspan className=\"sr-only\"\u003eClose\u003c/span\u003e \u003cHiOutlineX className=\"h-6 w-6\" aria-hidden=\"true\" /\u003e \u003c/button\u003e \u003c/div\u003e \u003cdiv\u003e {/* ë¶ˆëŸ¬ì˜¨ propsë¥¼ í‘œì‹œí•´ì£¼ë©´ ë©ë‹ˆë‹¤. */} {props \u0026\u0026 \u003cdiv\u003e \u003c/div\u003e} \u003c/div\u003e \u003cdiv className=\"mt-5 sm:mt-4 sm:flex sm:flex-row-reverse\"\u003e \u003cButton type=\"button\" variant=\"outline\" onClick={onClose} className=\"font mt-3 w-full items-center justify-center !font-medium sm:mt-0 sm:w-auto sm:text-sm\" \u003e {cancleText} \u003c/Button\u003e \u003c/div\u003e \u003c/div\u003e \u003c/Transition.Child\u003e \u003c/div\u003e \u003c/Dialog\u003e \u003c/Transition.Root\u003e ); } const colorVariant = { success: { bg: { light: \"bg-green-100\", }, text: { primary: \"text-green-500\", }, icon: HiOutlineCheck, }, warning: { bg: { light: \"bg-yellow-100\", }, text: { primary: \"text-yellow-500\", }, icon: HiOutlineExclamation, }, danger: { bg: { light: \"bg-red-100\", }, text: { primary: \"text-red-500\", }, icon: HiExclamationCircle, }, }; useDialogStore.tsx src \u003e store \u003e useDialogStore.tsx 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 import { createSelectorHooks } from \"auto-zustand-selectors-hook\"; import produce from \"immer\"; import create from \"zustand\"; import { DialogOptions } from \"@/components/dialog/BaseDialog\"; type DialogStoreType = { awaitingPromise: { resolve?: () =\u003e void; reject?: () =\u003e void; }; open: boolean; state: DialogOptions; dialog: (options: Partial\u003cDialogOptions\u003e) =\u003e Promise\u003cvoid\u003e; handleClose: () =\u003e void; handleSubmit: () =\u003e void; }; const useDialogStoreBase = create\u003cDialogStoreType\u003e((set) =\u003e ({ awaitingPromise: {}, open: false, state: { title: \"Title\", description: \"Description\", submitText: \"Yes\", cancleText: \"No\", variant: \"warning\", catchOnCancel: false, props: null, // \u003c-- ì¶”ê°€ }, dialog: (options) =\u003e { set( produce\u003cDialogStoreType\u003e((state) =\u003e { state.open = true; state.state = { ...state.state, ...options }; }) ); return new Promise\u003cvoid\u003e((resolve, reject) =\u003e { set( produce\u003cDialogStoreType\u003e((state) =\u003e { state.awaitingPromise = { resolve, reject }; }) ); }); }, handleClose: () =\u003e { set( produce\u003cDialogStoreType\u003e((state) =\u003e { state.state.catchOnCancel \u0026\u0026 state.awaitingPromise?.reject?.(); state.open = false; }) ); }, handleSubmit: () =\u003e { set( produce\u003cDialogStoreType\u003e((state) =\u003e { state.awaitingPromise?.resolve?.(); state.open = false; }) ); }, })); const useDialogStore = createSelectorHooks(useDialogStoreBase); export default useDialogStore; ì´ì œ ì•„ê¹Œ ë§Œë“¤ì—ˆë˜ (ì˜ˆì œë¦¬ìŠ¤íŠ¸)ì²˜ëŸ¼ openModal í•¨ìˆ˜ì—ì„œ propsë¥¼ í•¨ê»˜ ë„˜ê²¨ì£¼ì–´ ëª¨ë‹¬ì´ ì—´ë¦´ë•Œ ë¯¸ë¦¬ ë°›ì•„ì˜¨ ë°ì´í„°ë¥¼ ë„˜ê²¨ë°›ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.\nopenModal with props 1 2 /* 1. ëª¨ë‹¬ë¡œ ì˜¤í”ˆí• êº¼ë©´ */ \u003cdiv onClick={() =\u003e openModal(props)}\u003eClick ${props.id} to open Modal\u003c/div\u003e consoleì— ì°ì–´ë³´ë©´ ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤. ë§¨ ì²˜ìŒ ë¦¬ìŠ¤íŠ¸ë¥¼ ë¶ˆëŸ¬ì˜¬ ë•Œ ëª¨ë‹¬ì— ë“¤ì–´ê°ˆ ë‚´ìš©ë“¤ë„ í•¨ê»˜ ë¶ˆëŸ¬ì™”ìœ¼ë¯€ë¡œ ëª¨ë‹¬ì´ ì—´ë¦´ë•Œ ì¶”ê°€ë¡œ apiì—ì„œ ë¶ˆëŸ¬ì˜¬ í•„ìš”ê°€ ì—†ì–´ì„œ ì¦‰ê°ì ìœ¼ë¡œ í‘œì‹œë˜ì–´ ë¡œë”©ì†ë„ê°€ ë¹ ë¥´ê²Œ ëŠê»´ì§€ëŠ” ì¥ì ì´ ìˆìŠµë‹ˆë‹¤.\nì‘ìš©í•˜ì—¬ ëª¨ë‹¬ì°½ì´ ì—´ë ¸ì„ ë•Œ ìƒˆë¡œê³ ì¹¨ì„ í•  ê²½ìš° router.push í•˜ì—¬ í•´ë‹¹ ì•„ì´í…œì˜ ìƒì„¸í˜ì´ì§€ë¡œ ì´ë™í•˜ê²Œ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë¹ ë¥¸ ë°˜ì‘ì„ ìœ„í•´ì„œ ë¦¬ìŠ¤íŠ¸ì—ì„œ í´ë¦­ ì‹œì—ë§Œ ëª¨ë‹¬ì´ ì—´ë¦¬ê³ , ìƒˆë¡œê³ ì¹¨, ë§í¬ê³µìœ , SEO ìµœì í™” ìœ„í•´ ìƒì„¸í˜ì´ì§€ë¥¼ ì œì‘í•´ ë‘ëŠ” ê²ƒì´ ì¢‹ìŠµë‹ˆë‹¤.\ninfiniteScroll + LocalStorage + ScrollY ë¦¬ìŠ¤íŠ¸ì—ì„œ ì•„ì´í…œì„ í´ë¦­í•  ë•Œ scrollYê°’ì„ LocalStorageì— ì €ì¥í•˜ê³ , useEffectë¥¼ ì´ìš©í•˜ì—¬ scrollYê°€ 0ì´ ì•„ë‹Œ ê²½ìš°ì—ëŠ” LocalStorageì— ì €ì¥ëœ scrollY ê°’ìœ¼ë¡œ ì´ë™ì‹œì¼œì£¼ë©´ ë©ë‹ˆë‹¤. Next/Linkë¥¼ ì‚¬ìš©í• ë•Œ onClick ì´ë²¤íŠ¸ë¥¼ ë°œìƒì‹œí‚¤ê¸° ìœ„í•´ì„œ a íƒœê·¸ë¥¼ ì¤‘ì²©ì‹œì¼œì£¼ì–´ì•¼ í•©ë‹ˆë‹¤.\nListExample.tsx ListExample.tsx 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 const ListExample = () =\u003e { const { data, hasNextPage, fetchNextPage, refetch, isFetching } = useInfiniteQuery( ... ); const loadMoreButtonRef = React.useRef(null); useIntersectionObserver({ root: null, target: loadMoreButtonRef, onIntersect: fetchNextPage, enabled: hasNextPage, }); // ìŠ¤í¬ë¡¤ ê°’ì„ í™•ì¸ const [scrollY, setScrollY] = useLocalStorage('PostListScroll', 0); React.useEffect(() =\u003e { if (scrollY !== 0) { window.scrollTo(0, Number(scrollY)); setScrollY(0); } // eslint-disable-next-line react-hooks/exhaustive-deps }, []); return ( \u003c\u003e \u003cul\u003e {isFetching \u0026\u0026 \u003cLoadingDiv /\u003e} {data?.pages.map((page) =\u003e page.results.map((post: Results) =\u003e ( \u003cli key={post.id} data-aos='fade-up' data-aos-duration='200'\u003e \u003cLink href={{ pathname: `community/post/${post.id}`, query: { post: JSON.stringify(post) }, }} as={`community/post/${post.id}`} passHref \u003e \u003ca href={`community/post/${post.id}`} onClick={() =\u003e setScrollY(window.scrollY)} // í´ë¦­ì‹œì— í•´ë‹¹ yê°’ì„ ì €ì¥í•´ì¤Œ \u003e \u003c/a\u003e \u003c/Link\u003e \u003c/li\u003e )) )} \u003c/ul\u003e \u003cdiv ref={loadMoreButtonRef} /\u003e \u003c/\u003e ); }; export default ListExample; ì½˜ì†”ì„ ì°ì–´ë³´ë©´ ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤. LocalStorageë¥¼ ì´ˆê¸°í™” í•´ì£¼ëŠ” ì¡°ê±´ì„ Headerë‚˜ ë‹¤ë¥¸ ê°ì‹¸ì§€ëŠ” ì»´í¬ë„ŒíŠ¸ì— ì¶”ê°€í•´ì£¼ì–´ì„œ Aë¦¬ìŠ¤íŠ¸ \u003e Bë¦¬ìŠ¤íŠ¸ \u003e Aë¦¬ìŠ¤íŠ¸ë¡œ ë‹¤ë¥¸ ë¦¬ìŠ¤íŠ¸ë¥¼ ê±°ì³ ëŒì•„ì™”ì„ë•Œ Aë¦¬ìŠ¤íŠ¸ì˜ scrollYê°’ì„ ì´ˆê¸°í™” í•´ì£¼ëŠ” ê²ƒë„ í•„ìš”í•©ë‹ˆë‹¤.\nì €ì˜ ê²½ìš°ì—” Headerì— ì¶”ê°€ì£¼ì—ˆìŠµë‹ˆë‹¤.\nheader.tsx header.tsx 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 ... const [, setCommunityScrollY] = useLocalStorage\u003cnumber\u003e('PostListScroll', 0); const NavigateCommunity = () =\u003e { setCommunityScrollY(0); router.push('/community'); window.scrollTo(0, 0); setMobileNavOpen(false); }; const [, setFindcueScrollY] = useLocalStorage\u003cnumber\u003e('CueListScroll', 0); const NavigateFindCue = () =\u003e { setFindcueScrollY(0); router.push('/findcue'); window.scrollTo(0, 0); setMobileNavOpen(false); }; ... ë§ˆì¹˜ë©° ì´ì œ ë¬´í•œ ìŠ¤í¬ë¡¤ì„ êµ¬í˜„í•  ë•Œ ìƒí™©ì— ë”°ë¼ì„œ ëª¨ë‹¬ë¡œ ì—´ê±°ë‚˜ ìƒˆë¡œìš´ í˜ì´ì§€ ì´ë™ í›„ ë’¤ë¡œê°€ê¸°ì‹œ ë¡œë”©ëœ ê°’ì€ ë‹¤ì‹œ ë¶ˆëŸ¬ì˜¤ì§€ ì•Šê³  í•´ë‹¹ ê°’ìœ¼ë¡œ ë‹¤ì‹œ ëŒì•„ì˜¤ê²Œ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\nReference https://github.com/theodorusclarence/ts-nextjs-tailwind-starter https://github.com/theodorusclarence/expansion-pack https://tanstack.com https://developer.mozilla.org/ko/docs/Web/API/IntersectionObserver https://velog.io/@hdpark ê¶ê¸ˆí•˜ì‹  ì ì´ ìˆìœ¼ì‹œë©´ ì•„ë˜ Comments ë‚¨ê²¨ì£¼ì„¸ìš” ğŸ‘‡\n",
  "wordCount" : "3092",
  "inLanguage": "en",
  "datePublished": "2023-01-04T00:00:00Z",
  "dateModified": "2023-01-04T00:00:00Z",
  "author":{
    "@type": "Person",
    "name": "cha2hyun"
  },
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https://cha2hyun.blog/content/projects/%ED%81%90%EC%B0%BE%EC%82%AC/infinitescroll/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "ì±„ìˆ˜í˜„ ê°œë°œì¼ì§€",
    "logo": {
      "@type": "ImageObject",
      "url": "https://cha2hyun.blog/favicon/favicon.ico"
    }
  }
}
</script>
</head>

<body class="" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    } else if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }

</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="https://cha2hyun.blog/" accesskey="h" title="ì±„ìˆ˜í˜„ ê°œë°œì¼ì§€ (Alt + H)">ì±„ìˆ˜í˜„ ê°œë°œì¼ì§€<span style="justify-content: center; padding-left:7px;">
                    <img src="https://hits.seeyoufarm.com/api/count/incr/badge.svg?url=https%3A%2F%2Fcha2hyun.blog&count_bg=%23000000&title_bg=%23000000&icon=&icon_color=%23E7E7E7&title=HITS&edge_flat=false"/>
                </span>
                <div style="font-size: 14px; margin-top:-30px; font-weight: normal;">ğŸ“š ê¸°ì–µì€ ìœ í•œí•˜ë‚˜, ê¸°ë¡ì€ ë¬´í•œí•˜ë‹¤</div>
            </a>            
        </div>
        <ul id="menu">
            <li>
                <a href="https://cha2hyun.blog/archives" title="ì „ì²´">
                    <span style="font-weight: bold;">ì „ì²´</span>
                </a>
            </li>
            <li>
                <a href="https://cha2hyun.blog/content/posts/" title="ê°œë°œì¼ìƒ">
                    <span style="font-weight: bold;">ê°œë°œì¼ìƒ</span>
                </a>
            </li>
            <li>
                <a href="https://cha2hyun.blog/content/projects/" title="í”„ë¡œì íŠ¸">
                    <span style="font-weight: bold;">í”„ë¡œì íŠ¸</span>
                </a>
            </li>
            <li>
                <a href="https://cha2hyun.blog/content/algorithm/" title="ì•Œê³ ë¦¬ì¦˜">
                    <span style="font-weight: bold;">ì•Œê³ ë¦¬ì¦˜</span>
                </a>
            </li>
            <li>
                <a href="https://cha2hyun.blog/search/" title="ê²€ìƒ‰">
                    <span style="font-weight: bold;">ê²€ìƒ‰</span>
                </a>
            </li>
            <li>
                <div class="logo-switches">
                    <button id="theme-toggle" accesskey="t" title="(Alt + T)">
                        <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                            fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                            stroke-linejoin="round">
                            <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                        </svg>
                        <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                            fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                            stroke-linejoin="round">
                            <circle cx="12" cy="12" r="5"></circle>
                            <line x1="12" y1="1" x2="12" y2="3"></line>
                            <line x1="12" y1="21" x2="12" y2="23"></line>
                            <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                            <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                            <line x1="1" y1="12" x2="3" y2="12"></line>
                            <line x1="21" y1="12" x2="23" y2="12"></line>
                            <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                            <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                        </svg>
                    </button>
                </div>
            </li>
        </ul>
        
    </nav>
    
    
</header>
<main class="main">

<article class="post-single">
  <header class="post-header">
    <div class="breadcrumbs"><a href="https://cha2hyun.blog/">Home</a>&nbsp;Â»&nbsp;<a href="https://cha2hyun.blog/content/">Contents</a>&nbsp;Â»&nbsp;<a href="https://cha2hyun.blog/content/projects/">Projects</a></div>
    <h1 class="post-title entry-hint-parent">
      InfiniteScrollë¡œ ë¬´í•œ ìŠ¤í¬ë¡¤ êµ¬í˜„í•˜ê¸°
    </h1>
    <div class="post-meta"><span title='2023-01-04 00:00:00 +0000 UTC'>January 4, 2023</span>&nbsp;Â·&nbsp;15 min&nbsp;Â·&nbsp;cha2hyun


    </div>
  </header> <div class="toc">
    <details  open>
        <summary accesskey="c" title="(Alt + C)">
            <span class="details">Table of Contents</span>
        </summary>

        <div class="inner"><ul>
                <li>
                    <a href="#%eb%93%a4%ec%96%b4%ea%b0%80%eb%a9%b0" aria-label="ë“¤ì–´ê°€ë©°">ë“¤ì–´ê°€ë©°</a></li>
                <li>
                    <a href="#custom-modal-vs-link" aria-label="Custom Modal vs Link">Custom Modal vs Link</a></li>
                <li>
                    <a href="#api-%ec%a4%80%eb%b9%84" aria-label="API ì¤€ë¹„">API ì¤€ë¹„</a><ul>
                        
                <li>
                    <a href="#viewspy" aria-label="views.py">views.py</a></li></ul>
                </li>
                <li>
                    <a href="#next-%ed%94%84%eb%a1%9c%ec%a0%9d%ed%8a%b8-%ea%b5%ac%ec%a1%b0" aria-label="Next í”„ë¡œì íŠ¸ êµ¬ì¡°">Next í”„ë¡œì íŠ¸ êµ¬ì¡°</a><ul>
                        
                <li>
                    <a href="#src-tree" aria-label="src Tree">src Tree</a></li></ul>
                </li>
                <li>
                    <a href="#infinitescroll-%ec%84%a4%ec%b9%98" aria-label="infiniteScroll ì„¤ì¹˜">infiniteScroll ì„¤ì¹˜</a><ul>
                        
                <li>
                    <a href="#_apptsx-hydration" aria-label="_app.tsx (Hydration)">_app.tsx (Hydration)</a></li>
                <li>
                    <a href="#_apptsx" aria-label="_app.tsx">_app.tsx</a></li>
                <li>
                    <a href="#infinitelistskeletontsx" aria-label="InfiniteListSkeleton.tsx">InfiniteListSkeleton.tsx</a></li>
                <li>
                    <a href="#apirequestfunctionjs" aria-label="apiRequestFunction.js">apiRequestFunction.js</a></li>
                <li>
                    <a href="#useintersectionobserverjs" aria-label="useIntersectionObserver.js">useIntersectionObserver.js</a></li>
                <li>
                    <a href="#useobserverjs" aria-label="useObserver.js">useObserver.js</a></li></ul>
                </li>
                <li>
                    <a href="#infinitescroll--modal" aria-label="infiniteScroll &#43; Modal">infiniteScroll + Modal</a><ul>
                        
                <li>
                    <a href="#layouttsx" aria-label="Layout.tsx">Layout.tsx</a></li>
                <li>
                    <a href="#usedialogtsx" aria-label="useDialog.tsx">useDialog.tsx</a></li>
                <li>
                    <a href="#basedialogtsx" aria-label="baseDialog.tsx">baseDialog.tsx</a></li>
                <li>
                    <a href="#usedialogstoretsx" aria-label="useDialogStore.tsx">useDialogStore.tsx</a></li></ul>
                </li>
                <li>
                    <a href="#infinitescroll--localstorage--scrolly" aria-label="infiniteScroll &#43; LocalStorage &#43; ScrollY">infiniteScroll + LocalStorage + ScrollY</a><ul>
                        
                <li>
                    <a href="#listexampletsx" aria-label="ListExample.tsx">ListExample.tsx</a></li>
                <li>
                    <a href="#headertsx" aria-label="header.tsx">header.tsx</a></li></ul>
                </li>
                <li>
                    <a href="#%eb%a7%88%ec%b9%98%eb%a9%b0" aria-label="ë§ˆì¹˜ë©°">ë§ˆì¹˜ë©°</a><ul>
                        
                <li>
                    <a href="#reference" aria-label="Reference">Reference</a>
                </li>
            </ul>
            </li>
            </ul>
        </div>
    </details>
</div>

  <div class="post-content"><br>
<h3 id="ë“¤ì–´ê°€ë©°">ë“¤ì–´ê°€ë©°<a hidden class="anchor" aria-hidden="true" href="#ë“¤ì–´ê°€ë©°">#</a></h3>
<p>ìƒˆë¡œìš´ í™ˆí˜ì´ì§€ë¥¼ ê¸°íš, ê°œë°œí•˜ë©´ì„œ ìµœëŒ€í•œ <code>ì•±</code>ê³¼ ë™ì¼í•œ ì‚¬ìš©ì ê²½í—˜ì„ ì£¼ê¸° ìœ„í•´ ê³ ë¯¼ì„ ë§ì´ í–ˆìŠµë‹ˆë‹¤. ì¼ë°˜ì ì¸ í˜ì§€ë„¤ì´ì…˜ìœ¼ë¡œëŠ” ëª¨ë°”ì¼ì—ì„œ <code>ì•±</code>ê³¼ ê°™ì€ ê²½í—˜ì„ ì£¼ì§€ ëª»í•˜ëŠ” ì ì´ ì•„ì‰¬ìš´ ì ì´ ìˆìŠµë‹ˆë‹¤. <code>React Query</code>ì˜ <code>infiniteScroll</code>ì„ <code>infiniteScroll</code>ì„ ë„ì…í•˜ë©´ì„œ ë°°ìš´ ë‚´ìš©ë“¤ì„ ë‹¤ë£¹ë‹ˆë‹¤. ì†ë„ê°€ ì¤‘ìš”í•œ ê²ƒì€ Modalë¡œ í‘œì‹œí•˜ê³  ìƒí˜¸ì‘ìš©ì´ ì¤‘ìš”í•œ ê²ƒì€ Linkë¡œ í˜ì´ì§€ ì´ë™í•˜ì˜€ìŠµë‹ˆë‹¤. ì´ë¯¸ì§€ ìºì‹±ì„ ìœ„í•œ ë°©ë²•ê³¼ ë¶ˆëŸ¬ì˜¨ ë°ì´í„°ë¥¼ íš¨ê³¼ì ìœ¼ë¡œ ì €ì¥í•˜ëŠ” ë°©ë²•ì— ëŒ€í•´ì„œ ì•Œì•„ë´…ë‹ˆë‹¤. APIëŠ” ì¥ê³ ë¡œ ë§Œë“¤ì—ˆìŠµë‹ˆë‹¤.</p>
<p><figure class="align-center ">
    <img loading="lazy" src="../img/1.png#center"
         alt="ê³ ì¹˜ëŠ” ê²ƒ ë³´ë‹¤ ìƒˆë¡œ ë§Œë“œëŠ”ê²Œ ë” ë¹ ë¥¸&amp;hellip;"/> <figcaption>
            <p>ê³ ì¹˜ëŠ” ê²ƒ ë³´ë‹¤ ìƒˆë¡œ ë§Œë“œëŠ”ê²Œ ë” ë¹ ë¥¸&hellip;</p>
        </figcaption>
</figure>

<br></p>
<h3 id="custom-modal-vs-link">Custom Modal vs Link<a hidden class="anchor" aria-hidden="true" href="#custom-modal-vs-link">#</a></h3>
<p>ë¬´í•œ ìŠ¤í¬ë¡¤ì„ ë„ì…í•  ë•Œ ë‹¤ìŒê³¼ ê°™ì€ ë‚´ìš©ì´ ê³ ë ¤ë˜ì—ˆìŠµë‹ˆë‹¤.</p>
<ol>
<li>ë¬´í•œ ìŠ¤í¬ë¡¤ì´ ì ìš©ëœ ë¦¬ìŠ¤íŠ¸ë¥¼ í´ë¦­í–ˆì„ë•Œ ì–´ë–¤ ì‹ìœ¼ë¡œ ìƒì„¸í˜ì´ì§€ë¥¼ ì œê³µí•  ê²ƒì¸ê°€?</li>
<li>ìƒì„¸í˜ì´ì§€ì—ì„œ ë‹¤ì‹œ ë¦¬ìŠ¤íŠ¸ë¡œ ëŒì•„ê°ˆë•Œ ì´ë¯¸ ë¶ˆëŸ¬ì˜¨ ë°ì´í„°ë¥¼ ë‹¤ì‹œ ë¶ˆëŸ¬ì˜¤ì§€ ì•Šì•„ì•¼í•œë‹¤.</li>
<li>2ë²ˆì´ ì ìš©ëœë‹¤ë©´ ë‹¤ì‹œ ë¦¬ìŠ¤íŠ¸ë¡œ ëŒì•„ê°ˆë•Œ ìŠ¤í¬ë¡¤ í–ˆë˜ ìœ„ì¹˜ë¡œ ëŒì•„ê°€ì ¸ì•¼í•œë‹¤.</li>
</ol>
<p>ë¬´í•œ ìŠ¤í¬ë¡¤ì´ ë„ì…ë  ê³³ì€ <code>ë‚´íì°¾ê¸°</code>ì™€ <code>ì»¤ë®¤ë‹ˆí‹°</code> ì˜€ìŠµë‹ˆë‹¤. ë‹¤ë§Œ ë‘ ì¹´í…Œê³ ë¦¬ëŠ” ê°ì ë‹¤ë¥¸ íŠ¹ì„±ì„ ê°€ì§€ê³  ìˆìŠµë‹ˆë‹¤. ì„œë¹„ìŠ¤ í•µì‹¬ ëª¨ë¸ì´ ì ìš”ë˜ëŠ” <code>ë‚´íì°¾ê¸°</code>ì—ì„œëŠ” ìµœëŒ€í•œ ë¹ ë¥´ê²Œ ìœ ì €ì—ê²Œ ë¡œë”©ë˜ëŠ” ê²½í—˜ì„ ì£¼ì–´ì•¼í•˜ê³ , <code>ì»¤ë®¤ë‹ˆí‹°</code>ì—ì„œëŠ” ëŒ“ê¸€, ë‹µê¸€ ë“±ì˜ ì¶”ê°€ ê¸°ëŠ¥ë“¤ì´ í•„ìš”í–ˆìŠµë‹ˆë‹¤.</p>
<p>ì†ë„ê°€ ì¤‘ìš”í•œ <code>ë‚´íì°¾ê¸°</code>ì—ëŠ” <code>Modal</code> ì„ ì´ìš©í•˜ì˜€ìœ¼ë©°, API ìƒí˜¸ì‘ìš© ë° ìƒˆë¡œê³ ì¹¨ì´ í•„ìš”í•œ <code>ì»¤ë®¤ë‹ˆí‹°</code>ì—ì„œëŠ” <code>ìƒˆë¡œìš´ í˜ì´ì§€</code>ë¡œ ì´ë™í•˜ê³  ë’¤ë¡œê°€ê¸° ì‹œì— LocalStorageë¥¼ ì°¸ì¡°í•˜ì—¬ ì €ì¥ëœ ScrollYê°’ìœ¼ë¡œ ìŠ¤í¬ë¡¤ ì´ë™ë˜ê²Œ í•˜ì˜€ìŠµë‹ˆë‹¤.</p>
<p><strong>ë‚´íì°¾ê¸°</strong> <a href="https://www.cue8949.com/findcue" target="_blank">(ì ìš©ëœ í˜ì´ì§€)</a></p>
<blockquote>
<p>í˜„ì¬ëŠ” SEO ë¬¸ì œë¡œ ëª¨ë‹¬ë¡œ í‘œí˜„ë˜ì§€ ì•ŠìŠµë‹ˆë‹¤. <br /><strong>CHECK</strong> ğŸ‘‰ <a href="/projects/íì°¾ì‚¬/ssrandseo">Next.js] SSRë¥¼ ì´ìš©í•œ ìƒì„¸í˜ì´ì§€ SEO ìµœì í™”</a> (ëª¨ë‹¬ì„ í¬ê¸°í•œ ì´ìœ )</p>
</blockquote>
<ul>
<li>í˜ì´ì§€ ì´ë™ì—†ì´ <code>Modal</code>ì´ ë³´ì—¬ì§€ëŠ” í˜•ì‹ìœ¼ë¡œ ì œê³µí•œë‹¤.</li>
<li><code>Modal</code>ì´ ì—´ë¦´ë•Œ ë”°ë¡œ APIì—ì„œ ì •ë³´ ë¶ˆëŸ¬ì˜¤ì§€ ì•Šê³  ì¦‰ì‹œ ë³´ì—¬ì§ˆ ìˆ˜ ìˆë„ë¡ ë¦¬ìŠ¤íŠ¸ ë¶ˆëŸ¬ì˜¬ ë•Œ APIë¥¼ ëª¨ë‹¬ì•ˆì˜ ì •ë³´ê¹Œì§€ ì œê³µí•  ìˆ˜ ìˆë„ë¡ ì œì‘í•œë‹¤.</li>
<li>í•œë²ˆ ë¶ˆëŸ¬ì˜¨ ì´ë¯¸ì§€ë‚˜ <code>ìºì‹œ</code>ì— ë‚¨ê²¨ ë¡œë”©í•  ë•Œë„ ë§¤ìš°ë¹ ë¥¸ ë¡œë”©ì†ë„ë¥¼ ì œê³µí•œë‹¤.</li>
<li>ìŠ¤í¬ë¡¤ ì‹œ ë§ˆì§€ë§‰ ì•„ì´í…œì´ ë³´ì—¬ì§ˆ ë•Œ ë§ˆë‹¤ Fade in ì• ë‹ˆë©”ì´ì…˜ì„ ì ìš©í•˜ì—¬ ë¡œë”©ì´ ì¦‰ê°ì ìœ¼ë¡œ ë˜ëŠ” ê²ƒì²˜ëŸ¼ ë³´ì—¬ì§€ê²Œ í•œë‹¤.</li>
</ul>
<figure class="align-center ">
    <img loading="lazy" src="../img/2.gif#center"
         alt="Infinite Scroll &#43; Modal &#43; aos fadein"/> <figcaption>
            <p><code>Infinite Scroll</code> + <code>Modal</code> + <code>aos fadein</code></p>
        </figcaption>
</figure>

<p><strong>ì»¤ë®¤ë‹ˆí‹°</strong> <a href="https://www.cue8949.com/community" target="_blank">(ì ìš©ëœ í˜ì´ì§€)</a></p>
<ul>
<li><code>List</code>ì—ì„œ <code>Item</code> í´ë¦­ ì‹œ <code>ìƒˆë¡œìš´ ìƒì„¸í˜ì´ì§€</code>ë¡œ ì´ë™</li>
<li>ì´ë™í• ë•Œ ì´ë•Œ <code>LocalStoarge</code>ì— <code>scrollY</code> ê°’ì„ ì €ì¥</li>
<li>ìƒì„¸í˜ì´ì§€ì—ì„œ ë‹¤ì‹œ ë¦¬ìŠ¤íŠ¸ë¡œ ëŒì•„ì˜¬ ë•Œ <code>scrollY ê°’ìœ¼ë¡œ ìŠ¤í¬ë¡¤ ìœ„ì¹˜ ì´ë™</code></li>
<li>ë‹¨, ì´ë•Œ ì²˜ìŒë¶€í„° Listë¥¼ ë‹¤ì‹œ ë¶ˆëŸ¬ì˜¨ë‹¤ë©´ ì €ì¥ëœ scrollY ê°’ìœ¼ë¡œ ê°€ì§ˆ ìˆ˜ ì—†ìœ¼ë¯€ë¡œ (1ë²ˆ ì´ìƒ ì¶”ê°€ë¡œë”©ì´ ë˜ì—ˆì„ ê²½ìš°) <code>ë¦¬ìŠ¤íŠ¸ ë°ì´í„°ëŠ” ìƒˆë¡œ ë¶ˆëŸ¬ì˜¤ë©´ ì•ˆëœë‹¤</code>.</li>
</ul>
<figure class="align-center ">
    <img loading="lazy" src="../img/3.gif#center"
         alt="Infinite Scroll &#43; Link &#43; LocalStorage"/> <figcaption>
            <p><code>Infinite Scroll</code> + <code>Link</code> + <code>LocalStorage</code></p>
        </figcaption>
</figure>

<br>
<h3 id="api-ì¤€ë¹„">API ì¤€ë¹„<a hidden class="anchor" aria-hidden="true" href="#api-ì¤€ë¹„">#</a></h3>
<p>APIëŠ” Djangoë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤. ModelViewSetì„ ì‚¬ìš©í•˜ì˜€ìœ¼ë©° <code>LimitOffsetPagination</code>ì„ ì ìš©í•˜ì˜€ìŠµë‹ˆë‹¤.</p>
<p>ì¼ë°˜ì ì¸ í˜ì´ì§€ í˜ì§€ë„¤ì´ì…˜ì˜ ê²½ìš° ì‚¬ìš©ìê°€ ë‹¤ìŒ ë¦¬ìŠ¤íŠ¸ë¥¼ ë¶ˆëŸ¬ì˜¤ê¸° ì „ì— ìƒˆë¡œìš´ ì•„ì´í…œì´ 1ê°œê°€ ë“±ë¡ë˜ê³  ë¦¬ìŠ¤íŠ¸ë¥¼ ë¶ˆëŸ¬ì˜¨ë‹¤ë©´ ì¤‘ë³µë˜ëŠ” ì•„ì´í…œì´ í‘œì‹œë  ìˆ˜ ìˆìœ¼ë¯€ë¡œ offset paginationì„ ì ìš©í•˜ì—¬ ì „ì²´ ê²Œì‹œê¸€ì´ ëŠ˜ì—ˆëŠ”ì§€ í™•ì¸í•˜ê³  ëŠ˜ì€ ë§Œí¼ offsetì„ ì¶”ê°€ë¡œ ë”í•´ì£¼ì–´ì•¼ ì¤‘ë³µë˜ëŠ” ì•„ì´í…œì„ ë°©ì§€í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
<p>ë¦¬ìŠ¤íŠ¸ì—ì„œ ë¡œë”©ë  <code>í•„í„°ë§ ì¡°ê±´</code>ì„ <code>parameter</code> ë¡œ ë°›ê¸° ìœ„í•´ querysetì„ ë³€ê²½í•˜ëŠ” ê³¼ì •ì´ í•„ìš”í•˜ì˜€ìŠµë‹ˆë‹¤. <code>offset</code>ë˜í•œ íŒŒë¼ë¯¸í„°ë¡œ ë°›ì•„ì˜µë‹ˆë‹¤.</p>
<h4 id="viewspy"><code>views.py</code><a hidden class="anchor" aria-hidden="true" href="#viewspy">#</a></h4>


<div class="terminal space shadow">
  <div class="top">
    <div class="btns">
      <span class="circle red"></span>
      <span class="circle yellow"></span>
      <span class="circle green"></span>
    </div>
    <div class="title">
      views.py
    </div>
  </div>
  <div class="terminalbody"><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">someview</span><span class="p">(</span><span class="n">viewsets</span><span class="o">.</span><span class="n">ModelViewSet</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">    <span class="n">queryset</span> <span class="o">=</span> <span class="n">somemodel</span><span class="o">.</span><span class="n">objects</span><span class="o">.</span><span class="n">exclude</span><span class="p">(</span><span class="n">Q</span><span class="p">(</span><span class="n">something</span><span class="p">))</span><span class="o">.</span><span class="n">prefetch_related</span><span class="p">(</span><span class="n">Prefetch</span><span class="p">(</span><span class="n">something</span><span class="p">))</span><span class="o">.</span><span class="n">all</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">    <span class="n">permission_classes</span> <span class="o">=</span> <span class="n">somepermission</span>
</span></span><span class="line"><span class="cl">    <span class="n">serializer_class</span> <span class="o">=</span> <span class="n">someSerializer</span>
</span></span><span class="line"><span class="cl">    <span class="n">pagination_class</span> <span class="o">=</span> <span class="n">LimitOffsetPagination</span>
</span></span><span class="line"><span class="cl">    <span class="n">filter_backends</span> <span class="o">=</span> <span class="p">(</span><span class="n">somefilters</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="n">ordering_fields</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;created_at&#39;</span><span class="p">,</span><span class="s1">&#39;id&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="n">ordering</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;-created_at&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="n">search_fields</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;$title&#39;</span><span class="p">,</span> <span class="s1">&#39;$content&#39;</span><span class="p">]</span>
</span></span><span class="line"><span class="cl">    <span class="n">filterset_fields</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;__all__&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="k">def</span> <span class="nf">get_queryset</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">        <span class="n">qs</span> <span class="o">=</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">get_queryset</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">        <span class="c1"># some condition</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="n">qs</span><span class="o">.</span><span class="n">filter</span><span class="p">(</span><span class="n">Query</span><span class="p">)</span>
</span></span></code></pre></td></tr></table>
</div>
</div></div>
</div>
<br />

<p>ë¦¬í„´ ì˜ˆì‹œ</p>


<div class="terminal space shadow">
  <div class="top">
    <div class="btns">
      <span class="circle red"></span>
      <span class="circle yellow"></span>
      <span class="circle green"></span>
    </div>
    <div class="title">
      GET
    </div>
  </div>
  <div class="terminalbody"><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-Json" data-lang="Json"><span class="line"><span class="cl"><span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;count&#34;</span><span class="p">:</span> <span class="mi">131</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;next&#34;</span><span class="p">:</span> <span class="s2">&#34;apiì£¼ì†Œ/?limit=20&amp;offset=55&amp;í•„í„°ë§ì¡°ê±´&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;previous&#34;</span><span class="p">:</span> <span class="s2">&#34;apiì£¼ì†Œ/?limit=20&amp;offset=15&amp;í•„í„°ë§ì¡°ê±´&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nt">&#34;results&#34;</span><span class="p">:[</span>
</span></span><span class="line"><span class="cl">        <span class="err">...</span>
</span></span><span class="line"><span class="cl">    <span class="p">]</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div></div>
</div>
<br />

<h3 id="next-í”„ë¡œì íŠ¸-êµ¬ì¡°">Next í”„ë¡œì íŠ¸ êµ¬ì¡°<a hidden class="anchor" aria-hidden="true" href="#next-í”„ë¡œì íŠ¸-êµ¬ì¡°">#</a></h3>
<p>Next + Tailwind + Typescript ìŠ¤íƒ€í„°íŒ©ì¸ <a href="https://github.com/theodorusclarence/ts-nextjs-tailwind-starter" target="_blank">theodorusclarence/ts-nextjs-tailwind-starter</a>ë¥¼ ì„¤ì¹˜í•˜ì˜€ìŠµë‹ˆë‹¤.</p>
<p>í”„ë¡œì íŠ¸ êµ¬ì¡°ëŠ” ë‹¤ìŒì„ ì°¸ê³ í•´ì£¼ì‹œë©´ ë©ë‹ˆë‹¤.</p>
<h4 id="src-tree"><code>src Tree</code><a hidden class="anchor" aria-hidden="true" href="#src-tree">#</a></h4>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">.
</span></span><span class="line"><span class="cl">â”œâ”€â”€ components
</span></span><span class="line"><span class="cl">â”‚   â”œâ”€â”€ dialog
</span></span><span class="line"><span class="cl">â”‚   â”‚   â””â”€â”€ BaseDialog.tsx
</span></span><span class="line"><span class="cl">â”‚   â””â”€â”€ layout
</span></span><span class="line"><span class="cl">â”‚       â”œâ”€â”€ DialogZustandLayout.tsx
</span></span><span class="line"><span class="cl">â”‚       â””â”€â”€ Layout.tsx
</span></span><span class="line"><span class="cl">â”œâ”€â”€ hooks
</span></span><span class="line"><span class="cl">â”‚   â”œâ”€â”€ useDialog.tsx
</span></span><span class="line"><span class="cl">â”‚   â”œâ”€â”€ useObserver.js
</span></span><span class="line"><span class="cl">â”‚   â””â”€â”€ useIntersectionObserver.js
</span></span><span class="line"><span class="cl">â”œâ”€â”€ pages
</span></span><span class="line"><span class="cl">â”‚   â”œâ”€â”€ sandbox
</span></span><span class="line"><span class="cl">â”‚   â”‚   â””â”€â”€ dialog-zustand.tsx
</span></span><span class="line"><span class="cl">â”‚   â””â”€â”€ somepages
</span></span><span class="line"><span class="cl">â”œâ”€â”€ partials
</span></span><span class="line"><span class="cl">â”‚   â””â”€â”€ somepartials
</span></span><span class="line"><span class="cl">â”œâ”€â”€ store
</span></span><span class="line"><span class="cl">â”‚   â””â”€â”€ useDialogStore.tsx
</span></span><span class="line"><span class="cl">â””â”€â”€ utils
</span></span><span class="line"><span class="cl">    â””â”€â”€ Transition.jsx
</span></span></code></pre></td></tr></table>
</div>
</div><br>
<h3 id="infinitescroll-ì„¤ì¹˜">infiniteScroll ì„¤ì¹˜<a hidden class="anchor" aria-hidden="true" href="#infinitescroll-ì„¤ì¹˜">#</a></h3>
<p>react-qeuryë¥¼ ì„¤ì¹˜í•´ì¤ë‹ˆë‹¤. ì‚¬ìš©ëœ ë²„ì „ì€ ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤.</p>


<div class="terminal space shadow">
  <div class="top">
    <div class="btns">
      <span class="circle red"></span>
      <span class="circle yellow"></span>
      <span class="circle green"></span>
    </div>
    <div class="title">
      package.json
    </div>
  </div>
  <div class="terminalbody"><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-Json" data-lang="Json"><span class="line"><span class="cl"><span class="err">...</span>
</span></span><span class="line"><span class="cl"><span class="s2">&#34;react-query&#34;</span><span class="err">:</span> <span class="s2">&#34;^3.39.2&#34;</span><span class="err">,</span>
</span></span><span class="line"><span class="cl"><span class="err">...</span>
</span></span></code></pre></td></tr></table>
</div>
</div></div>
</div>
<br />

<p>Hydrationì„ í†µí•´ SSR(Server Side Rendering)ì„ í•  ìˆ˜ ë„ ìˆì§€ë§Œ, ì‹œë„í•´ë³¸ ê²°ê³¼ ë§¤ ë’¤ë¡œê°€ê¸°ì‹œ <code>ìºì‹±ë˜ì§€ ì•ŠëŠ” ë¬¸ì œ</code>ê°€ ìˆì—ˆìŠµë‹ˆë‹¤. ì •í™•íˆ ë§í•˜ë©´ ì´ë¯¸ ë¡œë”©í–ˆë˜ ë‚´ìš©ë“¤ì„ ë‹¤ì‹œ ì²˜ìŒë¶€í„° ë¡œë”©í•´ì•¼ í–ˆìŠµë‹ˆë‹¤. ë‚´íì°¾ê¸° ì²˜ëŸ¼ ëª¨ë‹¬ì„ ì‚¬ìš©í•  ê²½ìš° Hydration ì‚¬ìš©í•´ë„ ì§€ì¥ì—†ì§€ë§Œ, í˜ì´ì§€ ì´ë™ì´ í•„ìš”í•œ ê²½ìš° í•´ë‹¹ ë°©ë²•ì„ ì‚¬ìš©í•˜ë©´ ë¹„íš¨ìœ¨ì ì…ë‹ˆë‹¤.</p>
<h4 id="_apptsx-hydration"><code>_app.tsx (Hydration)</code><a hidden class="anchor" aria-hidden="true" href="#_apptsx-hydration">#</a></h4>


<div class="terminal space shadow">
  <div class="top">
    <div class="btns">
      <span class="circle red"></span>
      <span class="circle yellow"></span>
      <span class="circle green"></span>
    </div>
    <div class="title">
      src &gt; pages &gt; _app.tsx (Hydration)
    </div>
  </div>
  <div class="terminalbody"><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span><span class="lnt">51
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-typescript" data-lang="typescript"><span class="line"><span class="cl"><span class="cm">/* eslint-disable @typescript-eslint/no-explicit-any */</span>
</span></span><span class="line"><span class="cl"><span class="kr">import</span> <span class="nx">AOS</span> <span class="kr">from</span> <span class="s2">&#34;aos&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="kr">import</span> <span class="nx">Head</span> <span class="kr">from</span> <span class="s2">&#34;next/head&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="kr">import</span> <span class="p">{</span> <span class="nx">SessionProvider</span> <span class="p">}</span> <span class="kr">from</span> <span class="s2">&#34;next-auth/react&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="kr">import</span> <span class="nx">React</span><span class="p">,</span> <span class="p">{</span> <span class="nx">useEffect</span> <span class="p">}</span> <span class="kr">from</span> <span class="s2">&#34;react&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="kr">import</span> <span class="p">{</span> <span class="nx">QueryClient</span><span class="p">,</span> <span class="nx">QueryClientProvider</span> <span class="p">}</span> <span class="kr">from</span> <span class="s2">&#34;react-query&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kr">import</span> <span class="s2">&#34;@/styles/aos.scss&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="kr">import</span> <span class="s2">&#34;@/styles/globals.css&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="kr">import</span> <span class="s2">&#34;@/styles/colors.css&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">MyApp</span>: <span class="kt">NextComponentType</span><span class="p">&lt;</span><span class="nt">AppContext</span><span class="err">,</span> <span class="na">AppInitialProps</span><span class="err">,</span> <span class="na">AppProps</span><span class="p">&gt;</span> <span class="o">=</span> <span class="p">({</span>
</span></span><span class="line"><span class="cl">  <span class="nx">Component</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="nx">pageProps</span><span class="p">,</span>
</span></span><span class="line"><span class="cl"><span class="p">})</span> <span class="o">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="kr">const</span> <span class="nx">queryClientRef</span> <span class="o">=</span> <span class="nx">React</span><span class="p">.</span><span class="nx">useRef</span><span class="p">&lt;</span><span class="nt">QueryClient</span><span class="p">&gt;();</span>
</span></span><span class="line"><span class="cl">  <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">queryClientRef</span><span class="p">.</span><span class="nx">current</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">queryClientRef</span><span class="p">.</span><span class="nx">current</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">QueryClient</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl">  <span class="nx">useEffect</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">AOS</span><span class="p">.</span><span class="nx">init</span><span class="p">({</span>
</span></span><span class="line"><span class="cl">      <span class="nx">once</span>: <span class="kt">true</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="nx">duration</span>: <span class="kt">500</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="nx">easing</span><span class="o">:</span> <span class="s2">&#34;ease-out-cubic&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="p">});</span>
</span></span><span class="line"><span class="cl">  <span class="p">});</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="k">return</span> <span class="p">(</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;&gt;</span>
</span></span><span class="line"><span class="cl">      <span class="p">&lt;</span><span class="nt">QueryClientProvider</span> <span class="na">client</span><span class="o">=</span><span class="p">{</span><span class="nx">queryClientRef</span><span class="p">.</span><span class="nx">current</span><span class="p">}&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="p">&lt;</span><span class="nt">Hydrate</span> <span class="na">state</span><span class="o">=</span><span class="p">{</span><span class="nx">pageProps</span><span class="p">.</span><span class="nx">dehydratedState</span><span class="p">}&gt;</span>
</span></span><span class="line"><span class="cl">          <span class="p">&lt;</span><span class="nt">Component</span> <span class="p">{</span><span class="na">...pageProps</span><span class="p">}</span> <span class="p">/&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="p">&lt;/</span><span class="nt">Hydrate</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="p">{</span><span class="cm">/* &lt;ReactQueryDevtools /&gt; */</span><span class="p">}</span>
</span></span><span class="line"><span class="cl">      <span class="p">&lt;/</span><span class="nt">QueryClientProvider</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;/&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span><span class="line"><span class="cl"><span class="nx">MyApp</span><span class="p">.</span><span class="nx">getInitialProps</span> <span class="o">=</span> <span class="kr">async</span> <span class="p">({</span>
</span></span><span class="line"><span class="cl">  <span class="nx">Component</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="nx">ctx</span><span class="p">,</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span><span class="o">:</span> <span class="nx">AppContext</span><span class="p">)</span><span class="o">:</span> <span class="nx">Promise</span><span class="p">&lt;</span><span class="nt">AppInitialProps</span><span class="p">&gt;</span> <span class="o">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="kd">let</span> <span class="nx">pageProps</span> <span class="o">=</span> <span class="p">{};</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="k">if</span> <span class="p">(</span><span class="nx">Component</span><span class="p">.</span><span class="nx">getInitialProps</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">pageProps</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">Component</span><span class="p">.</span><span class="nx">getInitialProps</span><span class="p">(</span><span class="nx">ctx</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">  <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="k">return</span> <span class="p">{</span> <span class="nx">pageProps</span> <span class="p">};</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span><span class="line"><span class="cl"><span class="kr">export</span> <span class="k">default</span> <span class="nx">MyApp</span><span class="p">;</span>
</span></span></code></pre></td></tr></table>
</div>
</div></div>
</div>
<br />

<p>ë”°ë¼ì„œ ìµœì¢…ì ìœ¼ë¡œ ë‹¤ìŒê³¼ ê°™ì´ ì ìš©í–ˆìŠµë‹ˆë‹¤. ì¤‘ê°„ì— <code>meta</code> íƒœê·¸ëŠ” ì•„ì´í°ì—ì„œ ëª¨ë‹¬ì´ ì—´ë¦´ë•Œ ê°€ë¡œí­ì´ ê³ ì •ë˜ì§€ ì•ŠëŠ” ë¬¸ì œì ì„ í•´ê²°í•˜ê¸° ìœ„í•´ ë„£ì—ˆìœ¼ë©° ë”°ë¡œ meta tagë¥¼ ê´€ë¦¬í•˜ëŠ” ì»´í¬ë„ŒíŠ¸ê°€ ìˆìœ¼ë©´ ì¶”ê°€í•´ì£¼ì‹œë©´ ë©ë‹ˆë‹¤. ì»¤ë®¤ë‹ˆí‹°ì—ì„œ ëŒ“ê¸€ ì‘ì„±ì´ ë¡œê·¸ì¸ ì—¬ë¶€ë¥¼ í™•ì¸í•˜ê¸° ë•Œë¬¸ì— <code>SessionProvider (next-auth)</code>ê°€ ìˆìŠµë‹ˆë‹¤. ë¡œê·¸ì¸ êµ¬í˜„ì´ í•„ìš” ì—†ë‹¤ë©´ ë„˜ê¸°ì…”ë„ ë©ë‹ˆë‹¤.</p>
<h4 id="_apptsx"><code>_app.tsx</code><a hidden class="anchor" aria-hidden="true" href="#_apptsx">#</a></h4>


<div class="terminal space shadow">
  <div class="top">
    <div class="btns">
      <span class="circle red"></span>
      <span class="circle yellow"></span>
      <span class="circle green"></span>
    </div>
    <div class="title">
      src &gt; pages &gt; _app.tsx
    </div>
  </div>
  <div class="terminalbody"><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span><span class="lnt">51
</span><span class="lnt">52
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-typescript" data-lang="typescript"><span class="line"><span class="cl"><span class="cm">/* eslint-disable @typescript-eslint/no-explicit-any */</span>
</span></span><span class="line"><span class="cl"><span class="kr">import</span> <span class="nx">AOS</span> <span class="kr">from</span> <span class="s2">&#34;aos&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="kr">import</span> <span class="nx">Head</span> <span class="kr">from</span> <span class="s2">&#34;next/head&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="kr">import</span> <span class="p">{</span> <span class="nx">SessionProvider</span> <span class="p">}</span> <span class="kr">from</span> <span class="s2">&#34;next-auth/react&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="kr">import</span> <span class="nx">React</span><span class="p">,</span> <span class="p">{</span> <span class="nx">useEffect</span> <span class="p">}</span> <span class="kr">from</span> <span class="s2">&#34;react&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="kr">import</span> <span class="p">{</span> <span class="nx">QueryClient</span><span class="p">,</span> <span class="nx">QueryClientProvider</span> <span class="p">}</span> <span class="kr">from</span> <span class="s2">&#34;react-query&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kr">import</span> <span class="s2">&#34;@/styles/aos.scss&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="kr">import</span> <span class="s2">&#34;@/styles/globals.css&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="kr">import</span> <span class="s2">&#34;@/styles/colors.css&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">MyApp</span> <span class="o">=</span> <span class="p">({</span>
</span></span><span class="line"><span class="cl">  <span class="nx">Component</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="nx">pageProps</span><span class="o">:</span> <span class="p">{</span> <span class="nx">session</span><span class="p">,</span> <span class="p">...</span><span class="nx">pageProps</span> <span class="p">},</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span><span class="o">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">Component</span>: <span class="kt">any</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="nx">pageProps</span>: <span class="kt">any</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">})</span> <span class="o">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="kr">const</span> <span class="p">[</span><span class="nx">queryClient</span><span class="p">]</span> <span class="o">=</span> <span class="nx">React</span><span class="p">.</span><span class="nx">useState</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="k">new</span> <span class="nx">QueryClient</span><span class="p">());</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="c1">// AOS ì• ë‹ˆë©”ì´ì…˜ ì ìš©
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="nx">useEffect</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">AOS</span><span class="p">.</span><span class="nx">init</span><span class="p">({</span>
</span></span><span class="line"><span class="cl">      <span class="nx">once</span>: <span class="kt">true</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="nx">duration</span>: <span class="kt">500</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="nx">easing</span><span class="o">:</span> <span class="s2">&#34;ease-out-cubic&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="p">});</span>
</span></span><span class="line"><span class="cl">  <span class="p">});</span>
</span></span><span class="line"><span class="cl">  <span class="p">(</span><span class="s2">&#34;&#34;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">  <span class="k">return</span> <span class="p">(</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// next-auth ë¡œê·¸ì¸ ì„¸ì…˜ì„ ìœ„í•´ ì‚¬ìš©ë¨
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>    <span class="p">&lt;</span><span class="nt">SessionProvider</span> <span class="na">session</span><span class="o">=</span><span class="p">{</span><span class="nx">session</span><span class="p">}&gt;</span>
</span></span><span class="line"><span class="cl">      <span class="p">&lt;</span><span class="nt">Head</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="p">{</span><span class="cm">/* ì•„ì´í° ê°€ë¡œê°’ ê³ ì •ë˜ì§€ ì•ŠëŠ” ì´ìŠˆ í•´ê²° */</span><span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="p">&lt;</span><span class="nt">meta</span>
</span></span><span class="line"><span class="cl">          <span class="na">name</span><span class="o">=</span><span class="s">&#34;viewport&#34;</span>
</span></span><span class="line"><span class="cl">          <span class="na">content</span><span class="o">=</span><span class="s">&#34;width=device-width, initial-scale=1, maximum-scale=1, viewport-fit=cover&#34;</span>
</span></span><span class="line"><span class="cl">        <span class="p">/&gt;</span>
</span></span><span class="line"><span class="cl">      <span class="p">&lt;/</span><span class="nt">Head</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">      <span class="p">{</span><span class="cm">/* infiniteScroll ìœ„í•´ ì„ ì–¸ */</span><span class="p">}</span>
</span></span><span class="line"><span class="cl">      <span class="p">&lt;</span><span class="nt">QueryClientProvider</span> <span class="na">client</span><span class="o">=</span><span class="p">{</span><span class="nx">queryClient</span><span class="p">}&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="p">{</span><span class="cm">/* PageProps í‘œì‹œ ì˜ì—­ */</span><span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="p">&lt;</span><span class="nt">Component</span> <span class="p">{</span><span class="na">...pageProps</span><span class="p">}</span> <span class="p">/&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="p">{</span><span class="cm">/* Debug ëª¨ë“œì—ì„œë§Œ í™œìš©í•  devtools */</span><span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="p">{</span><span class="cm">/* import { ReactQueryDevtools } from &#39;react-query/devtools&#39;;
</span></span></span><span class="line"><span class="cl"><span class="cm">        &lt;ReactQueryDevtools initialIsOpen={false} /&gt; */</span><span class="p">}</span>
</span></span><span class="line"><span class="cl">      <span class="p">&lt;/</span><span class="nt">QueryClientProvider</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;/</span><span class="nt">SessionProvider</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kr">export</span> <span class="k">default</span> <span class="nx">MyApp</span><span class="p">;</span>
</span></span></code></pre></td></tr></table>
</div>
</div></div>
</div>
<br />

<p>ë¬´í•œ ë¡œë”© ë¦¬ìŠ¤íŠ¸ë¥¼ êµ¬í˜„í•˜ëŠ” í° ë¼ˆëŒ€ëŠ” ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤. <code>useIntersectionObserve</code> í›…ì„ ì‚¬ìš©í•˜ì—¬ ë¦¬ìŠ¤íŠ¸ë¥¼ fetch í• ì§€ë¥¼ í™•ì¸í•©ë‹ˆë‹¤.</p>
<h4 id="infinitelistskeletontsx"><code>InfiniteListSkeleton.tsx</code><a hidden class="anchor" aria-hidden="true" href="#infinitelistskeletontsx">#</a></h4>


<div class="terminal space shadow">
  <div class="top">
    <div class="btns">
      <span class="circle red"></span>
      <span class="circle yellow"></span>
      <span class="circle green"></span>
    </div>
    <div class="title">
      InfiniteListSkeleton.tsx
    </div>
  </div>
  <div class="terminalbody"><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">  1
</span><span class="lnt">  2
</span><span class="lnt">  3
</span><span class="lnt">  4
</span><span class="lnt">  5
</span><span class="lnt">  6
</span><span class="lnt">  7
</span><span class="lnt">  8
</span><span class="lnt">  9
</span><span class="lnt"> 10
</span><span class="lnt"> 11
</span><span class="lnt"> 12
</span><span class="lnt"> 13
</span><span class="lnt"> 14
</span><span class="lnt"> 15
</span><span class="lnt"> 16
</span><span class="lnt"> 17
</span><span class="lnt"> 18
</span><span class="lnt"> 19
</span><span class="lnt"> 20
</span><span class="lnt"> 21
</span><span class="lnt"> 22
</span><span class="lnt"> 23
</span><span class="lnt"> 24
</span><span class="lnt"> 25
</span><span class="lnt"> 26
</span><span class="lnt"> 27
</span><span class="lnt"> 28
</span><span class="lnt"> 29
</span><span class="lnt"> 30
</span><span class="lnt"> 31
</span><span class="lnt"> 32
</span><span class="lnt"> 33
</span><span class="lnt"> 34
</span><span class="lnt"> 35
</span><span class="lnt"> 36
</span><span class="lnt"> 37
</span><span class="lnt"> 38
</span><span class="lnt"> 39
</span><span class="lnt"> 40
</span><span class="lnt"> 41
</span><span class="lnt"> 42
</span><span class="lnt"> 43
</span><span class="lnt"> 44
</span><span class="lnt"> 45
</span><span class="lnt"> 46
</span><span class="lnt"> 47
</span><span class="lnt"> 48
</span><span class="lnt"> 49
</span><span class="lnt"> 50
</span><span class="lnt"> 51
</span><span class="lnt"> 52
</span><span class="lnt"> 53
</span><span class="lnt"> 54
</span><span class="lnt"> 55
</span><span class="lnt"> 56
</span><span class="lnt"> 57
</span><span class="lnt"> 58
</span><span class="lnt"> 59
</span><span class="lnt"> 60
</span><span class="lnt"> 61
</span><span class="lnt"> 62
</span><span class="lnt"> 63
</span><span class="lnt"> 64
</span><span class="lnt"> 65
</span><span class="lnt"> 66
</span><span class="lnt"> 67
</span><span class="lnt"> 68
</span><span class="lnt"> 69
</span><span class="lnt"> 70
</span><span class="lnt"> 71
</span><span class="lnt"> 72
</span><span class="lnt"> 73
</span><span class="lnt"> 74
</span><span class="lnt"> 75
</span><span class="lnt"> 76
</span><span class="lnt"> 77
</span><span class="lnt"> 78
</span><span class="lnt"> 79
</span><span class="lnt"> 80
</span><span class="lnt"> 81
</span><span class="lnt"> 82
</span><span class="lnt"> 83
</span><span class="lnt"> 84
</span><span class="lnt"> 85
</span><span class="lnt"> 86
</span><span class="lnt"> 87
</span><span class="lnt"> 88
</span><span class="lnt"> 89
</span><span class="lnt"> 90
</span><span class="lnt"> 91
</span><span class="lnt"> 92
</span><span class="lnt"> 93
</span><span class="lnt"> 94
</span><span class="lnt"> 95
</span><span class="lnt"> 96
</span><span class="lnt"> 97
</span><span class="lnt"> 98
</span><span class="lnt"> 99
</span><span class="lnt">100
</span><span class="lnt">101
</span><span class="lnt">102
</span><span class="lnt">103
</span><span class="lnt">104
</span><span class="lnt">105
</span><span class="lnt">106
</span><span class="lnt">107
</span><span class="lnt">108
</span><span class="lnt">109
</span><span class="lnt">110
</span><span class="lnt">111
</span><span class="lnt">112
</span><span class="lnt">113
</span><span class="lnt">114
</span><span class="lnt">115
</span><span class="lnt">116
</span><span class="lnt">117
</span><span class="lnt">118
</span><span class="lnt">119
</span><span class="lnt">120
</span><span class="lnt">121
</span><span class="lnt">122
</span><span class="lnt">123
</span><span class="lnt">124
</span><span class="lnt">125
</span><span class="lnt">126
</span><span class="lnt">127
</span><span class="lnt">128
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-Typescript" data-lang="Typescript"><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">InfiniteListSkeleton</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;í•„í„°ë§ ë  ë‚´ìš©ë“¤&#39;</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="kr">const</span> <span class="p">{</span> <span class="nx">data</span><span class="p">,</span> <span class="nx">hasNextPage</span><span class="p">,</span> <span class="nx">fetchNextPage</span><span class="p">,</span> <span class="nx">refetch</span><span class="p">,</span> <span class="nx">isFetching</span> <span class="p">}</span> <span class="o">=</span>
</span></span><span class="line"><span class="cl">    <span class="nx">useInfiniteQuery</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">      <span class="s1">&#39;apiRequestFunction&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="p">({</span> <span class="nx">pageParam</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span> <span class="p">})</span> <span class="o">=&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="c1">// FetchList í•¨ìˆ˜ëŠ” axiosë¡œ apiì— request ë³´ë‚´ëŠ” í•¨ìˆ˜ì…ë‹ˆë‹¤. (íŒŒë¼ë¯¸í„°ë¡œ í•„í„°ë§ ë  ë‚´ìš©ì„ ë°›ìŠµë‹ˆë‹¤.)
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="nx">FetchList</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">          <span class="nx">pageParam</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">          <span class="s1">&#39;í•„í„°ë§ ë  ë‚´ìš©ë“¤&#39;</span>
</span></span><span class="line"><span class="cl">        <span class="p">),</span>
</span></span><span class="line"><span class="cl">      <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="c1">// ë‹¤ìŒ í˜ì´ì§€ëŠ” offset ìœ¼ë¡œ í™•ì¸í•©ë‹ˆë‹¤.
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>        <span class="nx">getNextPageParam</span><span class="o">:</span> <span class="p">(</span><span class="nx">lastPage</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">          <span class="k">if</span> <span class="p">(</span><span class="nx">lastPage</span><span class="p">.</span><span class="nx">next</span> <span class="o">===</span> <span class="kc">null</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="k">return</span> <span class="kc">undefined</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">          <span class="p">}</span>
</span></span><span class="line"><span class="cl">          <span class="kr">const</span> <span class="nx">url</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">URL</span><span class="p">(</span><span class="nx">lastPage</span><span class="p">.</span><span class="nx">next</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">          <span class="kr">const</span> <span class="nx">lastOffset</span> <span class="o">=</span> <span class="nx">url</span><span class="p">.</span><span class="nx">searchParams</span><span class="p">.</span><span class="kr">get</span><span class="p">(</span><span class="s1">&#39;offset&#39;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">          <span class="k">if</span> <span class="p">(</span><span class="nx">lastOffset</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="k">return</span> <span class="nb">parseInt</span><span class="p">(</span><span class="nx">lastOffset</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">          <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="k">return</span> <span class="kc">undefined</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">          <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="p">},</span>
</span></span><span class="line"><span class="cl">        <span class="nx">staleTime</span>: <span class="kt">60</span> <span class="o">*</span> <span class="mi">1000</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="nx">cacheTime</span>: <span class="kt">60</span> <span class="o">*</span> <span class="mi">1000</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="nx">keepPreviousData</span>: <span class="kt">true</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="nx">refetchOnMount</span>: <span class="kt">false</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="nx">refetchOnWindowFocus</span>: <span class="kt">false</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="c1">// 1. ëª¨ë‹¬ë¡œ ì˜¤í”ˆí•  ê±°ë©´ (ì»¤ìŠ¤í…€ í›…)
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="kr">const</span> <span class="nx">dialog</span> <span class="o">=</span> <span class="nx">useDialog</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">  <span class="kr">const</span> <span class="nx">openModal</span> <span class="o">=</span> <span class="p">(</span><span class="nx">props</span>: <span class="kt">Results</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">dialog</span><span class="p">({</span>
</span></span><span class="line"><span class="cl">      <span class="nx">title</span><span class="o">:</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="nx">description</span><span class="o">:</span> <span class="p">&lt;&gt;&lt;/&gt;,</span>
</span></span><span class="line"><span class="cl">      <span class="nx">catchOnCancel</span>: <span class="kt">true</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="nx">submitText</span><span class="o">:</span> <span class="s1">&#39;ë„¤&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="nx">cancleText</span><span class="o">:</span> <span class="s1">&#39;ë‹«ê¸°&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="nx">variant</span><span class="o">:</span> <span class="s1">&#39;warning&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="nx">props</span>: <span class="kt">props</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="p">})</span>
</span></span><span class="line"><span class="cl">      <span class="p">.</span><span class="nx">then</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">      <span class="p">.</span><span class="k">catch</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="p">&lt;&gt;&lt;/&gt;;</span>
</span></span><span class="line"><span class="cl">  <span class="p">};</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="c1">// 2. í˜ì´ì§€ ì´ë™í›„ ìŠ¤í¬ë¡¤ Y ê°’ì„ ì €ì¥í•˜ì—¬ í•´ë‹¹ ìœ„ì¹˜ë¡œ ë°”ë¡œ ë³´ì—¬ì§€ê²Œ í•  ê²½ìš°
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="kr">const</span> <span class="p">[</span><span class="nx">scrollY</span><span class="p">,</span> <span class="nx">setScrollY</span><span class="p">]</span> <span class="o">=</span> <span class="nx">useLocalStorage</span><span class="p">(</span><span class="s1">&#39;someScroll&#39;</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">  <span class="nx">React</span><span class="p">.</span><span class="nx">useEffect</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">if</span> <span class="p">(</span><span class="nx">scrollY</span> <span class="o">!==</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="nb">window</span><span class="p">.</span><span class="nx">scrollTo</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nb">Number</span><span class="p">(</span><span class="nx">scrollY</span><span class="p">));</span>
</span></span><span class="line"><span class="cl">      <span class="nx">setScrollY</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// eslint-disable-next-line react-hooks/exhaustive-deps
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="p">},</span> <span class="p">[]);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="c1">// í•„í„°ê°€ ì ìš©ë˜ë©´ offsetì„ ì´ˆê¸°í™”í•˜ê³  ì²˜ìŒë¶€í„° ë¡œë”©ë˜ì–´ì•¼ í•©ë‹ˆë‹¤.
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="nx">React</span><span class="p">.</span><span class="nx">useEffect</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">if</span> <span class="p">(</span><span class="nx">isRefreshing</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="nx">refetch</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="nx">setIsRefreshing</span><span class="p">(</span><span class="kc">false</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">  <span class="p">},</span> <span class="p">[</span><span class="nx">isRefreshing</span><span class="p">,</span> <span class="nx">refetch</span><span class="p">,</span> <span class="nx">setIsRefreshing</span><span class="p">]);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="c1">// useRefë¥¼ ì´ìš©í•˜ì—¬ í•´ë‹¹ Refë¥¼ í•˜ë‹¨ì— ë‘ê³  ë³´ì—¬ì§€ë©´ ë‹¤ìŒ í˜ì´ì§€ë¥¼ ë¡œë”©í•©ë‹ˆë‹¤.
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="kr">const</span> <span class="nx">loadMoreButtonRef</span> <span class="o">=</span> <span class="nx">React</span><span class="p">.</span><span class="nx">useRef</span><span class="p">(</span><span class="kc">null</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">  <span class="c1">// https://developer.mozilla.org/ko/docs/Web/API/IntersectionObserver
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="nx">useIntersectionObserver</span><span class="p">({</span>
</span></span><span class="line"><span class="cl">    <span class="nx">root</span>: <span class="kt">null</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nx">target</span>: <span class="kt">loadMoreButtonRef</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nx">onIntersect</span>: <span class="kt">fetchNextPage</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nx">enabled</span>: <span class="kt">hasNextPage</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="p">});</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="k">return</span> <span class="p">(</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;&gt;</span>
</span></span><span class="line"><span class="cl">      <span class="p">&lt;</span><span class="nt">ul</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="p">{</span><span class="cm">/* ë¡œë”©ì¤‘ì¼ë•Œ */</span><span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="p">{</span><span class="nx">isFetching</span> <span class="o">&amp;&amp;</span> <span class="p">&lt;</span><span class="nt">LoadingDiv</span> <span class="p">/&gt;}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="p">{</span><span class="cm">/* ë¦¬ìŠ¤íŠ¸ë¥¼ í‘œì‹œí•©ã„´ë””ã…. */</span><span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="p">{</span><span class="nx">data</span><span class="o">?</span><span class="p">.</span><span class="nx">pages</span><span class="p">.</span><span class="nx">map</span><span class="p">((</span><span class="nx">page</span><span class="p">)</span> <span class="o">=&gt;</span>
</span></span><span class="line"><span class="cl">          <span class="nx">page</span><span class="p">.</span><span class="nx">results</span><span class="p">.</span><span class="nx">map</span><span class="p">((</span><span class="nx">props</span>: <span class="kt">Results</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">(</span>
</span></span><span class="line"><span class="cl">            <span class="c1">// data-aos ë¡œ ì• ë‹ˆë©”ì´ì…˜ íš¨ê³¼ë¥¼ ì¤ë‹ˆë‹¤. (ë¼ì´ë¸ŒëŸ¬ë¦¬ ì„¤ì¹˜ í•„ìš”))
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>            <span class="p">&lt;</span><span class="nt">li</span> <span class="na">key</span><span class="o">=</span><span class="p">{</span><span class="nx">props</span><span class="p">.</span><span class="nx">id</span><span class="p">}</span> <span class="na">data</span><span class="err">-</span><span class="na">aos</span><span class="o">=</span><span class="s">&#39;fade-up&#39;</span> <span class="na">data</span><span class="err">-</span><span class="na">aos</span><span class="err">-</span><span class="na">duration</span><span class="o">=</span><span class="s">&#39;200&#39;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">              <span class="p">{</span><span class="cm">/* 1. ëª¨ë‹¬ë¡œ ì˜¤í”ˆí• êº¼ë©´ */</span><span class="p">}</span>
</span></span><span class="line"><span class="cl">              <span class="p">&lt;</span><span class="nt">div</span> <span class="na">onClick</span><span class="o">=</span><span class="p">{()</span> <span class="o">=&gt;</span> <span class="nx">openModal</span><span class="p">(</span><span class="nx">props</span><span class="p">)}&gt;</span>
</span></span><span class="line"><span class="cl">                <span class="nx">Click</span> <span class="nx">$</span><span class="p">{</span><span class="nx">props</span><span class="p">.</span><span class="nx">id</span><span class="p">}</span> <span class="nx">to</span> <span class="nx">open</span> <span class="nx">Modal</span>
</span></span><span class="line"><span class="cl">              <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">              <span class="p">{</span><span class="cm">/* 2. í˜ì´ì§€ ì´ë™í• ê±°ë©´ */</span><span class="p">}</span>
</span></span><span class="line"><span class="cl">              <span class="p">&lt;</span><span class="nt">Link</span>
</span></span><span class="line"><span class="cl">                <span class="na">href</span><span class="o">=</span><span class="p">{{</span>
</span></span><span class="line"><span class="cl">                  <span class="nx">pathname</span><span class="o">:</span> <span class="sb">`url/</span><span class="si">${</span><span class="nx">props</span><span class="p">.</span><span class="nx">id</span><span class="si">}</span><span class="sb">`</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                  <span class="nx">query</span><span class="o">:</span> <span class="p">{</span> <span class="nx">props</span>: <span class="kt">JSON.stringify</span><span class="p">(</span><span class="nx">props</span><span class="p">)</span> <span class="p">},</span>
</span></span><span class="line"><span class="cl">                <span class="p">}}</span>
</span></span><span class="line"><span class="cl">                <span class="na">as</span><span class="o">=</span><span class="p">{</span><span class="sb">`url/</span><span class="si">${</span><span class="nx">props</span><span class="p">.</span><span class="nx">id</span><span class="si">}</span><span class="sb">`</span><span class="p">}</span>
</span></span><span class="line"><span class="cl">                <span class="na">passHref</span>
</span></span><span class="line"><span class="cl">              <span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">                <span class="p">&lt;</span><span class="nt">a</span>
</span></span><span class="line"><span class="cl">                  <span class="na">href</span><span class="o">=</span><span class="p">{</span><span class="sb">`url/</span><span class="si">${</span><span class="nx">props</span><span class="p">.</span><span class="nx">id</span><span class="si">}</span><span class="sb">`</span><span class="p">}</span>
</span></span><span class="line"><span class="cl">                  <span class="na">onClick</span><span class="o">=</span><span class="p">{()</span> <span class="o">=&gt;</span> <span class="nx">setScrollY</span><span class="p">(</span><span class="nb">window</span><span class="p">.</span><span class="nx">scrollY</span><span class="p">)}</span>
</span></span><span class="line"><span class="cl">                <span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">                    <span class="p">&lt;</span><span class="nt">div</span><span class="p">&gt;</span><span class="nx">Click</span> <span class="nx">$</span><span class="p">{</span><span class="nx">props</span><span class="p">.</span><span class="nx">id</span><span class="p">}</span> <span class="nx">to</span> <span class="nx">navigate</span><span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">                <span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">              <span class="p">&lt;/</span><span class="nt">Link</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">            <span class="p">&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">          <span class="p">)))}</span>
</span></span><span class="line"><span class="cl">      <span class="p">&lt;/</span><span class="nt">ul</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">      <span class="p">{</span><span class="cm">/* ë¡œë”©ì¤‘ í‘œì‹œë¥¼ í•˜ê³  refê°€ focus ë ë•Œ (ë¦¬ìŠ¤íŠ¸ì˜ ëì¼ë•Œ) ë§ˆë‹¤ ë‹¤ìŒ ë¦¬ìŠ¤íŠ¸ë¥¼ ë¡œë”©í•©ë‹ˆë‹¤. */</span><span class="p">}</span>
</span></span><span class="line"><span class="cl">      <span class="p">{</span><span class="nx">hasNextPage</span> <span class="o">&amp;&amp;</span> <span class="p">(</span>
</span></span><span class="line"><span class="cl">        <span class="p">&lt;&gt;</span>
</span></span><span class="line"><span class="cl">          <span class="p">&lt;</span><span class="nt">LoadingDiv</span> <span class="p">/&gt;</span>
</span></span><span class="line"><span class="cl">          <span class="p">&lt;</span><span class="nt">button</span> <span class="na">onClick</span><span class="o">=</span><span class="p">{()</span> <span class="o">=&gt;</span> <span class="nx">fetchNextPage</span><span class="p">()}</span> <span class="na">className</span><span class="o">=</span><span class="s">&#39;text-center&#39;</span> <span class="p">/&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="p">&lt;/&gt;</span>
</span></span><span class="line"><span class="cl">      <span class="p">)}</span>
</span></span><span class="line"><span class="cl">      <span class="p">&lt;</span><span class="nt">div</span> <span class="na">ref</span><span class="o">=</span><span class="p">{</span><span class="nx">loadMoreButtonRef</span><span class="p">}</span> <span class="p">/&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;/&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kr">export</span> <span class="k">default</span> <span class="nx">InfiniteListSkeleton</span><span class="p">;</span>
</span></span></code></pre></td></tr></table>
</div>
</div></div>
</div>
<br />

<h4 id="apirequestfunctionjs"><code>apiRequestFunction.js</code><a hidden class="anchor" aria-hidden="true" href="#apirequestfunctionjs">#</a></h4>
<p>ì•ì—ì„œ limitOffsetPagination ìœ¼ë¡œ ë§Œë“  APIë¥¼ ë¶ˆëŸ¬ì˜µë‹ˆë‹¤. ìƒí™©ì— ë”°ë¼ì„œ paramsê°€ ì¶”ê°€ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤. (í•„í„°ë§ ì¡°ê±´ ë“±)</p>


<div class="terminal space shadow">
  <div class="top">
    <div class="btns">
      <span class="circle red"></span>
      <span class="circle yellow"></span>
      <span class="circle green"></span>
    </div>
    <div class="title">
      src &gt; pages &gt; api &gt; index.tsx
    </div>
  </div>
  <div class="terminalbody"><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-ts" data-lang="ts"><span class="line"><span class="cl"><span class="kr">export</span> <span class="kr">const</span> <span class="nx">apiRequestFunction</span> <span class="o">=</span> <span class="kr">async</span> <span class="p">(</span><span class="nx">offset</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="p">...</span> <span class="p">,</span> <span class="nx">params</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="kr">const</span> <span class="p">{</span> <span class="nx">data</span> <span class="p">}</span> <span class="o">=</span> <span class="k">await</span> <span class="nx">axios</span><span class="p">.</span><span class="kr">get</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">    <span class="sb">`</span><span class="si">${</span><span class="nx">apiUrl</span><span class="si">}</span><span class="sb">?limit=</span><span class="si">${</span><span class="nx">limit</span><span class="si">}</span><span class="sb">&amp;offset=</span><span class="si">${</span><span class="nx">offset</span><span class="si">}</span><span class="sb">...`</span>
</span></span><span class="line"><span class="cl">  <span class="p">);</span>
</span></span><span class="line"><span class="cl">  <span class="k">return</span> <span class="nx">data</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span></code></pre></td></tr></table>
</div>
</div></div>
</div>
<br />

<h4 id="useintersectionobserverjs"><code>useIntersectionObserver.js</code><a hidden class="anchor" aria-hidden="true" href="#useintersectionobserverjs">#</a></h4>


<div class="terminal space shadow">
  <div class="top">
    <div class="btns">
      <span class="circle red"></span>
      <span class="circle yellow"></span>
      <span class="circle green"></span>
    </div>
    <div class="title">
      src &gt; hooks &gt; useIntersectionObserver.js
    </div>
  </div>
  <div class="terminalbody"><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="kr">import</span> <span class="nx">React</span> <span class="nx">from</span> <span class="s2">&#34;react&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kr">export</span> <span class="k">default</span> <span class="kd">function</span> <span class="nx">useIntersectionObserver</span><span class="p">({</span>
</span></span><span class="line"><span class="cl">  <span class="nx">root</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="nx">target</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="nx">onIntersect</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="nx">threshold</span> <span class="o">=</span> <span class="mf">1.0</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="nx">rootMargin</span> <span class="o">=</span> <span class="s2">&#34;0px&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="nx">enabled</span> <span class="o">=</span> <span class="kc">true</span><span class="p">,</span>
</span></span><span class="line"><span class="cl"><span class="p">})</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">React</span><span class="p">.</span><span class="nx">useEffect</span><span class="p">(()</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">enabled</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="k">return</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="kr">const</span> <span class="nx">observer</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">IntersectionObserver</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">      <span class="p">(</span><span class="nx">entries</span><span class="p">)</span> <span class="p">=&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nx">entries</span><span class="p">.</span><span class="nx">forEach</span><span class="p">((</span><span class="nx">entry</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="nx">entry</span><span class="p">.</span><span class="nx">isIntersecting</span> <span class="o">&amp;&amp;</span> <span class="nx">onIntersect</span><span class="p">()),</span>
</span></span><span class="line"><span class="cl">      <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nx">root</span><span class="o">:</span> <span class="nx">root</span> <span class="o">&amp;&amp;</span> <span class="nx">root</span><span class="p">.</span><span class="nx">current</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="nx">rootMargin</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="nx">threshold</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="kr">const</span> <span class="nx">el</span> <span class="o">=</span> <span class="nx">target</span> <span class="o">&amp;&amp;</span> <span class="nx">target</span><span class="p">.</span><span class="nx">current</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">el</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="k">return</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="nx">observer</span><span class="p">.</span><span class="nx">observe</span><span class="p">(</span><span class="nx">el</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="p">()</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="nx">observer</span><span class="p">.</span><span class="nx">unobserve</span><span class="p">(</span><span class="nx">el</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="p">};</span>
</span></span><span class="line"><span class="cl">  <span class="p">},</span> <span class="p">[</span><span class="nx">target</span><span class="p">,</span> <span class="nx">enabled</span><span class="p">,</span> <span class="nx">root</span><span class="p">,</span> <span class="nx">threshold</span><span class="p">,</span> <span class="nx">rootMargin</span><span class="p">,</span> <span class="nx">onIntersect</span><span class="p">]);</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div></div>
</div>
<br />

<h4 id="useobserverjs"><code>useObserver.js</code><a hidden class="anchor" aria-hidden="true" href="#useobserverjs">#</a></h4>


<div class="terminal space shadow">
  <div class="top">
    <div class="btns">
      <span class="circle red"></span>
      <span class="circle yellow"></span>
      <span class="circle green"></span>
    </div>
    <div class="title">
      src &gt; hooks &gt; useObserver.js
    </div>
  </div>
  <div class="terminalbody"><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-js" data-lang="js"><span class="line"><span class="cl"><span class="kr">import</span> <span class="nx">React</span> <span class="nx">from</span> <span class="s2">&#34;react&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kr">export</span> <span class="k">default</span> <span class="kd">function</span> <span class="nx">useIntersectionObserver</span><span class="p">({</span>
</span></span><span class="line"><span class="cl">  <span class="nx">root</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="nx">target</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="nx">onIntersect</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="nx">threshold</span> <span class="o">=</span> <span class="mf">1.0</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="nx">rootMargin</span> <span class="o">=</span> <span class="s2">&#34;0px&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="nx">enabled</span> <span class="o">=</span> <span class="kc">true</span><span class="p">,</span>
</span></span><span class="line"><span class="cl"><span class="p">})</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">React</span><span class="p">.</span><span class="nx">useEffect</span><span class="p">(()</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">enabled</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="k">return</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="kr">const</span> <span class="nx">observer</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">IntersectionObserver</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">      <span class="p">(</span><span class="nx">entries</span><span class="p">)</span> <span class="p">=&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="nx">entries</span><span class="p">.</span><span class="nx">forEach</span><span class="p">((</span><span class="nx">entry</span><span class="p">)</span> <span class="p">=&gt;</span> <span class="nx">entry</span><span class="p">.</span><span class="nx">isIntersecting</span> <span class="o">&amp;&amp;</span> <span class="nx">onIntersect</span><span class="p">()),</span>
</span></span><span class="line"><span class="cl">      <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nx">root</span><span class="o">:</span> <span class="nx">root</span> <span class="o">&amp;&amp;</span> <span class="nx">root</span><span class="p">.</span><span class="nx">current</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="nx">rootMargin</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="nx">threshold</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">      <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="kr">const</span> <span class="nx">el</span> <span class="o">=</span> <span class="nx">target</span> <span class="o">&amp;&amp;</span> <span class="nx">target</span><span class="p">.</span><span class="nx">current</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="nx">el</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="k">return</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="nx">observer</span><span class="p">.</span><span class="nx">observe</span><span class="p">(</span><span class="nx">el</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="p">()</span> <span class="p">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="nx">observer</span><span class="p">.</span><span class="nx">unobserve</span><span class="p">(</span><span class="nx">el</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="p">};</span>
</span></span><span class="line"><span class="cl">  <span class="p">},</span> <span class="p">[</span><span class="nx">target</span><span class="p">,</span> <span class="nx">enabled</span><span class="p">,</span> <span class="nx">root</span><span class="p">,</span> <span class="nx">threshold</span><span class="p">,</span> <span class="nx">rootMargin</span><span class="p">,</span> <span class="nx">onIntersect</span><span class="p">]);</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div></div>
</div>
<br />

<h3 id="infinitescroll--modal">infiniteScroll + Modal<a hidden class="anchor" aria-hidden="true" href="#infinitescroll--modal">#</a></h3>
<p>ëª¨ë‹¬ì€ <a href="https://github.com/theodorusclarence/expansion-pack/blob/main/dialog-zustand/README.md" target="_blank">theodorusclarence/expansion-pack</a>ì˜ <code>Dialog using Zustand</code>ë¥¼ ì„¤ì¹˜ í›„ ì»¤ìŠ¤í…€í•˜ì˜€ìŠµë‹ˆë‹¤. ì„¤ì¹˜í•˜ë©´ <code>DialogZustandLayout.tsx</code> ìƒ˜í”Œì´ ìƒê¹ë‹ˆë‹¤. ì´ë¥¼ ì°¸ê³ í•˜ì—¬ ìˆ˜ë™ìœ¼ë¡œ Layout.tsx ë¥¼ ìˆ˜ì •í•´ì£¼ì–´ì•¼í•©ë‹ˆë‹¤.</p>
<h4 id="layouttsx"><code>Layout.tsx</code><a hidden class="anchor" aria-hidden="true" href="#layouttsx">#</a></h4>


<div class="terminal space shadow">
  <div class="top">
    <div class="btns">
      <span class="circle red"></span>
      <span class="circle yellow"></span>
      <span class="circle green"></span>
    </div>
    <div class="title">
      src &gt; layout &gt; Layout.tsx
    </div>
  </div>
  <div class="terminalbody"><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-typescript" data-lang="typescript"><span class="line"><span class="cl"><span class="kr">import</span> <span class="o">*</span> <span class="kr">as</span> <span class="nx">React</span> <span class="kr">from</span> <span class="s2">&#34;react&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kr">import</span> <span class="nx">BaseDialog</span> <span class="kr">from</span> <span class="s2">&#34;@/components/dialog/BaseDialog&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="kr">import</span> <span class="nx">Footer</span> <span class="kr">from</span> <span class="s2">&#34;@/components/layout/Footer&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kr">import</span> <span class="nx">useDialogStore</span> <span class="kr">from</span> <span class="s2">&#34;@/store/useDialogStore&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kr">import</span> <span class="nx">Header</span> <span class="kr">from</span> <span class="s2">&#34;./Header&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kr">export</span> <span class="k">default</span> <span class="kd">function</span> <span class="nx">Layout</span><span class="p">({</span> <span class="nx">children</span> <span class="p">}</span><span class="o">:</span> <span class="p">{</span> <span class="nx">children</span>: <span class="kt">React.ReactNode</span> <span class="p">})</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="kr">const</span> <span class="nx">open</span> <span class="o">=</span> <span class="nx">useDialogStore</span><span class="p">.</span><span class="nx">useOpen</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">  <span class="kr">const</span> <span class="nx">state</span> <span class="o">=</span> <span class="nx">useDialogStore</span><span class="p">.</span><span class="nx">useState</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">  <span class="kr">const</span> <span class="nx">handleClose</span> <span class="o">=</span> <span class="nx">useDialogStore</span><span class="p">.</span><span class="nx">useHandleClose</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">  <span class="kr">const</span> <span class="nx">handleSubmit</span> <span class="o">=</span> <span class="nx">useDialogStore</span><span class="p">.</span><span class="nx">useHandleSubmit</span><span class="p">();</span>
</span></span><span class="line"><span class="cl">  <span class="k">return</span> <span class="p">(</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;&gt;</span>
</span></span><span class="line"><span class="cl">      <span class="p">&lt;</span><span class="nt">Header</span> <span class="na">mode</span><span class="o">=</span><span class="s">&#34;&#34;</span> <span class="p">/&gt;</span>
</span></span><span class="line"><span class="cl">      <span class="p">&lt;</span><span class="nt">section</span> <span class="na">className</span><span class="o">=</span><span class="s">&#34;min-h-full font-primary&#34;</span><span class="p">&gt;{</span><span class="nx">children</span><span class="p">}&lt;/</span><span class="nt">section</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">      <span class="p">&lt;</span><span class="nt">BaseDialog</span>
</span></span><span class="line"><span class="cl">        <span class="na">onClose</span><span class="o">=</span><span class="p">{</span><span class="nx">handleClose</span><span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="na">onSubmit</span><span class="o">=</span><span class="p">{</span><span class="nx">handleSubmit</span><span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="na">open</span><span class="o">=</span><span class="p">{</span><span class="nx">open</span><span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="na">options</span><span class="o">=</span><span class="p">{</span><span class="nx">state</span><span class="p">}</span>
</span></span><span class="line"><span class="cl">      <span class="p">/&gt;</span>
</span></span><span class="line"><span class="cl">      <span class="p">&lt;</span><span class="nt">Footer</span> <span class="p">/&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;/&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div></div>
</div>
<br />

<h4 id="usedialogtsx"><code>useDialog.tsx</code><a hidden class="anchor" aria-hidden="true" href="#usedialogtsx">#</a></h4>


<div class="terminal space shadow">
  <div class="top">
    <div class="btns">
      <span class="circle red"></span>
      <span class="circle yellow"></span>
      <span class="circle green"></span>
    </div>
    <div class="title">
      src &gt; hooks &gt; useDialog.tsx
    </div>
  </div>
  <div class="terminalbody"><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-typescript" data-lang="typescript"><span class="line"><span class="cl"><span class="kr">import</span> <span class="nx">useDialogStore</span> <span class="kr">from</span> <span class="s2">&#34;@/store/useDialogStore&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kr">export</span> <span class="k">default</span> <span class="kd">function</span> <span class="nx">useDialog() {</span>
</span></span><span class="line"><span class="cl">  <span class="k">return</span> <span class="nx">useDialogStore</span><span class="p">.</span><span class="nx">useDialog</span><span class="p">();</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span></code></pre></td></tr></table>
</div>
</div></div>
</div>
<br />

<p>ì—¬ê¸°ê¹Œì§€ ì§„í–‰ë˜ë©´ ëª¨ë‹¬ì„ ì—´ ìˆ˜ ìˆëŠ” í™˜ê²½ì´ êµ¬ì„±ë©ë‹ˆë‹¤. <code>src &gt; components &gt; dialog &gt; baseDialog.tsx</code> ê°€ ëª¨ë‹¬ì°½ì…ë‹ˆë‹¤. ì›ë˜ëŠ” <code>submt</code>ì´ë‚˜ <code>error</code>ë¥¼ í™•ì¸í•˜ëŠ” ëª¨ë‹¬ì´ì˜€ìœ¼ë¯€ë¡œ ë¦¬ìŠ¤íŠ¸ì—ì„œ í´ë¦­í•˜ì—¬ ëª¨ë‹¬ì´ ì—´ë¦´ë•Œ <code>props</code>ë¥¼ ê°™ì´ ë°›ì•„ì˜¬ ìˆ˜ ìˆë„ë¡ í•´ë‹¹ ë‚´ìš©ì„ ì»¤ìŠ¤í…€ í•´ì¤ë‹ˆë‹¤. <code>options</code>ì— <code>props</code>ë¥¼ ì¶”ê°€í•˜ë©´ ë©ë‹ˆë‹¤.</p>
<h4 id="basedialogtsx"><code>baseDialog.tsx</code><a hidden class="anchor" aria-hidden="true" href="#basedialogtsx">#</a></h4>


<div class="terminal space shadow">
  <div class="top">
    <div class="btns">
      <span class="circle red"></span>
      <span class="circle yellow"></span>
      <span class="circle green"></span>
    </div>
    <div class="title">
      src &gt; components &gt; dialog &gt; baseDialog.tsx
    </div>
  </div>
  <div class="terminalbody"><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">  1
</span><span class="lnt">  2
</span><span class="lnt">  3
</span><span class="lnt">  4
</span><span class="lnt">  5
</span><span class="lnt">  6
</span><span class="lnt">  7
</span><span class="lnt">  8
</span><span class="lnt">  9
</span><span class="lnt"> 10
</span><span class="lnt"> 11
</span><span class="lnt"> 12
</span><span class="lnt"> 13
</span><span class="lnt"> 14
</span><span class="lnt"> 15
</span><span class="lnt"> 16
</span><span class="lnt"> 17
</span><span class="lnt"> 18
</span><span class="lnt"> 19
</span><span class="lnt"> 20
</span><span class="lnt"> 21
</span><span class="lnt"> 22
</span><span class="lnt"> 23
</span><span class="lnt"> 24
</span><span class="lnt"> 25
</span><span class="lnt"> 26
</span><span class="lnt"> 27
</span><span class="lnt"> 28
</span><span class="lnt"> 29
</span><span class="lnt"> 30
</span><span class="lnt"> 31
</span><span class="lnt"> 32
</span><span class="lnt"> 33
</span><span class="lnt"> 34
</span><span class="lnt"> 35
</span><span class="lnt"> 36
</span><span class="lnt"> 37
</span><span class="lnt"> 38
</span><span class="lnt"> 39
</span><span class="lnt"> 40
</span><span class="lnt"> 41
</span><span class="lnt"> 42
</span><span class="lnt"> 43
</span><span class="lnt"> 44
</span><span class="lnt"> 45
</span><span class="lnt"> 46
</span><span class="lnt"> 47
</span><span class="lnt"> 48
</span><span class="lnt"> 49
</span><span class="lnt"> 50
</span><span class="lnt"> 51
</span><span class="lnt"> 52
</span><span class="lnt"> 53
</span><span class="lnt"> 54
</span><span class="lnt"> 55
</span><span class="lnt"> 56
</span><span class="lnt"> 57
</span><span class="lnt"> 58
</span><span class="lnt"> 59
</span><span class="lnt"> 60
</span><span class="lnt"> 61
</span><span class="lnt"> 62
</span><span class="lnt"> 63
</span><span class="lnt"> 64
</span><span class="lnt"> 65
</span><span class="lnt"> 66
</span><span class="lnt"> 67
</span><span class="lnt"> 68
</span><span class="lnt"> 69
</span><span class="lnt"> 70
</span><span class="lnt"> 71
</span><span class="lnt"> 72
</span><span class="lnt"> 73
</span><span class="lnt"> 74
</span><span class="lnt"> 75
</span><span class="lnt"> 76
</span><span class="lnt"> 77
</span><span class="lnt"> 78
</span><span class="lnt"> 79
</span><span class="lnt"> 80
</span><span class="lnt"> 81
</span><span class="lnt"> 82
</span><span class="lnt"> 83
</span><span class="lnt"> 84
</span><span class="lnt"> 85
</span><span class="lnt"> 86
</span><span class="lnt"> 87
</span><span class="lnt"> 88
</span><span class="lnt"> 89
</span><span class="lnt"> 90
</span><span class="lnt"> 91
</span><span class="lnt"> 92
</span><span class="lnt"> 93
</span><span class="lnt"> 94
</span><span class="lnt"> 95
</span><span class="lnt"> 96
</span><span class="lnt"> 97
</span><span class="lnt"> 98
</span><span class="lnt"> 99
</span><span class="lnt">100
</span><span class="lnt">101
</span><span class="lnt">102
</span><span class="lnt">103
</span><span class="lnt">104
</span><span class="lnt">105
</span><span class="lnt">106
</span><span class="lnt">107
</span><span class="lnt">108
</span><span class="lnt">109
</span><span class="lnt">110
</span><span class="lnt">111
</span><span class="lnt">112
</span><span class="lnt">113
</span><span class="lnt">114
</span><span class="lnt">115
</span><span class="lnt">116
</span><span class="lnt">117
</span><span class="lnt">118
</span><span class="lnt">119
</span><span class="lnt">120
</span><span class="lnt">121
</span><span class="lnt">122
</span><span class="lnt">123
</span><span class="lnt">124
</span><span class="lnt">125
</span><span class="lnt">126
</span><span class="lnt">127
</span><span class="lnt">128
</span><span class="lnt">129
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-typescript" data-lang="typescript"><span class="line"><span class="cl"><span class="kr">type</span> <span class="nx">BaseDialogProps</span> <span class="o">=</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">open</span>: <span class="kt">boolean</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="nx">onSubmit</span><span class="o">:</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="k">void</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="nx">onClose</span><span class="o">:</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="k">void</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="nx">options</span>: <span class="kt">DialogOptions</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kr">export</span> <span class="kr">type</span> <span class="nx">DialogOptions</span> <span class="o">=</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">catchOnCancel?</span>: <span class="kt">boolean</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="nx">title</span>: <span class="kt">React.ReactNode</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="nx">description</span>: <span class="kt">React.ReactNode</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="nx">variant</span><span class="o">:</span> <span class="s2">&#34;success&#34;</span> <span class="o">|</span> <span class="s2">&#34;warning&#34;</span> <span class="o">|</span> <span class="s2">&#34;danger&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="nx">submitText</span>: <span class="kt">React.ReactNode</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="nx">cancleText</span>: <span class="kt">React.ReactNode</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="nx">props</span>: <span class="kt">Results</span> <span class="o">|</span> <span class="kc">null</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kr">export</span> <span class="k">default</span> <span class="kd">function</span> <span class="nx">BaseDialog</span><span class="p">({</span>
</span></span><span class="line"><span class="cl">  <span class="nx">open</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="nx">onSubmit</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="nx">onClose</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="nx">options</span><span class="o">:</span> <span class="p">{</span> <span class="nx">title</span><span class="p">,</span> <span class="nx">description</span><span class="p">,</span> <span class="nx">variant</span><span class="p">,</span> <span class="nx">submitText</span><span class="p">,</span> <span class="nx">cancleText</span><span class="p">,</span> <span class="nx">props</span> <span class="p">},</span> <span class="c1">// &lt;-- ì¶”ê°€
</span></span></span><span class="line"><span class="cl"><span class="c1"></span><span class="p">}</span><span class="o">:</span> <span class="nx">BaseDialogProps</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="kr">const</span> <span class="nx">current</span> <span class="o">=</span> <span class="nx">colorVariant</span><span class="p">[</span><span class="nx">variant</span><span class="p">];</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="k">return</span> <span class="p">(</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;</span><span class="nt">Transition.Root</span> <span class="na">show</span><span class="o">=</span><span class="p">{</span><span class="nx">open</span><span class="p">}</span> <span class="na">as</span><span class="o">=</span><span class="p">{</span><span class="nx">React</span><span class="p">.</span><span class="nx">Fragment</span><span class="p">}&gt;</span>
</span></span><span class="line"><span class="cl">      <span class="p">&lt;</span><span class="nt">Dialog</span>
</span></span><span class="line"><span class="cl">        <span class="na">as</span><span class="o">=</span><span class="s">&#34;div&#34;</span>
</span></span><span class="line"><span class="cl">        <span class="na">static</span>
</span></span><span class="line"><span class="cl">        <span class="na">className</span><span class="o">=</span><span class="s">&#34;fixed inset-0 z-40 overflow-y-auto&#34;</span>
</span></span><span class="line"><span class="cl">        <span class="na">open</span><span class="o">=</span><span class="p">{</span><span class="nx">open</span><span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="na">onClose</span><span class="o">=</span><span class="p">{()</span> <span class="o">=&gt;</span> <span class="nx">onClose</span><span class="p">()}</span>
</span></span><span class="line"><span class="cl">      <span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="p">&lt;</span><span class="nt">div</span> <span class="na">className</span><span class="o">=</span><span class="s">&#34;flex min-h-screen items-start justify-center px-5 py-5 text-center drop-shadow-xl sm:block sm:p-0 md:mt-16&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">          <span class="p">&lt;</span><span class="nt">Transition.Child</span>
</span></span><span class="line"><span class="cl">            <span class="na">as</span><span class="o">=</span><span class="p">{</span><span class="nx">React</span><span class="p">.</span><span class="nx">Fragment</span><span class="p">}</span>
</span></span><span class="line"><span class="cl">            <span class="na">enter</span><span class="o">=</span><span class="s">&#34;ease-out duration-300&#34;</span>
</span></span><span class="line"><span class="cl">            <span class="na">enterFrom</span><span class="o">=</span><span class="s">&#34;opacity-0&#34;</span>
</span></span><span class="line"><span class="cl">            <span class="na">enterTo</span><span class="o">=</span><span class="s">&#34;opacity-100&#34;</span>
</span></span><span class="line"><span class="cl">            <span class="na">leave</span><span class="o">=</span><span class="s">&#34;ease-in duration-300&#34;</span>
</span></span><span class="line"><span class="cl">            <span class="na">leaveFrom</span><span class="o">=</span><span class="s">&#34;opacity-100&#34;</span>
</span></span><span class="line"><span class="cl">            <span class="na">leaveTo</span><span class="o">=</span><span class="s">&#34;opacity-0&#34;</span>
</span></span><span class="line"><span class="cl">          <span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="p">&lt;</span><span class="nt">Dialog.Overlay</span> <span class="na">className</span><span class="o">=</span><span class="s">&#34;fixed inset-0 bg-black bg-opacity-75 transition-opacity&#34;</span> <span class="p">/&gt;</span>
</span></span><span class="line"><span class="cl">          <span class="p">&lt;/</span><span class="nt">Transition.Child</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">          <span class="p">&lt;</span><span class="nt">span</span>
</span></span><span class="line"><span class="cl">            <span class="na">className</span><span class="o">=</span><span class="s">&#34;hidden sm:inline-block sm:h-screen sm:align-middle&#34;</span>
</span></span><span class="line"><span class="cl">            <span class="na">aria</span><span class="err">-</span><span class="na">hidden</span><span class="o">=</span><span class="s">&#34;true&#34;</span>
</span></span><span class="line"><span class="cl">          <span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="o">&amp;</span><span class="err">#</span><span class="mi">8203</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">          <span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">          <span class="p">&lt;</span><span class="nt">Transition.Child</span>
</span></span><span class="line"><span class="cl">            <span class="na">as</span><span class="o">=</span><span class="p">{</span><span class="nx">React</span><span class="p">.</span><span class="nx">Fragment</span><span class="p">}</span>
</span></span><span class="line"><span class="cl">            <span class="na">enter</span><span class="o">=</span><span class="s">&#34;ease-out duration-300&#34;</span>
</span></span><span class="line"><span class="cl">            <span class="na">enterFrom</span><span class="o">=</span><span class="s">&#34;opacity-0 trangray-y-4 sm:trangray-y-0 sm:scale-95&#34;</span>
</span></span><span class="line"><span class="cl">            <span class="na">enterTo</span><span class="o">=</span><span class="s">&#34;opacity-100 trangray-y-0 sm:scale-100&#34;</span>
</span></span><span class="line"><span class="cl">            <span class="na">leave</span><span class="o">=</span><span class="s">&#34;ease-in duration-200&#34;</span>
</span></span><span class="line"><span class="cl">            <span class="na">leaveFrom</span><span class="o">=</span><span class="s">&#34;opacity-100 trangray-y-0 sm:scale-100&#34;</span>
</span></span><span class="line"><span class="cl">            <span class="na">leaveTo</span><span class="o">=</span><span class="s">&#34;opacity-0 trangray-y-4 sm:trangray-y-0 sm:scale-95&#34;</span>
</span></span><span class="line"><span class="cl">          <span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="p">&lt;</span><span class="nt">div</span> <span class="na">className</span><span class="o">=</span><span class="s">&#34;z-auto inline-block w-full transform overflow-hidden rounded-lg bg-white px-4 pt-5 pb-4 text-left align-bottom shadow-xl transition-all sm:my-12 sm:min-h-[1000px] sm:max-w-6xl sm:p-6 sm:align-middle&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">              <span class="p">&lt;</span><span class="nt">div</span> <span class="na">className</span><span class="o">=</span><span class="s">&#34;absolute top-0 right-0  block pt-4 pr-4&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">                <span class="p">&lt;</span><span class="nt">button</span>
</span></span><span class="line"><span class="cl">                  <span class="na">type</span><span class="o">=</span><span class="s">&#34;button&#34;</span>
</span></span><span class="line"><span class="cl">                  <span class="na">className</span><span class="o">=</span><span class="p">{</span><span class="nx">clsx</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">                    <span class="s2">&#34;rounded-md bg-white text-gray-400 hover:text-gray-500&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                    <span class="s2">&#34;focus:outline-none focus:ring-2 focus:ring-gray-400 focus:ring-offset-2&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                    <span class="s2">&#34;disabled:cursor-wait disabled:brightness-90 disabled:filter&#34;</span>
</span></span><span class="line"><span class="cl">                  <span class="p">)}</span>
</span></span><span class="line"><span class="cl">                  <span class="na">onClick</span><span class="o">=</span><span class="p">{</span><span class="nx">onClose</span><span class="p">}</span>
</span></span><span class="line"><span class="cl">                <span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">                  <span class="p">&lt;</span><span class="nt">span</span> <span class="na">className</span><span class="o">=</span><span class="s">&#34;sr-only&#34;</span><span class="p">&gt;</span><span class="nx">Close</span><span class="p">&lt;/</span><span class="nt">span</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">                  <span class="p">&lt;</span><span class="nt">HiOutlineX</span> <span class="na">className</span><span class="o">=</span><span class="s">&#34;h-6 w-6&#34;</span> <span class="na">aria</span><span class="err">-</span><span class="na">hidden</span><span class="o">=</span><span class="s">&#34;true&#34;</span> <span class="p">/&gt;</span>
</span></span><span class="line"><span class="cl">                <span class="p">&lt;/</span><span class="nt">button</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">              <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">              <span class="p">&lt;</span><span class="nt">div</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">                <span class="p">{</span><span class="cm">/* ë¶ˆëŸ¬ì˜¨ propsë¥¼ í‘œì‹œí•´ì£¼ë©´ ë©ë‹ˆë‹¤. */</span><span class="p">}</span>
</span></span><span class="line"><span class="cl">                <span class="p">{</span><span class="nx">props</span> <span class="o">&amp;&amp;</span> <span class="p">&lt;</span><span class="nt">div</span><span class="p">&gt;</span> <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;}</span>
</span></span><span class="line"><span class="cl">              <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">              <span class="p">&lt;</span><span class="nt">div</span> <span class="na">className</span><span class="o">=</span><span class="s">&#34;mt-5 sm:mt-4 sm:flex sm:flex-row-reverse&#34;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">                <span class="p">&lt;</span><span class="nt">Button</span>
</span></span><span class="line"><span class="cl">                  <span class="na">type</span><span class="o">=</span><span class="s">&#34;button&#34;</span>
</span></span><span class="line"><span class="cl">                  <span class="na">variant</span><span class="o">=</span><span class="s">&#34;outline&#34;</span>
</span></span><span class="line"><span class="cl">                  <span class="na">onClick</span><span class="o">=</span><span class="p">{</span><span class="nx">onClose</span><span class="p">}</span>
</span></span><span class="line"><span class="cl">                  <span class="na">className</span><span class="o">=</span><span class="s">&#34;font mt-3 w-full items-center justify-center !font-medium sm:mt-0 sm:w-auto sm:text-sm&#34;</span>
</span></span><span class="line"><span class="cl">                <span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">                  <span class="p">{</span><span class="nx">cancleText</span><span class="p">}</span>
</span></span><span class="line"><span class="cl">                <span class="p">&lt;/</span><span class="nt">Button</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">              <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">          <span class="p">&lt;/</span><span class="nt">Transition.Child</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">      <span class="p">&lt;/</span><span class="nt">Dialog</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;/</span><span class="nt">Transition.Root</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">colorVariant</span> <span class="o">=</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">success</span><span class="o">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">bg</span><span class="o">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="nx">light</span><span class="o">:</span> <span class="s2">&#34;bg-green-100&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="p">},</span>
</span></span><span class="line"><span class="cl">    <span class="nx">text</span><span class="o">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="nx">primary</span><span class="o">:</span> <span class="s2">&#34;text-green-500&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="p">},</span>
</span></span><span class="line"><span class="cl">    <span class="nx">icon</span>: <span class="kt">HiOutlineCheck</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="p">},</span>
</span></span><span class="line"><span class="cl">  <span class="nx">warning</span><span class="o">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">bg</span><span class="o">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="nx">light</span><span class="o">:</span> <span class="s2">&#34;bg-yellow-100&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="p">},</span>
</span></span><span class="line"><span class="cl">    <span class="nx">text</span><span class="o">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="nx">primary</span><span class="o">:</span> <span class="s2">&#34;text-yellow-500&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="p">},</span>
</span></span><span class="line"><span class="cl">    <span class="nx">icon</span>: <span class="kt">HiOutlineExclamation</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="p">},</span>
</span></span><span class="line"><span class="cl">  <span class="nx">danger</span><span class="o">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">bg</span><span class="o">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="nx">light</span><span class="o">:</span> <span class="s2">&#34;bg-red-100&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="p">},</span>
</span></span><span class="line"><span class="cl">    <span class="nx">text</span><span class="o">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="nx">primary</span><span class="o">:</span> <span class="s2">&#34;text-red-500&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="p">},</span>
</span></span><span class="line"><span class="cl">    <span class="nx">icon</span>: <span class="kt">HiExclamationCircle</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="p">},</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span></code></pre></td></tr></table>
</div>
</div></div>
</div>
<br />

<h4 id="usedialogstoretsx"><code>useDialogStore.tsx</code><a hidden class="anchor" aria-hidden="true" href="#usedialogstoretsx">#</a></h4>


<div class="terminal space shadow">
  <div class="top">
    <div class="btns">
      <span class="circle red"></span>
      <span class="circle yellow"></span>
      <span class="circle green"></span>
    </div>
    <div class="title">
      src &gt; store &gt; useDialogStore.tsx
    </div>
  </div>
  <div class="terminalbody"><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span><span class="lnt">51
</span><span class="lnt">52
</span><span class="lnt">53
</span><span class="lnt">54
</span><span class="lnt">55
</span><span class="lnt">56
</span><span class="lnt">57
</span><span class="lnt">58
</span><span class="lnt">59
</span><span class="lnt">60
</span><span class="lnt">61
</span><span class="lnt">62
</span><span class="lnt">63
</span><span class="lnt">64
</span><span class="lnt">65
</span><span class="lnt">66
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-typescript" data-lang="typescript"><span class="line"><span class="cl"><span class="kr">import</span> <span class="p">{</span> <span class="nx">createSelectorHooks</span> <span class="p">}</span> <span class="kr">from</span> <span class="s2">&#34;auto-zustand-selectors-hook&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="kr">import</span> <span class="nx">produce</span> <span class="kr">from</span> <span class="s2">&#34;immer&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="kr">import</span> <span class="nx">create</span> <span class="kr">from</span> <span class="s2">&#34;zustand&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kr">import</span> <span class="p">{</span> <span class="nx">DialogOptions</span> <span class="p">}</span> <span class="kr">from</span> <span class="s2">&#34;@/components/dialog/BaseDialog&#34;</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kr">type</span> <span class="nx">DialogStoreType</span> <span class="o">=</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="nx">awaitingPromise</span><span class="o">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">resolve</span><span class="o">?:</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="k">void</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">    <span class="nx">reject</span><span class="o">?:</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="k">void</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="p">};</span>
</span></span><span class="line"><span class="cl">  <span class="nx">open</span>: <span class="kt">boolean</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="nx">state</span>: <span class="kt">DialogOptions</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="nx">dialog</span><span class="o">:</span> <span class="p">(</span><span class="nx">options</span>: <span class="kt">Partial</span><span class="p">&lt;</span><span class="nt">DialogOptions</span><span class="p">&gt;)</span> <span class="o">=&gt;</span> <span class="nx">Promise</span><span class="p">&lt;</span><span class="nt">void</span><span class="p">&gt;;</span>
</span></span><span class="line"><span class="cl">  <span class="nx">handleClose</span><span class="o">:</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="k">void</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">  <span class="nx">handleSubmit</span><span class="o">:</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="k">void</span><span class="p">;</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">useDialogStoreBase</span> <span class="o">=</span> <span class="nx">create</span><span class="p">&lt;</span><span class="nt">DialogStoreType</span><span class="p">&gt;((</span><span class="kr">set</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">({</span>
</span></span><span class="line"><span class="cl">  <span class="nx">awaitingPromise</span><span class="o">:</span> <span class="p">{},</span>
</span></span><span class="line"><span class="cl">  <span class="nx">open</span>: <span class="kt">false</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="nx">state</span><span class="o">:</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">title</span><span class="o">:</span> <span class="s2">&#34;Title&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nx">description</span><span class="o">:</span> <span class="s2">&#34;Description&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nx">submitText</span><span class="o">:</span> <span class="s2">&#34;Yes&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nx">cancleText</span><span class="o">:</span> <span class="s2">&#34;No&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nx">variant</span><span class="o">:</span> <span class="s2">&#34;warning&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nx">catchOnCancel</span>: <span class="kt">false</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nx">props</span>: <span class="kt">null</span><span class="p">,</span> <span class="c1">// &lt;-- ì¶”ê°€
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="p">},</span>
</span></span><span class="line"><span class="cl">  <span class="nx">dialog</span><span class="o">:</span> <span class="p">(</span><span class="nx">options</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="kr">set</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">      <span class="nx">produce</span><span class="p">&lt;</span><span class="nt">DialogStoreType</span><span class="p">&gt;((</span><span class="nx">state</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nx">state</span><span class="p">.</span><span class="nx">open</span> <span class="o">=</span> <span class="kc">true</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">        <span class="nx">state</span><span class="p">.</span><span class="nx">state</span> <span class="o">=</span> <span class="p">{</span> <span class="p">...</span><span class="nx">state</span><span class="p">.</span><span class="nx">state</span><span class="p">,</span> <span class="p">...</span><span class="nx">options</span> <span class="p">};</span>
</span></span><span class="line"><span class="cl">      <span class="p">})</span>
</span></span><span class="line"><span class="cl">    <span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="k">new</span> <span class="nx">Promise</span><span class="p">&lt;</span><span class="nt">void</span><span class="p">&gt;((</span><span class="nx">resolve</span><span class="p">,</span> <span class="nx">reject</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="kr">set</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">        <span class="nx">produce</span><span class="p">&lt;</span><span class="nt">DialogStoreType</span><span class="p">&gt;((</span><span class="nx">state</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">          <span class="nx">state</span><span class="p">.</span><span class="nx">awaitingPromise</span> <span class="o">=</span> <span class="p">{</span> <span class="nx">resolve</span><span class="p">,</span> <span class="nx">reject</span> <span class="p">};</span>
</span></span><span class="line"><span class="cl">        <span class="p">})</span>
</span></span><span class="line"><span class="cl">      <span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="p">});</span>
</span></span><span class="line"><span class="cl">  <span class="p">},</span>
</span></span><span class="line"><span class="cl">  <span class="nx">handleClose</span><span class="o">:</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="kr">set</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">      <span class="nx">produce</span><span class="p">&lt;</span><span class="nt">DialogStoreType</span><span class="p">&gt;((</span><span class="nx">state</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nx">state</span><span class="p">.</span><span class="nx">state</span><span class="p">.</span><span class="nx">catchOnCancel</span> <span class="o">&amp;&amp;</span> <span class="nx">state</span><span class="p">.</span><span class="nx">awaitingPromise</span><span class="o">?</span><span class="p">.</span><span class="nx">reject</span><span class="o">?</span><span class="p">.();</span>
</span></span><span class="line"><span class="cl">        <span class="nx">state</span><span class="p">.</span><span class="nx">open</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">      <span class="p">})</span>
</span></span><span class="line"><span class="cl">    <span class="p">);</span>
</span></span><span class="line"><span class="cl">  <span class="p">},</span>
</span></span><span class="line"><span class="cl">  <span class="nx">handleSubmit</span><span class="o">:</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="kr">set</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">      <span class="nx">produce</span><span class="p">&lt;</span><span class="nt">DialogStoreType</span><span class="p">&gt;((</span><span class="nx">state</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="nx">state</span><span class="p">.</span><span class="nx">awaitingPromise</span><span class="o">?</span><span class="p">.</span><span class="nx">resolve</span><span class="o">?</span><span class="p">.();</span>
</span></span><span class="line"><span class="cl">        <span class="nx">state</span><span class="p">.</span><span class="nx">open</span> <span class="o">=</span> <span class="kc">false</span><span class="p">;</span>
</span></span><span class="line"><span class="cl">      <span class="p">})</span>
</span></span><span class="line"><span class="cl">    <span class="p">);</span>
</span></span><span class="line"><span class="cl">  <span class="p">},</span>
</span></span><span class="line"><span class="cl"><span class="p">}));</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">useDialogStore</span> <span class="o">=</span> <span class="nx">createSelectorHooks</span><span class="p">(</span><span class="nx">useDialogStoreBase</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kr">export</span> <span class="k">default</span> <span class="nx">useDialogStore</span><span class="p">;</span>
</span></span></code></pre></td></tr></table>
</div>
</div></div>
</div>
<br />

<p>ì´ì œ ì•„ê¹Œ ë§Œë“¤ì—ˆë˜ <a href="/projects/%ED%81%90%EC%B0%BE%EC%82%AC/infinitescroll/#infinitelistskeletontsx">(ì˜ˆì œë¦¬ìŠ¤íŠ¸)</a>ì²˜ëŸ¼ <code>openModal</code> í•¨ìˆ˜ì—ì„œ <code>props</code>ë¥¼ í•¨ê»˜ ë„˜ê²¨ì£¼ì–´ ëª¨ë‹¬ì´ ì—´ë¦´ë•Œ ë¯¸ë¦¬ ë°›ì•„ì˜¨ ë°ì´í„°ë¥¼ ë„˜ê²¨ë°›ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>


<div class="terminal space shadow">
  <div class="top">
    <div class="btns">
      <span class="circle red"></span>
      <span class="circle yellow"></span>
      <span class="circle green"></span>
    </div>
    <div class="title">
      openModal with props
    </div>
  </div>
  <div class="terminalbody"><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-typescript" data-lang="typescript"><span class="line"><span class="cl"><span class="cm">/* 1. ëª¨ë‹¬ë¡œ ì˜¤í”ˆí• êº¼ë©´ */</span>
</span></span><span class="line"><span class="cl"><span class="p">&lt;</span><span class="nt">div</span> <span class="na">onClick</span><span class="o">=</span><span class="p">{()</span> <span class="o">=&gt;</span> <span class="nx">openModal</span><span class="p">(</span><span class="nx">props</span><span class="p">)}&gt;</span><span class="nx">Click</span> <span class="nx">$</span><span class="p">{</span><span class="nx">props</span><span class="p">.</span><span class="nx">id</span><span class="p">}</span> <span class="nx">to</span> <span class="nx">open</span> <span class="nx">Modal</span><span class="p">&lt;/</span><span class="nt">div</span><span class="p">&gt;</span>
</span></span></code></pre></td></tr></table>
</div>
</div></div>
</div>
<br />

<p>consoleì— ì°ì–´ë³´ë©´ ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤. ë§¨ ì²˜ìŒ ë¦¬ìŠ¤íŠ¸ë¥¼ ë¶ˆëŸ¬ì˜¬ ë•Œ ëª¨ë‹¬ì— ë“¤ì–´ê°ˆ ë‚´ìš©ë“¤ë„ í•¨ê»˜ ë¶ˆëŸ¬ì™”ìœ¼ë¯€ë¡œ ëª¨ë‹¬ì´ ì—´ë¦´ë•Œ ì¶”ê°€ë¡œ apiì—ì„œ ë¶ˆëŸ¬ì˜¬ í•„ìš”ê°€ ì—†ì–´ì„œ <strong>ì¦‰ê°</strong>ì ìœ¼ë¡œ í‘œì‹œë˜ì–´ ë¡œë”©ì†ë„ê°€ ë¹ ë¥´ê²Œ ëŠê»´ì§€ëŠ” ì¥ì ì´ ìˆìŠµë‹ˆë‹¤.</p>
<figure class="align-center ">
    <img loading="lazy" src="../img/4.png#center"/> 
</figure>

<p>ì‘ìš©í•˜ì—¬ ëª¨ë‹¬ì°½ì´ ì—´ë ¸ì„ ë•Œ ìƒˆë¡œê³ ì¹¨ì„ í•  ê²½ìš° router.push í•˜ì—¬ í•´ë‹¹ ì•„ì´í…œì˜ ìƒì„¸í˜ì´ì§€ë¡œ ì´ë™í•˜ê²Œ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë¹ ë¥¸ ë°˜ì‘ì„ ìœ„í•´ì„œ ë¦¬ìŠ¤íŠ¸ì—ì„œ í´ë¦­ ì‹œì—ë§Œ ëª¨ë‹¬ì´ ì—´ë¦¬ê³ , ìƒˆë¡œê³ ì¹¨, ë§í¬ê³µìœ , SEO ìµœì í™” ìœ„í•´ ìƒì„¸í˜ì´ì§€ë¥¼ ì œì‘í•´ ë‘ëŠ” ê²ƒì´ ì¢‹ìŠµë‹ˆë‹¤.</p>
<h3 id="infinitescroll--localstorage--scrolly">infiniteScroll + LocalStorage + ScrollY<a hidden class="anchor" aria-hidden="true" href="#infinitescroll--localstorage--scrolly">#</a></h3>
<p>ë¦¬ìŠ¤íŠ¸ì—ì„œ ì•„ì´í…œì„ í´ë¦­í•  ë•Œ <code>scrollY</code>ê°’ì„ <code>LocalStorage</code>ì— ì €ì¥í•˜ê³ , <code>useEffect</code>ë¥¼ ì´ìš©í•˜ì—¬ <code>scrollYê°€ 0ì´ ì•„ë‹Œ ê²½ìš°</code>ì—ëŠ” <code>LocalStorage</code>ì— ì €ì¥ëœ <code>scrollY</code> ê°’ìœ¼ë¡œ ì´ë™ì‹œì¼œì£¼ë©´ ë©ë‹ˆë‹¤. <code>Next/Link</code>ë¥¼ ì‚¬ìš©í• ë•Œ <code>onClick</code> ì´ë²¤íŠ¸ë¥¼ ë°œìƒì‹œí‚¤ê¸° ìœ„í•´ì„œ <code>a íƒœê·¸</code>ë¥¼ ì¤‘ì²©ì‹œì¼œì£¼ì–´ì•¼ í•©ë‹ˆë‹¤.</p>
<h4 id="listexampletsx"><code>ListExample.tsx</code><a hidden class="anchor" aria-hidden="true" href="#listexampletsx">#</a></h4>


<div class="terminal space shadow">
  <div class="top">
    <div class="btns">
      <span class="circle red"></span>
      <span class="circle yellow"></span>
      <span class="circle green"></span>
    </div>
    <div class="title">
      ListExample.tsx
    </div>
  </div>
  <div class="terminalbody"><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span><span class="lnt">51
</span><span class="lnt">52
</span><span class="lnt">53
</span><span class="lnt">54
</span><span class="lnt">55
</span><span class="lnt">56
</span><span class="lnt">57
</span><span class="lnt">58
</span><span class="lnt">59
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-typescript" data-lang="typescript"><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kr">const</span> <span class="nx">ListExample</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">  <span class="kr">const</span> <span class="p">{</span> <span class="nx">data</span><span class="p">,</span> <span class="nx">hasNextPage</span><span class="p">,</span> <span class="nx">fetchNextPage</span><span class="p">,</span> <span class="nx">refetch</span><span class="p">,</span> <span class="nx">isFetching</span> <span class="p">}</span> <span class="o">=</span>
</span></span><span class="line"><span class="cl">    <span class="nx">useInfiniteQuery</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">        <span class="p">...</span>
</span></span><span class="line"><span class="cl">    <span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="kr">const</span> <span class="nx">loadMoreButtonRef</span> <span class="o">=</span> <span class="nx">React</span><span class="p">.</span><span class="nx">useRef</span><span class="p">(</span><span class="kc">null</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="nx">useIntersectionObserver</span><span class="p">({</span>
</span></span><span class="line"><span class="cl">    <span class="nx">root</span>: <span class="kt">null</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nx">target</span>: <span class="kt">loadMoreButtonRef</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nx">onIntersect</span>: <span class="kt">fetchNextPage</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">    <span class="nx">enabled</span>: <span class="kt">hasNextPage</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">  <span class="p">});</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="c1">// ìŠ¤í¬ë¡¤ ê°’ì„ í™•ì¸
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="kr">const</span> <span class="p">[</span><span class="nx">scrollY</span><span class="p">,</span> <span class="nx">setScrollY</span><span class="p">]</span> <span class="o">=</span> <span class="nx">useLocalStorage</span><span class="p">(</span><span class="s1">&#39;PostListScroll&#39;</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">  <span class="nx">React</span><span class="p">.</span><span class="nx">useEffect</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="k">if</span> <span class="p">(</span><span class="nx">scrollY</span> <span class="o">!==</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">      <span class="nb">window</span><span class="p">.</span><span class="nx">scrollTo</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nb">Number</span><span class="p">(</span><span class="nx">scrollY</span><span class="p">));</span>
</span></span><span class="line"><span class="cl">      <span class="nx">setScrollY</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="c1">// eslint-disable-next-line react-hooks/exhaustive-deps
</span></span></span><span class="line"><span class="cl"><span class="c1"></span>  <span class="p">},</span> <span class="p">[]);</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="k">return</span> <span class="p">(</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;&gt;</span>
</span></span><span class="line"><span class="cl">      <span class="p">&lt;</span><span class="nt">ul</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">        <span class="p">{</span><span class="nx">isFetching</span> <span class="o">&amp;&amp;</span> <span class="p">&lt;</span><span class="nt">LoadingDiv</span> <span class="p">/&gt;}</span>
</span></span><span class="line"><span class="cl">        <span class="p">{</span><span class="nx">data</span><span class="o">?</span><span class="p">.</span><span class="nx">pages</span><span class="p">.</span><span class="nx">map</span><span class="p">((</span><span class="nx">page</span><span class="p">)</span> <span class="o">=&gt;</span>
</span></span><span class="line"><span class="cl">          <span class="nx">page</span><span class="p">.</span><span class="nx">results</span><span class="p">.</span><span class="nx">map</span><span class="p">((</span><span class="nx">post</span>: <span class="kt">Results</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">(</span>
</span></span><span class="line"><span class="cl">            <span class="p">&lt;</span><span class="nt">li</span> <span class="na">key</span><span class="o">=</span><span class="p">{</span><span class="nx">post</span><span class="p">.</span><span class="nx">id</span><span class="p">}</span> <span class="na">data</span><span class="err">-</span><span class="na">aos</span><span class="o">=</span><span class="s">&#39;fade-up&#39;</span> <span class="na">data</span><span class="err">-</span><span class="na">aos</span><span class="err">-</span><span class="na">duration</span><span class="o">=</span><span class="s">&#39;200&#39;</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">              <span class="p">&lt;</span><span class="nt">Link</span>
</span></span><span class="line"><span class="cl">                <span class="na">href</span><span class="o">=</span><span class="p">{{</span>
</span></span><span class="line"><span class="cl">                  <span class="nx">pathname</span><span class="o">:</span> <span class="sb">`community/post/</span><span class="si">${</span><span class="nx">post</span><span class="p">.</span><span class="nx">id</span><span class="si">}</span><span class="sb">`</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                  <span class="nx">query</span><span class="o">:</span> <span class="p">{</span> <span class="nx">post</span>: <span class="kt">JSON.stringify</span><span class="p">(</span><span class="nx">post</span><span class="p">)</span> <span class="p">},</span>
</span></span><span class="line"><span class="cl">                <span class="p">}}</span>
</span></span><span class="line"><span class="cl">                <span class="na">as</span><span class="o">=</span><span class="p">{</span><span class="sb">`community/post/</span><span class="si">${</span><span class="nx">post</span><span class="p">.</span><span class="nx">id</span><span class="si">}</span><span class="sb">`</span><span class="p">}</span>
</span></span><span class="line"><span class="cl">                <span class="na">passHref</span>
</span></span><span class="line"><span class="cl">              <span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">                <span class="p">&lt;</span><span class="nt">a</span>
</span></span><span class="line"><span class="cl">                  <span class="na">href</span><span class="o">=</span><span class="p">{</span><span class="sb">`community/post/</span><span class="si">${</span><span class="nx">post</span><span class="p">.</span><span class="nx">id</span><span class="si">}</span><span class="sb">`</span><span class="p">}</span>
</span></span><span class="line"><span class="cl">                  <span class="na">onClick</span><span class="o">=</span><span class="p">{()</span> <span class="o">=&gt;</span> <span class="nx">setScrollY</span><span class="p">(</span><span class="nb">window</span><span class="p">.</span><span class="nx">scrollY</span><span class="p">)}</span> <span class="err">//</span> <span class="na">í´ë¦­ì‹œì—</span> <span class="na">í•´ë‹¹</span> <span class="na">yê°’ì„</span> <span class="na">ì €ì¥í•´ì¤Œ</span>
</span></span><span class="line"><span class="cl">                <span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">                <span class="p">&lt;/</span><span class="nt">a</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">              <span class="p">&lt;/</span><span class="nt">Link</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">            <span class="p">&lt;/</span><span class="nt">li</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">          <span class="p">))</span>
</span></span><span class="line"><span class="cl">        <span class="p">)}</span>
</span></span><span class="line"><span class="cl">      <span class="p">&lt;/</span><span class="nt">ul</span><span class="p">&gt;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">      <span class="p">&lt;</span><span class="nt">div</span> <span class="na">ref</span><span class="o">=</span><span class="p">{</span><span class="nx">loadMoreButtonRef</span><span class="p">}</span> <span class="p">/&gt;</span>
</span></span><span class="line"><span class="cl">    <span class="p">&lt;/&gt;</span>
</span></span><span class="line"><span class="cl">  <span class="p">);</span>
</span></span><span class="line"><span class="cl"><span class="p">};</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="kr">export</span> <span class="k">default</span> <span class="nx">ListExample</span><span class="p">;</span>
</span></span></code></pre></td></tr></table>
</div>
</div></div>
</div>
<br />

<p>ì½˜ì†”ì„ ì°ì–´ë³´ë©´ ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤.
<figure class="align-center ">
    <img loading="lazy" src="../img/5.gif#center"/> 
</figure>
</p>
<p><code>LocalStorage</code>ë¥¼ ì´ˆê¸°í™” í•´ì£¼ëŠ” ì¡°ê±´ì„ <code>Headerë‚˜ ë‹¤ë¥¸ ê°ì‹¸ì§€ëŠ” ì»´í¬ë„ŒíŠ¸</code>ì— ì¶”ê°€í•´ì£¼ì–´ì„œ <code>Aë¦¬ìŠ¤íŠ¸ &gt; Bë¦¬ìŠ¤íŠ¸ &gt; Aë¦¬ìŠ¤íŠ¸</code>ë¡œ ë‹¤ë¥¸ ë¦¬ìŠ¤íŠ¸ë¥¼ ê±°ì³ ëŒì•„ì™”ì„ë•Œ Aë¦¬ìŠ¤íŠ¸ì˜ scrollYê°’ì„ ì´ˆê¸°í™” í•´ì£¼ëŠ” ê²ƒë„ í•„ìš”í•©ë‹ˆë‹¤.</p>
<p>ì €ì˜ ê²½ìš°ì—” Headerì— ì¶”ê°€ì£¼ì—ˆìŠµë‹ˆë‹¤.</p>
<h4 id="headertsx"><code>header.tsx</code><a hidden class="anchor" aria-hidden="true" href="#headertsx">#</a></h4>


<div class="terminal space shadow">
  <div class="top">
    <div class="btns">
      <span class="circle red"></span>
      <span class="circle yellow"></span>
      <span class="circle green"></span>
    </div>
    <div class="title">
      header.tsx
    </div>
  </div>
  <div class="terminalbody"><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-typescript" data-lang="typescript"><span class="line"><span class="cl"><span class="p">...</span>
</span></span><span class="line"><span class="cl">  <span class="kr">const</span> <span class="p">[,</span> <span class="nx">setCommunityScrollY</span><span class="p">]</span> <span class="o">=</span> <span class="nx">useLocalStorage</span><span class="p">&lt;</span><span class="nt">number</span><span class="p">&gt;(</span><span class="s1">&#39;PostListScroll&#39;</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">  <span class="kr">const</span> <span class="nx">NavigateCommunity</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">setCommunityScrollY</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="nx">router</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="s1">&#39;/community&#39;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="nb">window</span><span class="p">.</span><span class="nx">scrollTo</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="nx">setMobileNavOpen</span><span class="p">(</span><span class="kc">false</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">  <span class="p">};</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">  <span class="kr">const</span> <span class="p">[,</span> <span class="nx">setFindcueScrollY</span><span class="p">]</span> <span class="o">=</span> <span class="nx">useLocalStorage</span><span class="p">&lt;</span><span class="nt">number</span><span class="p">&gt;(</span><span class="s1">&#39;CueListScroll&#39;</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">  <span class="kr">const</span> <span class="nx">NavigateFindCue</span> <span class="o">=</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">    <span class="nx">setFindcueScrollY</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="nx">router</span><span class="p">.</span><span class="nx">push</span><span class="p">(</span><span class="s1">&#39;/findcue&#39;</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="nb">window</span><span class="p">.</span><span class="nx">scrollTo</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">    <span class="nx">setMobileNavOpen</span><span class="p">(</span><span class="kc">false</span><span class="p">);</span>
</span></span><span class="line"><span class="cl">  <span class="p">};</span>
</span></span><span class="line"><span class="cl"><span class="p">...</span>
</span></span></code></pre></td></tr></table>
</div>
</div></div>
</div>
<br />

<br>
<h3 id="ë§ˆì¹˜ë©°">ë§ˆì¹˜ë©°<a hidden class="anchor" aria-hidden="true" href="#ë§ˆì¹˜ë©°">#</a></h3>
<p>ì´ì œ ë¬´í•œ ìŠ¤í¬ë¡¤ì„ êµ¬í˜„í•  ë•Œ ìƒí™©ì— ë”°ë¼ì„œ ëª¨ë‹¬ë¡œ ì—´ê±°ë‚˜ ìƒˆë¡œìš´ í˜ì´ì§€ ì´ë™ í›„ ë’¤ë¡œê°€ê¸°ì‹œ ë¡œë”©ëœ ê°’ì€ ë‹¤ì‹œ ë¶ˆëŸ¬ì˜¤ì§€ ì•Šê³  í•´ë‹¹ ê°’ìœ¼ë¡œ ë‹¤ì‹œ ëŒì•„ì˜¤ê²Œ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
<h4 id="reference">Reference<a hidden class="anchor" aria-hidden="true" href="#reference">#</a></h4>
<ul>
<li><a href="https://github.com/theodorusclarence/ts-nextjs-tailwind-starter">https://github.com/theodorusclarence/ts-nextjs-tailwind-starter</a></li>
<li><a href="https://github.com/theodorusclarence/expansion-pack">https://github.com/theodorusclarence/expansion-pack</a></li>
<li><a href="https://tanstack.com">https://tanstack.com</a></li>
<li><a href="https://developer.mozilla.org/ko/docs/Web/API/IntersectionObserver">https://developer.mozilla.org/ko/docs/Web/API/IntersectionObserver</a></li>
<li><a href="https://velog.io/@hdpark">https://velog.io/@hdpark</a></li>
</ul>
<hr>
<p><strong>ê¶ê¸ˆí•˜ì‹  ì ì´ ìˆìœ¼ì‹œë©´ ì•„ë˜ Comments ë‚¨ê²¨ì£¼ì„¸ìš” ğŸ‘‡</strong></p>


  </div>

  <footer class="post-footer">
    <ul class="post-tags">
      <li><a href="https://cha2hyun.blog/tags/next.js/">Next.js</a></li>
      <li><a href="https://cha2hyun.blog/tags/react-query/">React Query</a></li>
      <li><a href="https://cha2hyun.blog/tags/infinite-scroll/">Infinite Scroll</a></li>
      <li><a href="https://cha2hyun.blog/tags/modal/">Modal</a></li>
      <li><a href="https://cha2hyun.blog/tags/localstorage/">LocalStorage</a></li>
    </ul>
<nav class="paginav">
  <a class="prev" href="https://cha2hyun.blog/content/projects/%ED%81%90%EC%B0%BE%EC%82%AC/ssrandseo/">
    <span class="title">Â« Prev</span>
    <br>
    <span>SSRë¥¼ ì´ìš©í•œ SEO ìµœì í™” (êµ¬ê¸€, ë„¤ì´ë²„ ìµœìƒë‹¨ ë…¸ì¶œ ì„±ê³µ)</span>
  </a>
  <a class="next" href="https://cha2hyun.blog/content/posts/nestjs-graphql-kakao-jwt/">
    <span class="title">Next Â»</span>
    <br>
    <span>ì²« Boilerplate í…œí”Œë¦¿ (NestJS ì¹´ì¹´ì˜¤ OAuth ë° jwtí† í° ì´ìš©í•˜ê¸°)</span>
  </a>
</nav>


<div
  style="
    padding-top: 15px;
    padding-bottom: 2px;
    font-size: x-large;
    font-weight: 700;
  "
>
  ê¶ê¸ˆí•˜ì‹  ì ì´ ìˆìœ¼ì‹ ê°€ìš”? ğŸ˜€
</div>



<script
  src="https://utteranc.es/client.js"
  repo="cha2hyun/blog-comments"
  issue-term="title"
  theme="boxy-light"
  crossorigin="anonymous"
  async
></script>

  </footer>
</article>
    </main>
    
<footer class="footer">
    <span>&copy; 2023 <a href="https://cha2hyun.blog/">ì±„ìˆ˜í˜„ ê°œë°œì¼ì§€</a></span>
    
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
<script>
    document.querySelectorAll('pre > code').forEach((codeblock) => {
        const container = codeblock.parentNode.parentNode;

        const copybutton = document.createElement('button');
        copybutton.classList.add('copy-code');
        copybutton.innerHTML = 'copy';

        function copyingDone() {
            copybutton.innerHTML = 'copied!';
            setTimeout(() => {
                copybutton.innerHTML = 'copy';
            }, 2000);
        }

        copybutton.addEventListener('click', (cb) => {
            if ('clipboard' in navigator) {
                navigator.clipboard.writeText(codeblock.textContent);
                copyingDone();
                return;
            }

            const range = document.createRange();
            range.selectNodeContents(codeblock);
            const selection = window.getSelection();
            selection.removeAllRanges();
            selection.addRange(range);
            try {
                document.execCommand('copy');
                copyingDone();
            } catch (e) { };
            selection.removeRange(range);
        });

        if (container.classList.contains("highlight")) {
            container.appendChild(copybutton);
        } else if (container.parentNode.firstChild == container) {
            
        } else if (codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName == "TABLE") {
            
            codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(copybutton);
        } else {
            
            codeblock.parentNode.appendChild(copybutton);
        }
    });
</script>
</body>

</html>
