<!DOCTYPE html>
<html lang="en" dir="auto">

<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>ìœ íŠœë¸Œ APIë¥¼ ì´ìš©í•œ ëŒ“ê¸€ ì˜¤ë˜ ë²„í‹°ê¸° ì´ë²¤íŠ¸ | ì±„ìˆ˜í˜„ ê°œë°œì¼ì§€</title>
<meta name="keywords" content="python, websockets, bs4, selenium, crawling">
<meta name="description" content="ìœ íŠœë¸Œì— ëŒ“ê¸€ì´ Në¶„ë™ì•ˆ ë‹¬ë¦¬ì§€ ì•Šìœ¼ë©´ ìŠ¹ë¦¬í•˜ê²Œ ë©ë‹ˆë‹¤. feat)íŒ©í† ë¦¬">
<meta name="author" content="cha2hyun">
<link rel="canonical" href="https://cha2hyun.blog/content/projects/%EB%B0%B0%EB%8F%8C%EC%9D%B4%EC%9D%98%EB%8B%B9%EA%B5%AC%EC%83%9D%ED%99%9C/youtube-comment-event/">
<link crossorigin="anonymous" href="/assets/css/stylesheet.06cc1401233af506ee36c5cc89872a4bb4866704e48f666797e0ab85a990bd8f.css" integrity="sha256-BswUASM69QbuNsXMiYcqS7SGZwTkj2Znl&#43;CrhamQvY8=" rel="preload stylesheet" as="style">
<link rel="icon" href="https://cha2hyun.blog/favicon/favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="https://cha2hyun.blog/favicon/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="https://cha2hyun.blog/favicon/favicon-32x32.png">
<link rel="apple-touch-icon" href="https://cha2hyun.blog/favicon/apple-icon-76x76.png">
<link rel="mask-icon" href="https://cha2hyun.blog/safari-pinned-tab.svg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: rgb(29, 30, 32);
                --entry: rgb(46, 46, 51);
                --primary: rgb(218, 218, 219);
                --secondary: rgb(155, 156, 157);
                --tertiary: rgb(65, 66, 68);
                --content: rgb(196, 196, 197);
                --hljs-bg: rgb(46, 46, 51);
                --code-bg: rgb(55, 56, 62);
                --border: rgb(51, 51, 51);
            }

            .list {
                background: var(--theme);
            }

            .list:not(.dark)::-webkit-scrollbar-track {
                background: 0 0;
            }

            .list:not(.dark)::-webkit-scrollbar-thumb {
                border-color: var(--theme);
            }
        }

    </style>
</noscript><meta property="og:title" content="ìœ íŠœë¸Œ APIë¥¼ ì´ìš©í•œ ëŒ“ê¸€ ì˜¤ë˜ ë²„í‹°ê¸° ì´ë²¤íŠ¸" />
<meta property="og:description" content="ìœ íŠœë¸Œì— ëŒ“ê¸€ì´ Në¶„ë™ì•ˆ ë‹¬ë¦¬ì§€ ì•Šìœ¼ë©´ ìŠ¹ë¦¬í•˜ê²Œ ë©ë‹ˆë‹¤. feat)íŒ©í† ë¦¬" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cha2hyun.blog/content/projects/%EB%B0%B0%EB%8F%8C%EC%9D%B4%EC%9D%98%EB%8B%B9%EA%B5%AC%EC%83%9D%ED%99%9C/youtube-comment-event/" /><meta property="og:image" content="https://cha2hyun.blog/papermod-cover.png"/><meta property="article:section" content="content" />
<meta property="article:published_time" content="2023-04-28T00:00:00+00:00" />
<meta property="article:modified_time" content="2023-04-28T00:00:00+00:00" />

<meta name="twitter:card" content="summary_large_image"/>
<meta name="twitter:image" content="https://cha2hyun.blog/papermod-cover.png"/>

<meta name="twitter:title" content="ìœ íŠœë¸Œ APIë¥¼ ì´ìš©í•œ ëŒ“ê¸€ ì˜¤ë˜ ë²„í‹°ê¸° ì´ë²¤íŠ¸"/>
<meta name="twitter:description" content="ìœ íŠœë¸Œì— ëŒ“ê¸€ì´ Në¶„ë™ì•ˆ ë‹¬ë¦¬ì§€ ì•Šìœ¼ë©´ ìŠ¹ë¦¬í•˜ê²Œ ë©ë‹ˆë‹¤. feat)íŒ©í† ë¦¬"/>


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position":  1 ,
      "name": "Contents",
      "item": "https://cha2hyun.blog/content/"
    }, 
    {
      "@type": "ListItem",
      "position":  2 ,
      "name": "Projects",
      "item": "https://cha2hyun.blog/content/projects/"
    }, 
    {
      "@type": "ListItem",
      "position":  4 ,
      "name": "ìœ íŠœë¸Œ APIë¥¼ ì´ìš©í•œ ëŒ“ê¸€ ì˜¤ë˜ ë²„í‹°ê¸° ì´ë²¤íŠ¸",
      "item": "https://cha2hyun.blog/content/projects/%EB%B0%B0%EB%8F%8C%EC%9D%B4%EC%9D%98%EB%8B%B9%EA%B5%AC%EC%83%9D%ED%99%9C/youtube-comment-event/"
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "ìœ íŠœë¸Œ APIë¥¼ ì´ìš©í•œ ëŒ“ê¸€ ì˜¤ë˜ ë²„í‹°ê¸° ì´ë²¤íŠ¸",
  "name": "ìœ íŠœë¸Œ APIë¥¼ ì´ìš©í•œ ëŒ“ê¸€ ì˜¤ë˜ ë²„í‹°ê¸° ì´ë²¤íŠ¸",
  "description": "ìœ íŠœë¸Œì— ëŒ“ê¸€ì´ Në¶„ë™ì•ˆ ë‹¬ë¦¬ì§€ ì•Šìœ¼ë©´ ìŠ¹ë¦¬í•˜ê²Œ ë©ë‹ˆë‹¤. feat)íŒ©í† ë¦¬",
  "keywords": [
    "python", "websockets", "bs4", "selenium", "crawling"
  ],
  "articleBody": "\në“¤ì–´ê°€ë©° ìœ íŠœë¸Œ ì±„ë„ íŒ©í† ë¦¬ ë‹˜ê»˜ì„œ ì§„í–‰í•´ì£¼ì‹  ë ˆì „ë“œ ì»¨í…ì¸  ì´ë²¤íŠ¸ê°€ ìˆìŠµë‹ˆë‹¤. (ì•„ë§ˆë„ íŒ©í† ë¦¬ë‹˜ì€ ê°œë°œìì¼ì§€ë„) ì•„ì§ë„ ì•ˆëë‚˜ê³  ëŒ“ê¸€ì´ 150ë§Œê°œê°€ ë‹¬ë ¤ì„œ ì„¸ê³„10ìœ„ì— ë“¤ì—ˆë‹¤ê³  í•©ë‹ˆë‹¤\në°°ëŒì´ì˜ ë‹¹êµ¬ìƒí™œ ìœ íŠœë¸Œì—ì„œë„ ë¹„ìŠ·í•œ ë‹¤ì–‘í•œ ì´ë²¤íŠ¸ë“¤ì„ ì§„í–‰ì¤‘ì…ë‹ˆë‹¤.\në¼ì´ë¸Œì—ì„œ ì‹¤ì‹œê°„ ì¶”ì²¨ (ì°¸ê³ ê¸€) ì»¨í…ì¸ ì— ëŒ“ê¸€ë‹¬ê³  ì˜¤ë«ë™ì•ˆ ë²„í‹´ì‚¬ëŒ ì»¨í…ì¸  ëŒ“ê¸€ì¤‘ ì¢‹ì•„ìš”ê°€ ê°€ì¥ ë§ì€ ì‚¬ëŒ ì»¨í…ì¸  ëŒ“ê¸€ì¤‘ ë‹µê¸€ì´ ì œì¼ ë§ì€ ì‚¬ëŒ ì»¨í…ì¸ ì— ëŒ“ê¸€ì„ ê°€ì¥ ë§ì´ ì‘ì„±í•œ ì‚¬ëŒ ìœ„ ë¿ë§Œ ì•„ë‹ˆë¼ ì—¬ëŸ¬ê°€ì§€ ì´ë²¤íŠ¸ë“¤ì„ ì§„í–‰\u0026ê¸°íšì¤‘ìœ¼ë¡œ í”„ë¡œê·¸ë¨ì„ ì œì‘í•˜ê²Œ ë˜ì—ˆìŠµë‹ˆë‹¤. ì½”ë“œ \u0026 ì½”ë“œì„¤ëª… constant.py ìƒìˆ˜ë¥¼ ëª¨ì•„ë†“ì€ íŒŒì¼ì…ë‹ˆë‹¤. constant.py 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 LINE = \"=\" * 28 SMALL_LINE = '-' * 65 SYNOLOGY_LINE = '-' * 38 YOUTUBEAPI_KEY = \"\" YOUTUBEAPI_SUB_KEY = \"\" YOUTUBEAPI_VIDEOS_URL = \"https://www.googleapis.com/youtube/v3/videos\" YOUTUBEAPI_COMMENTTHREADS_URL = \"https://www.googleapis.com/youtube/v3/commentThreads\" YOUTUBEAPI_REQUEST_PER_TIME = 10 YOUTUBEAPI_RESEND_TIMEOUT = 3 MOST_CNT = 5 MAXRESULTS = 100 LIVE_MAXRESULTS = 30 # SYNOLOGY CHATì— ë³´ë‚¼ ê²½ìš° SYNOLOGYAPI_URL = \"\" # ë©”ì„¸ì§€ë¥¼ ì²˜ë¦¬í•˜ëŠ” apië¥¼ ë”°ë¡œ ë§Œë“¤ì–´ì•¼í•©ë‹ˆë‹¤. SYNOLOGYAPI_REQUEST_PER_TIME = 0.5 SYNOLOGYCHAT_LINE_SPLIT = 5 crwaler.py í”„ë¡œê·¸ë¨ ì½”ì–´ì…ë‹ˆë‹¤. ì„¤ëª…ì€ ì£¼ì„ìœ¼ë¡œ ë‹¬ì•„ë†“ì•˜ìŠµë‹ˆë‹¤. crwaler.py 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99 100 101 102 103 104 105 106 107 108 109 110 111 112 113 114 115 116 117 118 119 120 121 122 123 124 125 126 127 128 129 130 131 132 133 134 135 136 137 138 139 140 141 142 143 144 145 146 147 148 149 150 151 152 153 154 155 156 157 158 159 160 161 162 163 164 165 166 167 168 169 170 171 172 173 174 175 176 177 178 179 180 181 182 183 184 185 186 187 188 189 190 191 192 193 194 195 196 197 198 199 200 201 202 203 204 205 206 207 208 209 210 211 212 213 214 215 216 217 218 219 220 221 222 223 224 225 226 227 228 229 230 231 232 233 234 235 236 237 238 239 240 241 242 243 244 245 246 247 248 249 250 251 252 253 254 255 256 257 258 259 260 261 262 263 264 265 266 267 268 269 270 271 272 273 274 275 276 277 278 279 280 281 282 283 284 285 286 287 288 289 290 291 292 293 294 295 296 297 298 299 300 301 302 303 304 305 306 307 308 309 310 311 312 313 314 315 316 317 318 319 320 321 322 323 324 325 326 327 328 329 330 331 332 333 334 335 336 337 338 339 340 341 342 343 344 345 346 347 348 349 350 351 352 353 354 355 356 357 358 359 360 361 362 363 364 365 366 367 368 369 370 371 372 373 374 375 376 377 378 379 380 381 382 383 384 385 386 387 388 389 390 391 392 393 394 395 396 397 398 399 400 401 402 403 404 405 406 407 408 409 410 411 412 413 414 415 416 417 418 419 420 421 422 423 424 425 426 427 428 429 430 431 432 433 434 435 436 437 438 from datetime import datetime, timezone from operator import itemgetter import time import os import requests from constant import * def utc_to_local(utc_dt): # ìœ íŠœë¸Œ API ë¡œ ë°›ì•„ì˜¤ë©´ ë¯¸êµ­ ì‹œê°„ìœ¼ë¡œ ë°›ì•„ì™€ì§ # ë¯¸êµ­ \u003e í•œêµ­ìœ¼ë¡œ ë³€ê²½ return utc_dt.replace(tzinfo=timezone.utc).astimezone(tz=None) def sorter(list, value): # [{},{},..,{}] ë¦¬ìŠ¤íŠ¸ì—ì„œ ë”•ì…”ë„ˆë¦¬ì˜ ë°¸ë¥˜ë¥¼ ì´ìš©í•´ ì •ë ¬ return sorted(list, key=itemgetter(value), reverse=True) def listDivider(arr, n): # arrë°°ì—´ì„ nê°œì”© ë‚˜ëˆ„ì–´ ë°°ì—´ë¡œ ê°ì‹¸ ë¦¬í„´í•©ë‹ˆë‹¤. return [arr[i: i + n] for i in range(0, len(arr), n)] class Printer: # 1. í™”ë©´ì— ì¶œë ¥ # 2. ë¡œì»¬ì— ì €ì¥ # 3. ì‹œë†€ë¡œì§€ì±„íŒ…ì— ì „ì†¡ # ìœ„ 3ê°€ì§€ë¥¼ ë‹´ë‹¹í•˜ëŠ” í´ë˜ìŠ¤ def __init__(self): # íŒŒì¼ ì €ì¥í•  ë””ë ‰í† ë¦¬ ìƒì„± today = time.strftime('%Y-%m-%d', time.localtime(time.time())) start = time.strftime('%Y-%m-%d %H:%M:%S', time.localtime(time.time())) current = os.getcwd() path = f'{current}/{today}' try: if not os.path.exists(path): os.makedirs(path) except OSError: print(\"Error: Cannot create the directory {}\".format(path)) self.fp = open(f'{path}/{start}.txt', 'w') def saveOnLocal(self, msg): # ì¶œë ¥í•˜ê³  íŒŒì¼ì— ì €ì¥í•©ë‹ˆë‹¤. self.fp.write(f'{msg}\\n') print(msg) def sendToChat(self, msg): # ì‹œë†€ë¡œì§€ì±„íŒ…ì— ë³´ë‚´ê³ , ì¶œë ¥í•˜ê³ , ë¡œì»¬ì— ì €ì¥í•©ë‹ˆë‹¤. self.saveOnLocal(msg) # í…ìŠ¤íŠ¸ê°€ ë„ˆë¬´ ê¸¸ë©´ ì‹œë†€ë¡œì§€ì±—ì—ì„œ 410 ì—ëŸ¬ë¥¼ ë°˜í™˜í•œë‹¤. n ì¤„ì”© ëŠì–´ì„œ ë°°ì—´ë¡œ ë¦¬í„´ (\\nìœ¼ë¡œ) msgs_array = listDivider(msg.split('\\n'), SYNOLOGYCHAT_LINE_SPLIT) # ì‹œë†€ë¡œì§€ì—ì„œ ì´ì˜ê²Œ í‘œì‹œë˜ê²Œ ë³€ê²½í•©ë‹ˆë‹¤. for msgs in msgs_array: text = '\\n'.join(msgs) text = text.replace(SMALL_LINE, SYNOLOGY_LINE) text = text.replace(\"\\t\",'') text = text.replace(\" \",\" \") text = text.replace(\"ë‹‰ë„¤ì„\",\"\\në‹‰ë„¤ì„\") text = text.replace(\"| @\",\"\\n@\") # í•´ë‹¹ í…ìŠ¤íŠ¸ë¥¼ ì‹œë†€ë¡œì§€ ì±—ë´‡ìœ¼ë¡œ ë³´ë‚¼ ìˆ˜ ìˆëŠ” APIë¥¼ ë§Œë“¤ì–´ë†“ì•˜ìŠµë‹ˆë‹¤. requests.get(SYNOLOGYAPI_URL, data={\"msg\":text}) time.sleep(SYNOLOGYAPI_REQUEST_PER_TIME) def close(self): self.fp.close() class Youtube: apikey = YOUTUBEAPI_KEY videoId = '' videoInfo = { \"title\": '', # ì œëª© \"description\": '', # ì„¤ëª… \"viewCount\": 0, # ì¡°íšŒìˆ˜ \"likeCount\": 0, # ì¢‹ì•„ìš” \"commentCount\": 0, # ëŒ“ê¸€ìˆ˜ } comments = [{ \"authorDisplayName\": '', # ë‹‰ë„¤ì„ \"textDisplay\": '', # ëŒ“ê¸€ \"publisedAt\": '', # ì‘ì„±ì¼ \"likeCount\": '', # ì¢‹ì•„ìš” \"diffTime\": '', # ë‹¤ìŒê¸€ ì‘ì„±ì‹œê°„ì˜ ì°¨ì´ \"authorChannelId\": '', # ìœ ì € ì±„ë„ ì•„ì´ë”” (ê³ ìœ ê°’) \"totalReplyCount\": '', # ë‹µê¸€ ìˆ˜ }] def __init__(self): self.printer = Printer() self.greeting() # ìœ ì €í•œí…Œ ë™ì˜ìƒ IDë¥¼ ë°›ì•„ì˜¤ê³  self.videoId = self.getVideoId() # ë™ì˜ìƒ ì •ë³´ë¥¼ ì¶œë ¥í•˜ê³  self.videoInfo = self.getVideoInfo() # ë™ì˜ìƒì˜ ëŒ“ê¸€ì„ ì €ì¥í•©ë‹ˆë‹¤. self.comments = [] self.comments = self.getVideoComments() # ì €ì¥ëœ ëŒ“ê¸€ì„ ë¶„ì„í•´ì„œ ëª‡ë¶„ë§Œì— ë‹¤ìŒ ëŒ“ê¸€ì´ ë‹¬ë ¸ëŠ”ì§€ ì €ì¥í•©ë‹ˆë‹¤. self.addDiffTime(self.comments) self.start() def start(self): while True: self.printer.saveOnLocal(f'\\n\\n{LINE}') self.printer.saveOnLocal(\"ìœ íŠœë¸Œ ëŒ“ê¸€ ì¡°íšŒ í”„ë¡œê·¸ë¨\\nby.ë°°ëŒì´ì˜ë‹¹êµ¬ìƒí™œ ì±„PD\") self.printer.saveOnLocal(f'{LINE}') self.printer.saveOnLocal(\" 0. ì¢…ë£Œ\") self.printer.saveOnLocal(\" 1. ëª¨ë“  ëŒ“ê¸€ ì¡°íšŒ\") self.printer.saveOnLocal(\" 2. ê°€ì¥ ë§ì€ ì¢‹ì•„ìš” ëŒ“ê¸€ ì¡°íšŒ\") self.printer.saveOnLocal(\" 3. ê°€ì¥ ë§ì€ ë‹µê¸€ìˆ˜ ëŒ“ê¸€ ì¡°íšŒ\") self.printer.saveOnLocal(\" 4. ê°€ì¥ ë§ì´ ì‘ì„±í•œ ì‚¬ëŒ ì¡°íšŒ\") self.printer.saveOnLocal(\" 5. ê°€ì¥ ì˜¤ë˜ ë²„í‹´ ëŒ“ê¸€ ì¡°íšŒ\") self.printer.saveOnLocal(\" 6. ë‹‰ë„¤ì„ ì¡°íšŒ\") self.printer.saveOnLocal(\" 7. ëŒ“ê¸€ ë²„í‹°ê¸° ì´ë²¤íŠ¸ ì‹œì‘\") self.printer.saveOnLocal(\" 8. ë‹¤ë¥¸ ì˜ìƒ ì¡°íšŒí•˜ê¸°\") self.printer.saveOnLocal(f'{LINE}') command = input(\"ë²ˆí˜¸ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš” : \") self.printer.saveOnLocal(f' \u003e ì…ë ¥ëœ ë²ˆí˜¸ : {command}') if command == \"0\": # ì¢…ë£Œ self.printer.saveOnLocal(\"í”„ë¡œê·¸ë¨ì„ ì¢…ë£Œí•©ë‹ˆë‹¤.\") self.printer.close() break elif command == \"1\": # ëª¨ë“  ëŒ“ê¸€ ì¡°íšŒ os.system('clear') self.printComments(self.comments) elif command == \"2\": # ê°€ì¥ ë§ì€ ì¢‹ì•„ìš” os.system('clear') self.printMostLiker() elif command == \"3\": # ê°€ì¥ ë§ì€ ë‹µê¸€ìˆ˜ os.system('clear') self.printMostReply() elif command == \"4\": # ê°€ì¥ ë§ì´ ì‘ì„±í•œ ì‚¬ëŒ os.system('clear') self.printMostCommenter() elif command == \"5\": # ê°€ì¥ ì˜¤ë˜ ë²„í‹´ ëŒ“ê¸€ os.system('clear') self.printMostDiffTime() elif command == \"6\": # ìœ ì € ê²€ìƒ‰ os.system('clear') username = input(\"ê²€ìƒ‰í•  ë‹‰ë„¤ì„ì„ ì ì–´ì£¼ì„¸ìš” : \") self.printUsersComment(username) elif command == \"7\": # ë²„í‹°ê¸° ì´ë²¤íŠ¸ ì‹œì‘ os.system('clear') print(LINE) print(\"ğŸš¨ ëŒ“ê¸€ ê³ ì •ì´ ì—†ëŠ”ì§€ í™•ì¸í•´ì£¼ì„¸ìš”. ë˜ì–´ìˆë‹¤ë©´ ê³ ì •í•´ì œ í•´ì£¼ì„¸ìš”.\") print(\"ğŸš¨ ì´ë²¤íŠ¸ê°€ ì¢…ë£Œë  ë•Œ ê¹Œì§€ í”„ë¡œê·¸ë¨ì€ ê³„ì† ì§„í–‰ë©ë‹ˆë‹¤.\") print(LINE) stop = input(\" \u003e ëª‡ ë¶„ ë²„í‹°ê¸°ë¥¼ í•˜ì‹¤ê±´ì§€ ì…ë ¥í•´ì£¼ì„¸ìš” : \") os.system('clear') self.startDiffTimeEvent(stop) elif command == \"8\": # ë‹¤ë¥¸ ë™ì˜ìƒ ì¡°íšŒ os.system('clear') self.__init__() else: os.system('clear') def greeting(self): text = f'\\n{LINE}\\nâœ‹ í”„ë¡œê·¸ë¨ì´ ì‹œì‘ë©ë‹ˆë‹¤. {time.strftime(\"%yë…„ %mì›” %dì¼ %H:%M:%S\")}\\n' text += f'\u003e By.ë°°ëŒì´ì˜ë‹¹êµ¬ìƒí™œ ì±„PD\\n\u003e ì˜ìƒ ëŒ“ê¸€ ì´ë²¤íŠ¸\\n{LINE}' self.printer.saveOnLocal(text) def youtubeAPIExceed(self): # ìœ íŠœë¸Œ APIê°€ ì¼ì¼ í•œë„ê°€ ì •í•´ì ¸ ìˆìŒ. # ì¼ì¼í•œë„ë¥¼ ì´ˆê³¼í•˜ë©´ ë‹¤ë¥¸ í‚¤ë¡œ ë³€ê²½í•©ë‹ˆë‹¤. self.printer.sendToChat(f'ğŸš¨ ìœ íŠœë¸Œ API ìš”ì²­ í•œë„ ì´ˆê³¼. {YOUTUBEAPI_RESEND_TIMEOUT}ì´ˆ í›„ ë‹¤ì‹œ ì‹œë„í•©ë‹ˆë‹¤.') if self.apikey == YOUTUBEAPI_KEY: self.apikey = YOUTUBEAPI_SUB_KEY elif self.apikey == YOUTUBEAPI_SUB_KEY: self.apikey = YOUTUBEAPI_KEY time.sleep(YOUTUBEAPI_RESEND_TIMEOUT) def youtubeNotFound(self): # ìœ íŠœë¸Œ urlì„ ì°¾ì§€ ëª»í–ˆì„ ê²½ìš° print(f'ğŸš¨ í•´ë‹¹ ìœ íŠœë¸Œ ì˜ìƒ URLì„ í™•ì¸í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤. ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.\\n{LINE}') self.__init__() def getVideoId(self): while True: videoId = input(\"1ï¸âƒ£ ì˜ìƒ URLì„ ì…ë ¥í•´ì£¼ì„¸ìš” : \") # ìœ íŠœë¸Œ URL ì¸ì§€ í™•ì¸ try: if 'youtu' not in videoId: raise Exception if 'watch?v=' in videoId: videoId = videoId.split(\"=\")[1] else: videoId = videoId.split(\"/\")[-1] return videoId except Exception as e: print(\"ğŸš¨ í•´ë‹¹ ì˜ìƒì„ í™•ì¸í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤. ë‹¤ì‹œ ì…ë ¥í•´ì£¼ì„¸ìš”.\", e) print(LINE) def getVideoInfo(self): # ìœ ì €ë¡œë¶€í„° ë°›ì€ ë™ì˜ìƒurlì´ ì •ìƒì ì¸ì§€ í™•ì¸í•˜ê³  ì •ìƒì¸ ê²½ìš° ë™ì˜ìƒ ì •ë³´ë¥¼ ë¦¬í„´í•©ë‹ˆë‹¤. res = requests.get(f\"{YOUTUBEAPI_VIDEOS_URL}?key={self.apikey}\u0026part=snippet,statistics\u0026id={self.videoId}\") if res.status_code == 200: data = res.json() items = data[\"items\"] # urlì´ ì˜ëª»ë˜ì–´ë„ status 200ê°’ê³¼ í•¨ê»˜ itemsëŠ” ë¹ˆ ë°°ì—´ì„ ë¦¬í„´í•©ë‹ˆë‹¤. if len(items) \u003c 1 : self.youtubeNotFound() title = items[0][\"snippet\"][\"title\"] description = items[0][\"snippet\"][\"description\"].replace(\"\\n\", \" \").replace(\"\n\",\" \") if len(description) \u003e 25: description = f'{description[:25]}...' commentCount = int(items[0][\"statistics\"][\"commentCount\"]) likeCount = int(items[0][\"statistics\"][\"likeCount\"]) viewCount = int(items[0][\"statistics\"][\"viewCount\"]) msg = f'âœ… ì˜ìƒì´ í™•ì¸ë˜ì—ˆìŠµë‹ˆë‹¤.\\n' msg += f'\u003e ì œëª©: {title}\\n' msg += f'\u003e ì„¤ëª…: {description}...\\n' msg += f\"\u003e ì¡°íšŒìˆ˜ {format(viewCount, ',')} | ì¢‹ì•„ìš” {format(likeCount, ',')} | ëŒ“ê¸€ìˆ˜ {format(commentCount, ',')}\\n\" msg += LINE self.printer.saveOnLocal(msg) return { \"title\": title, \"description\": description, \"viewCount\": viewCount, \"likeCount\": likeCount, \"commentCount\": commentCount, } else: # 200ì„ ë¦¬í„´ë°›ì§€ ì•Šìœ¼ë©´ ìœ íŠœë¸Œ api ì¼ì¼í•œë„ ì´ˆê³¼ë¡œ 403ì„ ë¦¬í„´ë°›ìŠµë‹ˆë‹¤. self.youtubeAPIExceed() def getVideoComments(self): self.printer.saveOnLocal(f\"2ï¸âƒ£ ëŒ“ê¸€ì„ ê°€ì ¸ì˜µë‹ˆë‹¤.\") url = f\"{YOUTUBEAPI_COMMENTTHREADS_URL}?key={self.apikey}\u0026maxResults={MAXRESULTS}\u0026part=snippet,replies\u0026videoId={self.videoId}\" # ë™ì˜ìƒì˜ ëŒ“ê¸€ì„ ë¶ˆëŸ¬ì˜µë‹ˆë‹¤. self.getComments(url, 1) self.comments = sorted(self.comments, key=itemgetter('publishedAt')) self.printer.saveOnLocal(f'âœ… ëª¨ë“  ëŒ“ê¸€ì´ í™•ì¸ë˜ì—ˆìŠµë‹ˆë‹¤.\\n{LINE}') return self.comments def getComments(self, url, cnt): # 1íšŒ ìš”ì²­ì— 100ê°œê¹Œì§€ ë°›ì•„ì˜¬ ìˆ˜ ìˆê³  100ê°œê°€ ì´ˆê³¼í•˜ëŠ” ëŒ“ê¸€ì˜ ë™ì˜ìƒì€ ë‹¤ìŒ í˜ì´ì§€ í† í°ì´ ì£¼ì–´ì§‘ë‹ˆë‹¤. # ì¬ê·€ì ìœ¼ë¡œ ë‹¤ìŒ í˜ì´ì§€ í† í°ì´ ì—†ì„ë•Œ ê¹Œì§€ ì‹¤í–‰ë©ë‹ˆë‹¤. percent = cnt * MAXRESULTS / self.videoInfo[\"commentCount\"] * 100 if percent \u003e 100: percent = 100 currCnt = cnt * MAXRESULTS self.printer.saveOnLocal(f\"- ({percent:6.2f}%) {format(currCnt,',')}ê°œ ê¹Œì§€ ì¶”ì¶œì¤‘...\") response = requests.get(url).json() try: for item in response[\"items\"]: self.comments.append(self.validateComment(item)) except Exception as e: # Exception ë°œìƒì€ api ì¼ì¼ì¡°íšŒë¥¼ ì´ˆê³¼í–ˆì„ ë•Œ ë‚˜íƒ€ë‚©ë‹ˆë‹¤. # api í‚¤ë¥¼ ë°”ê¾¸ê³  í˜„ì¬ ëŒ“ê¸€ì„ ë‹¤ì‹œ ì¡°íšŒí•©ë‹ˆë‹¤. self.youtubeAPIExceed() self.getComments(url, cnt) if \"nextPageToken\" in response.keys(): # ë‹¤ìŒ ëŒ“ê¸€ì´ ìˆìœ¼ë©´ ì¬ê·€ë¡œ ë‹¤ì‹œ ë¶ˆëŸ¬ì˜µë‹ˆë‹¤. nextPageToken = str(response[\"nextPageToken\"]) self.getComments(f\"{url}\u0026pageToken={nextPageToken}\", cnt + 1) def validateComment(self, item): # apië¡œ ë°›ì€ json ì—ì„œ í•„ìš”í•œ ê°’ë§Œ ì €ì¥í•©ë‹ˆë‹¤. publisedAt = item[\"snippet\"][\"topLevelComment\"][\"snippet\"][\"publishedAt\"] publisedAt = datetime.strptime(publisedAt, \"%Y-%m-%dT%H:%M:%SZ\") publisedAt = datetime.strftime(utc_to_local(publisedAt), \"%y-%m-%d %H:%M:%S\") comment = { \"publishedAt\" : publisedAt, \"authorDisplayName\" : item[\"snippet\"][\"topLevelComment\"][\"snippet\"][\"authorDisplayName\"], # ëŠ” PCì—ì„œ ìœ íŠœë¸Œì—ë§Œ ì¡´ì¬í•˜ëŠ” ì´ëª¨í‹°ì½˜ì´ ì´ëŸ¬ê²Œ ë‚˜ì˜µë‹ˆë‹¤ \"textDisplay\" : item[\"snippet\"][\"topLevelComment\"][\"snippet\"][\"textDisplay\"].replace(\"\n\",\" \").replace(\"\u0026quot;\",\" \").replace('','[ì´ëª¨í‹°ì½˜]'), \"likeCount\" : item[\"snippet\"][\"topLevelComment\"][\"snippet\"][\"likeCount\"], \"authorChannelId\" : f'@{item[\"snippet\"][\"topLevelComment\"][\"snippet\"][\"authorChannelId\"][\"value\"]}', \"totalReplyCount\" : item[\"snippet\"][\"totalReplyCount\"] } return comment def addDiffTime(self, comments): # ë°°ì—´ì„ ëŒë©´ì„œ í˜„ì¬ëŒ“ê¸€ê³¼ ë‹¤ìŒëŒ“ê¸€ì˜ ì‹œê°„ì°¨ì´ë¥¼ ì €ì¥í•©ë‹ˆë‹¤. # ë§ˆì§€ë§‰ ëŒ“ê¸€ì€ í˜„ì¬ì‹œê°„ê³¼ ì‹œê°„ì°¨ì´ë¥¼ ì €ì¥í•©ë‹ˆë‹¤. lastCommentDiffTime = (datetime.now() - datetime.strptime(comments[-1][\"publishedAt\"], \"%y-%m-%d %H:%M:%S\")).total_seconds()/60 comments[-1].update({\"diffTime\": lastCommentDiffTime}) for idx in range(0, len(comments)-1): curr = datetime.strptime(comments[idx][\"publishedAt\"], \"%y-%m-%d %H:%M:%S\") next = datetime.strptime(comments[idx+1][\"publishedAt\"], \"%y-%m-%d %H:%M:%S\") diffTime = (next-curr).total_seconds()/60 # ì‚­ì œë˜ëŠ” ëŒ“ê¸€ì´ ìˆì„ ìˆ˜ ìˆì–´ì„œ ìŒìˆ˜ê°€ ë‚˜ì˜¤ë©´ 0ìœ¼ë¡œ í‘œì‹œí•©ë‹ˆë‹¤. if diffTime \u003c 0: diffTime = 0.00 comments[idx].update({\"diffTime\": diffTime}) def printMostCommenter(self): # ê°€ì¥ ë§ì´ ëŒ“ê¸€ ì‘ì„±í•œ ì‚¬ëŒì„ MOST_CNTë²ˆ ì¶œë ¥í•©ë‹ˆë‹¤. userDict = {} for comment in self.comments: username = f'{comment[\"authorDisplayName\"]} | {comment[\"authorChannelId\"]}' if username in userDict: userDict[username] += 1 else: userDict[username] = 1 mostCommenter = sorted(userDict.items(), key=lambda x:x[1], reverse=True) msg = f'\\n{LINE}\\nğŸ‘‘ ê°€ì¥ ëŒ“ê¸€ ë§ì´ ì‘ì„±í•œ ì‚¬ëŒ (ì´ {format(len(mostCommenter),\",\")}ëª…)\\n' if len(mostCommenter) \u003e MOST_CNT: for idx in range(0, MOST_CNT): msg += f'{mostCommenter[idx][1]}íšŒ | {mostCommenter[idx][0]}\\n' else: for idx in range(0, len(mostCommenter)): msg += f'{mostCommenter[idx][1]}íšŒ | {mostCommenter[idx][0]}\\n' self.printer.saveOnLocal(msg) def printMostLiker(self): # ê°€ì¥ ë§ì´ ì¢‹ì•„ìš” ë°›ì€ ëŒ“ê¸€ì„ MOST_CNTë²ˆ ì¶œë ¥í•©ë‹ˆë‹¤. mostLiker = [] for comment in sorter(self.comments, 'likeCount'): if comment['likeCount'] \u003e 0: mostLiker.append(comment) else: mostLiker = mostLiker[:MOST_CNT] self.printComments(mostLiker, f'{LINE}\\nğŸ‘‘ ê°€ì¥ ì¢‹ì•„ìš” ë§ì´ ë°›ì€ ëŒ“ê¸€') def printMostReply(self): # ê°€ì¥ ë§ì´ ë‹µê¸€ ë°›ì€ ëŒ“ê¸€ì„ MOST_CNTë²ˆ ì¶œë ¥í•©ë‹ˆë‹¤. mostReply = [] for comment in sorter(self.comments, 'totalReplyCount'): if comment['totalReplyCount'] \u003e 0: mostReply.append(comment) else: mostReply = mostReply[:MOST_CNT] self.printComments(mostReply, f'{LINE}\\nğŸ‘‘ ê°€ì¥ ë§ì´ ë‹µê¸€ ë‹¬ë¦° ëŒ“ê¸€') def printMostDiffTime(self): # ê°€ì¥ ë§ì´ ë²„í‹´ ëŒ“ê¸€ì„ MOST_CNTë²ˆ ì¶œë ¥í•©ë‹ˆë‹¤. mostDiffTime = sorter(self.comments, 'diffTime') self.printComments(mostDiffTime[:MOST_CNT], f'{LINE}\\nğŸ‘‘ ê°€ì¥ ì˜¤ë˜ë²„í‹´ ëŒ“ê¸€ (ì‚­ì œëœ ëŒ“ê¸€ì€ ì§‘ê³„í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.)') def printUsersComment(self, username): # íŠ¹ì • ìœ ì €ê°€ ì‘ì„±í•œ ëŒ“ê¸€ì„ ëª¨ë‘ ì¶œë ¥í•©ë‹ˆë‹¤. userComment = [] for comment in self.comments: if comment[\"authorDisplayName\"] == username: userComment.append(comment) if len(userComment) == 0: self.printer.saveOnLocal(f'\\n{LINE}\\nğŸ‘‘ [{username}]ë‹˜ì´ ì‘ì„±í•œ ëŒ“ê¸€ì´ ì—†ìŠµë‹ˆë‹¤\\n') else: mostLike = sorter(userComment, 'likeCount')[0][\"likeCount\"] mostReply = sorter(userComment, 'totalReplyCount')[0][\"totalReplyCount\"] mostDiffTime = sorter(userComment, 'diffTime')[0][\"diffTime\"] self.printComments(userComment, f'{LINE}\\nğŸ‘‘ [{username}]ì´ ì‘ì„±í•œ ëŒ“ê¸€ (ì‚­ì œëœ ëŒ“ê¸€ì€ ì§‘ê³„í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.)') self.printer.saveOnLocal(f'\\nì´ [{format(len(userComment), \",\")}]ê°œì˜ ëŒ“ê¸€ì„ ì‘ì„±í•˜ì…¨ìŠµë‹ˆë‹¤.') self.printer.saveOnLocal(f' ğŸ’š [{username}]ë‹˜ì´ ë°›ì€ ê°€ì¥ ë§ì€ ì¢‹ì•„ìš” ê°¯ìˆ˜ëŠ” [{mostLike}]ê°œ ì…ë‹ˆë‹¤') self.printer.saveOnLocal(f' ğŸ“© [{username}]ë‹˜ì´ ë°›ì€ ê°€ì¥ ë§ì€ ë‹µê¸€ ê°¯ìˆ˜ëŠ” [{mostReply}]ê°œ ì…ë‹ˆë‹¤') self.printer.saveOnLocal(f' â° [{username}]ë‹˜ì´ ê°€ì¥ ì˜¤ë˜ ë²„í‹´ ëŒ“ê¸€ì€ [{mostDiffTime:.2f}]ë¶„ ì…ë‹ˆë‹¤') def printComments(self, comments, type=''): # ëŒ“ê¸€ë“¤ì„ ì¶œë ¥í•©ë‹ˆë‹¤. self.printer.saveOnLocal(f\"\\n{type}\\n{SMALL_LINE}\") msg = '' for comment in comments: msg += self.commentPrettier(comment) msg += '\\n' self.printer.saveOnLocal(msg) def commentPrettier(self, comment): # ëŒ“ê¸€ì„ ì¶œë ¥í• ë•Œ í¬ë§·ì„ ì •í•´ì¤ë‹ˆë‹¤. msg = f'{comment[\"publishedAt\"]}\\të‹‰ë„¤ì„: {comment[\"authorDisplayName\"]} | {comment[\"authorChannelId\"]}\\n\\t\\t\\tëŒ“ê¸€: {comment[\"textDisplay\"]:.33s}\\n\\t\\t\\tì¢‹ì•„ìš”: {comment[\"likeCount\"]} | ë‹µê¸€ìˆ˜: {comment[\"totalReplyCount\"]} | ë²„í‹´ì‹œê°„: {comment[\"diffTime\"]:.2f}ë¶„\\n{SMALL_LINE}' return msg def startDiffTimeEvent(self, stop): # ì•ìœ¼ë¡œ ì‹¤ì‹œê°„ìœ¼ë¡œ ëŒ“ê¸€ì„ ë¶ˆëŸ¬ì˜µë‹ˆë‹¤ # í”„ë¡œê·¸ë¨ì´ ì¶”ì¶œ ì´í›„ ì‚­ì œí•œ ëŒ“ê¸€ë“¤ë„ ì €ì¥ë©ë‹ˆë‹¤ msg = f'{LINE}\\nâœ‹ *{stop}ë¶„ ë²„í‹°ê¸° ì´ë²¤íŠ¸ ì‹œì‘*\\n\u003e ì œëª©: {self.videoInfo[\"title\"]}\\n\u003e ì§€ê¸ˆë¶€í„° {YOUTUBEAPI_REQUEST_PER_TIME}ì´ˆë§ˆë‹¤ ìƒˆë¡œìš´ ëŒ“ê¸€ì„ í™•ì¸í•©ë‹ˆë‹¤.\\n{LINE}\\n\\n{SMALL_LINE}' self.printer.sendToChat(msg) url = f\"{YOUTUBEAPI_COMMENTTHREADS_URL}?key={self.apikey}\u0026maxResults={LIVE_MAXRESULTS}\u0026part=snippet,replies\u0026videoId={self.videoId}\" # ì´ë¯¸ ì¶”ì¶œí•œ ëŒ“ê¸€ì˜ ë§ˆì§€ë§‰ ëŒ“ê¸€ì€ ë²„í‹´ì‹œê°„ì´ ì—†ê¸° ë•Œë¬¸ì— -1 ê¹Œì§€ ì¶”ì¶œí•©ë‹ˆë‹¤. time.sleep(1) self.printer.sendToChat(self.commentPrettier(self.comments[-2])) while True: try: # ì´ë¯¸ ì¶”ì¶œí•œ ëŒ“ê¸€ì˜ publishedAt, authorChannelId ë¥¼ í•©ì³ì„œ ê³ ìœ  keyë¥¼ ìƒì„±í•©ë‹ˆë‹¤ prev = self.comments keys = [] for p in prev: key = f'{p[\"publishedAt\"]}{p[\"authorChannelId\"]}' keys.append(key) # comments ë¦¬ìŠ¤íŠ¸ì— ë°›ì•„ë†“ëŠ”ë° ì—ëŸ¬ ë°œìƒí•˜ë©´ ìœ íŠœë¸Œ api í‚¤ ë³€ê²½ comments = [] response = requests.get(url).json() try: for item in response[\"items\"]: comments.append(self.validateComment(item)) except Exception as e: print(\"ERROR\", e) self.youtubeAPIExceed() # ìƒˆë¡œìš´ ëŒ“ê¸€ì´ ë‚˜ì˜¤ë©´ New ë°°ì—´ì— ì €ì¥í•©ë‹ˆë‹¤. found = False new = [] for comment in comments: key = f'{comment[\"publishedAt\"]}{comment[\"authorChannelId\"]}' if key not in keys: new.append(comment) self.comments.append(comment) found = True # ìƒˆë¡œìš´ ëŒ“ê¸€ -1 ê¹Œì§€ ì¶”ì¶œ (ëì€ diffTimeì´ ì—†ê¸° ë–„ë¬¸) winner = [] if found: self.addDiffTime(self.comments) for comment in self.comments[len(self.comments)-len(new)-1:-1]: if comment[\"diffTime\"] \u003e int(stop): winner.append(comment) self.printer.sendToChat(self.commentPrettier(comment)) # ìš°ìŠ¹ìê°€ ìˆìœ¼ë©´ í”„ë¡œê·¸ë¨ ì¢…ë£Œ if len(winner) \u003e 0: msg = (f\"\\n@channel\\nğŸ‘‘ {stop}ë¶„ ë²„í‹°ê¸° ë‹¹ì²¨ìê°€ ë‚˜ì™”ìŠµë‹ˆë‹¤.\\n\") msg += (f'{SMALL_LINE}\\n{self.commentPrettier(winner[0])}\\n') msg += (\"ì´ë²¤íŠ¸ë¥¼ ì¢…ë£Œí•©ë‹ˆë‹¤.\") self.printer.sendToChat(msg) break # ê³„ì†í•´ì„œ ë¦¬í€˜ìŠ¤íŠ¸ë¥¼ ë³´ë‚´ë©´ api ì¼ì¼íšŸìˆ˜ê°€ ê¸ˆë°© ë‹¬ì„±í•˜ê¸° ë–„ë¬¸ì— sleep # 10ì´ˆê°€ ì ë‹¹í•©ë‹ˆë‹¤. time.sleep(YOUTUBEAPI_REQUEST_PER_TIME) except Exception as e: # ì—ëŸ¬ê°€ ë‚˜ë©´ api ì¼ì¼íšŸìˆ˜ ì´ˆê³¼ api í‚¤ ë³€ê²½ print(\"ERROR\", e) self.youtubeAPIExceed() os.system('clear') youtube = Youtube() synology api Synology ì±—ë´‡ìœ¼ë¡œ í…ìŠ¤íŠ¸ë¥¼ ì „ì†¡í•˜ê¸° ìœ„í•œ ê°„ë‹¨í•œ APIì…ë‹ˆë‹¤. ì¥ê³ ë¡œ ì œì‘í–ˆìŠµë‹ˆë‹¤.\nsynology api 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 class Comment(APIView): title = \"ë°°ëŒì´ì˜ë‹¹êµ¬ìƒí™œ\" headers = {'Content-Type': 'text/text; charset=utf-8'} synology = SynologyChat() baedori_url = BAEDORI_BOT_URL def get(self, request): msg = request.data.get(\"msg\") self.synology.send_message(self.baedori_url, self.title, msg) return Response(status=200) class SynologyChat(): headers = {'Content-Type': 'text/text; charset=utf-8'} def send_message(self, url, title, message): message = self.clean_text(message) payload = 'payload={\"text\": \"' + message + '\"}' res = requests.post(url, data=payload.encode('utf-8'), headers=self.headers) time.sleep(1) if res.json()[\"success\"] != True: self.send_error(res, title) def send_error(self, res, title): LogSave(f\"\u003e{ADMIN_NICKNAME} {title} \\nres \u003e {res.json()}\") def clean_text(self, text): text = text.replace(\"%\",\"í¼ì„¼íŠ¸\") # text = re.sub('[%+#\\^@*\\\"â€»~ã†!\u0026;ã€â€˜\\(\\)\\\\\\'â€¦ã€‹\\â€\\â€œ\\â€™Â·]', ' ', text) text = re.sub('[%+#\\^\\\"â€»~ã†!\u0026;ã€â€˜\\\\\\'â€¦ã€‹\\â€\\â€œ\\â€™Â·]', ' ', text) text = text.replace(\"\n\",\" \").replace(\"\",\"\") text = text.replace(\"\n\", \" \").replace(\"nbsp\", \" \") text = text.replace(\" \", \" \").replace(\" \",\" \") return text exe íŒŒì¼ë¡œ ì¶”ì¶œ utils.py ì½”ë“œë¥¼ pyinstallerë¡œ exeíŒŒì¼ë¡œ ì¶”ì¶œí•©ë‹ˆë‹¤. ê°€ìƒí™˜ê²½ì„ pipenvë¥¼ ì‚¬ìš©í–ˆìŠµë‹ˆë‹¤.\n1 2 pipenv install pyinstaller pipenv run pyinstaller -F utils.py ìœ„ ì»¤ë§¨ë“œë¥¼ ì§„í–‰í•˜ë©´ í”„ë¡œì íŠ¸ ìƒìœ„ í´ë”ì— â€˜distâ€™ ë””ë ‰í† ë¦¬ê°€ ìƒì„±ë˜ê³  exe íŒŒì¼ì´ ìƒì„±ë©ë‹ˆë‹¤.\ní¬ê¸°ëŠ” ì•½ 7MBë©° ì•„ì´ì½˜ì€ ë”°ë¡œ ë³€ê²½í–ˆìŠµë‹ˆë‹¤.\nê²°ê³¼ 1. ëª¨ë“ ëŒ“ê¸€ì¡°íšŒ 2. ê°€ì¥ ë§ì€ ì¢‹ì•„ìš” ëŒ“ê¸€ ì¡°íšŒ 3. ê°€ì¥ ë§ì€ ë‹µê¸€ìˆ˜ ëŒ“ê¸€ ì¡°íšŒ 4. ê°€ì¥ ë§ì´ ì‘ì„±í•œ ëŒ“ê¸€ ì¡°íšŒ 5. ê°€ì¥ ë§ì´ ì‘ì„±í•œ ëŒ“ê¸€ ì¡°íšŒ 6. ë‹‰ë„¤ì„ ì¡°íšŒ 7. ëŒ“ê¸€ ë²„í‹°ê¸° ì´ë²¤íŠ¸ (ì¼ì •ì‹œê°„ë§ˆë‹¤ ê³„ì† ìƒˆë¡œìš´ ëŒ“ê¸€ í™•ì¸) ë¡œì»¬ íŒŒì¼ ì €ì¥ \u0026 ì‹œë†€ë¡œì§€ ì±—ë´‡ í”„ë¡œê·¸ë¨ì— ì¶œë ¥ë˜ëŠ” ëª¨ë“  ê¸€ì€ ë™ì‹œì— ë¡œì»¬ì—ë„ ì €ì¥ë©ë‹ˆë‹¤.\n7ë²ˆ ëŒ“ê¸€ ë²„í‹°ê¸° ì´ë²¤íŠ¸ ì§„í–‰ì‹œ ì±—ë´‡ìœ¼ë¡œ ëª¨ë“  ëŒ“ê¸€ì´ ì˜¤ê²Œ í•´ë†“ê³  ë‹¹ì²¨ì ë°œìƒì‹œ ì±„ë„ì— ì•ŒëŸ¿ì´ ì˜¤ê²Œ í–ˆìŠµë‹ˆë‹¤.\në§ˆì¹˜ë©° ìœ íŠœë¸Œì—ì„œ ì œê³µí•˜ëŠ” APIë¡œ ì—¬ëŸ¬ê°€ì§€ ì´ë²¤íŠ¸ë¥¼ ê¸°íší•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë‹¤ìŒë²ˆì—ëŠ” ì¸ìŠ¤íƒ€ê·¸ë¨ APIë¡œ ë¹„ìŠ·í•œ ì´ë²¤íŠ¸ë¥¼ ì§„í–‰í•´ë³¼ê¹Œ ê³„íšì¤‘ì…ë‹ˆë‹¤. ê¶ê¸ˆí•˜ì‹  ì ì´ ìˆìœ¼ì‹œë©´ ëŒ“ê¸€ë¡œ ë‚¨ê²¨ì£¼ì‹œê¸° ë°”ëë‹ˆë‹¤.\në„ì›€ì´ ë˜ì…¨ìœ¼ë©´ ë°°ëŒì´ì˜ ë‹¹êµ¬ìƒí™œ ì—ë„ í•œë²ˆ ë†€ëŸ¬ì™€ì£¼ì„¸ìš” ! ë‹¤ì–‘í•œ ì´ë²¤íŠ¸ ì§„í–‰ì¤‘ ~ğŸ’š\n",
  "wordCount" : "2446",
  "inLanguage": "en",
  "datePublished": "2023-04-28T00:00:00Z",
  "dateModified": "2023-04-28T00:00:00Z",
  "author":{
    "@type": "Person",
    "name": "cha2hyun"
  },
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https://cha2hyun.blog/content/projects/%EB%B0%B0%EB%8F%8C%EC%9D%B4%EC%9D%98%EB%8B%B9%EA%B5%AC%EC%83%9D%ED%99%9C/youtube-comment-event/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "ì±„ìˆ˜í˜„ ê°œë°œì¼ì§€",
    "logo": {
      "@type": "ImageObject",
      "url": "https://cha2hyun.blog/favicon/favicon.ico"
    }
  }
}
</script>
</head>

<body class="" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    } else if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }

</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="https://cha2hyun.blog/" accesskey="h" title="ì±„ìˆ˜í˜„ ê°œë°œì¼ì§€ (Alt + H)">ì±„ìˆ˜í˜„ ê°œë°œì¼ì§€<span style="justify-content: center; padding-left:7px;">
                    <img src="https://hits.seeyoufarm.com/api/count/incr/badge.svg?url=https%3A%2F%2Fcha2hyun.blog&count_bg=%23000000&title_bg=%23000000&icon=&icon_color=%23E7E7E7&title=HITS&edge_flat=false"/>
                </span>
                <div style="font-size: 14px; margin-top:-30px; font-weight: normal;">ğŸ“š ê¸°ì–µì€ ìœ í•œí•˜ë‚˜, ê¸°ë¡ì€ ë¬´í•œí•˜ë‹¤</div>
            </a>            
        </div>
        <ul id="menu">
            <li>
                <a href="https://cha2hyun.blog/archives" title="ì „ì²´">
                    <span style="font-weight: bold;">ì „ì²´</span>
                </a>
            </li>
            <li>
                <a href="https://cha2hyun.blog/content/posts/" title="ê°œë°œì¼ìƒ">
                    <span style="font-weight: bold;">ê°œë°œì¼ìƒ</span>
                </a>
            </li>
            <li>
                <a href="https://cha2hyun.blog/content/projects/" title="í”„ë¡œì íŠ¸">
                    <span style="font-weight: bold;">í”„ë¡œì íŠ¸</span>
                </a>
            </li>
            <li>
                <a href="https://cha2hyun.blog/content/algorithm/" title="ì•Œê³ ë¦¬ì¦˜">
                    <span style="font-weight: bold;">ì•Œê³ ë¦¬ì¦˜</span>
                </a>
            </li>
            <li>
                <a href="https://cha2hyun.blog/search/" title="ê²€ìƒ‰">
                    <span style="font-weight: bold;">ê²€ìƒ‰</span>
                </a>
            </li>
            <li>
                <div class="logo-switches">
                    <button id="theme-toggle" accesskey="t" title="(Alt + T)">
                        <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                            fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                            stroke-linejoin="round">
                            <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                        </svg>
                        <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                            fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                            stroke-linejoin="round">
                            <circle cx="12" cy="12" r="5"></circle>
                            <line x1="12" y1="1" x2="12" y2="3"></line>
                            <line x1="12" y1="21" x2="12" y2="23"></line>
                            <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                            <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                            <line x1="1" y1="12" x2="3" y2="12"></line>
                            <line x1="21" y1="12" x2="23" y2="12"></line>
                            <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                            <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                        </svg>
                    </button>
                </div>
            </li>
        </ul>
        
    </nav>
    
    
</header>
<main class="main">

<article class="post-single">
  <header class="post-header">
    <div class="breadcrumbs"><a href="https://cha2hyun.blog/">Home</a>&nbsp;Â»&nbsp;<a href="https://cha2hyun.blog/content/">Contents</a>&nbsp;Â»&nbsp;<a href="https://cha2hyun.blog/content/projects/">Projects</a></div>
    <h1 class="post-title entry-hint-parent">
      ìœ íŠœë¸Œ APIë¥¼ ì´ìš©í•œ ëŒ“ê¸€ ì˜¤ë˜ ë²„í‹°ê¸° ì´ë²¤íŠ¸
    </h1>
    <div class="post-meta"><span title='2023-04-28 00:00:00 +0000 UTC'>April 28, 2023</span>&nbsp;Â·&nbsp;12 min&nbsp;Â·&nbsp;cha2hyun


    </div>
  </header> <div class="toc">
    <details  open>
        <summary accesskey="c" title="(Alt + C)">
            <span class="details">Table of Contents</span>
        </summary>

        <div class="inner"><ul>
                <li>
                    <a href="#%eb%93%a4%ec%96%b4%ea%b0%80%eb%a9%b0" aria-label="ë“¤ì–´ê°€ë©°">ë“¤ì–´ê°€ë©°</a></li>
                <li>
                    <a href="#%ec%bd%94%eb%93%9c--%ec%bd%94%eb%93%9c%ec%84%a4%eb%aa%85" aria-label="ì½”ë“œ &amp; ì½”ë“œì„¤ëª…">ì½”ë“œ &amp; ì½”ë“œì„¤ëª…</a><ul>
                        
                <li>
                    <a href="#constantpy" aria-label="constant.py">constant.py</a></li>
                <li>
                    <a href="#crwalerpy" aria-label="crwaler.py">crwaler.py</a></li>
                <li>
                    <a href="#synology-api" aria-label="synology api">synology api</a></li>
                <li>
                    <a href="#exe-%ed%8c%8c%ec%9d%bc%eb%a1%9c-%ec%b6%94%ec%b6%9c" aria-label="exe íŒŒì¼ë¡œ ì¶”ì¶œ">exe íŒŒì¼ë¡œ ì¶”ì¶œ</a></li></ul>
                </li>
                <li>
                    <a href="#%ea%b2%b0%ea%b3%bc" aria-label="ê²°ê³¼">ê²°ê³¼</a><ul>
                        
                <li>
                    <a href="#1-%eb%aa%a8%eb%93%a0%eb%8c%93%ea%b8%80%ec%a1%b0%ed%9a%8c" aria-label="1. ëª¨ë“ ëŒ“ê¸€ì¡°íšŒ">1. ëª¨ë“ ëŒ“ê¸€ì¡°íšŒ</a></li>
                <li>
                    <a href="#2-%ea%b0%80%ec%9e%a5-%eb%a7%8e%ec%9d%80-%ec%a2%8b%ec%95%84%ec%9a%94-%eb%8c%93%ea%b8%80-%ec%a1%b0%ed%9a%8c" aria-label="2. ê°€ì¥ ë§ì€ ì¢‹ì•„ìš” ëŒ“ê¸€ ì¡°íšŒ">2. ê°€ì¥ ë§ì€ ì¢‹ì•„ìš” ëŒ“ê¸€ ì¡°íšŒ</a></li>
                <li>
                    <a href="#3-%ea%b0%80%ec%9e%a5-%eb%a7%8e%ec%9d%80-%eb%8b%b5%ea%b8%80%ec%88%98-%eb%8c%93%ea%b8%80-%ec%a1%b0%ed%9a%8c" aria-label="3. ê°€ì¥ ë§ì€ ë‹µê¸€ìˆ˜ ëŒ“ê¸€ ì¡°íšŒ">3. ê°€ì¥ ë§ì€ ë‹µê¸€ìˆ˜ ëŒ“ê¸€ ì¡°íšŒ</a></li>
                <li>
                    <a href="#4-%ea%b0%80%ec%9e%a5-%eb%a7%8e%ec%9d%b4-%ec%9e%91%ec%84%b1%ed%95%9c-%eb%8c%93%ea%b8%80-%ec%a1%b0%ed%9a%8c" aria-label="4. ê°€ì¥ ë§ì´ ì‘ì„±í•œ ëŒ“ê¸€ ì¡°íšŒ">4. ê°€ì¥ ë§ì´ ì‘ì„±í•œ ëŒ“ê¸€ ì¡°íšŒ</a></li>
                <li>
                    <a href="#5-%ea%b0%80%ec%9e%a5-%eb%a7%8e%ec%9d%b4-%ec%9e%91%ec%84%b1%ed%95%9c-%eb%8c%93%ea%b8%80-%ec%a1%b0%ed%9a%8c" aria-label="5. ê°€ì¥ ë§ì´ ì‘ì„±í•œ ëŒ“ê¸€ ì¡°íšŒ">5. ê°€ì¥ ë§ì´ ì‘ì„±í•œ ëŒ“ê¸€ ì¡°íšŒ</a></li>
                <li>
                    <a href="#6-%eb%8b%89%eb%84%a4%ec%9e%84-%ec%a1%b0%ed%9a%8c" aria-label="6. ë‹‰ë„¤ì„ ì¡°íšŒ">6. ë‹‰ë„¤ì„ ì¡°íšŒ</a></li>
                <li>
                    <a href="#7-%eb%8c%93%ea%b8%80-%eb%b2%84%ed%8b%b0%ea%b8%b0-%ec%9d%b4%eb%b2%a4%ed%8a%b8-%ec%9d%bc%ec%a0%95%ec%8b%9c%ea%b0%84%eb%a7%88%eb%8b%a4-%ea%b3%84%ec%86%8d-%ec%83%88%eb%a1%9c%ec%9a%b4-%eb%8c%93%ea%b8%80-%ed%99%95%ec%9d%b8" aria-label="7. ëŒ“ê¸€ ë²„í‹°ê¸° ì´ë²¤íŠ¸ (ì¼ì •ì‹œê°„ë§ˆë‹¤ ê³„ì† ìƒˆë¡œìš´ ëŒ“ê¸€ í™•ì¸)">7. ëŒ“ê¸€ ë²„í‹°ê¸° ì´ë²¤íŠ¸ (ì¼ì •ì‹œê°„ë§ˆë‹¤ ê³„ì† ìƒˆë¡œìš´ ëŒ“ê¸€ í™•ì¸)</a></li>
                <li>
                    <a href="#%eb%a1%9c%ec%bb%ac-%ed%8c%8c%ec%9d%bc-%ec%a0%80%ec%9e%a5--%ec%8b%9c%eb%86%80%eb%a1%9c%ec%a7%80-%ec%b1%97%eb%b4%87" aria-label="ë¡œì»¬ íŒŒì¼ ì €ì¥ &amp; ì‹œë†€ë¡œì§€ ì±—ë´‡">ë¡œì»¬ íŒŒì¼ ì €ì¥ &amp; ì‹œë†€ë¡œì§€ ì±—ë´‡</a></li></ul>
                </li>
                <li>
                    <a href="#%eb%a7%88%ec%b9%98%eb%a9%b0" aria-label="ë§ˆì¹˜ë©°">ë§ˆì¹˜ë©°</a>
                </li>
            </ul>
        </div>
    </details>
</div>

  <div class="post-content"><br>
<h3 id="ë“¤ì–´ê°€ë©°">ë“¤ì–´ê°€ë©°<a hidden class="anchor" aria-hidden="true" href="#ë“¤ì–´ê°€ë©°">#</a></h3>
<p>ìœ íŠœë¸Œ ì±„ë„ íŒ©í† ë¦¬ ë‹˜ê»˜ì„œ ì§„í–‰í•´ì£¼ì‹  ë ˆì „ë“œ ì»¨í…ì¸  ì´ë²¤íŠ¸ê°€ ìˆìŠµë‹ˆë‹¤. (ì•„ë§ˆë„ íŒ©í† ë¦¬ë‹˜ì€ ê°œë°œìì¼ì§€ë„)
<figure class="align-center ">
    <img loading="lazy" src="../img/44.png#center"
         alt="ì•„ì§ë„ ì•ˆëë‚˜ê³  ëŒ“ê¸€ì´ 150ë§Œê°œê°€ ë‹¬ë ¤ì„œ ì„¸ê³„10ìœ„ì— ë“¤ì—ˆë‹¤ê³  í•©ë‹ˆë‹¤"/> <figcaption>
            <p>ì•„ì§ë„ ì•ˆëë‚˜ê³  ëŒ“ê¸€ì´ 150ë§Œê°œê°€ ë‹¬ë ¤ì„œ ì„¸ê³„10ìœ„ì— ë“¤ì—ˆë‹¤ê³  í•©ë‹ˆë‹¤</p>
        </figcaption>
</figure>
</p>
<br>
<p>ë°°ëŒì´ì˜ ë‹¹êµ¬ìƒí™œ ìœ íŠœë¸Œì—ì„œë„ ë¹„ìŠ·í•œ ë‹¤ì–‘í•œ ì´ë²¤íŠ¸ë“¤ì„ ì§„í–‰ì¤‘ì…ë‹ˆë‹¤.</p>
<ol>
<li>ë¼ì´ë¸Œì—ì„œ ì‹¤ì‹œê°„ ì¶”ì²¨ <a href="/projects/ë°°ëŒì´ì˜ë‹¹êµ¬ìƒí™œ/youtube-live-crawling">(ì°¸ê³ ê¸€)</a></li>
<li>ì»¨í…ì¸ ì— ëŒ“ê¸€ë‹¬ê³  ì˜¤ë«ë™ì•ˆ ë²„í‹´ì‚¬ëŒ</li>
<li>ì»¨í…ì¸  ëŒ“ê¸€ì¤‘ ì¢‹ì•„ìš”ê°€ ê°€ì¥ ë§ì€ ì‚¬ëŒ</li>
<li>ì»¨í…ì¸  ëŒ“ê¸€ì¤‘ ë‹µê¸€ì´ ì œì¼ ë§ì€ ì‚¬ëŒ</li>
<li>ì»¨í…ì¸ ì— ëŒ“ê¸€ì„ ê°€ì¥ ë§ì´ ì‘ì„±í•œ ì‚¬ëŒ</li>
</ol>
<p>ìœ„ ë¿ë§Œ ì•„ë‹ˆë¼ ì—¬ëŸ¬ê°€ì§€ ì´ë²¤íŠ¸ë“¤ì„ ì§„í–‰&amp;ê¸°íšì¤‘ìœ¼ë¡œ í”„ë¡œê·¸ë¨ì„ ì œì‘í•˜ê²Œ ë˜ì—ˆìŠµë‹ˆë‹¤.
<figure class="align-center ">
    <img loading="lazy" src="../img/6.gif#center"/> 
</figure>
</p>
<br/>
<h3 id="ì½”ë“œ--ì½”ë“œì„¤ëª…">ì½”ë“œ &amp; ì½”ë“œì„¤ëª…<a hidden class="anchor" aria-hidden="true" href="#ì½”ë“œ--ì½”ë“œì„¤ëª…">#</a></h3>
<h4 id="constantpy">constant.py<a hidden class="anchor" aria-hidden="true" href="#constantpy">#</a></h4>
<p>ìƒìˆ˜ë¥¼ ëª¨ì•„ë†“ì€ íŒŒì¼ì…ë‹ˆë‹¤.


<div class="terminal space shadow">
  <div class="top">
    <div class="btns">
      <span class="circle red"></span>
      <span class="circle yellow"></span>
      <span class="circle green"></span>
    </div>
    <div class="title">
      constant.py
    </div>
  </div>
  <div class="terminalbody"><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-Python" data-lang="Python"><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">LINE</span> <span class="o">=</span> <span class="s2">&#34;=&#34;</span> <span class="o">*</span> <span class="mi">28</span>
</span></span><span class="line"><span class="cl"><span class="n">SMALL_LINE</span> <span class="o">=</span> <span class="s1">&#39;-&#39;</span> <span class="o">*</span> <span class="mi">65</span>
</span></span><span class="line"><span class="cl"><span class="n">SYNOLOGY_LINE</span> <span class="o">=</span> <span class="s1">&#39;-&#39;</span> <span class="o">*</span> <span class="mi">38</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">YOUTUBEAPI_KEY</span> <span class="o">=</span> <span class="s2">&#34;&#34;</span>
</span></span><span class="line"><span class="cl"><span class="n">YOUTUBEAPI_SUB_KEY</span> <span class="o">=</span> <span class="s2">&#34;&#34;</span>
</span></span><span class="line"><span class="cl"><span class="n">YOUTUBEAPI_VIDEOS_URL</span> <span class="o">=</span> <span class="s2">&#34;https://www.googleapis.com/youtube/v3/videos&#34;</span>
</span></span><span class="line"><span class="cl"><span class="n">YOUTUBEAPI_COMMENTTHREADS_URL</span> <span class="o">=</span> <span class="s2">&#34;https://www.googleapis.com/youtube/v3/commentThreads&#34;</span>
</span></span><span class="line"><span class="cl"><span class="n">YOUTUBEAPI_REQUEST_PER_TIME</span> <span class="o">=</span> <span class="mi">10</span>
</span></span><span class="line"><span class="cl"><span class="n">YOUTUBEAPI_RESEND_TIMEOUT</span> <span class="o">=</span> <span class="mi">3</span>
</span></span><span class="line"><span class="cl"><span class="n">MOST_CNT</span> <span class="o">=</span> <span class="mi">5</span>
</span></span><span class="line"><span class="cl"><span class="n">MAXRESULTS</span> <span class="o">=</span> <span class="mi">100</span>
</span></span><span class="line"><span class="cl"><span class="n">LIVE_MAXRESULTS</span> <span class="o">=</span> <span class="mi">30</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># SYNOLOGY CHATì— ë³´ë‚¼ ê²½ìš°</span>
</span></span><span class="line"><span class="cl"><span class="n">SYNOLOGYAPI_URL</span> <span class="o">=</span> <span class="s2">&#34;&#34;</span>    <span class="c1"># ë©”ì„¸ì§€ë¥¼ ì²˜ë¦¬í•˜ëŠ” apië¥¼ ë”°ë¡œ ë§Œë“¤ì–´ì•¼í•©ë‹ˆë‹¤.</span>
</span></span><span class="line"><span class="cl"><span class="n">SYNOLOGYAPI_REQUEST_PER_TIME</span> <span class="o">=</span> <span class="mf">0.5</span>
</span></span><span class="line"><span class="cl"><span class="n">SYNOLOGYCHAT_LINE_SPLIT</span> <span class="o">=</span> <span class="mi">5</span>
</span></span></code></pre></td></tr></table>
</div>
</div></div>
</div>
<br />
</p>
<h4 id="crwalerpy">crwaler.py<a hidden class="anchor" aria-hidden="true" href="#crwalerpy">#</a></h4>
<p>í”„ë¡œê·¸ë¨ ì½”ì–´ì…ë‹ˆë‹¤. ì„¤ëª…ì€ ì£¼ì„ìœ¼ë¡œ ë‹¬ì•„ë†“ì•˜ìŠµë‹ˆë‹¤.


<div class="terminal space shadow">
  <div class="top">
    <div class="btns">
      <span class="circle red"></span>
      <span class="circle yellow"></span>
      <span class="circle green"></span>
    </div>
    <div class="title">
      crwaler.py
    </div>
  </div>
  <div class="terminalbody"><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">  1
</span><span class="lnt">  2
</span><span class="lnt">  3
</span><span class="lnt">  4
</span><span class="lnt">  5
</span><span class="lnt">  6
</span><span class="lnt">  7
</span><span class="lnt">  8
</span><span class="lnt">  9
</span><span class="lnt"> 10
</span><span class="lnt"> 11
</span><span class="lnt"> 12
</span><span class="lnt"> 13
</span><span class="lnt"> 14
</span><span class="lnt"> 15
</span><span class="lnt"> 16
</span><span class="lnt"> 17
</span><span class="lnt"> 18
</span><span class="lnt"> 19
</span><span class="lnt"> 20
</span><span class="lnt"> 21
</span><span class="lnt"> 22
</span><span class="lnt"> 23
</span><span class="lnt"> 24
</span><span class="lnt"> 25
</span><span class="lnt"> 26
</span><span class="lnt"> 27
</span><span class="lnt"> 28
</span><span class="lnt"> 29
</span><span class="lnt"> 30
</span><span class="lnt"> 31
</span><span class="lnt"> 32
</span><span class="lnt"> 33
</span><span class="lnt"> 34
</span><span class="lnt"> 35
</span><span class="lnt"> 36
</span><span class="lnt"> 37
</span><span class="lnt"> 38
</span><span class="lnt"> 39
</span><span class="lnt"> 40
</span><span class="lnt"> 41
</span><span class="lnt"> 42
</span><span class="lnt"> 43
</span><span class="lnt"> 44
</span><span class="lnt"> 45
</span><span class="lnt"> 46
</span><span class="lnt"> 47
</span><span class="lnt"> 48
</span><span class="lnt"> 49
</span><span class="lnt"> 50
</span><span class="lnt"> 51
</span><span class="lnt"> 52
</span><span class="lnt"> 53
</span><span class="lnt"> 54
</span><span class="lnt"> 55
</span><span class="lnt"> 56
</span><span class="lnt"> 57
</span><span class="lnt"> 58
</span><span class="lnt"> 59
</span><span class="lnt"> 60
</span><span class="lnt"> 61
</span><span class="lnt"> 62
</span><span class="lnt"> 63
</span><span class="lnt"> 64
</span><span class="lnt"> 65
</span><span class="lnt"> 66
</span><span class="lnt"> 67
</span><span class="lnt"> 68
</span><span class="lnt"> 69
</span><span class="lnt"> 70
</span><span class="lnt"> 71
</span><span class="lnt"> 72
</span><span class="lnt"> 73
</span><span class="lnt"> 74
</span><span class="lnt"> 75
</span><span class="lnt"> 76
</span><span class="lnt"> 77
</span><span class="lnt"> 78
</span><span class="lnt"> 79
</span><span class="lnt"> 80
</span><span class="lnt"> 81
</span><span class="lnt"> 82
</span><span class="lnt"> 83
</span><span class="lnt"> 84
</span><span class="lnt"> 85
</span><span class="lnt"> 86
</span><span class="lnt"> 87
</span><span class="lnt"> 88
</span><span class="lnt"> 89
</span><span class="lnt"> 90
</span><span class="lnt"> 91
</span><span class="lnt"> 92
</span><span class="lnt"> 93
</span><span class="lnt"> 94
</span><span class="lnt"> 95
</span><span class="lnt"> 96
</span><span class="lnt"> 97
</span><span class="lnt"> 98
</span><span class="lnt"> 99
</span><span class="lnt">100
</span><span class="lnt">101
</span><span class="lnt">102
</span><span class="lnt">103
</span><span class="lnt">104
</span><span class="lnt">105
</span><span class="lnt">106
</span><span class="lnt">107
</span><span class="lnt">108
</span><span class="lnt">109
</span><span class="lnt">110
</span><span class="lnt">111
</span><span class="lnt">112
</span><span class="lnt">113
</span><span class="lnt">114
</span><span class="lnt">115
</span><span class="lnt">116
</span><span class="lnt">117
</span><span class="lnt">118
</span><span class="lnt">119
</span><span class="lnt">120
</span><span class="lnt">121
</span><span class="lnt">122
</span><span class="lnt">123
</span><span class="lnt">124
</span><span class="lnt">125
</span><span class="lnt">126
</span><span class="lnt">127
</span><span class="lnt">128
</span><span class="lnt">129
</span><span class="lnt">130
</span><span class="lnt">131
</span><span class="lnt">132
</span><span class="lnt">133
</span><span class="lnt">134
</span><span class="lnt">135
</span><span class="lnt">136
</span><span class="lnt">137
</span><span class="lnt">138
</span><span class="lnt">139
</span><span class="lnt">140
</span><span class="lnt">141
</span><span class="lnt">142
</span><span class="lnt">143
</span><span class="lnt">144
</span><span class="lnt">145
</span><span class="lnt">146
</span><span class="lnt">147
</span><span class="lnt">148
</span><span class="lnt">149
</span><span class="lnt">150
</span><span class="lnt">151
</span><span class="lnt">152
</span><span class="lnt">153
</span><span class="lnt">154
</span><span class="lnt">155
</span><span class="lnt">156
</span><span class="lnt">157
</span><span class="lnt">158
</span><span class="lnt">159
</span><span class="lnt">160
</span><span class="lnt">161
</span><span class="lnt">162
</span><span class="lnt">163
</span><span class="lnt">164
</span><span class="lnt">165
</span><span class="lnt">166
</span><span class="lnt">167
</span><span class="lnt">168
</span><span class="lnt">169
</span><span class="lnt">170
</span><span class="lnt">171
</span><span class="lnt">172
</span><span class="lnt">173
</span><span class="lnt">174
</span><span class="lnt">175
</span><span class="lnt">176
</span><span class="lnt">177
</span><span class="lnt">178
</span><span class="lnt">179
</span><span class="lnt">180
</span><span class="lnt">181
</span><span class="lnt">182
</span><span class="lnt">183
</span><span class="lnt">184
</span><span class="lnt">185
</span><span class="lnt">186
</span><span class="lnt">187
</span><span class="lnt">188
</span><span class="lnt">189
</span><span class="lnt">190
</span><span class="lnt">191
</span><span class="lnt">192
</span><span class="lnt">193
</span><span class="lnt">194
</span><span class="lnt">195
</span><span class="lnt">196
</span><span class="lnt">197
</span><span class="lnt">198
</span><span class="lnt">199
</span><span class="lnt">200
</span><span class="lnt">201
</span><span class="lnt">202
</span><span class="lnt">203
</span><span class="lnt">204
</span><span class="lnt">205
</span><span class="lnt">206
</span><span class="lnt">207
</span><span class="lnt">208
</span><span class="lnt">209
</span><span class="lnt">210
</span><span class="lnt">211
</span><span class="lnt">212
</span><span class="lnt">213
</span><span class="lnt">214
</span><span class="lnt">215
</span><span class="lnt">216
</span><span class="lnt">217
</span><span class="lnt">218
</span><span class="lnt">219
</span><span class="lnt">220
</span><span class="lnt">221
</span><span class="lnt">222
</span><span class="lnt">223
</span><span class="lnt">224
</span><span class="lnt">225
</span><span class="lnt">226
</span><span class="lnt">227
</span><span class="lnt">228
</span><span class="lnt">229
</span><span class="lnt">230
</span><span class="lnt">231
</span><span class="lnt">232
</span><span class="lnt">233
</span><span class="lnt">234
</span><span class="lnt">235
</span><span class="lnt">236
</span><span class="lnt">237
</span><span class="lnt">238
</span><span class="lnt">239
</span><span class="lnt">240
</span><span class="lnt">241
</span><span class="lnt">242
</span><span class="lnt">243
</span><span class="lnt">244
</span><span class="lnt">245
</span><span class="lnt">246
</span><span class="lnt">247
</span><span class="lnt">248
</span><span class="lnt">249
</span><span class="lnt">250
</span><span class="lnt">251
</span><span class="lnt">252
</span><span class="lnt">253
</span><span class="lnt">254
</span><span class="lnt">255
</span><span class="lnt">256
</span><span class="lnt">257
</span><span class="lnt">258
</span><span class="lnt">259
</span><span class="lnt">260
</span><span class="lnt">261
</span><span class="lnt">262
</span><span class="lnt">263
</span><span class="lnt">264
</span><span class="lnt">265
</span><span class="lnt">266
</span><span class="lnt">267
</span><span class="lnt">268
</span><span class="lnt">269
</span><span class="lnt">270
</span><span class="lnt">271
</span><span class="lnt">272
</span><span class="lnt">273
</span><span class="lnt">274
</span><span class="lnt">275
</span><span class="lnt">276
</span><span class="lnt">277
</span><span class="lnt">278
</span><span class="lnt">279
</span><span class="lnt">280
</span><span class="lnt">281
</span><span class="lnt">282
</span><span class="lnt">283
</span><span class="lnt">284
</span><span class="lnt">285
</span><span class="lnt">286
</span><span class="lnt">287
</span><span class="lnt">288
</span><span class="lnt">289
</span><span class="lnt">290
</span><span class="lnt">291
</span><span class="lnt">292
</span><span class="lnt">293
</span><span class="lnt">294
</span><span class="lnt">295
</span><span class="lnt">296
</span><span class="lnt">297
</span><span class="lnt">298
</span><span class="lnt">299
</span><span class="lnt">300
</span><span class="lnt">301
</span><span class="lnt">302
</span><span class="lnt">303
</span><span class="lnt">304
</span><span class="lnt">305
</span><span class="lnt">306
</span><span class="lnt">307
</span><span class="lnt">308
</span><span class="lnt">309
</span><span class="lnt">310
</span><span class="lnt">311
</span><span class="lnt">312
</span><span class="lnt">313
</span><span class="lnt">314
</span><span class="lnt">315
</span><span class="lnt">316
</span><span class="lnt">317
</span><span class="lnt">318
</span><span class="lnt">319
</span><span class="lnt">320
</span><span class="lnt">321
</span><span class="lnt">322
</span><span class="lnt">323
</span><span class="lnt">324
</span><span class="lnt">325
</span><span class="lnt">326
</span><span class="lnt">327
</span><span class="lnt">328
</span><span class="lnt">329
</span><span class="lnt">330
</span><span class="lnt">331
</span><span class="lnt">332
</span><span class="lnt">333
</span><span class="lnt">334
</span><span class="lnt">335
</span><span class="lnt">336
</span><span class="lnt">337
</span><span class="lnt">338
</span><span class="lnt">339
</span><span class="lnt">340
</span><span class="lnt">341
</span><span class="lnt">342
</span><span class="lnt">343
</span><span class="lnt">344
</span><span class="lnt">345
</span><span class="lnt">346
</span><span class="lnt">347
</span><span class="lnt">348
</span><span class="lnt">349
</span><span class="lnt">350
</span><span class="lnt">351
</span><span class="lnt">352
</span><span class="lnt">353
</span><span class="lnt">354
</span><span class="lnt">355
</span><span class="lnt">356
</span><span class="lnt">357
</span><span class="lnt">358
</span><span class="lnt">359
</span><span class="lnt">360
</span><span class="lnt">361
</span><span class="lnt">362
</span><span class="lnt">363
</span><span class="lnt">364
</span><span class="lnt">365
</span><span class="lnt">366
</span><span class="lnt">367
</span><span class="lnt">368
</span><span class="lnt">369
</span><span class="lnt">370
</span><span class="lnt">371
</span><span class="lnt">372
</span><span class="lnt">373
</span><span class="lnt">374
</span><span class="lnt">375
</span><span class="lnt">376
</span><span class="lnt">377
</span><span class="lnt">378
</span><span class="lnt">379
</span><span class="lnt">380
</span><span class="lnt">381
</span><span class="lnt">382
</span><span class="lnt">383
</span><span class="lnt">384
</span><span class="lnt">385
</span><span class="lnt">386
</span><span class="lnt">387
</span><span class="lnt">388
</span><span class="lnt">389
</span><span class="lnt">390
</span><span class="lnt">391
</span><span class="lnt">392
</span><span class="lnt">393
</span><span class="lnt">394
</span><span class="lnt">395
</span><span class="lnt">396
</span><span class="lnt">397
</span><span class="lnt">398
</span><span class="lnt">399
</span><span class="lnt">400
</span><span class="lnt">401
</span><span class="lnt">402
</span><span class="lnt">403
</span><span class="lnt">404
</span><span class="lnt">405
</span><span class="lnt">406
</span><span class="lnt">407
</span><span class="lnt">408
</span><span class="lnt">409
</span><span class="lnt">410
</span><span class="lnt">411
</span><span class="lnt">412
</span><span class="lnt">413
</span><span class="lnt">414
</span><span class="lnt">415
</span><span class="lnt">416
</span><span class="lnt">417
</span><span class="lnt">418
</span><span class="lnt">419
</span><span class="lnt">420
</span><span class="lnt">421
</span><span class="lnt">422
</span><span class="lnt">423
</span><span class="lnt">424
</span><span class="lnt">425
</span><span class="lnt">426
</span><span class="lnt">427
</span><span class="lnt">428
</span><span class="lnt">429
</span><span class="lnt">430
</span><span class="lnt">431
</span><span class="lnt">432
</span><span class="lnt">433
</span><span class="lnt">434
</span><span class="lnt">435
</span><span class="lnt">436
</span><span class="lnt">437
</span><span class="lnt">438
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-Python" data-lang="Python"><span class="line"><span class="cl"><span class="kn">from</span> <span class="nn">datetime</span> <span class="kn">import</span> <span class="n">datetime</span><span class="p">,</span> <span class="n">timezone</span>
</span></span><span class="line"><span class="cl"><span class="kn">from</span> <span class="nn">operator</span> <span class="kn">import</span> <span class="n">itemgetter</span>
</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">time</span>
</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">os</span>
</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">requests</span>
</span></span><span class="line"><span class="cl"><span class="kn">from</span> <span class="nn">constant</span> <span class="kn">import</span> <span class="o">*</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">def</span> <span class="nf">utc_to_local</span><span class="p">(</span><span class="n">utc_dt</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">    <span class="c1"># ìœ íŠœë¸Œ API ë¡œ ë°›ì•„ì˜¤ë©´ ë¯¸êµ­ ì‹œê°„ìœ¼ë¡œ ë°›ì•„ì™€ì§</span>
</span></span><span class="line"><span class="cl">    <span class="c1"># ë¯¸êµ­ &gt; í•œêµ­ìœ¼ë¡œ ë³€ê²½</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="n">utc_dt</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="n">tzinfo</span><span class="o">=</span><span class="n">timezone</span><span class="o">.</span><span class="n">utc</span><span class="p">)</span><span class="o">.</span><span class="n">astimezone</span><span class="p">(</span><span class="n">tz</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">def</span> <span class="nf">sorter</span><span class="p">(</span><span class="nb">list</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">    <span class="c1"># [{},{},..,{}] ë¦¬ìŠ¤íŠ¸ì—ì„œ ë”•ì…”ë„ˆë¦¬ì˜ ë°¸ë¥˜ë¥¼ ì´ìš©í•´ ì •ë ¬</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="nb">sorted</span><span class="p">(</span><span class="nb">list</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="n">itemgetter</span><span class="p">(</span><span class="n">value</span><span class="p">),</span> <span class="n">reverse</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">def</span> <span class="nf">listDivider</span><span class="p">(</span><span class="n">arr</span><span class="p">,</span> <span class="n">n</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">    <span class="c1"># arrë°°ì—´ì„ nê°œì”© ë‚˜ëˆ„ì–´ ë°°ì—´ë¡œ ê°ì‹¸ ë¦¬í„´í•©ë‹ˆë‹¤.</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="p">[</span><span class="n">arr</span><span class="p">[</span><span class="n">i</span><span class="p">:</span> <span class="n">i</span> <span class="o">+</span> <span class="n">n</span><span class="p">]</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">arr</span><span class="p">),</span> <span class="n">n</span><span class="p">)]</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">Printer</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">    <span class="c1"># 1. í™”ë©´ì— ì¶œë ¥</span>
</span></span><span class="line"><span class="cl">    <span class="c1"># 2. ë¡œì»¬ì— ì €ì¥</span>
</span></span><span class="line"><span class="cl">    <span class="c1"># 3. ì‹œë†€ë¡œì§€ì±„íŒ…ì— ì „ì†¡</span>
</span></span><span class="line"><span class="cl">    <span class="c1"># ìœ„ 3ê°€ì§€ë¥¼ ë‹´ë‹¹í•˜ëŠ” í´ë˜ìŠ¤</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">        <span class="c1"># íŒŒì¼ ì €ì¥í•  ë””ë ‰í† ë¦¬ ìƒì„±</span>
</span></span><span class="line"><span class="cl">        <span class="n">today</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s1">&#39;%Y-%m-</span><span class="si">%d</span><span class="s1">&#39;</span><span class="p">,</span> <span class="n">time</span><span class="o">.</span><span class="n">localtime</span><span class="p">(</span><span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()))</span>
</span></span><span class="line"><span class="cl">        <span class="n">start</span> <span class="o">=</span> <span class="n">time</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s1">&#39;%Y-%m-</span><span class="si">%d</span><span class="s1"> %H:%M:%S&#39;</span><span class="p">,</span> <span class="n">time</span><span class="o">.</span><span class="n">localtime</span><span class="p">(</span><span class="n">time</span><span class="o">.</span><span class="n">time</span><span class="p">()))</span>
</span></span><span class="line"><span class="cl">        <span class="n">current</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">getcwd</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">        <span class="n">path</span> <span class="o">=</span> <span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">current</span><span class="si">}</span><span class="s1">/</span><span class="si">{</span><span class="n">today</span><span class="si">}</span><span class="s1">&#39;</span>
</span></span><span class="line"><span class="cl">        <span class="k">try</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">            <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">path</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">                <span class="n">os</span><span class="o">.</span><span class="n">makedirs</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="k">except</span> <span class="ne">OSError</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">            <span class="nb">print</span><span class="p">(</span><span class="s2">&#34;Error: Cannot create the directory </span><span class="si">{}</span><span class="s2">&#34;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">path</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">        <span class="bp">self</span><span class="o">.</span><span class="n">fp</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">path</span><span class="si">}</span><span class="s1">/</span><span class="si">{</span><span class="n">start</span><span class="si">}</span><span class="s1">.txt&#39;</span><span class="p">,</span> <span class="s1">&#39;w&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="k">def</span> <span class="nf">saveOnLocal</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">msg</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">        <span class="c1"># ì¶œë ¥í•˜ê³  íŒŒì¼ì— ì €ì¥í•©ë‹ˆë‹¤.</span>
</span></span><span class="line"><span class="cl">        <span class="bp">self</span><span class="o">.</span><span class="n">fp</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">msg</span><span class="si">}</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="nb">print</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="k">def</span> <span class="nf">sendToChat</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">msg</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">        <span class="c1"># ì‹œë†€ë¡œì§€ì±„íŒ…ì— ë³´ë‚´ê³ , ì¶œë ¥í•˜ê³ , ë¡œì»¬ì— ì €ì¥í•©ë‹ˆë‹¤.</span>
</span></span><span class="line"><span class="cl">        <span class="bp">self</span><span class="o">.</span><span class="n">saveOnLocal</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="c1"># í…ìŠ¤íŠ¸ê°€ ë„ˆë¬´ ê¸¸ë©´ ì‹œë†€ë¡œì§€ì±—ì—ì„œ 410 ì—ëŸ¬ë¥¼ ë°˜í™˜í•œë‹¤. n ì¤„ì”© ëŠì–´ì„œ ë°°ì—´ë¡œ ë¦¬í„´ (\nìœ¼ë¡œ)</span>
</span></span><span class="line"><span class="cl">        <span class="n">msgs_array</span> <span class="o">=</span> <span class="n">listDivider</span><span class="p">(</span><span class="n">msg</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">),</span> <span class="n">SYNOLOGYCHAT_LINE_SPLIT</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="c1"># ì‹œë†€ë¡œì§€ì—ì„œ ì´ì˜ê²Œ í‘œì‹œë˜ê²Œ ë³€ê²½í•©ë‹ˆë‹¤.</span>
</span></span><span class="line"><span class="cl">        <span class="k">for</span> <span class="n">msgs</span> <span class="ow">in</span> <span class="n">msgs_array</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">            <span class="n">text</span> <span class="o">=</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">msgs</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">            <span class="n">text</span> <span class="o">=</span> <span class="n">text</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="n">SMALL_LINE</span><span class="p">,</span> <span class="n">SYNOLOGY_LINE</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">            <span class="n">text</span> <span class="o">=</span> <span class="n">text</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&#34;</span><span class="se">\t</span><span class="s2">&#34;</span><span class="p">,</span><span class="s1">&#39;&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">            <span class="n">text</span> <span class="o">=</span> <span class="n">text</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&#34;  &#34;</span><span class="p">,</span><span class="s2">&#34; &#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">            <span class="n">text</span> <span class="o">=</span> <span class="n">text</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&#34;ë‹‰ë„¤ì„&#34;</span><span class="p">,</span><span class="s2">&#34;</span><span class="se">\n</span><span class="s2">ë‹‰ë„¤ì„&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">            <span class="n">text</span> <span class="o">=</span> <span class="n">text</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&#34;| @&#34;</span><span class="p">,</span><span class="s2">&#34;</span><span class="se">\n</span><span class="s2">@&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">            <span class="c1"># í•´ë‹¹ í…ìŠ¤íŠ¸ë¥¼ ì‹œë†€ë¡œì§€ ì±—ë´‡ìœ¼ë¡œ ë³´ë‚¼ ìˆ˜ ìˆëŠ” APIë¥¼ ë§Œë“¤ì–´ë†“ì•˜ìŠµë‹ˆë‹¤.</span>
</span></span><span class="line"><span class="cl">            <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">SYNOLOGYAPI_URL</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="p">{</span><span class="s2">&#34;msg&#34;</span><span class="p">:</span><span class="n">text</span><span class="p">})</span>
</span></span><span class="line"><span class="cl">            <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="n">SYNOLOGYAPI_REQUEST_PER_TIME</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="k">def</span> <span class="nf">close</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">        <span class="bp">self</span><span class="o">.</span><span class="n">fp</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">Youtube</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">    <span class="n">apikey</span> <span class="o">=</span> <span class="n">YOUTUBEAPI_KEY</span>
</span></span><span class="line"><span class="cl">    <span class="n">videoId</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
</span></span><span class="line"><span class="cl">    <span class="n">videoInfo</span> <span class="o">=</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="s2">&#34;title&#34;</span><span class="p">:</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>        <span class="c1"># ì œëª©</span>
</span></span><span class="line"><span class="cl">        <span class="s2">&#34;description&#34;</span><span class="p">:</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>  <span class="c1"># ì„¤ëª…</span>
</span></span><span class="line"><span class="cl">        <span class="s2">&#34;viewCount&#34;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>     <span class="c1"># ì¡°íšŒìˆ˜</span>
</span></span><span class="line"><span class="cl">        <span class="s2">&#34;likeCount&#34;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>     <span class="c1"># ì¢‹ì•„ìš”</span>
</span></span><span class="line"><span class="cl">        <span class="s2">&#34;commentCount&#34;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>  <span class="c1"># ëŒ“ê¸€ìˆ˜</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="n">comments</span> <span class="o">=</span> <span class="p">[{</span>
</span></span><span class="line"><span class="cl">        <span class="s2">&#34;authorDisplayName&#34;</span><span class="p">:</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>    <span class="c1"># ë‹‰ë„¤ì„</span>
</span></span><span class="line"><span class="cl">        <span class="s2">&#34;textDisplay&#34;</span><span class="p">:</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>          <span class="c1"># ëŒ“ê¸€</span>
</span></span><span class="line"><span class="cl">        <span class="s2">&#34;publisedAt&#34;</span><span class="p">:</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>           <span class="c1"># ì‘ì„±ì¼</span>
</span></span><span class="line"><span class="cl">        <span class="s2">&#34;likeCount&#34;</span><span class="p">:</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>            <span class="c1"># ì¢‹ì•„ìš”</span>
</span></span><span class="line"><span class="cl">        <span class="s2">&#34;diffTime&#34;</span><span class="p">:</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>             <span class="c1"># ë‹¤ìŒê¸€ ì‘ì„±ì‹œê°„ì˜ ì°¨ì´</span>
</span></span><span class="line"><span class="cl">        <span class="s2">&#34;authorChannelId&#34;</span><span class="p">:</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>      <span class="c1"># ìœ ì € ì±„ë„ ì•„ì´ë”” (ê³ ìœ ê°’)</span>
</span></span><span class="line"><span class="cl">        <span class="s2">&#34;totalReplyCount&#34;</span><span class="p">:</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>      <span class="c1"># ë‹µê¸€ ìˆ˜</span>
</span></span><span class="line"><span class="cl">    <span class="p">}]</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">        <span class="bp">self</span><span class="o">.</span><span class="n">printer</span> <span class="o">=</span> <span class="n">Printer</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">        <span class="bp">self</span><span class="o">.</span><span class="n">greeting</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">        <span class="c1"># ìœ ì €í•œí…Œ ë™ì˜ìƒ IDë¥¼ ë°›ì•„ì˜¤ê³ </span>
</span></span><span class="line"><span class="cl">        <span class="bp">self</span><span class="o">.</span><span class="n">videoId</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getVideoId</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">        <span class="c1"># ë™ì˜ìƒ ì •ë³´ë¥¼ ì¶œë ¥í•˜ê³ </span>
</span></span><span class="line"><span class="cl">        <span class="bp">self</span><span class="o">.</span><span class="n">videoInfo</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getVideoInfo</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">        <span class="c1"># ë™ì˜ìƒì˜ ëŒ“ê¸€ì„ ì €ì¥í•©ë‹ˆë‹¤.</span>
</span></span><span class="line"><span class="cl">        <span class="bp">self</span><span class="o">.</span><span class="n">comments</span> <span class="o">=</span> <span class="p">[]</span>
</span></span><span class="line"><span class="cl">        <span class="bp">self</span><span class="o">.</span><span class="n">comments</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getVideoComments</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">        <span class="c1"># ì €ì¥ëœ ëŒ“ê¸€ì„ ë¶„ì„í•´ì„œ ëª‡ë¶„ë§Œì— ë‹¤ìŒ ëŒ“ê¸€ì´ ë‹¬ë ¸ëŠ”ì§€ ì €ì¥í•©ë‹ˆë‹¤.</span>
</span></span><span class="line"><span class="cl">        <span class="bp">self</span><span class="o">.</span><span class="n">addDiffTime</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">comments</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="bp">self</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="k">def</span> <span class="nf">start</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">        <span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">            <span class="bp">self</span><span class="o">.</span><span class="n">printer</span><span class="o">.</span><span class="n">saveOnLocal</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;</span><span class="se">\n\n</span><span class="si">{</span><span class="n">LINE</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">            <span class="bp">self</span><span class="o">.</span><span class="n">printer</span><span class="o">.</span><span class="n">saveOnLocal</span><span class="p">(</span><span class="s2">&#34;ìœ íŠœë¸Œ ëŒ“ê¸€ ì¡°íšŒ í”„ë¡œê·¸ë¨</span><span class="se">\n</span><span class="s2">by.ë°°ëŒì´ì˜ë‹¹êµ¬ìƒí™œ ì±„PD&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">            <span class="bp">self</span><span class="o">.</span><span class="n">printer</span><span class="o">.</span><span class="n">saveOnLocal</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">LINE</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">            <span class="bp">self</span><span class="o">.</span><span class="n">printer</span><span class="o">.</span><span class="n">saveOnLocal</span><span class="p">(</span><span class="s2">&#34;  0. ì¢…ë£Œ&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">            <span class="bp">self</span><span class="o">.</span><span class="n">printer</span><span class="o">.</span><span class="n">saveOnLocal</span><span class="p">(</span><span class="s2">&#34;  1. ëª¨ë“  ëŒ“ê¸€ ì¡°íšŒ&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">            <span class="bp">self</span><span class="o">.</span><span class="n">printer</span><span class="o">.</span><span class="n">saveOnLocal</span><span class="p">(</span><span class="s2">&#34;  2. ê°€ì¥ ë§ì€ ì¢‹ì•„ìš” ëŒ“ê¸€ ì¡°íšŒ&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">            <span class="bp">self</span><span class="o">.</span><span class="n">printer</span><span class="o">.</span><span class="n">saveOnLocal</span><span class="p">(</span><span class="s2">&#34;  3. ê°€ì¥ ë§ì€ ë‹µê¸€ìˆ˜ ëŒ“ê¸€ ì¡°íšŒ&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">            <span class="bp">self</span><span class="o">.</span><span class="n">printer</span><span class="o">.</span><span class="n">saveOnLocal</span><span class="p">(</span><span class="s2">&#34;  4. ê°€ì¥ ë§ì´ ì‘ì„±í•œ ì‚¬ëŒ ì¡°íšŒ&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">            <span class="bp">self</span><span class="o">.</span><span class="n">printer</span><span class="o">.</span><span class="n">saveOnLocal</span><span class="p">(</span><span class="s2">&#34;  5. ê°€ì¥ ì˜¤ë˜ ë²„í‹´ ëŒ“ê¸€ ì¡°íšŒ&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">            <span class="bp">self</span><span class="o">.</span><span class="n">printer</span><span class="o">.</span><span class="n">saveOnLocal</span><span class="p">(</span><span class="s2">&#34;  6. ë‹‰ë„¤ì„ ì¡°íšŒ&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">            <span class="bp">self</span><span class="o">.</span><span class="n">printer</span><span class="o">.</span><span class="n">saveOnLocal</span><span class="p">(</span><span class="s2">&#34;  7. ëŒ“ê¸€ ë²„í‹°ê¸° ì´ë²¤íŠ¸ ì‹œì‘&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">            <span class="bp">self</span><span class="o">.</span><span class="n">printer</span><span class="o">.</span><span class="n">saveOnLocal</span><span class="p">(</span><span class="s2">&#34;  8. ë‹¤ë¥¸ ì˜ìƒ ì¡°íšŒí•˜ê¸°&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">            <span class="bp">self</span><span class="o">.</span><span class="n">printer</span><span class="o">.</span><span class="n">saveOnLocal</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">LINE</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">            <span class="n">command</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s2">&#34;ë²ˆí˜¸ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš” : &#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">            <span class="bp">self</span><span class="o">.</span><span class="n">printer</span><span class="o">.</span><span class="n">saveOnLocal</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39; &gt; ì…ë ¥ëœ ë²ˆí˜¸ : </span><span class="si">{</span><span class="n">command</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">            <span class="k">if</span> <span class="n">command</span> <span class="o">==</span> <span class="s2">&#34;0&#34;</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">                <span class="c1"># ì¢…ë£Œ</span>
</span></span><span class="line"><span class="cl">                <span class="bp">self</span><span class="o">.</span><span class="n">printer</span><span class="o">.</span><span class="n">saveOnLocal</span><span class="p">(</span><span class="s2">&#34;í”„ë¡œê·¸ë¨ì„ ì¢…ë£Œí•©ë‹ˆë‹¤.&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">                <span class="bp">self</span><span class="o">.</span><span class="n">printer</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">                <span class="k">break</span>
</span></span><span class="line"><span class="cl">            <span class="k">elif</span> <span class="n">command</span> <span class="o">==</span> <span class="s2">&#34;1&#34;</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">                <span class="c1"># ëª¨ë“  ëŒ“ê¸€ ì¡°íšŒ</span>
</span></span><span class="line"><span class="cl">                <span class="n">os</span><span class="o">.</span><span class="n">system</span><span class="p">(</span><span class="s1">&#39;clear&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">                <span class="bp">self</span><span class="o">.</span><span class="n">printComments</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">comments</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">            <span class="k">elif</span> <span class="n">command</span> <span class="o">==</span> <span class="s2">&#34;2&#34;</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">                <span class="c1"># ê°€ì¥ ë§ì€ ì¢‹ì•„ìš”</span>
</span></span><span class="line"><span class="cl">                <span class="n">os</span><span class="o">.</span><span class="n">system</span><span class="p">(</span><span class="s1">&#39;clear&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">                <span class="bp">self</span><span class="o">.</span><span class="n">printMostLiker</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">            <span class="k">elif</span> <span class="n">command</span> <span class="o">==</span> <span class="s2">&#34;3&#34;</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">                <span class="c1"># ê°€ì¥ ë§ì€ ë‹µê¸€ìˆ˜</span>
</span></span><span class="line"><span class="cl">                <span class="n">os</span><span class="o">.</span><span class="n">system</span><span class="p">(</span><span class="s1">&#39;clear&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">                <span class="bp">self</span><span class="o">.</span><span class="n">printMostReply</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">            <span class="k">elif</span> <span class="n">command</span> <span class="o">==</span> <span class="s2">&#34;4&#34;</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">                <span class="c1"># ê°€ì¥ ë§ì´ ì‘ì„±í•œ ì‚¬ëŒ</span>
</span></span><span class="line"><span class="cl">                <span class="n">os</span><span class="o">.</span><span class="n">system</span><span class="p">(</span><span class="s1">&#39;clear&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">                <span class="bp">self</span><span class="o">.</span><span class="n">printMostCommenter</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">            <span class="k">elif</span> <span class="n">command</span> <span class="o">==</span> <span class="s2">&#34;5&#34;</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">                <span class="c1"># ê°€ì¥ ì˜¤ë˜ ë²„í‹´ ëŒ“ê¸€</span>
</span></span><span class="line"><span class="cl">                <span class="n">os</span><span class="o">.</span><span class="n">system</span><span class="p">(</span><span class="s1">&#39;clear&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">                <span class="bp">self</span><span class="o">.</span><span class="n">printMostDiffTime</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">            <span class="k">elif</span> <span class="n">command</span> <span class="o">==</span> <span class="s2">&#34;6&#34;</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">                <span class="c1"># ìœ ì € ê²€ìƒ‰</span>
</span></span><span class="line"><span class="cl">                <span class="n">os</span><span class="o">.</span><span class="n">system</span><span class="p">(</span><span class="s1">&#39;clear&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">                <span class="n">username</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s2">&#34;ê²€ìƒ‰í•  ë‹‰ë„¤ì„ì„ ì ì–´ì£¼ì„¸ìš” : &#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">                <span class="bp">self</span><span class="o">.</span><span class="n">printUsersComment</span><span class="p">(</span><span class="n">username</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">            <span class="k">elif</span> <span class="n">command</span> <span class="o">==</span> <span class="s2">&#34;7&#34;</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">                <span class="c1"># ë²„í‹°ê¸° ì´ë²¤íŠ¸ ì‹œì‘</span>
</span></span><span class="line"><span class="cl">                <span class="n">os</span><span class="o">.</span><span class="n">system</span><span class="p">(</span><span class="s1">&#39;clear&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">                <span class="nb">print</span><span class="p">(</span><span class="n">LINE</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">                <span class="nb">print</span><span class="p">(</span><span class="s2">&#34;ğŸš¨   ëŒ“ê¸€ ê³ ì •ì´ ì—†ëŠ”ì§€ í™•ì¸í•´ì£¼ì„¸ìš”. ë˜ì–´ìˆë‹¤ë©´ ê³ ì •í•´ì œ í•´ì£¼ì„¸ìš”.&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">                <span class="nb">print</span><span class="p">(</span><span class="s2">&#34;ğŸš¨   ì´ë²¤íŠ¸ê°€ ì¢…ë£Œë  ë•Œ ê¹Œì§€ í”„ë¡œê·¸ë¨ì€ ê³„ì† ì§„í–‰ë©ë‹ˆë‹¤.&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">                <span class="nb">print</span><span class="p">(</span><span class="n">LINE</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">                <span class="n">stop</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s2">&#34;  &gt; ëª‡ ë¶„ ë²„í‹°ê¸°ë¥¼ í•˜ì‹¤ê±´ì§€ ì…ë ¥í•´ì£¼ì„¸ìš” : &#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">                <span class="n">os</span><span class="o">.</span><span class="n">system</span><span class="p">(</span><span class="s1">&#39;clear&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">                <span class="bp">self</span><span class="o">.</span><span class="n">startDiffTimeEvent</span><span class="p">(</span><span class="n">stop</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">            <span class="k">elif</span> <span class="n">command</span> <span class="o">==</span> <span class="s2">&#34;8&#34;</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">                <span class="c1"># ë‹¤ë¥¸ ë™ì˜ìƒ ì¡°íšŒ</span>
</span></span><span class="line"><span class="cl">                <span class="n">os</span><span class="o">.</span><span class="n">system</span><span class="p">(</span><span class="s1">&#39;clear&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">                <span class="bp">self</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">            <span class="k">else</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">                <span class="n">os</span><span class="o">.</span><span class="n">system</span><span class="p">(</span><span class="s1">&#39;clear&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="k">def</span> <span class="nf">greeting</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">        <span class="n">text</span> <span class="o">=</span> <span class="sa">f</span><span class="s1">&#39;</span><span class="se">\n</span><span class="si">{</span><span class="n">LINE</span><span class="si">}</span><span class="se">\n</span><span class="s1">âœ‹ í”„ë¡œê·¸ë¨ì´ ì‹œì‘ë©ë‹ˆë‹¤. </span><span class="si">{</span><span class="n">time</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s2">&#34;%yë…„ %mì›” </span><span class="si">%d</span><span class="s2">ì¼ %H:%M:%S&#34;</span><span class="p">)</span><span class="si">}</span><span class="se">\n</span><span class="s1">&#39;</span>
</span></span><span class="line"><span class="cl">        <span class="n">text</span> <span class="o">+=</span> <span class="sa">f</span><span class="s1">&#39;&gt;  By.ë°°ëŒì´ì˜ë‹¹êµ¬ìƒí™œ ì±„PD</span><span class="se">\n</span><span class="s1">&gt;  ì˜ìƒ ëŒ“ê¸€ ì´ë²¤íŠ¸</span><span class="se">\n</span><span class="si">{</span><span class="n">LINE</span><span class="si">}</span><span class="s1">&#39;</span>
</span></span><span class="line"><span class="cl">        <span class="bp">self</span><span class="o">.</span><span class="n">printer</span><span class="o">.</span><span class="n">saveOnLocal</span><span class="p">(</span><span class="n">text</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="k">def</span> <span class="nf">youtubeAPIExceed</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">        <span class="c1"># ìœ íŠœë¸Œ APIê°€ ì¼ì¼ í•œë„ê°€ ì •í•´ì ¸ ìˆìŒ.</span>
</span></span><span class="line"><span class="cl">        <span class="c1"># ì¼ì¼í•œë„ë¥¼ ì´ˆê³¼í•˜ë©´ ë‹¤ë¥¸ í‚¤ë¡œ ë³€ê²½í•©ë‹ˆë‹¤.</span>
</span></span><span class="line"><span class="cl">        <span class="bp">self</span><span class="o">.</span><span class="n">printer</span><span class="o">.</span><span class="n">sendToChat</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;ğŸš¨ ìœ íŠœë¸Œ API ìš”ì²­ í•œë„ ì´ˆê³¼. </span><span class="si">{</span><span class="n">YOUTUBEAPI_RESEND_TIMEOUT</span><span class="si">}</span><span class="s1">ì´ˆ í›„ ë‹¤ì‹œ ì‹œë„í•©ë‹ˆë‹¤.&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">apikey</span> <span class="o">==</span> <span class="n">YOUTUBEAPI_KEY</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">            <span class="bp">self</span><span class="o">.</span><span class="n">apikey</span> <span class="o">=</span> <span class="n">YOUTUBEAPI_SUB_KEY</span>
</span></span><span class="line"><span class="cl">        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">apikey</span> <span class="o">==</span> <span class="n">YOUTUBEAPI_SUB_KEY</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">            <span class="bp">self</span><span class="o">.</span><span class="n">apikey</span> <span class="o">=</span> <span class="n">YOUTUBEAPI_KEY</span>
</span></span><span class="line"><span class="cl">        <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="n">YOUTUBEAPI_RESEND_TIMEOUT</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="k">def</span> <span class="nf">youtubeNotFound</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">        <span class="c1"># ìœ íŠœë¸Œ urlì„ ì°¾ì§€ ëª»í–ˆì„ ê²½ìš°</span>
</span></span><span class="line"><span class="cl">        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;ğŸš¨ í•´ë‹¹ ìœ íŠœë¸Œ ì˜ìƒ URLì„ í™•ì¸í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤. ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.</span><span class="se">\n</span><span class="si">{</span><span class="n">LINE</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="bp">self</span><span class="o">.</span><span class="fm">__init__</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="k">def</span> <span class="nf">getVideoId</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">        <span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">            <span class="n">videoId</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s2">&#34;1ï¸âƒ£  ì˜ìƒ URLì„ ì…ë ¥í•´ì£¼ì„¸ìš” : &#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">            <span class="c1"># ìœ íŠœë¸Œ URL ì¸ì§€ í™•ì¸</span>
</span></span><span class="line"><span class="cl">            <span class="k">try</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">                <span class="k">if</span> <span class="s1">&#39;youtu&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">videoId</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">                    <span class="k">raise</span> <span class="ne">Exception</span>
</span></span><span class="line"><span class="cl">                <span class="k">if</span> <span class="s1">&#39;watch?v=&#39;</span> <span class="ow">in</span> <span class="n">videoId</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">                    <span class="n">videoId</span> <span class="o">=</span> <span class="n">videoId</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&#34;=&#34;</span><span class="p">)[</span><span class="mi">1</span><span class="p">]</span>
</span></span><span class="line"><span class="cl">                <span class="k">else</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">                    <span class="n">videoId</span> <span class="o">=</span> <span class="n">videoId</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&#34;/&#34;</span><span class="p">)[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
</span></span><span class="line"><span class="cl">                <span class="k">return</span> <span class="n">videoId</span>
</span></span><span class="line"><span class="cl">            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">                <span class="nb">print</span><span class="p">(</span><span class="s2">&#34;ğŸš¨ í•´ë‹¹ ì˜ìƒì„ í™•ì¸í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤. ë‹¤ì‹œ ì…ë ¥í•´ì£¼ì„¸ìš”.&#34;</span><span class="p">,</span> <span class="n">e</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">                <span class="nb">print</span><span class="p">(</span><span class="n">LINE</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="k">def</span> <span class="nf">getVideoInfo</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">        <span class="c1"># ìœ ì €ë¡œë¶€í„° ë°›ì€ ë™ì˜ìƒurlì´ ì •ìƒì ì¸ì§€ í™•ì¸í•˜ê³  ì •ìƒì¸ ê²½ìš° ë™ì˜ìƒ ì •ë³´ë¥¼ ë¦¬í„´í•©ë‹ˆë‹¤.</span>
</span></span><span class="line"><span class="cl">        <span class="n">res</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="sa">f</span><span class="s2">&#34;</span><span class="si">{</span><span class="n">YOUTUBEAPI_VIDEOS_URL</span><span class="si">}</span><span class="s2">?key=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">apikey</span><span class="si">}</span><span class="s2">&amp;part=snippet,statistics&amp;id=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">videoId</span><span class="si">}</span><span class="s2">&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="k">if</span> <span class="n">res</span><span class="o">.</span><span class="n">status_code</span> <span class="o">==</span> <span class="mi">200</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">            <span class="n">data</span> <span class="o">=</span> <span class="n">res</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">            <span class="n">items</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="s2">&#34;items&#34;</span><span class="p">]</span>
</span></span><span class="line"><span class="cl">            <span class="c1"># urlì´ ì˜ëª»ë˜ì–´ë„ status 200ê°’ê³¼ í•¨ê»˜ itemsëŠ” ë¹ˆ ë°°ì—´ì„ ë¦¬í„´í•©ë‹ˆë‹¤.</span>
</span></span><span class="line"><span class="cl">            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">items</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">1</span> <span class="p">:</span>
</span></span><span class="line"><span class="cl">                <span class="bp">self</span><span class="o">.</span><span class="n">youtubeNotFound</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">            <span class="n">title</span> <span class="o">=</span> <span class="n">items</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="s2">&#34;snippet&#34;</span><span class="p">][</span><span class="s2">&#34;title&#34;</span><span class="p">]</span>
</span></span><span class="line"><span class="cl">            <span class="n">description</span> <span class="o">=</span> <span class="n">items</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="s2">&#34;snippet&#34;</span><span class="p">][</span><span class="s2">&#34;description&#34;</span><span class="p">]</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&#34;</span><span class="se">\n</span><span class="s2">&#34;</span><span class="p">,</span> <span class="s2">&#34; &#34;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&#34;&lt;br&gt;&#34;</span><span class="p">,</span><span class="s2">&#34; &#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">description</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">25</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">                <span class="n">description</span> <span class="o">=</span> <span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">description</span><span class="p">[:</span><span class="mi">25</span><span class="p">]</span><span class="si">}</span><span class="s1">...&#39;</span>
</span></span><span class="line"><span class="cl">            <span class="n">commentCount</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">items</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="s2">&#34;statistics&#34;</span><span class="p">][</span><span class="s2">&#34;commentCount&#34;</span><span class="p">])</span>
</span></span><span class="line"><span class="cl">            <span class="n">likeCount</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">items</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="s2">&#34;statistics&#34;</span><span class="p">][</span><span class="s2">&#34;likeCount&#34;</span><span class="p">])</span>
</span></span><span class="line"><span class="cl">            <span class="n">viewCount</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">items</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="s2">&#34;statistics&#34;</span><span class="p">][</span><span class="s2">&#34;viewCount&#34;</span><span class="p">])</span>
</span></span><span class="line"><span class="cl">            <span class="n">msg</span> <span class="o">=</span> <span class="sa">f</span><span class="s1">&#39;âœ… ì˜ìƒì´ í™•ì¸ë˜ì—ˆìŠµë‹ˆë‹¤.</span><span class="se">\n</span><span class="s1">&#39;</span>
</span></span><span class="line"><span class="cl">            <span class="n">msg</span> <span class="o">+=</span> <span class="sa">f</span><span class="s1">&#39;&gt;  ì œëª©: </span><span class="si">{</span><span class="n">title</span><span class="si">}</span><span class="se">\n</span><span class="s1">&#39;</span>
</span></span><span class="line"><span class="cl">            <span class="n">msg</span> <span class="o">+=</span> <span class="sa">f</span><span class="s1">&#39;&gt;  ì„¤ëª…: </span><span class="si">{</span><span class="n">description</span><span class="si">}</span><span class="s1">...</span><span class="se">\n</span><span class="s1">&#39;</span>
</span></span><span class="line"><span class="cl">            <span class="n">msg</span> <span class="o">+=</span> <span class="sa">f</span><span class="s2">&#34;&gt;  ì¡°íšŒìˆ˜ </span><span class="si">{</span><span class="nb">format</span><span class="p">(</span><span class="n">viewCount</span><span class="p">,</span> <span class="s1">&#39;,&#39;</span><span class="p">)</span><span class="si">}</span><span class="s2"> | ì¢‹ì•„ìš” </span><span class="si">{</span><span class="nb">format</span><span class="p">(</span><span class="n">likeCount</span><span class="p">,</span> <span class="s1">&#39;,&#39;</span><span class="p">)</span><span class="si">}</span><span class="s2"> | ëŒ“ê¸€ìˆ˜ </span><span class="si">{</span><span class="nb">format</span><span class="p">(</span><span class="n">commentCount</span><span class="p">,</span> <span class="s1">&#39;,&#39;</span><span class="p">)</span><span class="si">}</span><span class="se">\n</span><span class="s2">&#34;</span>
</span></span><span class="line"><span class="cl">            <span class="n">msg</span> <span class="o">+=</span> <span class="n">LINE</span>
</span></span><span class="line"><span class="cl">            <span class="bp">self</span><span class="o">.</span><span class="n">printer</span><span class="o">.</span><span class="n">saveOnLocal</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">            <span class="k">return</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">                <span class="s2">&#34;title&#34;</span><span class="p">:</span> <span class="n">title</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                <span class="s2">&#34;description&#34;</span><span class="p">:</span> <span class="n">description</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                <span class="s2">&#34;viewCount&#34;</span><span class="p">:</span> <span class="n">viewCount</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                <span class="s2">&#34;likeCount&#34;</span><span class="p">:</span> <span class="n">likeCount</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">                <span class="s2">&#34;commentCount&#34;</span><span class="p">:</span> <span class="n">commentCount</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">            <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="k">else</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">            <span class="c1"># 200ì„ ë¦¬í„´ë°›ì§€ ì•Šìœ¼ë©´ ìœ íŠœë¸Œ api ì¼ì¼í•œë„ ì´ˆê³¼ë¡œ 403ì„ ë¦¬í„´ë°›ìŠµë‹ˆë‹¤.</span>
</span></span><span class="line"><span class="cl">            <span class="bp">self</span><span class="o">.</span><span class="n">youtubeAPIExceed</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="k">def</span> <span class="nf">getVideoComments</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">        <span class="bp">self</span><span class="o">.</span><span class="n">printer</span><span class="o">.</span><span class="n">saveOnLocal</span><span class="p">(</span><span class="sa">f</span><span class="s2">&#34;2ï¸âƒ£  ëŒ“ê¸€ì„ ê°€ì ¸ì˜µë‹ˆë‹¤.&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="n">url</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&#34;</span><span class="si">{</span><span class="n">YOUTUBEAPI_COMMENTTHREADS_URL</span><span class="si">}</span><span class="s2">?key=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">apikey</span><span class="si">}</span><span class="s2">&amp;maxResults=</span><span class="si">{</span><span class="n">MAXRESULTS</span><span class="si">}</span><span class="s2">&amp;part=snippet,replies&amp;videoId=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">videoId</span><span class="si">}</span><span class="s2">&#34;</span>
</span></span><span class="line"><span class="cl">        <span class="c1"># ë™ì˜ìƒì˜ ëŒ“ê¸€ì„ ë¶ˆëŸ¬ì˜µë‹ˆë‹¤.</span>
</span></span><span class="line"><span class="cl">        <span class="bp">self</span><span class="o">.</span><span class="n">getComments</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="bp">self</span><span class="o">.</span><span class="n">comments</span> <span class="o">=</span> <span class="nb">sorted</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">comments</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="n">itemgetter</span><span class="p">(</span><span class="s1">&#39;publishedAt&#39;</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">        <span class="bp">self</span><span class="o">.</span><span class="n">printer</span><span class="o">.</span><span class="n">saveOnLocal</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;âœ… ëª¨ë“  ëŒ“ê¸€ì´ í™•ì¸ë˜ì—ˆìŠµë‹ˆë‹¤.</span><span class="se">\n</span><span class="si">{</span><span class="n">LINE</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">comments</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="k">def</span> <span class="nf">getComments</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">url</span><span class="p">,</span> <span class="n">cnt</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">        <span class="c1"># 1íšŒ ìš”ì²­ì— 100ê°œê¹Œì§€ ë°›ì•„ì˜¬ ìˆ˜ ìˆê³  100ê°œê°€ ì´ˆê³¼í•˜ëŠ” ëŒ“ê¸€ì˜ ë™ì˜ìƒì€ ë‹¤ìŒ í˜ì´ì§€ í† í°ì´ ì£¼ì–´ì§‘ë‹ˆë‹¤.</span>
</span></span><span class="line"><span class="cl">        <span class="c1"># ì¬ê·€ì ìœ¼ë¡œ ë‹¤ìŒ í˜ì´ì§€ í† í°ì´ ì—†ì„ë•Œ ê¹Œì§€ ì‹¤í–‰ë©ë‹ˆë‹¤.</span>
</span></span><span class="line"><span class="cl">        <span class="n">percent</span> <span class="o">=</span> <span class="n">cnt</span> <span class="o">*</span> <span class="n">MAXRESULTS</span> <span class="o">/</span> <span class="bp">self</span><span class="o">.</span><span class="n">videoInfo</span><span class="p">[</span><span class="s2">&#34;commentCount&#34;</span><span class="p">]</span> <span class="o">*</span> <span class="mi">100</span>
</span></span><span class="line"><span class="cl">        <span class="k">if</span> <span class="n">percent</span> <span class="o">&gt;</span> <span class="mi">100</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">            <span class="n">percent</span> <span class="o">=</span> <span class="mi">100</span>
</span></span><span class="line"><span class="cl">        <span class="n">currCnt</span> <span class="o">=</span> <span class="n">cnt</span> <span class="o">*</span> <span class="n">MAXRESULTS</span>
</span></span><span class="line"><span class="cl">        <span class="bp">self</span><span class="o">.</span><span class="n">printer</span><span class="o">.</span><span class="n">saveOnLocal</span><span class="p">(</span><span class="sa">f</span><span class="s2">&#34;- (</span><span class="si">{</span><span class="n">percent</span><span class="si">:</span><span class="s2">6.2f</span><span class="si">}</span><span class="s2">%) </span><span class="si">{</span><span class="nb">format</span><span class="p">(</span><span class="n">currCnt</span><span class="p">,</span><span class="s1">&#39;,&#39;</span><span class="p">)</span><span class="si">}</span><span class="s2">ê°œ ê¹Œì§€ ì¶”ì¶œì¤‘...&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">url</span><span class="p">)</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">        <span class="k">try</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">            <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">response</span><span class="p">[</span><span class="s2">&#34;items&#34;</span><span class="p">]:</span>
</span></span><span class="line"><span class="cl">                <span class="bp">self</span><span class="o">.</span><span class="n">comments</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">validateComment</span><span class="p">(</span><span class="n">item</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">            <span class="c1"># Exception ë°œìƒì€ api ì¼ì¼ì¡°íšŒë¥¼ ì´ˆê³¼í–ˆì„ ë•Œ ë‚˜íƒ€ë‚©ë‹ˆë‹¤.</span>
</span></span><span class="line"><span class="cl">            <span class="c1"># api í‚¤ë¥¼ ë°”ê¾¸ê³  í˜„ì¬ ëŒ“ê¸€ì„ ë‹¤ì‹œ ì¡°íšŒí•©ë‹ˆë‹¤.</span>
</span></span><span class="line"><span class="cl">            <span class="bp">self</span><span class="o">.</span><span class="n">youtubeAPIExceed</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">            <span class="bp">self</span><span class="o">.</span><span class="n">getComments</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">cnt</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="k">if</span> <span class="s2">&#34;nextPageToken&#34;</span> <span class="ow">in</span> <span class="n">response</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
</span></span><span class="line"><span class="cl">            <span class="c1"># ë‹¤ìŒ ëŒ“ê¸€ì´ ìˆìœ¼ë©´ ì¬ê·€ë¡œ ë‹¤ì‹œ ë¶ˆëŸ¬ì˜µë‹ˆë‹¤.</span>
</span></span><span class="line"><span class="cl">            <span class="n">nextPageToken</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">response</span><span class="p">[</span><span class="s2">&#34;nextPageToken&#34;</span><span class="p">])</span>
</span></span><span class="line"><span class="cl">            <span class="bp">self</span><span class="o">.</span><span class="n">getComments</span><span class="p">(</span><span class="sa">f</span><span class="s2">&#34;</span><span class="si">{</span><span class="n">url</span><span class="si">}</span><span class="s2">&amp;pageToken=</span><span class="si">{</span><span class="n">nextPageToken</span><span class="si">}</span><span class="s2">&#34;</span><span class="p">,</span> <span class="n">cnt</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="k">def</span> <span class="nf">validateComment</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">item</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">        <span class="c1"># apië¡œ ë°›ì€ json ì—ì„œ í•„ìš”í•œ ê°’ë§Œ ì €ì¥í•©ë‹ˆë‹¤.</span>
</span></span><span class="line"><span class="cl">        <span class="n">publisedAt</span> <span class="o">=</span> <span class="n">item</span><span class="p">[</span><span class="s2">&#34;snippet&#34;</span><span class="p">][</span><span class="s2">&#34;topLevelComment&#34;</span><span class="p">][</span><span class="s2">&#34;snippet&#34;</span><span class="p">][</span><span class="s2">&#34;publishedAt&#34;</span><span class="p">]</span>
</span></span><span class="line"><span class="cl">        <span class="n">publisedAt</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">strptime</span><span class="p">(</span><span class="n">publisedAt</span><span class="p">,</span> <span class="s2">&#34;%Y-%m-</span><span class="si">%d</span><span class="s2">T%H:%M:%SZ&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="n">publisedAt</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="n">utc_to_local</span><span class="p">(</span><span class="n">publisedAt</span><span class="p">),</span> <span class="s2">&#34;%y-%m-</span><span class="si">%d</span><span class="s2"> %H:%M:%S&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="n">comment</span> <span class="o">=</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">            <span class="s2">&#34;publishedAt&#34;</span> <span class="p">:</span> <span class="n">publisedAt</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">            <span class="s2">&#34;authorDisplayName&#34;</span> <span class="p">:</span> <span class="n">item</span><span class="p">[</span><span class="s2">&#34;snippet&#34;</span><span class="p">][</span><span class="s2">&#34;topLevelComment&#34;</span><span class="p">][</span><span class="s2">&#34;snippet&#34;</span><span class="p">][</span><span class="s2">&#34;authorDisplayName&#34;</span><span class="p">],</span>
</span></span><span class="line"><span class="cl">            <span class="c1"># &lt;a href=&#34;about:invalid#zCSafez&#34;&gt;&lt;/a&gt;ëŠ” PCì—ì„œ ìœ íŠœë¸Œì—ë§Œ ì¡´ì¬í•˜ëŠ” ì´ëª¨í‹°ì½˜ì´ ì´ëŸ¬ê²Œ ë‚˜ì˜µë‹ˆë‹¤</span>
</span></span><span class="line"><span class="cl">            <span class="s2">&#34;textDisplay&#34;</span> <span class="p">:</span> <span class="n">item</span><span class="p">[</span><span class="s2">&#34;snippet&#34;</span><span class="p">][</span><span class="s2">&#34;topLevelComment&#34;</span><span class="p">][</span><span class="s2">&#34;snippet&#34;</span><span class="p">][</span><span class="s2">&#34;textDisplay&#34;</span><span class="p">]</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&#34;&lt;br&gt;&#34;</span><span class="p">,</span><span class="s2">&#34; &#34;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&#34;&amp;quot;&#34;</span><span class="p">,</span><span class="s2">&#34; &#34;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;&lt;a href=&#34;about:invalid#zCSafez&#34;&gt;&lt;/a&gt;&#39;</span><span class="p">,</span><span class="s1">&#39;[ì´ëª¨í‹°ì½˜]&#39;</span><span class="p">),</span>
</span></span><span class="line"><span class="cl">            <span class="s2">&#34;likeCount&#34;</span> <span class="p">:</span> <span class="n">item</span><span class="p">[</span><span class="s2">&#34;snippet&#34;</span><span class="p">][</span><span class="s2">&#34;topLevelComment&#34;</span><span class="p">][</span><span class="s2">&#34;snippet&#34;</span><span class="p">][</span><span class="s2">&#34;likeCount&#34;</span><span class="p">],</span>
</span></span><span class="line"><span class="cl">            <span class="s2">&#34;authorChannelId&#34;</span> <span class="p">:</span> <span class="sa">f</span><span class="s1">&#39;@</span><span class="si">{</span><span class="n">item</span><span class="p">[</span><span class="s2">&#34;snippet&#34;</span><span class="p">][</span><span class="s2">&#34;topLevelComment&#34;</span><span class="p">][</span><span class="s2">&#34;snippet&#34;</span><span class="p">][</span><span class="s2">&#34;authorChannelId&#34;</span><span class="p">][</span><span class="s2">&#34;value&#34;</span><span class="p">]</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">            <span class="s2">&#34;totalReplyCount&#34;</span> <span class="p">:</span> <span class="n">item</span><span class="p">[</span><span class="s2">&#34;snippet&#34;</span><span class="p">][</span><span class="s2">&#34;totalReplyCount&#34;</span><span class="p">]</span>
</span></span><span class="line"><span class="cl">        <span class="p">}</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="n">comment</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="k">def</span> <span class="nf">addDiffTime</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">comments</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">        <span class="c1"># ë°°ì—´ì„ ëŒë©´ì„œ í˜„ì¬ëŒ“ê¸€ê³¼ ë‹¤ìŒëŒ“ê¸€ì˜ ì‹œê°„ì°¨ì´ë¥¼ ì €ì¥í•©ë‹ˆë‹¤.</span>
</span></span><span class="line"><span class="cl">        <span class="c1"># ë§ˆì§€ë§‰ ëŒ“ê¸€ì€ í˜„ì¬ì‹œê°„ê³¼ ì‹œê°„ì°¨ì´ë¥¼ ì €ì¥í•©ë‹ˆë‹¤.</span>
</span></span><span class="line"><span class="cl">        <span class="n">lastCommentDiffTime</span> <span class="o">=</span> <span class="p">(</span><span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">()</span> <span class="o">-</span> <span class="n">datetime</span><span class="o">.</span><span class="n">strptime</span><span class="p">(</span><span class="n">comments</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">][</span><span class="s2">&#34;publishedAt&#34;</span><span class="p">],</span> <span class="s2">&#34;%y-%m-</span><span class="si">%d</span><span class="s2"> %H:%M:%S&#34;</span><span class="p">))</span><span class="o">.</span><span class="n">total_seconds</span><span class="p">()</span><span class="o">/</span><span class="mi">60</span>
</span></span><span class="line"><span class="cl">        <span class="n">comments</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">update</span><span class="p">({</span><span class="s2">&#34;diffTime&#34;</span><span class="p">:</span> <span class="n">lastCommentDiffTime</span><span class="p">})</span>
</span></span><span class="line"><span class="cl">        <span class="k">for</span> <span class="n">idx</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">comments</span><span class="p">)</span><span class="o">-</span><span class="mi">1</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">            <span class="n">curr</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">strptime</span><span class="p">(</span><span class="n">comments</span><span class="p">[</span><span class="n">idx</span><span class="p">][</span><span class="s2">&#34;publishedAt&#34;</span><span class="p">],</span> <span class="s2">&#34;%y-%m-</span><span class="si">%d</span><span class="s2"> %H:%M:%S&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">            <span class="nb">next</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">strptime</span><span class="p">(</span><span class="n">comments</span><span class="p">[</span><span class="n">idx</span><span class="o">+</span><span class="mi">1</span><span class="p">][</span><span class="s2">&#34;publishedAt&#34;</span><span class="p">],</span> <span class="s2">&#34;%y-%m-</span><span class="si">%d</span><span class="s2"> %H:%M:%S&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">            <span class="n">diffTime</span> <span class="o">=</span> <span class="p">(</span><span class="nb">next</span><span class="o">-</span><span class="n">curr</span><span class="p">)</span><span class="o">.</span><span class="n">total_seconds</span><span class="p">()</span><span class="o">/</span><span class="mi">60</span>
</span></span><span class="line"><span class="cl">            <span class="c1"># ì‚­ì œë˜ëŠ” ëŒ“ê¸€ì´ ìˆì„ ìˆ˜ ìˆì–´ì„œ ìŒìˆ˜ê°€ ë‚˜ì˜¤ë©´ 0ìœ¼ë¡œ í‘œì‹œí•©ë‹ˆë‹¤.</span>
</span></span><span class="line"><span class="cl">            <span class="k">if</span> <span class="n">diffTime</span> <span class="o">&lt;</span> <span class="mi">0</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">                <span class="n">diffTime</span> <span class="o">=</span> <span class="mf">0.00</span>
</span></span><span class="line"><span class="cl">            <span class="n">comments</span><span class="p">[</span><span class="n">idx</span><span class="p">]</span><span class="o">.</span><span class="n">update</span><span class="p">({</span><span class="s2">&#34;diffTime&#34;</span><span class="p">:</span> <span class="n">diffTime</span><span class="p">})</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="k">def</span> <span class="nf">printMostCommenter</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">        <span class="c1"># ê°€ì¥ ë§ì´ ëŒ“ê¸€ ì‘ì„±í•œ ì‚¬ëŒì„ MOST_CNTë²ˆ ì¶œë ¥í•©ë‹ˆë‹¤.</span>
</span></span><span class="line"><span class="cl">        <span class="n">userDict</span> <span class="o">=</span> <span class="p">{}</span>
</span></span><span class="line"><span class="cl">        <span class="k">for</span> <span class="n">comment</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">comments</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">            <span class="n">username</span> <span class="o">=</span> <span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">comment</span><span class="p">[</span><span class="s2">&#34;authorDisplayName&#34;</span><span class="p">]</span><span class="si">}</span><span class="s1"> | </span><span class="si">{</span><span class="n">comment</span><span class="p">[</span><span class="s2">&#34;authorChannelId&#34;</span><span class="p">]</span><span class="si">}</span><span class="s1">&#39;</span>
</span></span><span class="line"><span class="cl">            <span class="k">if</span> <span class="n">username</span> <span class="ow">in</span> <span class="n">userDict</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">                <span class="n">userDict</span><span class="p">[</span><span class="n">username</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1</span>
</span></span><span class="line"><span class="cl">            <span class="k">else</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">                <span class="n">userDict</span><span class="p">[</span><span class="n">username</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span>
</span></span><span class="line"><span class="cl">        <span class="n">mostCommenter</span> <span class="o">=</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">userDict</span><span class="o">.</span><span class="n">items</span><span class="p">(),</span> <span class="n">key</span><span class="o">=</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span><span class="n">x</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">reverse</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="n">msg</span> <span class="o">=</span> <span class="sa">f</span><span class="s1">&#39;</span><span class="se">\n</span><span class="si">{</span><span class="n">LINE</span><span class="si">}</span><span class="se">\n</span><span class="s1">ğŸ‘‘ ê°€ì¥ ëŒ“ê¸€ ë§ì´ ì‘ì„±í•œ ì‚¬ëŒ (ì´ </span><span class="si">{</span><span class="nb">format</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">mostCommenter</span><span class="p">),</span><span class="s2">&#34;,&#34;</span><span class="p">)</span><span class="si">}</span><span class="s1">ëª…)</span><span class="se">\n</span><span class="s1">&#39;</span>
</span></span><span class="line"><span class="cl">        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">mostCommenter</span><span class="p">)</span> <span class="o">&gt;</span> <span class="n">MOST_CNT</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">            <span class="k">for</span> <span class="n">idx</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">MOST_CNT</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">                <span class="n">msg</span> <span class="o">+=</span> <span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">mostCommenter</span><span class="p">[</span><span class="n">idx</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span><span class="si">}</span><span class="s1">íšŒ | </span><span class="si">{</span><span class="n">mostCommenter</span><span class="p">[</span><span class="n">idx</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span><span class="si">}</span><span class="se">\n</span><span class="s1">&#39;</span>
</span></span><span class="line"><span class="cl">        <span class="k">else</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">            <span class="k">for</span> <span class="n">idx</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">mostCommenter</span><span class="p">)):</span>
</span></span><span class="line"><span class="cl">                <span class="n">msg</span> <span class="o">+=</span> <span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">mostCommenter</span><span class="p">[</span><span class="n">idx</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span><span class="si">}</span><span class="s1">íšŒ | </span><span class="si">{</span><span class="n">mostCommenter</span><span class="p">[</span><span class="n">idx</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span><span class="si">}</span><span class="se">\n</span><span class="s1">&#39;</span>
</span></span><span class="line"><span class="cl">        <span class="bp">self</span><span class="o">.</span><span class="n">printer</span><span class="o">.</span><span class="n">saveOnLocal</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="k">def</span> <span class="nf">printMostLiker</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">        <span class="c1"># ê°€ì¥ ë§ì´ ì¢‹ì•„ìš” ë°›ì€ ëŒ“ê¸€ì„ MOST_CNTë²ˆ ì¶œë ¥í•©ë‹ˆë‹¤.</span>
</span></span><span class="line"><span class="cl">        <span class="n">mostLiker</span> <span class="o">=</span> <span class="p">[]</span>
</span></span><span class="line"><span class="cl">        <span class="k">for</span> <span class="n">comment</span> <span class="ow">in</span> <span class="n">sorter</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">comments</span><span class="p">,</span> <span class="s1">&#39;likeCount&#39;</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">            <span class="k">if</span> <span class="n">comment</span><span class="p">[</span><span class="s1">&#39;likeCount&#39;</span><span class="p">]</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">                <span class="n">mostLiker</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">comment</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">            <span class="k">else</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">                <span class="n">mostLiker</span> <span class="o">=</span> <span class="n">mostLiker</span><span class="p">[:</span><span class="n">MOST_CNT</span><span class="p">]</span>
</span></span><span class="line"><span class="cl">        <span class="bp">self</span><span class="o">.</span><span class="n">printComments</span><span class="p">(</span><span class="n">mostLiker</span><span class="p">,</span> <span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">LINE</span><span class="si">}</span><span class="se">\n</span><span class="s1">ğŸ‘‘ ê°€ì¥ ì¢‹ì•„ìš” ë§ì´ ë°›ì€ ëŒ“ê¸€&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="k">def</span> <span class="nf">printMostReply</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">        <span class="c1"># ê°€ì¥ ë§ì´ ë‹µê¸€ ë°›ì€ ëŒ“ê¸€ì„ MOST_CNTë²ˆ ì¶œë ¥í•©ë‹ˆë‹¤.</span>
</span></span><span class="line"><span class="cl">        <span class="n">mostReply</span> <span class="o">=</span> <span class="p">[]</span>
</span></span><span class="line"><span class="cl">        <span class="k">for</span> <span class="n">comment</span> <span class="ow">in</span> <span class="n">sorter</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">comments</span><span class="p">,</span> <span class="s1">&#39;totalReplyCount&#39;</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">            <span class="k">if</span> <span class="n">comment</span><span class="p">[</span><span class="s1">&#39;totalReplyCount&#39;</span><span class="p">]</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">                <span class="n">mostReply</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">comment</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">            <span class="k">else</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">                <span class="n">mostReply</span> <span class="o">=</span> <span class="n">mostReply</span><span class="p">[:</span><span class="n">MOST_CNT</span><span class="p">]</span>
</span></span><span class="line"><span class="cl">        <span class="bp">self</span><span class="o">.</span><span class="n">printComments</span><span class="p">(</span><span class="n">mostReply</span><span class="p">,</span> <span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">LINE</span><span class="si">}</span><span class="se">\n</span><span class="s1">ğŸ‘‘ ê°€ì¥ ë§ì´ ë‹µê¸€ ë‹¬ë¦° ëŒ“ê¸€&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="k">def</span> <span class="nf">printMostDiffTime</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">        <span class="c1"># ê°€ì¥ ë§ì´ ë²„í‹´ ëŒ“ê¸€ì„ MOST_CNTë²ˆ ì¶œë ¥í•©ë‹ˆë‹¤.</span>
</span></span><span class="line"><span class="cl">        <span class="n">mostDiffTime</span> <span class="o">=</span> <span class="n">sorter</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">comments</span><span class="p">,</span> <span class="s1">&#39;diffTime&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="bp">self</span><span class="o">.</span><span class="n">printComments</span><span class="p">(</span><span class="n">mostDiffTime</span><span class="p">[:</span><span class="n">MOST_CNT</span><span class="p">],</span> <span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">LINE</span><span class="si">}</span><span class="se">\n</span><span class="s1">ğŸ‘‘ ê°€ì¥ ì˜¤ë˜ë²„í‹´ ëŒ“ê¸€ (ì‚­ì œëœ ëŒ“ê¸€ì€ ì§‘ê³„í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.)&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="k">def</span> <span class="nf">printUsersComment</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">username</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">        <span class="c1"># íŠ¹ì • ìœ ì €ê°€ ì‘ì„±í•œ ëŒ“ê¸€ì„ ëª¨ë‘ ì¶œë ¥í•©ë‹ˆë‹¤.</span>
</span></span><span class="line"><span class="cl">        <span class="n">userComment</span> <span class="o">=</span> <span class="p">[]</span>
</span></span><span class="line"><span class="cl">        <span class="k">for</span> <span class="n">comment</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">comments</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">            <span class="k">if</span> <span class="n">comment</span><span class="p">[</span><span class="s2">&#34;authorDisplayName&#34;</span><span class="p">]</span> <span class="o">==</span> <span class="n">username</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">                <span class="n">userComment</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">comment</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">userComment</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">            <span class="bp">self</span><span class="o">.</span><span class="n">printer</span><span class="o">.</span><span class="n">saveOnLocal</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;</span><span class="se">\n</span><span class="si">{</span><span class="n">LINE</span><span class="si">}</span><span class="se">\n</span><span class="s1">ğŸ‘‘ [</span><span class="si">{</span><span class="n">username</span><span class="si">}</span><span class="s1">]ë‹˜ì´ ì‘ì„±í•œ ëŒ“ê¸€ì´ ì—†ìŠµë‹ˆë‹¤</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="k">else</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">            <span class="n">mostLike</span> <span class="o">=</span> <span class="n">sorter</span><span class="p">(</span><span class="n">userComment</span><span class="p">,</span> <span class="s1">&#39;likeCount&#39;</span><span class="p">)[</span><span class="mi">0</span><span class="p">][</span><span class="s2">&#34;likeCount&#34;</span><span class="p">]</span>
</span></span><span class="line"><span class="cl">            <span class="n">mostReply</span> <span class="o">=</span> <span class="n">sorter</span><span class="p">(</span><span class="n">userComment</span><span class="p">,</span> <span class="s1">&#39;totalReplyCount&#39;</span><span class="p">)[</span><span class="mi">0</span><span class="p">][</span><span class="s2">&#34;totalReplyCount&#34;</span><span class="p">]</span>
</span></span><span class="line"><span class="cl">            <span class="n">mostDiffTime</span> <span class="o">=</span> <span class="n">sorter</span><span class="p">(</span><span class="n">userComment</span><span class="p">,</span> <span class="s1">&#39;diffTime&#39;</span><span class="p">)[</span><span class="mi">0</span><span class="p">][</span><span class="s2">&#34;diffTime&#34;</span><span class="p">]</span>
</span></span><span class="line"><span class="cl">            <span class="bp">self</span><span class="o">.</span><span class="n">printComments</span><span class="p">(</span><span class="n">userComment</span><span class="p">,</span> <span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">LINE</span><span class="si">}</span><span class="se">\n</span><span class="s1">ğŸ‘‘ [</span><span class="si">{</span><span class="n">username</span><span class="si">}</span><span class="s1">]ì´ ì‘ì„±í•œ ëŒ“ê¸€ (ì‚­ì œëœ ëŒ“ê¸€ì€ ì§‘ê³„í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.)&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">            <span class="bp">self</span><span class="o">.</span><span class="n">printer</span><span class="o">.</span><span class="n">saveOnLocal</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">ì´ [</span><span class="si">{</span><span class="nb">format</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">userComment</span><span class="p">),</span> <span class="s2">&#34;,&#34;</span><span class="p">)</span><span class="si">}</span><span class="s1">]ê°œì˜ ëŒ“ê¸€ì„ ì‘ì„±í•˜ì…¨ìŠµë‹ˆë‹¤.&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">            <span class="bp">self</span><span class="o">.</span><span class="n">printer</span><span class="o">.</span><span class="n">saveOnLocal</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;  ğŸ’š [</span><span class="si">{</span><span class="n">username</span><span class="si">}</span><span class="s1">]ë‹˜ì´ ë°›ì€ ê°€ì¥ ë§ì€ ì¢‹ì•„ìš” ê°¯ìˆ˜ëŠ” [</span><span class="si">{</span><span class="n">mostLike</span><span class="si">}</span><span class="s1">]ê°œ ì…ë‹ˆë‹¤&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">            <span class="bp">self</span><span class="o">.</span><span class="n">printer</span><span class="o">.</span><span class="n">saveOnLocal</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;  ğŸ“© [</span><span class="si">{</span><span class="n">username</span><span class="si">}</span><span class="s1">]ë‹˜ì´ ë°›ì€ ê°€ì¥ ë§ì€ ë‹µê¸€ ê°¯ìˆ˜ëŠ” [</span><span class="si">{</span><span class="n">mostReply</span><span class="si">}</span><span class="s1">]ê°œ ì…ë‹ˆë‹¤&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">            <span class="bp">self</span><span class="o">.</span><span class="n">printer</span><span class="o">.</span><span class="n">saveOnLocal</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;  â° [</span><span class="si">{</span><span class="n">username</span><span class="si">}</span><span class="s1">]ë‹˜ì´ ê°€ì¥ ì˜¤ë˜ ë²„í‹´ ëŒ“ê¸€ì€ [</span><span class="si">{</span><span class="n">mostDiffTime</span><span class="si">:</span><span class="s1">.2f</span><span class="si">}</span><span class="s1">]ë¶„ ì…ë‹ˆë‹¤&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="k">def</span> <span class="nf">printComments</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">comments</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">        <span class="c1"># ëŒ“ê¸€ë“¤ì„ ì¶œë ¥í•©ë‹ˆë‹¤.</span>
</span></span><span class="line"><span class="cl">        <span class="bp">self</span><span class="o">.</span><span class="n">printer</span><span class="o">.</span><span class="n">saveOnLocal</span><span class="p">(</span><span class="sa">f</span><span class="s2">&#34;</span><span class="se">\n</span><span class="si">{</span><span class="nb">type</span><span class="si">}</span><span class="se">\n</span><span class="si">{</span><span class="n">SMALL_LINE</span><span class="si">}</span><span class="s2">&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="n">msg</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
</span></span><span class="line"><span class="cl">        <span class="k">for</span> <span class="n">comment</span> <span class="ow">in</span> <span class="n">comments</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">            <span class="n">msg</span> <span class="o">+=</span> <span class="bp">self</span><span class="o">.</span><span class="n">commentPrettier</span><span class="p">(</span><span class="n">comment</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">            <span class="n">msg</span> <span class="o">+=</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span>
</span></span><span class="line"><span class="cl">        <span class="bp">self</span><span class="o">.</span><span class="n">printer</span><span class="o">.</span><span class="n">saveOnLocal</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="k">def</span> <span class="nf">commentPrettier</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">comment</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">        <span class="c1"># ëŒ“ê¸€ì„ ì¶œë ¥í• ë•Œ í¬ë§·ì„ ì •í•´ì¤ë‹ˆë‹¤.</span>
</span></span><span class="line"><span class="cl">        <span class="n">msg</span> <span class="o">=</span> <span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">comment</span><span class="p">[</span><span class="s2">&#34;publishedAt&#34;</span><span class="p">]</span><span class="si">}</span><span class="se">\t</span><span class="s1">ë‹‰ë„¤ì„: </span><span class="si">{</span><span class="n">comment</span><span class="p">[</span><span class="s2">&#34;authorDisplayName&#34;</span><span class="p">]</span><span class="si">}</span><span class="s1"> | </span><span class="si">{</span><span class="n">comment</span><span class="p">[</span><span class="s2">&#34;authorChannelId&#34;</span><span class="p">]</span><span class="si">}</span><span class="se">\n\t\t\t</span><span class="s1">ëŒ“ê¸€: </span><span class="si">{</span><span class="n">comment</span><span class="p">[</span><span class="s2">&#34;textDisplay&#34;</span><span class="p">]</span><span class="si">:</span><span class="s1">.33s</span><span class="si">}</span><span class="se">\n\t\t\t</span><span class="s1">ì¢‹ì•„ìš”: </span><span class="si">{</span><span class="n">comment</span><span class="p">[</span><span class="s2">&#34;likeCount&#34;</span><span class="p">]</span><span class="si">}</span><span class="s1"> | ë‹µê¸€ìˆ˜: </span><span class="si">{</span><span class="n">comment</span><span class="p">[</span><span class="s2">&#34;totalReplyCount&#34;</span><span class="p">]</span><span class="si">}</span><span class="s1"> | ë²„í‹´ì‹œê°„: </span><span class="si">{</span><span class="n">comment</span><span class="p">[</span><span class="s2">&#34;diffTime&#34;</span><span class="p">]</span><span class="si">:</span><span class="s1">.2f</span><span class="si">}</span><span class="s1">ë¶„</span><span class="se">\n</span><span class="si">{</span><span class="n">SMALL_LINE</span><span class="si">}</span><span class="s1">&#39;</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="n">msg</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="k">def</span> <span class="nf">startDiffTimeEvent</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">stop</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">        <span class="c1"># ì•ìœ¼ë¡œ ì‹¤ì‹œê°„ìœ¼ë¡œ ëŒ“ê¸€ì„ ë¶ˆëŸ¬ì˜µë‹ˆë‹¤</span>
</span></span><span class="line"><span class="cl">        <span class="c1"># í”„ë¡œê·¸ë¨ì´ ì¶”ì¶œ ì´í›„ ì‚­ì œí•œ ëŒ“ê¸€ë“¤ë„ ì €ì¥ë©ë‹ˆë‹¤</span>
</span></span><span class="line"><span class="cl">        <span class="n">msg</span> <span class="o">=</span> <span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">LINE</span><span class="si">}</span><span class="se">\n</span><span class="s1">âœ‹ *</span><span class="si">{</span><span class="n">stop</span><span class="si">}</span><span class="s1">ë¶„ ë²„í‹°ê¸° ì´ë²¤íŠ¸ ì‹œì‘*</span><span class="se">\n</span><span class="s1">&gt; ì œëª©: </span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">videoInfo</span><span class="p">[</span><span class="s2">&#34;title&#34;</span><span class="p">]</span><span class="si">}</span><span class="se">\n</span><span class="s1">&gt; ì§€ê¸ˆë¶€í„° </span><span class="si">{</span><span class="n">YOUTUBEAPI_REQUEST_PER_TIME</span><span class="si">}</span><span class="s1">ì´ˆë§ˆë‹¤ ìƒˆë¡œìš´ ëŒ“ê¸€ì„ í™•ì¸í•©ë‹ˆë‹¤.</span><span class="se">\n</span><span class="si">{</span><span class="n">LINE</span><span class="si">}</span><span class="se">\n\n</span><span class="si">{</span><span class="n">SMALL_LINE</span><span class="si">}</span><span class="s1">&#39;</span>
</span></span><span class="line"><span class="cl">        <span class="bp">self</span><span class="o">.</span><span class="n">printer</span><span class="o">.</span><span class="n">sendToChat</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="n">url</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&#34;</span><span class="si">{</span><span class="n">YOUTUBEAPI_COMMENTTHREADS_URL</span><span class="si">}</span><span class="s2">?key=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">apikey</span><span class="si">}</span><span class="s2">&amp;maxResults=</span><span class="si">{</span><span class="n">LIVE_MAXRESULTS</span><span class="si">}</span><span class="s2">&amp;part=snippet,replies&amp;videoId=</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">videoId</span><span class="si">}</span><span class="s2">&#34;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="c1"># ì´ë¯¸ ì¶”ì¶œí•œ ëŒ“ê¸€ì˜ ë§ˆì§€ë§‰ ëŒ“ê¸€ì€ ë²„í‹´ì‹œê°„ì´ ì—†ê¸° ë•Œë¬¸ì— -1 ê¹Œì§€ ì¶”ì¶œí•©ë‹ˆë‹¤.</span>
</span></span><span class="line"><span class="cl">        <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="bp">self</span><span class="o">.</span><span class="n">printer</span><span class="o">.</span><span class="n">sendToChat</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">commentPrettier</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">comments</span><span class="p">[</span><span class="o">-</span><span class="mi">2</span><span class="p">]))</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">            <span class="k">try</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">                <span class="c1"># ì´ë¯¸ ì¶”ì¶œí•œ ëŒ“ê¸€ì˜ publishedAt, authorChannelId ë¥¼ í•©ì³ì„œ ê³ ìœ  keyë¥¼ ìƒì„±í•©ë‹ˆë‹¤</span>
</span></span><span class="line"><span class="cl">                <span class="n">prev</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">comments</span>
</span></span><span class="line"><span class="cl">                <span class="n">keys</span> <span class="o">=</span> <span class="p">[]</span>
</span></span><span class="line"><span class="cl">                <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">prev</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">                    <span class="n">key</span> <span class="o">=</span> <span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">p</span><span class="p">[</span><span class="s2">&#34;publishedAt&#34;</span><span class="p">]</span><span class="si">}{</span><span class="n">p</span><span class="p">[</span><span class="s2">&#34;authorChannelId&#34;</span><span class="p">]</span><span class="si">}</span><span class="s1">&#39;</span>
</span></span><span class="line"><span class="cl">                    <span class="n">keys</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">key</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">                <span class="c1"># comments ë¦¬ìŠ¤íŠ¸ì— ë°›ì•„ë†“ëŠ”ë° ì—ëŸ¬ ë°œìƒí•˜ë©´ ìœ íŠœë¸Œ api í‚¤ ë³€ê²½</span>
</span></span><span class="line"><span class="cl">                <span class="n">comments</span> <span class="o">=</span> <span class="p">[]</span>
</span></span><span class="line"><span class="cl">                <span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">url</span><span class="p">)</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">                <span class="k">try</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">                    <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">response</span><span class="p">[</span><span class="s2">&#34;items&#34;</span><span class="p">]:</span>
</span></span><span class="line"><span class="cl">                        <span class="n">comments</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">validateComment</span><span class="p">(</span><span class="n">item</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">                <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">                    <span class="nb">print</span><span class="p">(</span><span class="s2">&#34;ERROR&#34;</span><span class="p">,</span> <span class="n">e</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">                    <span class="bp">self</span><span class="o">.</span><span class="n">youtubeAPIExceed</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">                <span class="c1"># ìƒˆë¡œìš´ ëŒ“ê¸€ì´ ë‚˜ì˜¤ë©´ New ë°°ì—´ì— ì €ì¥í•©ë‹ˆë‹¤.</span>
</span></span><span class="line"><span class="cl">                <span class="n">found</span> <span class="o">=</span> <span class="kc">False</span>
</span></span><span class="line"><span class="cl">                <span class="n">new</span> <span class="o">=</span> <span class="p">[]</span>
</span></span><span class="line"><span class="cl">                <span class="k">for</span> <span class="n">comment</span> <span class="ow">in</span> <span class="n">comments</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">                    <span class="n">key</span> <span class="o">=</span> <span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">comment</span><span class="p">[</span><span class="s2">&#34;publishedAt&#34;</span><span class="p">]</span><span class="si">}{</span><span class="n">comment</span><span class="p">[</span><span class="s2">&#34;authorChannelId&#34;</span><span class="p">]</span><span class="si">}</span><span class="s1">&#39;</span>
</span></span><span class="line"><span class="cl">                    <span class="k">if</span> <span class="n">key</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">keys</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">                        <span class="n">new</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">comment</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">                        <span class="bp">self</span><span class="o">.</span><span class="n">comments</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">comment</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">                        <span class="n">found</span> <span class="o">=</span> <span class="kc">True</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">                <span class="c1"># ìƒˆë¡œìš´ ëŒ“ê¸€ -1 ê¹Œì§€ ì¶”ì¶œ (ëì€ diffTimeì´ ì—†ê¸° ë–„ë¬¸)</span>
</span></span><span class="line"><span class="cl">                <span class="n">winner</span> <span class="o">=</span> <span class="p">[]</span>
</span></span><span class="line"><span class="cl">                <span class="k">if</span> <span class="n">found</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">                    <span class="bp">self</span><span class="o">.</span><span class="n">addDiffTime</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">comments</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">                    <span class="k">for</span> <span class="n">comment</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">comments</span><span class="p">[</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">comments</span><span class="p">)</span><span class="o">-</span><span class="nb">len</span><span class="p">(</span><span class="n">new</span><span class="p">)</span><span class="o">-</span><span class="mi">1</span><span class="p">:</span><span class="o">-</span><span class="mi">1</span><span class="p">]:</span>
</span></span><span class="line"><span class="cl">                        <span class="k">if</span> <span class="n">comment</span><span class="p">[</span><span class="s2">&#34;diffTime&#34;</span><span class="p">]</span> <span class="o">&gt;</span> <span class="nb">int</span><span class="p">(</span><span class="n">stop</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">                            <span class="n">winner</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">comment</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">                        <span class="bp">self</span><span class="o">.</span><span class="n">printer</span><span class="o">.</span><span class="n">sendToChat</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">commentPrettier</span><span class="p">(</span><span class="n">comment</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">                <span class="c1"># ìš°ìŠ¹ìê°€ ìˆìœ¼ë©´ í”„ë¡œê·¸ë¨ ì¢…ë£Œ</span>
</span></span><span class="line"><span class="cl">                <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">winner</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">                    <span class="n">msg</span> <span class="o">=</span> <span class="p">(</span><span class="sa">f</span><span class="s2">&#34;</span><span class="se">\n</span><span class="s2">@channel</span><span class="se">\n</span><span class="s2">ğŸ‘‘  </span><span class="si">{</span><span class="n">stop</span><span class="si">}</span><span class="s2">ë¶„ ë²„í‹°ê¸° ë‹¹ì²¨ìê°€ ë‚˜ì™”ìŠµë‹ˆë‹¤.</span><span class="se">\n</span><span class="s2">&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">                    <span class="n">msg</span> <span class="o">+=</span> <span class="p">(</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">SMALL_LINE</span><span class="si">}</span><span class="se">\n</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">commentPrettier</span><span class="p">(</span><span class="n">winner</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span><span class="si">}</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">                    <span class="n">msg</span> <span class="o">+=</span> <span class="p">(</span><span class="s2">&#34;ì´ë²¤íŠ¸ë¥¼ ì¢…ë£Œí•©ë‹ˆë‹¤.&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">                    <span class="bp">self</span><span class="o">.</span><span class="n">printer</span><span class="o">.</span><span class="n">sendToChat</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">                    <span class="k">break</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">                <span class="c1"># ê³„ì†í•´ì„œ ë¦¬í€˜ìŠ¤íŠ¸ë¥¼ ë³´ë‚´ë©´ api ì¼ì¼íšŸìˆ˜ê°€ ê¸ˆë°© ë‹¬ì„±í•˜ê¸° ë–„ë¬¸ì— sleep</span>
</span></span><span class="line"><span class="cl">                <span class="c1"># 10ì´ˆê°€ ì ë‹¹í•©ë‹ˆë‹¤.</span>
</span></span><span class="line"><span class="cl">                <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="n">YOUTUBEAPI_REQUEST_PER_TIME</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">                <span class="c1"># ì—ëŸ¬ê°€ ë‚˜ë©´ api ì¼ì¼íšŸìˆ˜ ì´ˆê³¼ api í‚¤ ë³€ê²½</span>
</span></span><span class="line"><span class="cl">                <span class="nb">print</span><span class="p">(</span><span class="s2">&#34;ERROR&#34;</span><span class="p">,</span> <span class="n">e</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">                <span class="bp">self</span><span class="o">.</span><span class="n">youtubeAPIExceed</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">os</span><span class="o">.</span><span class="n">system</span><span class="p">(</span><span class="s1">&#39;clear&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="n">youtube</span> <span class="o">=</span> <span class="n">Youtube</span><span class="p">()</span>
</span></span></code></pre></td></tr></table>
</div>
</div></div>
</div>
<br />
</p>
<h4 id="synology-api">synology api<a hidden class="anchor" aria-hidden="true" href="#synology-api">#</a></h4>
<p>Synology ì±—ë´‡ìœ¼ë¡œ í…ìŠ¤íŠ¸ë¥¼ ì „ì†¡í•˜ê¸° ìœ„í•œ ê°„ë‹¨í•œ APIì…ë‹ˆë‹¤. ì¥ê³ ë¡œ ì œì‘í–ˆìŠµë‹ˆë‹¤.</p>


<div class="terminal space shadow">
  <div class="top">
    <div class="btns">
      <span class="circle red"></span>
      <span class="circle yellow"></span>
      <span class="circle green"></span>
    </div>
    <div class="title">
      synology api
    </div>
  </div>
  <div class="terminalbody"><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-Python" data-lang="Python"><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">Comment</span><span class="p">(</span><span class="n">APIView</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">    <span class="n">title</span> <span class="o">=</span> <span class="s2">&#34;ë°°ëŒì´ì˜ë‹¹êµ¬ìƒí™œ&#34;</span>
</span></span><span class="line"><span class="cl">    <span class="n">headers</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;Content-Type&#39;</span><span class="p">:</span> <span class="s1">&#39;text/text; charset=utf-8&#39;</span><span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="n">synology</span> <span class="o">=</span> <span class="n">SynologyChat</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">    <span class="n">baedori_url</span> <span class="o">=</span> <span class="n">BAEDORI_BOT_URL</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="k">def</span> <span class="nf">get</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">request</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">        <span class="n">msg</span> <span class="o">=</span> <span class="n">request</span><span class="o">.</span><span class="n">data</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&#34;msg&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="bp">self</span><span class="o">.</span><span class="n">synology</span><span class="o">.</span><span class="n">send_message</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">baedori_url</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">title</span><span class="p">,</span> <span class="n">msg</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="n">Response</span><span class="p">(</span><span class="n">status</span><span class="o">=</span><span class="mi">200</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">class</span> <span class="nc">SynologyChat</span><span class="p">():</span>
</span></span><span class="line"><span class="cl">    <span class="n">headers</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;Content-Type&#39;</span><span class="p">:</span> <span class="s1">&#39;text/text; charset=utf-8&#39;</span><span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="k">def</span> <span class="nf">send_message</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">url</span><span class="p">,</span> <span class="n">title</span><span class="p">,</span> <span class="n">message</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">        <span class="n">message</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">clean_text</span><span class="p">(</span><span class="n">message</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="n">payload</span> <span class="o">=</span> <span class="s1">&#39;payload={&#34;text&#34;: &#34;&#39;</span> <span class="o">+</span> <span class="n">message</span> <span class="o">+</span> <span class="s1">&#39;&#34;}&#39;</span>
</span></span><span class="line"><span class="cl">        <span class="n">res</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">post</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">payload</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="s1">&#39;utf-8&#39;</span><span class="p">),</span> <span class="n">headers</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">headers</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="k">if</span> <span class="n">res</span><span class="o">.</span><span class="n">json</span><span class="p">()[</span><span class="s2">&#34;success&#34;</span><span class="p">]</span> <span class="o">!=</span> <span class="kc">True</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">            <span class="bp">self</span><span class="o">.</span><span class="n">send_error</span><span class="p">(</span><span class="n">res</span><span class="p">,</span> <span class="n">title</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="k">def</span> <span class="nf">send_error</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">res</span><span class="p">,</span> <span class="n">title</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">        <span class="n">LogSave</span><span class="p">(</span><span class="sa">f</span><span class="s2">&#34;&gt;</span><span class="si">{</span><span class="n">ADMIN_NICKNAME</span><span class="si">}</span><span class="s2"> </span><span class="si">{</span><span class="n">title</span><span class="si">}</span><span class="s2"> </span><span class="se">\n</span><span class="s2">res &gt; </span><span class="si">{</span><span class="n">res</span><span class="o">.</span><span class="n">json</span><span class="p">()</span><span class="si">}</span><span class="s2">&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="k">def</span> <span class="nf">clean_text</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">text</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">        <span class="n">text</span> <span class="o">=</span> <span class="n">text</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&#34;%&#34;</span><span class="p">,</span><span class="s2">&#34;í¼ì„¼íŠ¸&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="c1"># text = re.sub(&#39;[%+#\^@*\&#34;â€»~ã†!&amp;;ã€â€˜\(\)\\\&#39;â€¦ã€‹\â€\â€œ\â€™Â·]&#39;, &#39; &#39;, text)</span>
</span></span><span class="line"><span class="cl">        <span class="n">text</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span><span class="s1">&#39;[%+#\^</span><span class="se">\&#34;</span><span class="s1">â€»~ã†!&amp;;ã€â€˜</span><span class="se">\\\&#39;</span><span class="s1">â€¦ã€‹\â€\â€œ\â€™Â·]&#39;</span><span class="p">,</span> <span class="s1">&#39; &#39;</span><span class="p">,</span> <span class="n">text</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="n">text</span> <span class="o">=</span> <span class="n">text</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&#34;&lt;/p&gt;&#34;</span><span class="p">,</span><span class="s2">&#34; &#34;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&#34;&lt;p&gt;&#34;</span><span class="p">,</span><span class="s2">&#34;&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="n">text</span> <span class="o">=</span> <span class="n">text</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&#34;&lt;br&gt;&#34;</span><span class="p">,</span> <span class="s2">&#34; &#34;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&#34;nbsp&#34;</span><span class="p">,</span> <span class="s2">&#34; &#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="n">text</span> <span class="o">=</span> <span class="n">text</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&#34;  &#34;</span><span class="p">,</span> <span class="s2">&#34; &#34;</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&#34;  &#34;</span><span class="p">,</span><span class="s2">&#34; &#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="n">text</span>
</span></span></code></pre></td></tr></table>
</div>
</div></div>
</div>
<br />

<h4 id="exe-íŒŒì¼ë¡œ-ì¶”ì¶œ">exe íŒŒì¼ë¡œ ì¶”ì¶œ<a hidden class="anchor" aria-hidden="true" href="#exe-íŒŒì¼ë¡œ-ì¶”ì¶œ">#</a></h4>
<p>utils.py ì½”ë“œë¥¼ pyinstallerë¡œ exeíŒŒì¼ë¡œ ì¶”ì¶œí•©ë‹ˆë‹¤. ê°€ìƒí™˜ê²½ì„ pipenvë¥¼ ì‚¬ìš©í–ˆìŠµë‹ˆë‹¤.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-shell" data-lang="shell"><span class="line"><span class="cl">pipenv install pyinstaller
</span></span><span class="line"><span class="cl">pipenv run pyinstaller -F utils.py
</span></span></code></pre></td></tr></table>
</div>
</div><p>ìœ„ ì»¤ë§¨ë“œë¥¼ ì§„í–‰í•˜ë©´ í”„ë¡œì íŠ¸ ìƒìœ„ í´ë”ì— &lsquo;dist&rsquo; ë””ë ‰í† ë¦¬ê°€ ìƒì„±ë˜ê³  exe íŒŒì¼ì´ ìƒì„±ë©ë‹ˆë‹¤.</p>
<p><figure class="align-center ">
    <img loading="lazy" src="../img/23.png#center"/> 
</figure>

í¬ê¸°ëŠ” ì•½ 7MBë©° ì•„ì´ì½˜ì€ ë”°ë¡œ ë³€ê²½í–ˆìŠµë‹ˆë‹¤.</p>
<h3 id="ê²°ê³¼">ê²°ê³¼<a hidden class="anchor" aria-hidden="true" href="#ê²°ê³¼">#</a></h3>
<h4 id="1-ëª¨ë“ ëŒ“ê¸€ì¡°íšŒ">1. ëª¨ë“ ëŒ“ê¸€ì¡°íšŒ<a hidden class="anchor" aria-hidden="true" href="#1-ëª¨ë“ ëŒ“ê¸€ì¡°íšŒ">#</a></h4>
<figure class="align-center ">
    <img loading="lazy" src="../img/7.gif#center"/> 
</figure>

<h4 id="2-ê°€ì¥-ë§ì€-ì¢‹ì•„ìš”-ëŒ“ê¸€-ì¡°íšŒ">2. ê°€ì¥ ë§ì€ ì¢‹ì•„ìš” ëŒ“ê¸€ ì¡°íšŒ<a hidden class="anchor" aria-hidden="true" href="#2-ê°€ì¥-ë§ì€-ì¢‹ì•„ìš”-ëŒ“ê¸€-ì¡°íšŒ">#</a></h4>
<figure class="align-center ">
    <img loading="lazy" src="../img/25.png#center"/> 
</figure>

<h4 id="3-ê°€ì¥-ë§ì€-ë‹µê¸€ìˆ˜-ëŒ“ê¸€-ì¡°íšŒ">3. ê°€ì¥ ë§ì€ ë‹µê¸€ìˆ˜ ëŒ“ê¸€ ì¡°íšŒ<a hidden class="anchor" aria-hidden="true" href="#3-ê°€ì¥-ë§ì€-ë‹µê¸€ìˆ˜-ëŒ“ê¸€-ì¡°íšŒ">#</a></h4>
<figure class="align-center ">
    <img loading="lazy" src="../img/26.png#center"/> 
</figure>

<h4 id="4-ê°€ì¥-ë§ì´-ì‘ì„±í•œ-ëŒ“ê¸€-ì¡°íšŒ">4. ê°€ì¥ ë§ì´ ì‘ì„±í•œ ëŒ“ê¸€ ì¡°íšŒ<a hidden class="anchor" aria-hidden="true" href="#4-ê°€ì¥-ë§ì´-ì‘ì„±í•œ-ëŒ“ê¸€-ì¡°íšŒ">#</a></h4>
<figure class="align-center ">
    <img loading="lazy" src="../img/27.png#center"/> 
</figure>

<h4 id="5-ê°€ì¥-ë§ì´-ì‘ì„±í•œ-ëŒ“ê¸€-ì¡°íšŒ">5. ê°€ì¥ ë§ì´ ì‘ì„±í•œ ëŒ“ê¸€ ì¡°íšŒ<a hidden class="anchor" aria-hidden="true" href="#5-ê°€ì¥-ë§ì´-ì‘ì„±í•œ-ëŒ“ê¸€-ì¡°íšŒ">#</a></h4>
<figure class="align-center ">
    <img loading="lazy" src="../img/28.png#center"/> 
</figure>

<h4 id="6-ë‹‰ë„¤ì„-ì¡°íšŒ">6. ë‹‰ë„¤ì„ ì¡°íšŒ<a hidden class="anchor" aria-hidden="true" href="#6-ë‹‰ë„¤ì„-ì¡°íšŒ">#</a></h4>
<figure class="align-center ">
    <img loading="lazy" src="../img/29.png#center"/> 
</figure>

<h4 id="7-ëŒ“ê¸€-ë²„í‹°ê¸°-ì´ë²¤íŠ¸-ì¼ì •ì‹œê°„ë§ˆë‹¤-ê³„ì†-ìƒˆë¡œìš´-ëŒ“ê¸€-í™•ì¸">7. ëŒ“ê¸€ ë²„í‹°ê¸° ì´ë²¤íŠ¸ (ì¼ì •ì‹œê°„ë§ˆë‹¤ ê³„ì† ìƒˆë¡œìš´ ëŒ“ê¸€ í™•ì¸)<a hidden class="anchor" aria-hidden="true" href="#7-ëŒ“ê¸€-ë²„í‹°ê¸°-ì´ë²¤íŠ¸-ì¼ì •ì‹œê°„ë§ˆë‹¤-ê³„ì†-ìƒˆë¡œìš´-ëŒ“ê¸€-í™•ì¸">#</a></h4>
<figure class="align-center ">
    <img loading="lazy" src="../img/8.gif#center"/> 
</figure>

<h4 id="ë¡œì»¬-íŒŒì¼-ì €ì¥--ì‹œë†€ë¡œì§€-ì±—ë´‡">ë¡œì»¬ íŒŒì¼ ì €ì¥ &amp; ì‹œë†€ë¡œì§€ ì±—ë´‡<a hidden class="anchor" aria-hidden="true" href="#ë¡œì»¬-íŒŒì¼-ì €ì¥--ì‹œë†€ë¡œì§€-ì±—ë´‡">#</a></h4>
<p><figure class="align-center ">
    <img loading="lazy" src="../img/30.png#center"/> 
</figure>

í”„ë¡œê·¸ë¨ì— ì¶œë ¥ë˜ëŠ” ëª¨ë“  ê¸€ì€ ë™ì‹œì— ë¡œì»¬ì—ë„ ì €ì¥ë©ë‹ˆë‹¤.</p>
<p><figure class="align-center ">
    <img loading="lazy" src="../img/24.png#center"/> 
</figure>

7ë²ˆ ëŒ“ê¸€ ë²„í‹°ê¸° ì´ë²¤íŠ¸ ì§„í–‰ì‹œ ì±—ë´‡ìœ¼ë¡œ ëª¨ë“  ëŒ“ê¸€ì´ ì˜¤ê²Œ í•´ë†“ê³  ë‹¹ì²¨ì ë°œìƒì‹œ ì±„ë„ì— ì•ŒëŸ¿ì´ ì˜¤ê²Œ í–ˆìŠµë‹ˆë‹¤.</p>
<br/>
<h3 id="ë§ˆì¹˜ë©°">ë§ˆì¹˜ë©°<a hidden class="anchor" aria-hidden="true" href="#ë§ˆì¹˜ë©°">#</a></h3>
<p>ìœ íŠœë¸Œì—ì„œ ì œê³µí•˜ëŠ” APIë¡œ ì—¬ëŸ¬ê°€ì§€ ì´ë²¤íŠ¸ë¥¼ ê¸°íší•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë‹¤ìŒë²ˆì—ëŠ” ì¸ìŠ¤íƒ€ê·¸ë¨ APIë¡œ ë¹„ìŠ·í•œ ì´ë²¤íŠ¸ë¥¼ ì§„í–‰í•´ë³¼ê¹Œ ê³„íšì¤‘ì…ë‹ˆë‹¤. ê¶ê¸ˆí•˜ì‹  ì ì´ ìˆìœ¼ì‹œë©´ ëŒ“ê¸€ë¡œ ë‚¨ê²¨ì£¼ì‹œê¸° ë°”ëë‹ˆë‹¤.</p>
<p>ë„ì›€ì´ ë˜ì…¨ìœ¼ë©´ <a href="https://www.youtube.com/@Baedori." target="_blank">ë°°ëŒì´ì˜ ë‹¹êµ¬ìƒí™œ</a> ì—ë„ í•œë²ˆ ë†€ëŸ¬ì™€ì£¼ì„¸ìš” ! ë‹¤ì–‘í•œ ì´ë²¤íŠ¸ ì§„í–‰ì¤‘ ~ğŸ’š</p>


  </div>

  <footer class="post-footer">
    <ul class="post-tags">
      <li><a href="https://cha2hyun.blog/tags/python/">python</a></li>
      <li><a href="https://cha2hyun.blog/tags/websockets/">websockets</a></li>
      <li><a href="https://cha2hyun.blog/tags/bs4/">bs4</a></li>
      <li><a href="https://cha2hyun.blog/tags/selenium/">selenium</a></li>
      <li><a href="https://cha2hyun.blog/tags/crawling/">crawling</a></li>
    </ul>
<nav class="paginav">
  <a class="prev" href="https://cha2hyun.blog/content/posts/synologychat/">
    <span class="title">Â« Prev</span>
    <br>
    <span>Synology Chat ë©˜ì…˜ ìƒ‰ìƒ ë°”ê¾¸ê¸°</span>
  </a>
  <a class="next" href="https://cha2hyun.blog/content/projects/%EB%B0%B0%EB%8F%8C%EC%9D%B4%EC%9D%98%EB%8B%B9%EA%B5%AC%EC%83%9D%ED%99%9C/youtube-live-crawling/">
    <span class="title">Next Â»</span>
    <br>
    <span>ìœ íŠœë¸Œ ë¼ì´ë¸Œ ì‹¤ì‹œê°„ì±„íŒ… í¬ë¡¤ë§</span>
  </a>
</nav>


<div
  style="
    padding-top: 15px;
    padding-bottom: 2px;
    font-size: x-large;
    font-weight: 700;
  "
>
  ê¶ê¸ˆí•˜ì‹  ì ì´ ìˆìœ¼ì‹ ê°€ìš”? ğŸ˜€
</div>





<script
  src="https://giscus.app/client.js"
  data-repo="cha2hyun/cha2hyun.github.io"
  data-repo-id="R_kgDOICTfkg"
  data-category="Comments"
  data-category-id="DIC_kwDOICTfks4CcDAW"
  data-mapping="pathname"
  data-strict="0"
  data-reactions-enabled="1"
  data-emit-metadata="0"
  data-input-position="top"
  data-theme="dark_dimmed"
  data-lang="ko"
  crossorigin="anonymous"
  async
></script>

  </footer>
</article>
    </main>
    
<footer class="footer">
    <span>&copy; 2024 <a href="https://cha2hyun.blog/">ì±„ìˆ˜í˜„ ê°œë°œì¼ì§€</a></span>
    
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
<script>
    document.querySelectorAll('pre > code').forEach((codeblock) => {
        const container = codeblock.parentNode.parentNode;

        const copybutton = document.createElement('button');
        copybutton.classList.add('copy-code');
        copybutton.innerHTML = 'copy';

        function copyingDone() {
            copybutton.innerHTML = 'copied!';
            setTimeout(() => {
                copybutton.innerHTML = 'copy';
            }, 2000);
        }

        copybutton.addEventListener('click', (cb) => {
            if ('clipboard' in navigator) {
                navigator.clipboard.writeText(codeblock.textContent);
                copyingDone();
                return;
            }

            const range = document.createRange();
            range.selectNodeContents(codeblock);
            const selection = window.getSelection();
            selection.removeAllRanges();
            selection.addRange(range);
            try {
                document.execCommand('copy');
                copyingDone();
            } catch (e) { };
            selection.removeRange(range);
        });

        if (container.classList.contains("highlight")) {
            container.appendChild(copybutton);
        } else if (container.parentNode.firstChild == container) {
            
        } else if (codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName == "TABLE") {
            
            codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(copybutton);
        } else {
            
            codeblock.parentNode.appendChild(copybutton);
        }
    });
</script>
</body>

</html>
