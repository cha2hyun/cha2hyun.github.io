<!DOCTYPE html>
<html lang="en" dir="auto">

<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>ì•„í”„ë¦¬ì¹´TV ì‹¤ì‹œê°„ì±„íŒ… í¬ë¡¤ë§ | ì±„ìˆ˜í˜„ ê°œë°œì¼ì§€</title>
<meta name="keywords" content="python, websockets, bs4, selenium, crawling">
<meta name="description" content="ë¦¬ë²„ìŠ¤ì—”ì§€ë‹ˆì–´ë§ &#43; ì†Œì¼“ì—°ê²° &#43; ë„¤íŠ¸ì›Œí¬íƒ­ ë¶„ì„. feat) ì•„í”„ë¦¬ì¹´ë„ìš°ë¯¸">
<meta name="author" content="cha2hyun">
<link rel="canonical" href="https://cha2hyun.blog/content/projects/%EB%B0%B0%EB%8F%8C%EC%9D%B4%EC%9D%98%EB%8B%B9%EA%B5%AC%EC%83%9D%ED%99%9C/afreecatv-crawling/">
<link crossorigin="anonymous" href="/assets/css/stylesheet.a0df97853b646022cff587d94d85b7235723b13f55f2c0ed1e6b317d931ddfa5.css" integrity="sha256-oN&#43;XhTtkYCLP9YfZTYW3I1cjsT9V8sDtHmsxfZMd36U=" rel="preload stylesheet" as="style">
<link rel="icon" href="https://cha2hyun.blog/favicon/favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="https://cha2hyun.blog/favicon/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="https://cha2hyun.blog/favicon/favicon-32x32.png">
<link rel="apple-touch-icon" href="https://cha2hyun.blog/favicon/apple-icon-76x76.png">
<link rel="mask-icon" href="https://cha2hyun.blog/safari-pinned-tab.svg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<link rel="alternate" hreflang="en" href="https://cha2hyun.blog/content/projects/%EB%B0%B0%EB%8F%8C%EC%9D%B4%EC%9D%98%EB%8B%B9%EA%B5%AC%EC%83%9D%ED%99%9C/afreecatv-crawling/">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
    <style>
        @media (prefers-color-scheme: dark) {
            :root {
                --theme: rgb(29, 30, 32);
                --entry: rgb(46, 46, 51);
                --primary: rgb(218, 218, 219);
                --secondary: rgb(155, 156, 157);
                --tertiary: rgb(65, 66, 68);
                --content: rgb(196, 196, 197);
                --hljs-bg: rgb(46, 46, 51);
                --code-bg: rgb(55, 56, 62);
                --border: rgb(51, 51, 51);
            }

            .list {
                background: var(--theme);
            }

            .list:not(.dark)::-webkit-scrollbar-track {
                background: 0 0;
            }

            .list:not(.dark)::-webkit-scrollbar-thumb {
                border-color: var(--theme);
            }
        }

    </style>
</noscript><meta property="og:title" content="ì•„í”„ë¦¬ì¹´TV ì‹¤ì‹œê°„ì±„íŒ… í¬ë¡¤ë§" />
<meta property="og:description" content="ë¦¬ë²„ìŠ¤ì—”ì§€ë‹ˆì–´ë§ &#43; ì†Œì¼“ì—°ê²° &#43; ë„¤íŠ¸ì›Œí¬íƒ­ ë¶„ì„. feat) ì•„í”„ë¦¬ì¹´ë„ìš°ë¯¸" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://cha2hyun.blog/content/projects/%EB%B0%B0%EB%8F%8C%EC%9D%B4%EC%9D%98%EB%8B%B9%EA%B5%AC%EC%83%9D%ED%99%9C/afreecatv-crawling/" /><meta property="og:image" content="https://cha2hyun.blog/papermod-cover.png"/><meta property="article:section" content="content" />
<meta property="article:published_time" content="2024-03-15T00:00:00+00:00" />
<meta property="article:modified_time" content="2024-03-15T00:00:00+00:00" />

<meta name="twitter:card" content="summary_large_image"/>
<meta name="twitter:image" content="https://cha2hyun.blog/papermod-cover.png"/>

<meta name="twitter:title" content="ì•„í”„ë¦¬ì¹´TV ì‹¤ì‹œê°„ì±„íŒ… í¬ë¡¤ë§"/>
<meta name="twitter:description" content="ë¦¬ë²„ìŠ¤ì—”ì§€ë‹ˆì–´ë§ &#43; ì†Œì¼“ì—°ê²° &#43; ë„¤íŠ¸ì›Œí¬íƒ­ ë¶„ì„. feat) ì•„í”„ë¦¬ì¹´ë„ìš°ë¯¸"/>


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position":  1 ,
      "name": "Contents",
      "item": "https://cha2hyun.blog/content/"
    }, 
    {
      "@type": "ListItem",
      "position":  2 ,
      "name": "Projects",
      "item": "https://cha2hyun.blog/content/projects/"
    }, 
    {
      "@type": "ListItem",
      "position":  4 ,
      "name": "ì•„í”„ë¦¬ì¹´TV ì‹¤ì‹œê°„ì±„íŒ… í¬ë¡¤ë§",
      "item": "https://cha2hyun.blog/content/projects/%EB%B0%B0%EB%8F%8C%EC%9D%B4%EC%9D%98%EB%8B%B9%EA%B5%AC%EC%83%9D%ED%99%9C/afreecatv-crawling/"
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "ì•„í”„ë¦¬ì¹´TV ì‹¤ì‹œê°„ì±„íŒ… í¬ë¡¤ë§",
  "name": "ì•„í”„ë¦¬ì¹´TV ì‹¤ì‹œê°„ì±„íŒ… í¬ë¡¤ë§",
  "description": "ë¦¬ë²„ìŠ¤ì—”ì§€ë‹ˆì–´ë§ + ì†Œì¼“ì—°ê²° + ë„¤íŠ¸ì›Œí¬íƒ­ ë¶„ì„. feat) ì•„í”„ë¦¬ì¹´ë„ìš°ë¯¸",
  "keywords": [
    "python", "websockets", "bs4", "selenium", "crawling"
  ],
  "articleBody": "ì½”ë“œëŠ” Github Repoì— ê³µê°œë˜ì–´ìˆìŠµë‹ˆë‹¤. ì§ì ‘ ë°›ì•„ì„œ ì‹¤í–‰í•˜ì‹¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n24ë…„ 3ì›” 15ì¼ ì—…ë°ì´íŠ¸ ì‹¤í–‰ ê²°ê³¼\n24ë…„ 3ì›” 15ì¼ ë²„ì „ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 81 82 83 84 85 86 87 88 89 90 91 92 93 94 95 96 97 98 99 100 101 102 103 104 105 106 107 108 109 110 111 112 113 114 115 116 117 118 119 120 121 122 123 124 125 126 127 128 129 130 131 import certifi import ssl import asyncio import websockets import requests from api import get_player_live # ìœ ë‹ˆì½”ë“œ ë° ê¸°íƒ€ ìƒìˆ˜ F = \"\\x0c\" ESC = \"\\x1b\\t\" SEPARATOR = \"+\" + \"-\" * 70 + \"+\" # ì•„í”„ë¦¬ì¹´TVì—ì„œ ì œê³µí•˜ëŠ” APIë¡œ ì±„íŒ… ì •ë³´ë¥¼ ë°›ìŠµë‹ˆë‹¤. def get_player_live(bno, bid): url = 'https://live.afreecatv.com/afreeca/player_live_api.php' data = { 'bid': bid, 'bno': bno, 'type': 'live', 'confirm_adult': 'false', 'player_type': 'html5', 'mode': 'landing', 'from_api': '0', 'pwd': '', 'stream_type': 'common', 'quality': 'HD' } try: response = requests.post(f'{url}?bjid={bid}', data=data) response.raise_for_status() # HTTP ìš”ì²­ ì—ëŸ¬ë¥¼ í™•ì¸í•˜ê³ , ì—ëŸ¬ê°€ ìˆì„ ê²½ìš° ì˜ˆì™¸ë¥¼ ë°œìƒì‹œí‚µë‹ˆë‹¤. res = response.json() CHDOMAIN = res[\"CHANNEL\"][\"CHDOMAIN\"].lower() CHATNO = res[\"CHANNEL\"][\"CHATNO\"] FTK = res[\"CHANNEL\"][\"FTK\"] TITLE = res[\"CHANNEL\"][\"TITLE\"] BJID = res[\"CHANNEL\"][\"BJID\"] CHPT = str(int(res[\"CHANNEL\"][\"CHPT\"]) + 1) return CHDOMAIN, CHATNO, FTK, TITLE, BJID, CHPT except requests.RequestException as e: print(f\" ERROR: API ìš”ì²­ ì¤‘ ì˜¤ë¥˜ ë°œìƒ: {e}\") return None except KeyError as e: print(f\" ERROR: ì‘ë‹µì—ì„œ í•„ìš”í•œ ë°ì´í„°ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤: {e}\") return None # SSL ì»¨í…ìŠ¤íŠ¸ ìƒì„± def create_ssl_context(): ssl_context = ssl.create_default_context() ssl_context.load_verify_locations(certifi.where()) ssl_context.check_hostname = False ssl_context.verify_mode = ssl.CERT_NONE return ssl_context # ë©”ì‹œì§€ ë””ì½”ë“œ ë° ì¶œë ¥ def decode_message(bytes): parts = bytes.split(b'\\x0c') messages = [part.decode('utf-8') for part in parts] if len(messages) \u003e 5 and messages[1] not in ['-1', '1'] and '|' not in messages[1]: user_id, comment, user_nickname = messages[2], messages[1], messages[6] print(SEPARATOR) print(f\"| {user_nickname}[{user_id}] - {comment}\") else: # ì±„íŒ… ë¿ë§Œ ì•„ë‹ˆë¼ ë‹¤ë¥¸ ë©”ì„¸ì§€ë„ ë™ì‹œì— ë‚´ë ¤ì˜µë‹ˆë‹¤. pass # ë°”ì´íŠ¸ í¬ê¸° ê³„ì‚° def calculate_byte_size(string): return len(string.encode('utf-8')) + 6 # ì±„íŒ…ì— ì—°ê²° async def connect_to_chat(url, ssl_context): try: BNO, BID = url.split('/')[-1], url.split('/')[-2] CHDOMAIN, CHATNO, FTK, TITLE, BJID, CHPT = get_player_live(BNO, BID) print(f\"{SEPARATOR}\\n\" f\" CHDOMAIN: {CHDOMAIN}\\n CHATNO: {CHATNO}\\n FTK: {FTK}\\n\" f\" TITLE: {TITLE}\\n BJID: {BJID}\\n CHPT: {CHPT}\\n\" f\"{SEPARATOR}\") except Exception as e: print(f\" ERROR: API í˜¸ì¶œ ì‹¤íŒ¨ - {e}\") return try: async with websockets.connect( f\"wss://{CHDOMAIN}:{CHPT}/Websocket/{BID}\", subprotocols=['chat'], ssl=ssl_context, ping_interval=None ) as websocket: # ìµœì´ˆ ì—°ê²°ì‹œ ì „ë‹¬í•˜ëŠ” íŒ¨í‚· CONNECT_PACKET = f'{ESC}000100000600{F*3}16{F}' # ë©”ì„¸ì§€ë¥¼ ë‚´ë ¤ë°›ê¸° ìœ„í•´ ë³´ë‚´ëŠ” íŒ¨í‚· JOIN_PACKET = f'{ESC}0002{calculate_byte_size(CHATNO):06}00{F}{CHATNO}{F*5}' # ì£¼ê¸°ì ìœ¼ë¡œ í•‘ì„ ë³´ë‚´ì„œ ë©”ì„¸ì§€ë¥¼ ê³„ì† ìˆ˜ì‹ í•˜ëŠ” íŒ¨í‚· PING_PACKET = f'{ESC}000000000100{F}' await websocket.send(CONNECT_PACKET) print(f\" ì—°ê²° ì„±ê³µ, ì±„íŒ…ë°© ì •ë³´ ìˆ˜ì‹  ëŒ€ê¸°ì¤‘...\") await asyncio.sleep(2) await websocket.send(JOIN_PACKET) async def ping(): while True: # 5ë¶„ë™ì•ˆ í•‘ì´ ë³´ë‚´ì§€ì§€ ì•Šìœ¼ë©´ ì†Œì¼“ì€ ëŠì–´ì§‘ë‹ˆë‹¤. await asyncio.sleep(60) # 1ë¶„ = 60ì´ˆ await websocket.send(PING_PACKET) async def receive_messages(): while True: data = await websocket.recv() decode_message(data) await asyncio.gather( receive_messages(), ping(), ) except Exception as e: print(f\" ERROR: ì›¹ì†Œì¼“ ì—°ê²° ì˜¤ë¥˜ - {e}\") async def main(): url = input(\"ì•„í”„ë¦¬ì¹´TV URLì„ ì…ë ¥í•´ì£¼ì„¸ìš”: \") ssl_context = create_ssl_context() await connect_to_chat(url, ssl_context) if __name__ == \"__main__\": asyncio.run(main()) ì¤‘ìš”í•œ ì—…ë°ì´íŠ¸ëœ ë‚´ìš©ì€ 2ê°€ì§€ê°€ ìˆìŠµë‹ˆë‹¤. ì²«ë²ˆì§¸ë¡œëŠ” 5ë¶„ë§ˆë‹¤ ëŠì–´ì§€ëŠ” ê²ƒì„ ê°œì„ í•˜ê³ , ë‘ë²ˆì§¸ë¡œëŠ” ì´ì „ì— ì°¾ì§€ëª»í–ˆë˜ bjid ê¸¸ì´ì— ë”°ë¥¸ legthë¥¼ ì°¾ëŠ” ê²ƒì´ì—ˆìŠµë‹ˆë‹¤. DOCHISë‹˜ê»˜ì„œ ëŒ“ê¸€ë¡œ ë‚¨ê²¨ì£¼ì‹  ë‚´ìš©ì„ í†µí•´ì„œ ìˆ˜ì •ë˜ì—ˆìŠµë‹ˆë‹¤. ê°ì‚¬í•©ë‹ˆë‹¤. ğŸ˜€\nìš°ì„  ì•„í”„ë¦¬ì¹´TV ì±„íŒ… ì›¹ì†Œì¼“ì— ê·œì¹™ì´ ìˆì—ˆìŠµë‹ˆë‹¤. ì•ì˜ 12ìë¦¬ëŠ” ì–´ë–¤ ì¢…ë¥˜ë¥¼ ìˆ˜í–‰í•˜ê³  íŒ¨í‚·ì˜ ë°”ë”” ê¸¸ì´ëŠ” ëª‡ì¸ì§€ ë“±ì„ ì •í•˜ëŠ” ë°ì´í„°ë¥¼ ë‹´ê³  ìˆìŠµë‹ˆë‹¤.\n1 2 3 0000 \u003e 4ìë¦¬ : ì–´ë–¤ê²ƒì„ ì‹¤í–‰í• ì§€ 000000 \u003e 6ìë¦¬ : íŒ¨í‚·(ë°”ë””)ì˜ ë°ì´í„° ê¸¸ì´ (ë°”ì´íŠ¸) 00 \u003e 2ìë¦¬ : ì–´ë–¤ ì—­í• ì¸ì§„ ëª¨ë¥´ì§€ë§Œ 12ë¹„íŠ¸ë¥¼ ë§ì¶”ê¸° ìœ„í•´ ì‚¬ìš©ë˜ëŠ” ê±¸ë¡œ ì¶”ì¸¡ë©ë‹ˆë‹¤. ìœ„ ê·œì¹™ì„ í† ëŒ€ë¡œ ì˜ˆë¥¼ ë“¤ì–´ë³´ë©´ ì±„íŒ… ì„œë²„ì— ì—°ê²°ì´ ëŠì–´ì§€ì§€ ì•Šê²Œ í™•ì¸í•˜ëŠ” íŒ¨í‚·ì€ ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤.\n1 2 3 0000 \u003e í•‘ì„ ë³´ë‚´ëŠ” ì½”ë“œ 000001 \u003e íŒ¨í‚·(ë°”ë””)ì˜ ë°ì´í„°ê¸¸ì´ëŠ” 1 00 \u003e 12ë¹„íŠ¸ ë§ì¶”ê¸° ë©”ì„¸ì§€ë¥¼ ë°›ê² ë‹¤ëŠ” send ì—­í• ì„ í•˜ëŠ” íŒ¨í‚·ì„ ë³´ë‚¼ë•ŒëŠ” íŒ¨í‚·ì€ ê°™ìŠµë‹ˆë‹¤.\n1 2 3 0002 \u003e ë©”ì„¸ì§€ë¥¼ ë°›ê² ë‹¤ëŠ” ì½”ë“œ 000123 \u003e íŒ¨í‚·(ë°”ë””)ì˜ ë°ì´í„°ê¸¸ì´ 123ì€ ì˜ˆì‹œì…ë‹ˆë‹¤. 00 \u003e 12ë¹„íŠ¸ ë§ì¶”ê¸° ìœ„ì™€ê°™ì€ ê·œì¹™ì„ ì½”ë“œë¡œ êµ¬í˜„í•˜ë©´ ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤.\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 # ìœ ë‹ˆì½”ë“œ F = \"\\x0c\" ESC = \"\\x1b\\t\" # ìµœì´ˆ ì—°ê²°ì‹œ ì „ë‹¬í•˜ëŠ” íŒ¨í‚· # 0001 - connect / 000006 - ë°”ë”” ê¸¸ì´ê°€ {F}{F}{F}16{F} ë¡œ 6 / 00 - 12ë¹„íŠ¸ ë§Œë“¤ê¸° / {F*3}16{F} - ë°”ë”” CONNECT_PACKET = f'{ESC}000100000600{F*3}16{F}' # ë©”ì„¸ì§€ë¥¼ ë‚´ë ¤ë°›ê¸° ìœ„í•´ ë³´ë‚´ëŠ” íŒ¨í‚· # 0002 - JOIN / {calculate_byte_size(CHATNO):06} - CHATNO ê¸¸ì´ + {F} x 6 / 00 - 12ë¹„íŠ¸ / {F}{CHATNO}{F*5} - ë°”ë”” # ì¦‰ ì•„í”„ë¦¬ì¹´ APIë¡œ ë¶€í„° ë°›ì•„ì˜¨ ì±„íŒ…ë²ˆí˜¸ + 6ì„ í•´ì¤€ê²Œ íŒ¨í‚· ë°”ë”” ì‚¬ì´ì¦ˆê°€ ë©ë‹ˆë‹¤. JOIN_PACKET = f'{ESC}0002{calculate_byte_size(CHATNO):06}00{F}{CHATNO}{F*5}' # ì£¼ê¸°ì ìœ¼ë¡œ í•‘ì„ ë³´ë‚´ì„œ ë©”ì„¸ì§€ë¥¼ ê³„ì† ìˆ˜ì‹ í•˜ëŠ” íŒ¨í‚· # 0000 - PING / 000001 - ë°”ë”” ê¸¸ì´ëŠ” {F} ë¡œ 1 / 00 - 12ë¹„íŠ¸ ë§Œë“¤ê¸° / {F} - ë°”ë”” PING_PACKET = f'{ESC}000000000100{F}' ì–´ë– í•œ íŒ¨í‚·ìœ¼ë¡œ ë©”ì„¸ì§€ë¥¼ ì£¼ê³ ë°›ëŠ”ì§€ ì •í™•í•˜ê²Œ ì•Œê²Œë˜ì–´ ì „ì²´ì ì¸ ì½”ë“œë¥¼ ê°œì„ ì‹œí‚¬ ìˆ˜ ìˆì—ˆìŠµë‹ˆë‹¤.\nì „ì²´ì ì¸ ì§„í–‰ê³¼ì •ì€ ì•„ë˜ ê¸€ì„ í™•ì¸í•´ì£¼ì‹œë©´ ë©ë‹ˆë‹¤. ê¶ê¸ˆí•˜ì‹  ë‚´ìš©ì´ ìˆìœ¼ì‹œë©´ ì–¸ì œë“ ì§€ ëŒ“ê¸€ì„ ë‚¨ê²¨ì£¼ì‹œê¸° ë°”ëë‹ˆë‹¤. ğŸ˜€\në“¤ì–´ê°€ë©° ë°©ì†¡í”„ë¡œê·¸ë¨ìœ¼ë¡œ OBSë¥¼ ì‚¬ìš©í•˜ê³  ìˆëŠ”ë°, ìµœê·¼ M1ë§¥ ì—…ë°ì´íŠ¸ë¡œ ë™ì‹œì†¡ì¶œ í”ŒëŸ¬ê·¸ì¸ ì‚¬ìš©ì´ ê°€ëŠ¥í•´ì¡ŒìŠµë‹ˆë‹¤. ìœ íŠ¸ë¸Œì—ì„œ ìœ íŠœë¸Œ + ì•„í”„ë¦¬ì¹´TVë¡œ ë„˜ì–´ê°€ëŠ” ê³„íšì¤‘ì¸ë° ì¶”ì²¨ë°©ì†¡ì„ ê³„ì† ì´ì–´ì„œ ì§„í–‰í•˜ê¸° ìœ„í•´ ìœ íŠœë¸Œ, ì•„í”„ë¦¬ì¹´tv ë‘ê°œ ì±„íŒ…ì„ ì‹¤ì‹œê°„ìœ¼ë¡œ í¬ë¡¤ë§í•˜ë ¤ í•©ë‹ˆë‹¤.\nì•„í”„ë¦¬ì¹´TVì˜ ê²½ìš° ì°¸ê³ í• ë§Œí•œ ë ˆí¼ëŸ°ìŠ¤ê°€ ë§¤ìš° ë§¤ìš° ë§¤ìš° ì—†ëŠ” (ëˆ„ê°€í•˜ê² ëƒê³ ..) ë§¨ë•…ì— í•´ë”©ì´ì—ˆìŠµë‹ˆë‹¤ ğŸ¥² ë¶„ì„í•´ë³´ì•˜ì§€ë§Œ ê¸€ì— ì„¤ëª…ë˜ì–´ ìˆë“¯ì´ ì˜ˆì™¸ì¼€ì´ìŠ¤ê°€ ì¡´ì¬í•˜ë‹ˆ ì°¸ê³  ë¶€íƒë“œë¦½ë‹ˆë‹¤.\nì•„í”„ë¦¬ì¹´TV ì±„íŒ…ë°© ë¶„ì„ íƒ­ì´ë™ í•˜ë©´ ì†Œì¼“ì—°ê²°ì´ ëŠì–´ì§€ê³  ë‹¤ì‹œ ëŒì•„ì˜¤ë©´ ìƒˆë¡œ ì—°ê²°ëœë‹¤\ní¬ë¡¬ì˜ ê°œë°œìë„êµ¬ ë„¤íŠ¸ì›Œí¬íƒ­ì„ ë¶„ì„í•´ë³´ë©´ ì•„í”„ë¦¬ì¹´TVì˜ ì±„íŒ…ë°©ì˜ ê²½ìš° ëŒ€ëµì ìœ¼ë¡œ ë‹¤ìŒê³¼ ê°™ì´ ì›¹ì†Œì¼“ ì„œë²„ì™€ ì—°ê²°ë¨ì„ ì•Œ ìˆ˜ ìˆìŠµë‹ˆë‹¤.\nì‚¬ëŒì´ ë™ì˜ìƒì„ ë³´ê³ ìˆëŠ”ì§€ ê³„ì† í™•ì¸í•˜ëŠ” ì›¹ì†Œì¼“ 1ê°œ ì¼ì •ì‹œê°„ë§ˆë‹¤ í•¸ë“œì‰ì´í¬ë¥¼ ê¼ì† ì§„í–‰í•œë‹¤\nì‚¬ëŒì´ ë™ì˜ìƒì„ ë³´ê³ ìˆë‹¤ê³  íŒë‹¨ë˜ë©´ ì±„íŒ…ë°© ì—°ê²°í•˜ëŠ” ì›¹ì†Œì¼“ 1ê°œ ë§¨ ì²˜ìŒì—ë§Œ í•¸ë“œì‰ì´í¬\nì‚¬ëŒì´ ë™ì˜ìƒì„ ì•ˆë³´ê³ ìˆë‹¤ê³  íŒë‹¨ë˜ë©´ ëª¨ë“  ì†Œì¼“ ì—°ê²°ì„ ëŠì–´ë²„ë¦½ë‹ˆë‹¤. ì†Œë¦¬ëŠ” ë“¤ë ¤ë„ ì±„íŒ…ì€ ë³´ì—¬ì§€ì§€ ì•ŠìŠµë‹ˆë‹¤. ë‹¤ì‹œ ë™ì˜ìƒì— ì…ì¥í•˜ë©´ ë‹¹ì—°íˆ ì²˜ìŒë¶€í„° ì†Œì¼“ì—°ê²°ì„ ì¬ì‹œì‘í•˜ê¸° ë–„ë¬¸ì— ì´ì „ ì±„íŒ… ë‚´ìš©ë“¤ì´ ì‚¬ë¼ì§€ê²Œ ë©ë‹ˆë‹¤ ì…ì¥, í‡´ì¥ ì—¬ë¶€ë„ ì „ë¶€ ì†Œì¼“ì— ì°í™ë‹ˆë‹¤.\nìš°ì„  ê°€ì¥ ì¤‘ìš”í•œ ë¶€ë¶„ì€ ì‹¤ì œ ì±„íŒ…ì´ ì˜¤ê³  ê°€ëŠ” ê²ƒì´ ì°íˆëŠ” ìœ„ 2ë²ˆ ì›¹ì†Œì¼“ì…ë‹ˆë‹¤. í•´ë‹¹ ì›¹ì†Œì¼“ì— ì—°ê²°í•˜ê¸° ìœ„í•´ì„œëŠ” â­ï¸ë‹¤ìŒ ê°’ë“¤ì„â­ï¸ ì•Œì•„ì•¼í•©ë‹ˆë‹¤.\nì›¹ì†Œì¼“ ì£¼ì†Œ ì±„íŒ…ë°© ì…ì¥ì‹œ ë°›ì•„ì˜¤ëŠ” API í˜¹ì€ 1ë²ˆ ì›¹ì†Œì¼“ì—ì„œ ë¶ˆëŸ¬ì™€ì§ˆ ìˆ˜ ìˆìŠµë‹ˆë‹¤.\ní•¸ë“œì‰ì´í¬ë•Œ í•„ìš”í•œ ê°’ ìœ„ì˜ ì›¹ì†Œì¼“ ì£¼ì†Œë¥¼ ë°›ì•„ì˜¬ë•Œ ê°™ì´ ë„˜ê²¨ë°›ëŠ” ê°’ì´ íŠ¹ì • bytes array êµ¬ì¡°ë¡œ ë³´ë‚´ì ¸ì•¼í•©ë‹ˆë‹¤.\nìš°ì„ ì€ 1ë²ˆ 2ë²ˆì€ ì¬ê»´ë‘ê³  ì†Œì¼“ì— ì—°ê²°í•´ì„œ ì±„íŒ…ì„ ë„˜ê²¨ë°›ì„ ìˆ˜ ìˆëŠ”ì§€ í™•ì¸í•´ë³´ê² ìŠµë‹ˆë‹¤.\nì–´ë–»ê²Œë“  ì±„íŒ…ì„ ë¶ˆëŸ¬ì˜¬ ìˆ˜ ìˆì„ê¹Œ? (ì†Œì¼“ ë¶„ì„) ì´ 2ë²ˆì˜ í•¸ë“œì‰ì´í¬ í˜¹ì€ ì •ë³´ë¥¼ ì „ë‹¬í•˜ëŠ” ê²ƒì„ ì•Œ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ê°ê°ì˜ í•¸ë“œì‰ì´í¬ë•Œ ì–´ë– í•œ ì •ë³´ë¥¼ ë³´ë‚´ì•¼ ì—°ê²°ì´ ì„±ê³µë˜ì–´ ë‚˜ë¨¸ì§€ ì •ë³´ë„ ì „ë‹¬ë°›ëŠ”ì§€ ë¶„ì„ì´ í•„ìš”í•©ë‹ˆë‹¤.\nìš°ì„ ì€ ì±„íŒ…ë°©ì„ ì–´ë–»ê²Œë“  ì—°ê²°í•˜ì—¬ ì •ë³´ë¥¼ ì¶œë ¥í•˜ê¸° ìœ„í•´ ë°›ì€ í‚¤ê°’ ê·¸ëŒ€ë¡œ ì—°ê²°í•´ë³´ê² ìŠµë‹ˆë‹¤.\nì²«ë²ˆì§¸ í•¸ë“œì‰ì´í¬ ì²«ë²ˆì§¸ í•¸ë“œì‰ì´í¬ì˜ ê°’ì¤‘ ìœ ì˜ë¯¸í•œ ê°’ì€ A32.ë¡œ ì‹œì‘í•©ë‹ˆë‹¤. ë„¤íŠ¸ì›Œí¬íƒ­ì„ ë¶„ì„í•´ë³¸ ê²°ê³¼ ì•„í”„ë¦¬ì¹´TV APIë¡œ ìš”ì²­ì„ ë³´ë‚¼ë•Œ ì¿ í‚¤ë¡œ í•¨ê»˜ ë³´ë‚´ì§€ëŠ” PdboxTicket ê°’ì„ì„ í™•ì¸í–ˆìŠµë‹ˆë‹¤.\në‘ë²ˆì§¸ í•¸ë“œì‰ì´í¬ ë‘ë²ˆì§¸ í•¸ë“œì‰ì´í¬ëŠ” _ ë¡œ ë‚˜ëˆ„ì–´ì§€ê±°ë‚˜ \u0026ìœ¼ë¡œ ê°’ì´ ë‚˜ëˆ„ì–´ ì ¸ìˆì—ˆìŠµë‹ˆë‹¤. \u0026ìœ¼ë¡œ ë‚˜ëˆ„ì–´ì§„ ê²ƒì„ ë³´ë©´ ë­”ê°€ íŒŒë¼ë¯¸í„° ê°’ì„ ì „ì†¡í•˜ëŠ” ê²ƒìœ¼ë¡œ ì˜ˆì¸¡ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì „ë‹¬ë˜ëŠ” ê°’ë“¤ì€ APIì˜ ë¦¬ìŠ¤í°ìŠ¤ë‚˜ JSíŒŒì¼ì„ ë¶„ì„í•˜ë©´ ë‚˜ì˜µë‹ˆë‹¤. ìš°ì„ ì€ íŒŒì´ì¬ìœ¼ë¡œ í•¸ë“œì‰ì´í¬ë–„ ë³´ë‚´ì§€ëŠ” ê°’ì„ ê·¸ëŒ€ë¡œ ì „ì†¡í–ˆì„ë•Œ ì—°ê²°ì´ ë˜ëŠ”ì§€ í™•ì¸í•´ë´…ë‹ˆë‹¤ Test Code í•´ë‹¹ê°’ì„ UTF-8ì¦‰ string í˜•íƒœë¡œ ê·¸ëŒ€ë¡œ ë³µì‚¬í•  ê²½ìš° ê¹¨ì ¸ì„œ ë³´ì—¬ì§€ì§€ ì•Šê¸° ë–„ë¬¸ì— base64 ê°’ìœ¼ë¡œ ë³µì‚¬í•œë‹¤ìŒì— ì½”ë“œì—ì„œ ë³µí˜¸í™” í•˜ëŠ” í˜•íƒœë¡œ ì§„í–‰í•©ë‹ˆë‹¤.\ní•¸ë“œì‰ì´í¬ í…ŒìŠ¤íŠ¸ 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 import certifi import ssl import base64 import asyncio import websockets # WSS ì—°ê²° ìœ„í•œ SSL ì„¤ì • ssl_context = ssl.create_default_context() ssl_context.load_verify_locations(certifi.where()) ssl_context.check_hostname = False ssl_context.verify_mode = ssl.CERT_NONE # ì•„ë˜ 3ê°œ ë³€ìˆ˜ê°’ì€ ì–´ë”˜ê°€ì˜ APIë¡œ ë¶€í„° ë°›ì€ ê°’ë“¤ì˜ ì¡°í•©ìœ¼ë¡œ ìš°ì„ ì€ ê·¸ëŒ€ë¡œ ì‚¬ìš© Base64PdboxTicket = 'GwkwMDAxMDAwNTg3MDAMLkEzMi43YmJUNTZ2eUhNOWZLWmsuQ1V0N0dxNXdzSW95ZGdUejRvT0JkUGJEVTRPTEJjbDNEUkFUenJUYkhrQzlYRmtiZnl1YXMwUzE3SFlyZDFjbFU1VzV4U3hpTUJYS2lmV25fVXFDQThWWUYxczVidE04QzJuenhWN3NEVzlTcHFPM2V4VHNHQUMxU3ZmNTlCNUE1bDVrUFJsZHpleHB4OGxKbkJFYXE5UXNLbW1KQ21TTExQRm1JNkc3Q0FHZ1R0UDFWcGhzaTYzTDZXUHRDdkRPalZDNTg1LXVJQV9hRGRxcTlWX1pOWUlBQ0N3d3Yxb0NDckRLeE9icldKS0xpQlNrbGs3bW1TMkkwWVdtNnhiMDB2TG53OGJuQXVyZzRyNkpHeWVma0ZDWmZaM0V6c29LTEFwRU9xeFlkX0JXMVNxRWVNM1FuNkoyc0E5Y0d5WGFZLWhySm5wblJGNmN4RzFPTWJBSi1KVGVXc2JTLTNaNUNULS1fUW1vTWJCb2stSmJwUmt1Y1oxMURJSkFpY25NZmwxaWtzU1Y4aHh6YUVqWVExb19pamI1OXVCWUNYMlNsMFdLSEwydjk4WkhSLXZGNjNRRDY5VEtqSEpjaHBIaDh0RFNzUUxJekc3WUFZbmpKYjl3cDlvV2JfVi0wSFgyRFRYVnVUSEtKRTFPMWNtbHE1bC1qaXZ6bW1HdnJ0WnVmQVVfRG1NQzA1bUpPelNxZTl0bzNKVFZmMjBJWldfWXFpW...==' Base64ChannelInfo = 'GwkwMDAyMDAwMjk3MDAMOTYxOAw0NTY1MzFjMDg0YjUxMGJkOTAyYWViZDcyMjFiMjUyNl92bGZ2bGY3ODlfMjQ1NTkwMzY1X2lvcwwwDAxsb2cRBiYGc2V0X2JwcwY9BjgwMDAGJgZ2aWV3X2JwcwY9BjEwMDAGJgZxdWFsaXR5Bj0Gbm9ybWFsBiYGdXVpZAY9BjFlNDNjZjZkMzc5MTNjMzZiMzVkNTgwZTBiNTY1NmVjBiYGZ2VvX2NjBj0GS1IGJgZnZW9fcmMGPQYxMQYmBmFjcHRfbGFuZwY9BmtvX0tSBiYGc3ZjX2xhbmcGPQZrb19LUgYmBmpvaW5fY2MGPQY0MTAScHdkERJhdXRoX2luZm8RTlVMTBJwdmVyETESYWNjZXNzX3N5c3R...=' WSSUrl = 'wss://chat-76dbfccf.afreecatv.com:8001/Websocket/vlfvlf789' async def connect(): # ì›¹ ì†Œì¼“ì— ì ‘ì†ì„ í•©ë‹ˆë‹¤. async with websockets.connect(WSSUrl, subprotocols=['chat'], ssl=ssl_context, ping_interval=None) as websocket: # í•¸ë“œì‰ì´í¬ await websocket.send(base64.b64decode(Base64PdboxTicket)) await websocket.recv() await websocket.send(base64.b64decode(Base64ChannelInfo)) # ì´í›„ë¶€í„° ì±„íŒ…ë‚´ìš© ë°›ì•„ì™€ì§ while True: try: data = await websocket.recv() print(data) except Exception as e: print(\"ERROR:\", e) asyncio.get_event_loop().run_until_complete(connect()) ì½”ë“œ ì‹¤í–‰ì‹œ ë°ì´í„°ë¥¼ ì„±ê³µì ìœ¼ë¡œ ì˜ ë°›ì•„ì˜¤ëŠ” ê²ƒì„ í™•ì¸ í•  ìˆ˜ ìˆì—ˆìŠµë‹ˆë‹¤.\në‹¨, ë°”ì´íŠ¸ ì½”ë“œë¡œ ë˜ì–´ìˆìœ¼ë©´ì„œ hex ê°’ì´ë‘ í‰ë¬¸ì´ë‘ ì„ì—¬ìˆê¸° ë•Œë¬¸ì— í•´ë‹¹ ë°ì´í„°ë¥¼ ë³µí˜¸í™” í•´ì¤ë‹ˆë‹¤. \\x0c ê°’ì´ ê³„ì† ë³´ì´ëŠ” ê²ƒìœ¼ë¡œ ë³´ì•„ í•´ë‹¹ ê°’ìœ¼ë¡œ split í•´ì£¼ê³  utf-8ë¡œ ë³€í™˜í•˜ì˜€ìŠµë‹ˆë‹¤.\n1 2 3 4 5 6 def decode(bytes): test = bytes.split(b'\\x0c') res = [] for i in test: res.append(str(i, 'utf-8')) print(res) í•´ë‹¹ ì½”ë“œë¡œ ë³µí˜¸í™” í•˜ì˜€ì„ ê²½ìš°ì— ìœ ì˜ë¯¸í•œ ê°’ì´ ë³´ì—¬ì§€ëŠ” ê²ƒì„ í™•ì¸í–ˆìŠµë‹ˆë‹¤. res[1] ê°’ì— ë”°ë¼ì„œ ë°°ì—´ì˜ í¬ê¸°ê°€ ë³€ê²½ë˜ëŠ” ê²ƒì„ ë³´ì•„ í•´ë‹¹ ê°’ì„ ê¸°ì¤€ìœ¼ë¡œ ì–´ë–¤ ë°ì´í„°ì¸ì§€ ìœ ì¶”í•´ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì—¬ëŸ¬ë²ˆ í…ŒìŠ¤íŠ¸í•´ë³¸ ê²°ê³¼ ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤.\nres[1] = 1 ì¼ë•Œ res[2]=id res[3]=ë‹‰ë„¤ì„ê°€ ì±„íŒ…ë°©ì— ì…ì¥ í•˜ì˜€ìŒ res[1] = -1 ì¼ë•Œ res[2]=id res[3]=ë‹‰ë„¤ì„ê°€ ì±„íŒ…ë°©ì— í‡´ì¥ í•˜ì˜€ìŒ res[1] = 'ë¬¸ìì—´' ì¼ë•Œ res[1]=ë‹‰ë„¤ì„ res[2]=id res[6]=ì±„íŒ…ë‚´ìš© ë³´ì—¬ì§€ëŠ” ì±„íŒ…ì…ë‹ˆë‹¤. ë‹¤ë¥¸ ê²½ìš°ì—ëŠ” ë§¤ë‹ˆì € ì´ê±°ë‚˜ íŒ¬ ì¼ë•Œ ì•„ì´ë””ê°€ ìƒ‰ìƒìœ¼ë¡œ í‘œì‹œë˜ëŠ” ê²½ìš° ë“±ì´ ìˆì—ˆì§€ë§Œ ìœ„ 3ê°€ì§€ë§Œ ìœ¼ë¡œë„ ì¶©ë¶„íˆ ëª©í‘œë¥¼ ë‹¬ì„±í•˜ì—¬ ë”ì´ìƒ ë¶„ì„ì„ ì§„í–‰í•˜ì§„ ì•Šì•˜ìŠµë‹ˆë‹¤.\nìµœì¢… ë³µí˜¸í™” ì½”ë“œë¡œ ì±„íŒ… ë‚´ìš©ë§Œ ë¶ˆëŸ¬ì˜¤ê²Œ í•˜ì˜€ìŠµë‹ˆë‹¤.\n1 2 3 4 5 6 7 8 9 10 11 def decode(bytes): test = bytes.split(b'\\x0c') res = [] for i in test: res.append(str(i, 'utf-8')) if(res[1] != '-1' and res[1] != '1' and '|' not in res[1]): if(len(res) \u003e 5): print(res[1], res[2], res[6]) else: # print(res) pass ê²°ê³¼ ì±„íŒ… ë°›ì•„ì˜¤ê¸° ì„±ê³µ!\nğŸš¨ 5ë¶„ì´ ì§€ë‚˜ë©´ ERROR: no close frame received or sent ë©”ì„¸ì§€ì™€ í•¨ê»˜ ì†Œì¼“ ì—°ê²°ì´ ëŠì–´ì§‘ë‹ˆë‹¤.\n[ì‹¬í™”] URLë§Œìœ¼ë¡œ ì±„íŒ…ì„ ìë™ìœ¼ë¡œ ë¶ˆëŸ¬ì˜¬ ìˆ˜ ìˆì„ê¹Œ? ì•„í”„ë¦¬ì¹´TV ì±„íŒ…ì°½ ë‚´ìš©ì„ ë¶ˆëŸ¬ì˜¤ëŠ” ê²ƒ ê¹Œì§€ëŠ” ì„±ê³µí–ˆìŠµë‹ˆë‹¤ ! ë‹¤ë§Œ ë„¤íŠ¸ì›Œí¬íƒ­ì„ ì¼œì„œ í•„ìš”í•œ ê°’ë“¤ì„ ë³µì‚¬í•  ìˆ˜ëŠ” ì—†ê¸°ì— í•´ë‹¹ ê°’ë“¤ê¹Œì§€ ë¶„ì„í•˜ì—¬ URLë§Œ ì œê³µí•´ë„ ëª¨ë“ ê²ƒì´ ìë™ìœ¼ë¡œ ëŒì•„ê°€ì ¸ì•¼ í•©ë‹ˆë‹¤. ìœ„ì—ì„œ ì—°ê²°í•˜ê³  ì¶”ì¶œê¹Œì§€ ì„±ê³µí–ˆê¸° ë•Œë¬¸ì— ì´ì œë¶€í„° í•„ìš”í•œ ê°’ì€ ë”± 3ê°œ ì…ë‹ˆë‹¤.\nğŸ‘‰ ì±„íŒ…ë°© url ğŸ‘‰ ì²«ë²ˆì§¸ í•¸ë“œì‰ì´í¬ ğŸ‘‰ ë‘ë²ˆì§¸ í•¸ë“œì‰ì´í¬ ì±„íŒ…ë°© URL ì°¾ê¸° ì±„íŒ…ì— ì—°ê²°ë˜ë©´ì„œ ë‘ë²ˆ í•¸ë“œì‰ì´í¬í• ë•Œ ë³€í™”ë˜ëŠ” ê°’ë“¤ì„ í™•ì¸í•´ë³´ê³  í•´ë‹¹ ê°’ë“¤ì´ ì–´ë–¤ apiì—ì„œ ì™”ëŠ”ì§€ ë¶„ì„í•´ë³´ì•˜ìŠµë‹ˆë‹¤.\nAPI ì£¼ì†Œ : https://live.afreecatv.com/afreeca/player_live_api.php?bjid={bid}\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 def player_live_api(bno, bid): # type=aid ì¼ ê²½ìš° aid(.A32~~~)ë¶ˆëŸ¬ì˜´ data = {'bid': bid, 'bno':bno, 'type':'live', 'confirm_adult':'false', 'player_type':'html5', 'mode':'landing', 'from_api':'0', 'pwd':'', 'stream_type':'common', 'quality':'HD'} res = requests.post(f'https://live.afreecatv.com/afreeca/player_live_api.php?bjid={bid}', data=data, headers=headers).json() # wssì—°ê²°í•  ì±„íŒ… Url CHDOMAIN = res[\"CHANNEL\"][\"CHDOMAIN\"].lower() # ì±„íŒ…ë°© ë²ˆí˜¸ CHATNO = res[\"CHANNEL\"][\"CHATNO\"] # ì±„íŒ…ë°© í¬íŠ¸ ë²ˆí˜¸ ì¸ë° 1ì„ ë”í•´ì£¼ì–´ì•¼í•¨ CHPT = str(int(res[\"CHANNEL\"][\"CHPT\"]) + 1) # ì²«ë²ˆì¬ í•¸ë“œì‰ì´í¬ë•Œ ì‚¬ìš©í•  í‹°ì¼“ TK = res[\"CHANNEL\"][\"BJID\"] # ë‘ë²ˆì§¸ í•¸ë“œì‰ì´í¬ë•Œ ì‚¬ìš©í•  í‹°ì¼“ FTK = res[\"CHANNEL\"][\"FTK\"] # bj ëª… BJID = res[\"CHANNEL\"][\"BJID\"] # ì œëª© TITLE = res[\"CHANNEL\"][\"TITLE\"] return CHDOMAIN, CHATNO, FTK, TITLE, BJID, TK, CHPT ë„¤íŠ¸ì›Œí¬ íƒ­ì„ ë³´ë©´ í•´ë‹¹ APIì— 2ë²ˆ POSTìš”ì²­ì„ ë³´ëƒ…ë‹ˆë‹¤. í—¤ë”ê°’ì— ë”°ë¼ ë°›ì•„ì˜¤ëŠ” ì±„íŒ… ì—°ê²° ë„ë©”ì¸ê°’ì´ ë³€ê²½ë˜ë¯€ë¡œ í—¤ë” ì„¤ì •ì„ ê¼­ ì˜í•´ì£¼ì–´ì•¼í•©ë‹ˆë‹¤.\ní—¤ë” ì°¸ê³ \ní—¤ë”ëŠ” ë„¤íŠ¸ì›Œí¬íƒ­ì—ì„œ í™•ì¸í•  ìˆ˜ ìˆìœ¼ë©° ê·¸ëŒ€ë¡œ ì§„í–‰í•˜ì˜€ìŠµë‹ˆë‹¤.. ë‹¨, ì¤‘ê°„ì— PdboxSaveTicketì˜ ê²½ìš° ë¡œê·¸ì¸ í˜¹ì€ ì¼ì • ì‹œê°„ ì´í›„ ë³€ê²½ë˜ëŠ” ê²ƒìœ¼ë¡œ í™•ì¸í•˜ì˜€ìŠµë‹ˆë‹¤. ë”°ë¼ì„œ í…ŒìŠ¤íŠ¸ í•˜ë‹¤ê°€ ì±„íŒ… ë‚´ìš©ì„ ë¶ˆëŸ¬ ì˜¬ ìˆ˜ ì—†ì„ ê²½ìš°ì— í—¤ë”ë¥¼ ì¼ë‹¨ ë³€ê²½í•´ì£¼ë©´ ì±„íŒ…ë°© URLì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤ (í—¤ë” ì—†ì–´ë„ ì±„íŒ…ë°© url ë°›ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤)\nì²«ë²ˆì§¸ í•¸ë“œì‰ì´í¬ í‚¤ê°’ ì°¾ê¸° ì‹œë ¥ì´ ì•½ 0.1 ì •ë„ ê°ì†Œëœë“¯ í•˜ë‹¤\ní•¸ë“œì‰ì´í¬ ê°’ì„ ë¹„êµí•´ë³´ë‹ˆ ë³€ê²½ë˜ëŠ”ë¶€ë¶„, ê³ ì •ì¸ë¶€ë¶„, APIë¡œ ë¶ˆëŸ¬ì˜¤ëŠ”ë¶€ë¶„ì´ ìˆì—ˆìŠµë‹ˆë‹¤.\n1 2 secret_1 = f'\u001b\t000100058200\f.{tk}\f16\f' secret_2 = f'\u001b\t000200030000\f{chat_no}\f{ftk}\f0\flog\u0011\u0006\u0026\u0006set_bps\u0006=\u00068000\u0006\u0026\u0006view_bps\u0006=\u00061000\u0006\u0026\u0006quality\u0006=\u0006normal\u0006\u0026\u0006uuid\u0006=\u00061e43cf6d37913c36b35d580e0b5656ec\u0006\u0026\u0006geo_cc\u0006=\u0006KR\u0006\u0026\u0006geo_rc\u0006=\u000611\u0006\u0026\u0006acpt_lang\u0006=\u0006ko_KR\u0006\u0026\u0006svc_lang\u0006=\u0006ko_KR\u0006\u0026\u0006join_cc\u0006=\u0006410\u0012pwd\u0011\u0012auth_info\u0011NULL\u0012pver\u00111\u0012access_system\u0011html5\u0012\f' secret_1 ì˜ ê²½ìš°ì— 000100058200 (5820 ë¶€ë¶„)\nsecret_2 ì˜ ê²½ìš°ì— 000200030000 (3000 ë¶€ë¶„)\nì¼ë‹¨ ë°©ì†¡ì¤‘ì¸ ë°©ì„ ì…€ë ˆëŠ„ìœ¼ë¡œ ë°›ì•„ì™€ì„œ ì•„ê¹Œ ì°¾ì€ APIì— ë‚ ë ¤ì„œ ì–´ë– í•œ ê³µí†µì ë“¤ì´ ìˆëŠ”ì§€ í™•ì¸í•´ë³´ë ¤í•©ë‹ˆë‹¤.\ní…ŒìŠ¤íŠ¸ ì½”ë“œ\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 from selenium import webdriver from selenium.webdriver.common.by import By from selenium.webdriver.chrome.service import Service from webdriver_manager.chrome import ChromeDriverManager import requests # DRIVER = webdriver.Chrome(service=Service(ChromeDriverManager().install())) DRIVER = webdriver.Chrome('./chromedriver') url = 'https://www.afreecatv.com/' DRIVER.get(url) DRIVER.implicitly_wait(3) href = [] cBox_info = DRIVER.find_elements(By.CLASS_NAME, 'cBox-info') for c in cBox_info: url = c.find_element(By.CLASS_NAME, 'title').get_attribute('href') print(url) href.append(url) for h in href: bid = h.split('/')[-2] bno = h.split('/')[-1] res = requests.post(f'https://live.afreecatv.com/afreeca/player_live_api.php?bjid={bid}', data={'bid': bid, 'bno':bno, 'type':'live', 'confirm_adult':'false', 'player_type':'html5', 'mode':'landing', 'from_api':'0','pwd':'','stream_type':'common','quality':'HD'}, headers=headers).json() CHDOMAIN = res[\"CHANNEL\"][\"CHDOMAIN\"].lower() CHATNO = res[\"CHANNEL\"][\"CHATNO\"] FTK = res[\"CHANNEL\"][\"FTK\"] TITLE = res[\"CHANNEL\"][\"TITLE\"] BJID = res[\"CHANNEL\"][\"BJID\"] TK = res[\"CHANNEL\"][\"BJID\"] print(CHDOMAIN, CHATNO, FTK, TITLE, BJID) í…ŒìŠ¤íŠ¸ ê²°ê³¼\nì…€ë ˆëŠ„â€¦ ë‹¤ì‹œ ë³´ë‹ˆ ì„ ë…€ ê°™ë‹¤\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 chat-dee93642.afreecatv.com 1832 b730cac99de4c43e485636cd95a95171_ahrasmall_245682917_html5 ì‹ ì…ì—¬ìº  ì˜ˆìœìŒë°© ì°¾ëŠ”ì‚¬ëŒâ™¥ì‹ ì²­ê³¡ ë¸Œê¸ˆ ë¼ì´ë¸Œ ë½‘ê¸° ìŠ¤ì¿¼íŠ¸ ahrasmall chat-6e0a4c42.afreecatv.com 401 ee461619bb3d078951729641e140f043_wkdtnvndeod2_245680218_html5 ì‰¬ê³ ì˜¨ í¼ ì–´ë–¨ë€ê°(ë§ë°© ë§ì¦ ë§íŒ¬ ë¯¸ì…˜ í™˜ì˜ ì‹œì°¸ ê°€ëŠ¥) wkdtnvndeod2 chat-dee93642.afreecatv.com 8068 db550a2aa702133b90053db49559fc32_0100151_245682923_html5 [ì‹ ì…]ë¡¤ 3ì¼ì°¨ ì¹¼ë°”ëŒ ì‹œì°¸ë°©ì†¡ à·†.Ì®à·† 0100151 chat-dee93642.afreecatv.com 8041 f771fc0888b0b5a27b6f40700c3b6d3a_truelight89_245682906_html5 ë§¤ì¼ 9am ì•„ì¤Œë§ˆ ì˜ì´ë‘ ë²šê½ƒ êµ¬ê²½ ê°ˆ ì‚¬ëŒ? truelight89 chat-dee93642.afreecatv.com 8007 fabe810c6f46dcea461c4510eadf8dca_wkdrn0405_245677828_html5 ì‹¤ë²„ 4ì˜ ë­ê²œì—ëŠ” ì–´ë–¤ ì‚¬ëŒë“¤ì´ ìˆì„ê¹Œ? wkdrn0405 chat-dee93642.afreecatv.com 1617 82b9432c8b887e2e53b60771e3fcf919_pmw1131_245683267_html5 ì‹ ì…ë‚¨ìº  58ì¼ì°¨ğŸ’‹ì˜¤ëŠ˜ì€ ë ˆëª¬ì¹˜ì¦ˆì˜ ë‚ ğŸ§€ pmw1131 chat-6e0a4c42.afreecatv.com 5137 c4f178bf7263e2bd265bd76efd824556_louloumomo_245682407_html5 ë¯¸êµ­ì—¬ìì˜ ì¼ë³¸ì—¬í–‰ ë¹„í–‰ê¸°ë†“ì¹¨ louloumomo chat-dee93642.afreecatv.com 6986 2ecd8e2f6a77e283736425eac8eec0f9_namnice1_245682825_html5 ì—…ì‚¬ë¶€ íˆ¬ììˆ˜ì—…!! í™˜ìƒì  ìˆ˜ìµí–‰ì§„~!#ì£¼ì‹#ELW#ì„ ë¬¼ì˜µì…˜#í•´ì™¸ì„ ë¬¼!!#ì£¼ë¦°ì´#ì—…ì‚¬ë¶€#í™©ê¸ˆì•Œ#ê¹€ì„±ë‚¨#ë¶ˆê°œë¯¸#ì½”ì¸! namnice1 chat-dee93642.afreecatv.com 1832 4026375bc10725e389daf8da51889779_ahrasmall_245682917_html5 ì‹ ì…ì—¬ìº  ì˜ˆìœìŒë°© ì°¾ëŠ”ì‚¬ëŒâ™¥ì‹ ì²­ê³¡ ë¸Œê¸ˆ ë¼ì´ë¸Œ ë½‘ê¸° ìŠ¤ì¿¼íŠ¸ ahrasmall chat-6e0a4c42.afreecatv.com 401 57d27877f877ef1e80f62e31fb814884_wkdtnvndeod2_245680218_html5 ì‰¬ê³ ì˜¨ í¼ ì–´ë–¨ë€ê°(ë§ë°© ë§ì¦ ë§íŒ¬ ë¯¸ì…˜ í™˜ì˜ ì‹œì°¸ ê°€ëŠ¥) wkdtnvndeod2 chat-dee93642.afreecatv.com 8068 c629e4348ac69be8f452569494d7a869_0100151_245682923_html5 [ì‹ ì…]ë¡¤ 3ì¼ì°¨ ì¹¼ë°”ëŒ ì‹œì°¸ë°©ì†¡ à·†.Ì®à·† 0100151 chat-dee93642.afreecatv.com 8041 904c6dc021fa1ae3fabff201d15101d2_truelight89_245682906_html5 ë§¤ì¼ 9am ì•„ì¤Œë§ˆ ì˜ì´ë‘ ë²šê½ƒ êµ¬ê²½ ê°ˆ ì‚¬ëŒ? truelight89 chat-dee93642.afreecatv.com 8007 5b21a6ddb7a1729111762b5b39dcb56c_wkdrn0405_245677828_html5 ì‹¤ë²„ 4ì˜ ë­ê²œì—ëŠ” ì–´ë–¤ ì‚¬ëŒë“¤ì´ ìˆì„ê¹Œ? wkdrn0405 chat-dee93642.afreecatv.com 1617 1931b0cc33b8ecf29a8569007f6f815b_pmw1131_245683267_html5 ì‹ ì…ë‚¨ìº  58ì¼ì°¨ğŸ’‹ì˜¤ëŠ˜ì€ ë ˆëª¬ì¹˜ì¦ˆì˜ ë‚ ğŸ§€ pmw1131 chat-6e0a4c42.afreecatv.com 5137 4a71361598af0d481297fc7439aa7a76_louloumomo_245682407_html5 ë¯¸êµ­ì—¬ìì˜ ì¼ë³¸ì—¬í–‰ ë¹„í–‰ê¸°ë†“ì¹¨ louloumomo chat-dee93642.afreecatv.com 6986 f8967d0187c2169670e9da82005928d0_namnice1_245682825_html5 ì—…ì‚¬ë¶€ íˆ¬ììˆ˜ì—…!! í™˜ìƒì  ìˆ˜ìµí–‰ì§„~!#ì£¼ì‹#ELW#ì„ ë¬¼ì˜µì…˜#í•´ì™¸ì„ ë¬¼!!#ì£¼ë¦°ì´#ì—…ì‚¬ë¶€#í™©ê¸ˆì•Œ#ê¹€ì„±ë‚¨#ë¶ˆê°œë¯¸#ì½”ì¸! namnice1 chat-dee93642.afreecatv.com 703 74a4437c1f784a3c32e1ce14c3fb80a0_lovely5959_245674550_html5 ìˆ˜í”¼ ìˆ˜í› ìŠ¤ë§µ ë¯¼êµ vs ë‚˜ë‹ ì‚¬ì¥ ë°§ë“œ êµìš© í‚¬ë‚´ê¸° ì‚¬ë¹„ë¹µ lovely5959 chat-6e0a4c42.afreecatv.com 9996 6aef02482a9b6446d4736b8ab4416d5e_townboy_245672930_html5 ìŠ¤ë§µì„ë‹ˆë‹¤ ë°°ê·¸ì˜ì‹  ^^ townboy chat-6e0a4c42.afreecatv.com 3761 a5be977fac8f11d27de3f7c62b8261ff_drumkyn_245683107_html5 ì£¼ì‹ì™•ìš©ëŠâ˜…ì •ì‹ ì°¨ë¦¬ê³  ì™”ìŠµë‹ˆë‹¤ drumkyn chat-dee93642.afreecatv.com 4320 bd63b62701fdc62dd804baae84987e4c_wnstn0905_245674053_html5 ë°•ì‚¬ì¥ í‚¬ë‚´ê¸° ^^ wnstn0905 chat-6e0a4c42.afreecatv.com 59 070c9c5fdcc4fa5c73ba74ed03534fa5_since821_245144841_html5 [ìƒ]ìŒì•…ë°©ì†¡ ë©œë¡  ì¸ê¸°ê°€ìš” ìŠ¬í”ˆë°œë¼ë“œ 24ì‹œê°„ ë“£ê¸° ì¢‹ì€ ë…¸ë˜ ëª…ê³¡ 100 íˆíŠ¸ê³¡ ì°¨íŠ¸ìŒë°©ìµœì‹ ê°€ìš”íŒì†¡í™í•©ëŒ„ìŠ¤ê³¡ë®¤ì§ë¼ë””ì˜¤í€µë·°ì‹ ì…BJ since821 chat-dee93642.afreecatv.com 7213 7eca7d68afba49201955e48b2114c1e6_na2un_245679460_html5 ì‚¬ë¹„ë¹µ ^ã…›^ na2un chat-6e0a4c42.afreecatv.com 1979 30c8f01aed8e85431af29005ebdba03e_giltae1124_245682339_html5 ë§ˆìŠ¤í„° ìŠ¹ê¸‰ì „ 1ìŠ¹1íŒ¨ giltae1124 chat-6e0a4c42.afreecatv.com 5065 d70b5ea61501657e88a5000944275e2b_wwe1_245682996_html5 [ìƒë°©ì†¡] WWE RAW LIVE 1557íšŒ wwe1 chat-dee93642.afreecatv.com 1595 b9fdf6637769710dcc39155c194583b0_dldmssk_245683163_html5 ëŠ¦ì—ˆìŠµë‹ˆë‹¤ dldmssk chat-6e0a4c42.afreecatv.com 6667 55f36f872db59d3c3db4f2e992987db0_tsoul7_245664669_html5 ëŒ€í•œë¯¼êµ­ ì–´ì£½1ë“± ëŒ€í¥ì‹ë‹¹ tsoul7 chat-dee93642.afreecatv.com 8486 a7a7b4c0417d781f8c0a9771479b7b29_suhee0051_245677530_html5 ìˆ˜í› ìˆ˜í”¼ ìŠ¤ë§µ ë¯¼êµ vs ë‚˜ë‹ ì‚¬ì¥ ë°§ë“œ êµìš© í‚¬ë‚´ê¸° ì•¼ë¯¸ suhee0051 chat-dee93642.afreecatv.com 4542 16a1bc62a4d357a422e9aa2f63f4fac0_wnddnjs3124_245682295_html5 ì˜¤ëŠ˜ íƒœêµ­ ì¶œêµ­í•©ë‹ˆë‹¤ ì €ëŠ” ë¹„í–‰ê¸°ê°’ ê²Œì´ì§€ ì•ˆì°¨ë©´ ì•ˆê°‘ë‹ˆë‹¤ ......ë¶€ì²œ ì •ì¤‘ë§Œ ì„¤ì˜ìš± ì™€ì´í¼ ì´ìˆ˜í˜ ë‚˜ë£¨í†  í’ˆë°” ë°•ê³µ í•˜ë¥´ wnddnjs3124 chat-6e0a4c42.afreecatv.com 1779 3dd7b7d32ebe399045c639d71874d558_sunwo2534_245683271_html5 JUP ë‰´ìŠ¤ ë¶„ëŸ‰ì „ìŸ íŠ¹ë³„ê²ŒìŠ¤íŠ¸ í•¨ê»˜ Xì•¼ì˜¹ë¯¼ì§€ sunwo2534 chat-6e0a4c42.afreecatv.com 2010 58c69912e19990fa9cc3fcf7bd3d5dd3_gjgj3274_245683016_html5 ìŠ¤íƒ€ ì†Œë£¡ì´ ë˜ë” ê°•ì˜ë°©ì†¡ ìš•í•˜ëŸ¬ì˜¤ì§€ë§ˆì„¸ìš”. gjgj3274 chat-6e0a4c42.afreecatv.com 9853 acf465cffcb8a267607f0fcf47507432_todakman1151_245682511_html5 ë“œë¦´ë§ì”€ì´ ìˆìŠµë‹ˆë‹¤ (ì–´ê·¸ë¡œì„) ë²”í”„ë¦¬ì¹´ todakman1151 chat-6e0a4c42.afreecatv.com 7662 ccd30ea7baa9e681d74244b058b72810_dlrnf_245683294_html5 ê¸´ê¸‰íšŒì˜ ì‹œì‘ í•©ë‹ˆë‹¤_ì„¸ìŒì»´í¼ë‹ˆ x ì„¸ì°¬ dlrnf chat-dee93642.afreecatv.com 7871 872ef2c55774dfcac9278408bdb2881d_o31511_245682721_html5 [ë¬´íŒŒ] ë‹¤ì´ì•„ 77ê°œ ìºê¸° [ë¡œë‚˜ì›”ë“œ:ì„œìˆ˜ê¸¸í˜•ë‹˜] o31511 ... ì±„íŒ… URLì˜ ê²½ìš° ë‘ê°€ì§€ë¡œ ì–´ë–»ê²Œ ë¶„ë¥˜í•˜ëŠ”ì§„ í™•ì¸í•  ìˆ˜ ì—†ìœ¼ë‚˜ urlì—ì„œ ì±„íŒ…ë²ˆí˜¸ë¥¼ ê¸°ì¤€ìœ¼ë¡œ ë°©ì…ì¥ì´ ë˜ëŠ” ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆì—ˆìŠµë‹ˆë‹¤. í…ŒìŠ¤íŠ¸ í¬ë¡¤ë§ìœ¼ë¡œ í•¸ë“œì‰ì´í¬ì— ëŒ€í•œ ìœ ì˜ë¯¸í•œ ê²°ê³¼ë¥¼ ì–»ì§„ ëª»í–ˆìŠµë‹ˆë‹¤.\nğŸ’¡ ê·¸ëŸ¬ë˜ì¤‘ PdTicket ê°’ì´ APIì—ì„œ ë¶ˆëŸ¬ì™€ì§ˆë•Œ ì¿ í‚¤ê°€ ì—†ìœ¼ë©´ ë¶ˆëŸ¬ì™€ì§€ì§ˆ ì•ŠëŠ”ë‹¤ëŠ” ê²ƒì„ ë³´ê³  ë¹„íšŒì› ì¦‰ ì¿ í‚¤ì— í‹°ì¼“ê°’ì´ ì—†ëŠ” ìƒíƒœë¡œ ì§„í–‰í•˜ê¸°ë¡œ í•˜ì˜€ìŠµë‹ˆë‹¤. ë¹„íšŒì›ì¼ ê²½ìš°ì— ì²«ë²ˆì§¸ í•¸ë“œì‰ì´í¬ë•Œ í•´ë‹¹ í‹°ì¼“ê°’ (ë¡œê·¸ì¸ ì •ë³´)ë¥¼ ë°›ì§€ ì•Šê¸° ë–„ë¬¸ì— í‹°ì¼“ê°’ì´ ê°±ì‹ ë˜ê±°ë‚˜ í—¤ë”ê°€ ë³€ê²½ë˜ëŠ” ê²½ìš°ë¥¼ ì œì™¸í•´ë„ ëœë‹¤ëŠ” ì´ì ì´ ìˆìŠµë‹ˆë‹¤.\në¹„íšŒì› í…ŒìŠ¤íŠ¸ ê²°ê³¼\nì²«ë²ˆì§¸ í‚¤ ê°’ secret_1\nì „: 0001000XX200.A32.XXX..\ní›„: 000100000600.16 (ê³ ì •)\në‘ë²ˆì§¸ í‚¤ ê°’ secret_2\nì „: 00020003XX0 (ë¡œê·¸ì¸ ì¿ í‚¤ê°’ì´ ìˆì„ ê²½ìš°ì—)\ní›„: 00020002XX0 (ë¹„íšŒì›)\nì²«ë²ˆì§¸ í•¸ë“œì‰ì´í¬ëŠ” ê³ ì •ì´ë¯€ë¡œ í•„ìš”í•œ 3ê°œ ê°’ ì¤‘ 2ê°œëŠ” í•´ê²° ë˜ì—ˆìŠµë‹ˆë‹¤.\në‘ë²ˆì§¸ í•¸ë“œì‰ì´í¬ í‚¤ê°’ ì°¾ê¸° ì´ì œ ë‚¨ì€ê±´ ë‘ë²ˆì§¸ í•¸ë“œì‰ì´í¬ ì¸ë° ìœ„ ì²˜ëŸ¼ 2ìë¦¬ ìˆ«ìê°€ ê°ì´ ì˜¤ì§ˆ ì•Šì•„ì„œ ë¬´ì‘ì • ì •ë¦¬í•´ë³´ê¸° ì‹œì‘í–ˆìŠµë‹ˆë‹¤. ë„¤íŠ¸ì›Œí¬íƒ­ ë‘ë²ˆì§¸ í•¸ë“œì‰ì´í¬ í‚¤ê°’, bjë‹‰ë„¤ì„, ë‹‰ë„¤ì„ ê¸¸ì´ë¥¼ ë¬´ì‘ì • ì ì–´ë³´ê¸° ì‹œì‘í–ˆìŠµë‹ˆë‹¤.\nì •ë¦¬í•´ë³´ë‹ˆ ë‹‰ë„¤ì„ ê¸¸ì´ì— ë”°ë¥¸ ê·œì¹™ì„ ì°¾ì„ ìˆ˜ ìˆì—ˆìŠµë‹ˆë‹¤. ì—¬ê¸°ì„œ ì´ìƒí•œê±´ lovely5959 ë§Œ ë­”ê°€ -1 ì˜¤ì°¨ê°€ ìˆì—ˆìŠµë‹ˆë‹¤. ì°œì°œí•˜ê¸°ëŠ” í•´ë„ ëœë¤í…ŒìŠ¤íŠ¸í•´ë„ ê±°ì˜ ë‹¤ ë§ê¸´ í•´ë„ 100% ì •í™•í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤\nì½”ë“œ ì•„í”„ë¦¬ì¹´ TV ì‹¤ì‹œê°„ ì±„íŒ… ê¸ì–´ì˜¤ê¸°.ìµœì¢….ìµœì¢…,ìµœì¢….ìµœì¢…ì˜ìµœì¢…... 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 80 import certifi import json import ssl import base64 import asyncio import requests import websockets # WSS ì—°ê²° ìœ„í•œ SSL ì„¤ì • ssl_context = ssl.create_default_context() ssl_context.load_verify_locations(certifi.where()) ssl_context.check_hostname = False ssl_context.verify_mode = ssl.CERT_NONE def decode(bytes): test = bytes.split(b'\\x0c') res = [] for i in test: res.append(str(i, 'utf-8')) if(res[1] != '-1' and res[1] != '1' and '|' not in res[1]): if(len(res) \u003e 5): print(res[1], '\\t| ', res[2], '|', res[6]) else: print(res) pass def player_live_api(bno, bid): # type=aid ì¼ ê²½ìš° aid(.A32~~~)ë¶ˆëŸ¬ì˜´ data = {'bid': bid, 'bno':bno, 'type':'live', 'confirm_adult':'false', 'player_type':'html5', 'mode':'landing', 'from_api':'0', 'pwd':'', 'stream_type':'common', 'quality':'HD'} res = requests.post(f'https://live.afreecatv.com/afreeca/player_live_api.php?bjid={bid}', data=data).json() CHDOMAIN = res[\"CHANNEL\"][\"CHDOMAIN\"].lower() CHATNO = res[\"CHANNEL\"][\"CHATNO\"] FTK = res[\"CHANNEL\"][\"FTK\"] TITLE = res[\"CHANNEL\"][\"TITLE\"] BJID = res[\"CHANNEL\"][\"BJID\"] CHPT = str(int(res[\"CHANNEL\"][\"CHPT\"]) + 1) return CHDOMAIN, CHATNO, FTK, TITLE, BJID, CHPT async def connect(url): BNO = str(url.split('/')[-1]) BID = str(url.split('/')[-2]) CHDOMAIN, CHATNO, FTK, TITLE, BJID, CHPT = player_live_api(BNO, BID) KEY = '' if(len(BJID) == 5): KEY = '80' elif(len(BJID) == 6): KEY = '81' elif(len(BJID) == 7): KEY = '82' elif(len(BJID) == 8): KEY = '83' elif(len(BJID) == 9): KEY = '84' elif(len(BJID) == 10): KEY = '85' elif(len(BJID) == 11): KEY = '86' elif(len(BJID) == 12): KEY = '87' handshake = f'\u001b\t00020002{KEY}00\f{CHATNO}\f{FTK}\f0\flog\u0011\u0006\u0026\u0006set_bps\u0006=\u00068000\u0006\u0026\u0006view_bps\u0006=\u00061000\u0006\u0026\u0006quality\u0006=\u0006normal\u0006\u0026\u0006uuid\u0006=\u00061e43cf6d37913c36b35d580e0b5656ec\u0006\u0026\u0006geo_cc\u0006=\u0006KR\u0006\u0026\u0006geo_rc\u0006=\u000611\u0006\u0026\u0006acpt_lang\u0006=\u0006ko_KR\u0006\u0026\u0006svc_lang\u0006=\u0006ko_KR\u0012pwd\u0011\u0012auth_info\u0011NULL\u0012pver\u00111\u0012access_system\u0011html5\u0012\f' async with websockets.connect(f\"wss://{CHDOMAIN}:{CHPT}/Websocket/{BID}\", subprotocols=['chat'],ssl=ssl_context, ping_interval=None) as websocket: # í•¸ë“œì‰ì´í¬ # await websocket.send(secret_1) await websocket.send('\u001b\t000100000600\f16\f') data = await websocket.recv() await websocket.send(handshake) # ì´í›„ë¶€í„° ì±„íŒ…ë‚´ìš© ë°›ì•„ì™€ì§ while True: try: data = await websocket.recv() decode(data) except Exception as e: print(\"ERROR:\", e) # break url = input(\"ì•„í”„ë¦¬ì¹´TV URLì„ ì…ë ¥í•´ì£¼ì„¸ìš” : \") asyncio.get_event_loop().run_until_complete(connect(url)) ê²°ê³¼ ë§ˆë¬´ë¦¬ ì±„íŒ…ë°©ê³¼ ì†Œì¼“ìœ¼ë¡œ ì—°ê²°ë˜ê¸° ë•Œë¬¸ì— ì„±ëŠ¥ì ìœ¼ë¡œ ë§¤ìš° í¸~~ì•ˆ í–ˆìŠµë‹ˆë‹¤.\nì†Œì¼“ ì—°ê²°ì€ 5ë¶„ë§ˆë‹¤ ëŠì–´ì§€ê¸° ë•Œë¬¸ì— whileë¬¸ ëŒë©´ì„œ ì§€ì†í•´ì„œ ìƒˆë¡œ handshake ë¶€í„° ë‹¤ì‹œ ì‹œì‘í•˜ë©´ ë©ë‹ˆë‹¤.\nê²Œì‹œê¸€ ì´ë™ë˜ì–´ archiveí•©ë‹ˆë‹¤\në²ˆì™¸íŒ) ì•„í”„ë¦¬ì¹´ë„ìš°ë¯¸ í¬ë¡¤ë§í•˜ê¸° ë“¤ì–´ê°€ë©° ì•„í”„ë¦¬ì¹´ë„ìš°ë¯¸ ì„œë¹„ìŠ¤ë¥¼ ì´ìš©í•˜ë©´ ìœ íŠœë¸Œ ëŒ“ê¸€ê³¼ ì•„í”„ë¦¬ì¹´ ëŒ“ê¸€ì„ í•¨ê»˜ ê¸ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.\nì•„í”„ë¦¬ì¹´ ë„ìš°ë¯¸ëŠ” ì±„íŒ…ì´ ì¤‘ê°„ ì¤‘ê°„ ë©ˆì¶”ëŠ” í˜„ìƒì´ ìˆìŠµë‹ˆë‹¤.\nì…€ë ˆëŠ„ VS ì†Œì¼“ ì•„í”„ë¦¬ì¹´ ë„ìš°ë¯¸ë¥¼ ë¶„ì„í•´ë³´ë©´ ì†Œì¼“ìœ¼ë¡œ í†µì‹ í•˜ê³  ìˆëŠ”ë° ì•„í”„ë¦¬ì¹´ ë„ìš°ë¯¸ì— ì—°ê²°ëœ ì†Œì¼“ ì£¼ì†Œë¡œ ë©”ì„¸ì§€ ì •ë³´ë¥¼ ë°”ë¡œ ë°›ì•„ì˜¬ ìˆ˜ ìˆê² ë‹¤ê³  ìƒê°ë˜ì–´ ë¶„ì„ì„ í•´ë³´ì•˜ìœ¼ë‚˜ í›„ì› ê´€ë ¨ëœ ë‚´ìš©ë“¤ë§Œ ë°›ì•„ì™€ì¡ŒìŠµë‹ˆë‹¤. ì•„í”„ë¦¬ì¹´ ë„ìš°ë¯¸ê°€ ìì²´ì ìœ¼ë¡œ ê³„ì† ë©ˆì¶”ê¸° ë•Œë¬¸ì— ì„±ëŠ¥ì ìœ¼ë¡œ í¬ê²Œ íš¨ê³¼ë¥¼ ë³´ì§€ ëª»í•  ê²ƒìœ¼ë¡œ ìƒê°ë©ë‹ˆë‹¤.\nnomomo ë‹˜ê»˜ì„œ ë„ì›€ ì£¼ì…¨ìŠµë‹ˆë‹¤. Twip-Toonation-Afreehp-Parser-Example issues #4 ê°ì‚¬í•©ë‹ˆë‹¤ ğŸ™\nì½”ë“œ main.py 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69 70 71 72 73 74 75 76 77 78 79 import time import re import threading as th from selenium import webdriver from selenium.webdriver.common.by import By from selenium.webdriver.chrome.service import Service from webdriver_manager.chrome import ChromeDriverManager # ìƒìˆ˜, ì•„í”„ë¦¬ì¹´ë„ìš°ë¯¸ ì±„íŒ… URL, ì»´í“¨í„° ì„±ëŠ¥ì— ë”°ë¼ STRESS ì¡°ì ˆ URL = input('ì•„í”„ë¦¬ì¹´ ë„ìš°ë¯¸ ì±„íŒ… url') STRESS = 3 DEBUG = False CAPTURING = True # SELENIUM ì´ˆê¸°í™” DRIVER = webdriver.Chrome(service=Service(ChromeDriverManager().install())) # global ë³€ìˆ˜ USERS = [] # ê²°ê³¼ê°’ CONTENTS = [] # DEBUGì¼ë•Œ ì±„íŒ… ë‚´ìš© í„°ë¯¸ë„ì— í‘œì‹œ CNT = 0 def stop_catpure(): global CAPTURING input() CAPTURING = False def start_capture(): global USERS global CONTENTS global CNT DRIVER.get(URL) time.sleep(STRESS) th.Thread(target=stop_catpure, args=(), name='stop_catpure', daemon=True).start() while CAPTURING: try: DRIVER.implicitly_wait(STRESS) chat_list = DRIVER.find_element(By.CLASS_NAME, 'chat_list') chats = chat_list.find_elements(By.TAG_NAME, 'li') # print(\"chat len \u003e \", len(chats)) for chat in chats: name = chat.get_attribute('data-name') id = chat.get_attribute('data-id') classname = chat.get_attribute('class') platform = 'afreeca' if 'afreeca' in classname else 'youtube' user = f'{name} | {platform}' if platform == 'afreeca' else f'{name} | @{id} | {platform}' secrets = str(re.sub(r'[^0-9]', '', classname)) + user if (user not in USERS) and (len(name) * len(id) != 0): USERS.append(user) content = chat.find_element(By.CLASS_NAME, 'text').text if secrets not in CONTENTS: CONTENTS.append(secrets) if DEBUG: print(f'{platform} - {content} - {name} - {secrets}') else: print(f'------- \\t ì•„ì´ë”” : {user}\\n\\t\\t ë‚´ìš© : {content}') CNT += 1 time.sleep(STRESS / 3) except KeyboardInterrupt: break except Exception as e: print(\"!\", e) def quit_capture(): DRIVER.close() def print_results(): global USERS global CONTENTS users = (list(set(USERS))) print(users) start_capture() quit_capture() print_results() ì½”ë“œì„¤ëª… ì…€ë ˆëŠ„ì„ ì´ìš©í•˜ì—¬ ì›¹ ë“œë¼ì´ë²„ê°€ í•´ë‹¹ ì†ŒìŠ¤ë¥¼ ë Œë”ë§ í•œ ì´í›„ì— ê¸ì–´ì˜µë‹ˆë‹¤.\n1 2 # line 16 DRIVER = webdriver.Chrome(service=Service(ChromeDriverManager().install())) í•´ë‹¹ í”„ë¡œê·¸ë¨ì€ pyinstallerë¡œ exeíŒŒì¼ë¡œ ë§Œë“¤ì–´ì•¼ í•˜ê¸° ë–„ë¬¸ì— ì›¹ ë“œë¼ì´ë²„ë¥¼ ìë™ìœ¼ë¡œ ìµœì‹  ë²„ì „ìœ¼ë¡œ ë°›ì•„ì˜µë‹ˆë‹¤. ì •ì ì¸ ë“œë¼ì´ë²„ë¥¼ ì‚¬ìš©í•  ê²½ìš°ì— íŒŒì¼ì„ ì‹¤í–‰í•˜ëŠ” ì»´í“¨í„°ì˜ ë“œë¼ì´ë²„ì™€ ë§ì§€ ì•ŠëŠ” ê²ƒì„ ë°©ì§€í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.\n1 2 3 4 5 6 7 8 # line 24 def stop_catpure(): global CAPTURING input() CAPTURING = False ... # line 37 th.Thread(target=stop_catpure, args=(), name='stop_catpure', daemon=True).start() ë¼ì´ë¸Œ ë°©ì†¡ì´ ëë‚˜ê¸° ì „ì— ì¶”ì¶œì„ ì¢…ë£Œí•˜ê¸° ìœ„í•´ì„œ í•´ë‹¹ í•¨ìˆ˜ë¥¼ ì“°ë ˆë“œë¡œ ì‹¤í–‰ì‹œí‚µë‹ˆë‹¤. í‚¤ë³´ë“œ ì¸í’‹ì´ ìˆëŠ”ê²½ìš° ì¶”ì¶œì„ ìë™ìœ¼ë¡œ ì¢…ë£Œí•©ë‹ˆë‹¤.\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 # line 38 while CAPTURING: try: DRIVER.implicitly_wait(STRESS) chat_list = DRIVER.find_element(By.CLASS_NAME, 'chat_list') chats = chat_list.find_elements(By.TAG_NAME, 'li') # print(\"chat len \u003e \", len(chats)) for chat in chats: name = chat.get_attribute('data-name') id = chat.get_attribute('data-id') classname = chat.get_attribute('class') platform = 'afreeca' if 'afreeca' in classname else 'youtube' user = f'{name} | {platform}' if platform == 'afreeca' else f'{name} | @{id} | {platform}' secrets = str(re.sub(r'[^0-9]', '', classname)) + user if (user not in USERS) and (len(name) * len(id) != 0): USERS.append(user) content = chat.find_element(By.CLASS_NAME, 'text').text if secrets not in CONTENTS: CONTENTS.append(secrets) if DEBUG: print(f'{platform} - {content} - {name} - {secrets}') else: print(f'------- \\t ì•„ì´ë”” : {user}\\n\\t\\t ë‚´ìš© : {content}') CNT += 1 time.sleep(STRESS / 3) except KeyboardInterrupt: break except Exception as e: print(\"!\", e) ì…€ë ˆëŠ„ì„ ì´ìš©í•´ì„œ ì•„í”„ë¦¬ì¹´ë„ìš°ë¯¸ í˜ì´ì§€ë¥¼ ê¸ì–´ì˜µë‹ˆë‹¤.\nê²°ê³¼ ë§ˆì¹˜ë©° ë ˆí¼ëŸ°ìŠ¤ê°€ ì—†ì–´ì„œ ì§„í–‰í•˜ê¸° ì–´ë ¤ìš´ ë¶€ë¶„ì´ ìˆì—ˆëŠ”ë° í•´ê²°ë˜ì–´ì„œ ì„±ì·¨ê°ì„ ë§ì´ ëŠê¼ˆìŠµë‹ˆë‹¤. ê¶ê¸ˆí•˜ì‹  ì ì´ ìˆìœ¼ë©´ ëŒ“ê¸€ë¡œ ë‚¨ê²¨ì£¼ì‹œê¸° ë°”ë¼ë©° í•´ë‹¹ ê¸€ì´ ë„ì›€ì´ ë˜ì…¨ê¸¸ ë°”ëë‹ˆë‹¤ :)\n",
  "wordCount" : "3452",
  "inLanguage": "en",
  "datePublished": "2024-03-15T00:00:00Z",
  "dateModified": "2024-03-15T00:00:00Z",
  "author":{
    "@type": "Person",
    "name": "cha2hyun"
  },
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https://cha2hyun.blog/content/projects/%EB%B0%B0%EB%8F%8C%EC%9D%B4%EC%9D%98%EB%8B%B9%EA%B5%AC%EC%83%9D%ED%99%9C/afreecatv-crawling/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "ì±„ìˆ˜í˜„ ê°œë°œì¼ì§€",
    "logo": {
      "@type": "ImageObject",
      "url": "https://cha2hyun.blog/favicon/favicon.ico"
    }
  }
}
</script>
</head>

<body class="" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    } else if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    } else if (window.matchMedia('(prefers-color-scheme: dark)').matches) {
        document.body.classList.add('dark');
    }

</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="https://cha2hyun.blog/" accesskey="h" title="ì±„ìˆ˜í˜„ ê°œë°œì¼ì§€ (Alt + H)">ì±„ìˆ˜í˜„ ê°œë°œì¼ì§€<span style="justify-content: center; padding-left:7px;">
                    <img src="https://hits.seeyoufarm.com/api/count/incr/badge.svg?url=https%3A%2F%2Fcha2hyun.blog&count_bg=%23000000&title_bg=%23000000&icon=&icon_color=%23E7E7E7&title=HITS&edge_flat=false"/>
                </span>
                <div style="font-size: 14px; margin-top:-30px; font-weight: normal;">ğŸ“š ê¸°ì–µì€ ìœ í•œí•˜ë‚˜, ê¸°ë¡ì€ ë¬´í•œí•˜ë‹¤</div>
            </a>            
        </div>
        <ul id="menu">
            <li>
                <a href="https://cha2hyun.blog/archives" title="ì „ì²´">
                    <span style="font-weight: bold;">ì „ì²´</span>
                </a>
            </li>
            <li>
                <a href="https://cha2hyun.blog/content/posts/" title="ì¼ìƒ">
                    <span style="font-weight: bold;">ì¼ìƒ</span>
                </a>
            </li>
            <li>
                <a href="https://cha2hyun.blog/content/projects/" title="í”Œì ">
                    <span style="font-weight: bold;">í”Œì </span>
                </a>
            </li>
            <li>
                <a href="https://cha2hyun.blog/content/algorithm/" title="ê³µë¶€">
                    <span style="font-weight: bold;">ê³µë¶€</span>
                </a>
            </li>
            <li>
                <a href="https://cha2hyun.blog/content/hacking/" title="í•´í‚¹">
                    <span style="font-weight: bold;">í•´í‚¹</span>
                </a>
            </li>
            <li>
                <a href="https://cha2hyun.blog/search/" title="ê²€ìƒ‰">
                    <span style="font-weight: bold;">ê²€ìƒ‰</span>
                </a>
            </li>
            <li>
                <div class="logo-switches">
                    <button id="theme-toggle" accesskey="t" title="(Alt + T)">
                        <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                            fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                            stroke-linejoin="round">
                            <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                        </svg>
                        <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                            fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                            stroke-linejoin="round">
                            <circle cx="12" cy="12" r="5"></circle>
                            <line x1="12" y1="1" x2="12" y2="3"></line>
                            <line x1="12" y1="21" x2="12" y2="23"></line>
                            <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                            <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                            <line x1="1" y1="12" x2="3" y2="12"></line>
                            <line x1="21" y1="12" x2="23" y2="12"></line>
                            <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                            <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                        </svg>
                    </button>

                </div>
            </li>
        </ul>
        
    </nav>
    
    
</header>
<main class="main">

<article class="post-single">
  <header class="post-header">
    <div class="breadcrumbs"><a href="https://cha2hyun.blog/">Home</a>&nbsp;Â»&nbsp;<a href="https://cha2hyun.blog/content/">Contents</a>&nbsp;Â»&nbsp;<a href="https://cha2hyun.blog/content/projects/">Projects</a></div>
    <h1 class="post-title entry-hint-parent">
      ì•„í”„ë¦¬ì¹´TV ì‹¤ì‹œê°„ì±„íŒ… í¬ë¡¤ë§
    </h1>
    <div class="post-meta"><span title='2024-03-15 00:00:00 +0000 UTC'>March 15, 2024</span>&nbsp;Â·&nbsp;17 min&nbsp;Â·&nbsp;cha2hyun


    </div>
  </header> <div class="toc">
    <details  open>
        <summary accesskey="c" title="(Alt + C)">
            <span class="details">Table of Contents</span>
        </summary>

        <div class="inner"><ul>
                <li>
                    <a href="#24%eb%85%84-3%ec%9b%94-15%ec%9d%bc-%ec%97%85%eb%8d%b0%ec%9d%b4%ed%8a%b8" aria-label="24ë…„ 3ì›” 15ì¼ ì—…ë°ì´íŠ¸">24ë…„ 3ì›” 15ì¼ ì—…ë°ì´íŠ¸</a></li>
                <li>
                    <a href="#%eb%93%a4%ec%96%b4%ea%b0%80%eb%a9%b0" aria-label="ë“¤ì–´ê°€ë©°">ë“¤ì–´ê°€ë©°</a></li>
                <li>
                    <a href="#%ec%95%84%ed%94%84%eb%a6%ac%ec%b9%b4tv-%ec%b1%84%ed%8c%85%eb%b0%a9-%eb%b6%84%ec%84%9d" aria-label="ì•„í”„ë¦¬ì¹´TV ì±„íŒ…ë°© ë¶„ì„">ì•„í”„ë¦¬ì¹´TV ì±„íŒ…ë°© ë¶„ì„</a></li>
                <li>
                    <a href="#%ec%96%b4%eb%96%bb%ea%b2%8c%eb%93%a0-%ec%b1%84%ed%8c%85%ec%9d%84-%eb%b6%88%eb%9f%ac%ec%98%ac-%ec%88%98-%ec%9e%88%ec%9d%84%ea%b9%8c-%ec%86%8c%ec%bc%93-%eb%b6%84%ec%84%9d" aria-label="ì–´ë–»ê²Œë“  ì±„íŒ…ì„ ë¶ˆëŸ¬ì˜¬ ìˆ˜ ìˆì„ê¹Œ? (ì†Œì¼“ ë¶„ì„)">ì–´ë–»ê²Œë“  ì±„íŒ…ì„ ë¶ˆëŸ¬ì˜¬ ìˆ˜ ìˆì„ê¹Œ? (ì†Œì¼“ ë¶„ì„)</a><ul>
                        
                <li>
                    <a href="#%ec%b2%ab%eb%b2%88%ec%a7%b8-%ed%95%b8%eb%93%9c%ec%89%90%ec%9d%b4%ed%81%ac" aria-label="ì²«ë²ˆì§¸ í•¸ë“œì‰ì´í¬">ì²«ë²ˆì§¸ í•¸ë“œì‰ì´í¬</a></li>
                <li>
                    <a href="#%eb%91%90%eb%b2%88%ec%a7%b8-%ed%95%b8%eb%93%9c%ec%89%90%ec%9d%b4%ed%81%ac" aria-label="ë‘ë²ˆì§¸ í•¸ë“œì‰ì´í¬">ë‘ë²ˆì§¸ í•¸ë“œì‰ì´í¬</a></li>
                <li>
                    <a href="#test-code" aria-label="Test Code">Test Code</a></li>
                <li>
                    <a href="#%ea%b2%b0%ea%b3%bc" aria-label="ê²°ê³¼">ê²°ê³¼</a></li></ul>
                </li>
                <li>
                    <a href="#%ec%8b%ac%ed%99%94-url%eb%a7%8c%ec%9c%bc%eb%a1%9c-%ec%b1%84%ed%8c%85%ec%9d%84-%ec%9e%90%eb%8f%99%ec%9c%bc%eb%a1%9c-%eb%b6%88%eb%9f%ac%ec%98%ac-%ec%88%98-%ec%9e%88%ec%9d%84%ea%b9%8c" aria-label="[ì‹¬í™”] URLë§Œìœ¼ë¡œ ì±„íŒ…ì„ ìë™ìœ¼ë¡œ ë¶ˆëŸ¬ì˜¬ ìˆ˜ ìˆì„ê¹Œ?">[ì‹¬í™”] URLë§Œìœ¼ë¡œ ì±„íŒ…ì„ ìë™ìœ¼ë¡œ ë¶ˆëŸ¬ì˜¬ ìˆ˜ ìˆì„ê¹Œ?</a><ul>
                        
                <li>
                    <a href="#%ec%b1%84%ed%8c%85%eb%b0%a9-url-%ec%b0%be%ea%b8%b0" aria-label="ì±„íŒ…ë°© URL ì°¾ê¸°">ì±„íŒ…ë°© URL ì°¾ê¸°</a></li>
                <li>
                    <a href="#%ec%b2%ab%eb%b2%88%ec%a7%b8-%ed%95%b8%eb%93%9c%ec%89%90%ec%9d%b4%ed%81%ac-%ed%82%a4%ea%b0%92-%ec%b0%be%ea%b8%b0" aria-label="ì²«ë²ˆì§¸ í•¸ë“œì‰ì´í¬ í‚¤ê°’ ì°¾ê¸°">ì²«ë²ˆì§¸ í•¸ë“œì‰ì´í¬ í‚¤ê°’ ì°¾ê¸°</a></li>
                <li>
                    <a href="#%eb%91%90%eb%b2%88%ec%a7%b8-%ed%95%b8%eb%93%9c%ec%89%90%ec%9d%b4%ed%81%ac-%ed%82%a4%ea%b0%92-%ec%b0%be%ea%b8%b0" aria-label="ë‘ë²ˆì§¸ í•¸ë“œì‰ì´í¬ í‚¤ê°’ ì°¾ê¸°">ë‘ë²ˆì§¸ í•¸ë“œì‰ì´í¬ í‚¤ê°’ ì°¾ê¸°</a></li>
                <li>
                    <a href="#%ec%bd%94%eb%93%9c" aria-label="ì½”ë“œ">ì½”ë“œ</a></li>
                <li>
                    <a href="#%ea%b2%b0%ea%b3%bc-1" aria-label="ê²°ê³¼">ê²°ê³¼</a></li></ul>
                </li>
                <li>
                    <a href="#%eb%a7%88%eb%ac%b4%eb%a6%ac" aria-label="ë§ˆë¬´ë¦¬">ë§ˆë¬´ë¦¬</a></li>
                <li>
                    <a href="#%eb%b2%88%ec%99%b8%ed%8c%90-%ec%95%84%ed%94%84%eb%a6%ac%ec%b9%b4%eb%8f%84%ec%9a%b0%eb%af%b8-%ed%81%ac%eb%a1%a4%eb%a7%81%ed%95%98%ea%b8%b0" aria-label="ë²ˆì™¸íŒ) ì•„í”„ë¦¬ì¹´ë„ìš°ë¯¸ í¬ë¡¤ë§í•˜ê¸°">ë²ˆì™¸íŒ) ì•„í”„ë¦¬ì¹´ë„ìš°ë¯¸ í¬ë¡¤ë§í•˜ê¸°</a><ul>
                        
                <li>
                    <a href="#%eb%93%a4%ec%96%b4%ea%b0%80%eb%a9%b0-1" aria-label="ë“¤ì–´ê°€ë©°">ë“¤ì–´ê°€ë©°</a></li>
                <li>
                    <a href="#%ec%85%80%eb%a0%88%eb%8a%84-vs-%ec%86%8c%ec%bc%93" aria-label="ì…€ë ˆëŠ„ VS ì†Œì¼“">ì…€ë ˆëŠ„ VS ì†Œì¼“</a></li>
                <li>
                    <a href="#%ec%bd%94%eb%93%9c-1" aria-label="ì½”ë“œ">ì½”ë“œ</a></li>
                <li>
                    <a href="#%ec%bd%94%eb%93%9c%ec%84%a4%eb%aa%85" aria-label="ì½”ë“œì„¤ëª…">ì½”ë“œì„¤ëª…</a></li>
                <li>
                    <a href="#%ea%b2%b0%ea%b3%bc-2" aria-label="ê²°ê³¼">ê²°ê³¼</a></li></ul>
                </li>
                <li>
                    <a href="#%eb%a7%88%ec%b9%98%eb%a9%b0" aria-label="ë§ˆì¹˜ë©°">ë§ˆì¹˜ë©°</a>
                </li>
            </ul>
        </div>
    </details>
</div>

  <div class="post-content"><p>ì½”ë“œëŠ” <a href="https://github.com/cha2hyun/afreecatv-chat-crawler/blob/main/main.py" target="_blank">Github Repo</a>ì— ê³µê°œë˜ì–´ìˆìŠµë‹ˆë‹¤. ì§ì ‘ ë°›ì•„ì„œ ì‹¤í–‰í•˜ì‹¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
<hr>
<h3 id="24ë…„-3ì›”-15ì¼-ì—…ë°ì´íŠ¸">24ë…„ 3ì›” 15ì¼ ì—…ë°ì´íŠ¸<a hidden class="anchor" aria-hidden="true" href="#24ë…„-3ì›”-15ì¼-ì—…ë°ì´íŠ¸">#</a></h3>
<figure class="align-center ">
    <img loading="lazy" src="../img/9.gif#center"
         alt="ì‹¤í–‰ ê²°ê³¼"/> <figcaption>
            <p>ì‹¤í–‰ ê²°ê³¼</p>
        </figcaption>
</figure>



<div class="terminal space shadow">
  <div class="top">
    <div class="btns">
      <span class="circle red"></span>
      <span class="circle yellow"></span>
      <span class="circle green"></span>
    </div>
    <div class="title">
      24ë…„ 3ì›” 15ì¼ ë²„ì „
    </div>
  </div>
  <div class="terminalbody"><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">  1
</span><span class="lnt">  2
</span><span class="lnt">  3
</span><span class="lnt">  4
</span><span class="lnt">  5
</span><span class="lnt">  6
</span><span class="lnt">  7
</span><span class="lnt">  8
</span><span class="lnt">  9
</span><span class="lnt"> 10
</span><span class="lnt"> 11
</span><span class="lnt"> 12
</span><span class="lnt"> 13
</span><span class="lnt"> 14
</span><span class="lnt"> 15
</span><span class="lnt"> 16
</span><span class="lnt"> 17
</span><span class="lnt"> 18
</span><span class="lnt"> 19
</span><span class="lnt"> 20
</span><span class="lnt"> 21
</span><span class="lnt"> 22
</span><span class="lnt"> 23
</span><span class="lnt"> 24
</span><span class="lnt"> 25
</span><span class="lnt"> 26
</span><span class="lnt"> 27
</span><span class="lnt"> 28
</span><span class="lnt"> 29
</span><span class="lnt"> 30
</span><span class="lnt"> 31
</span><span class="lnt"> 32
</span><span class="lnt"> 33
</span><span class="lnt"> 34
</span><span class="lnt"> 35
</span><span class="lnt"> 36
</span><span class="lnt"> 37
</span><span class="lnt"> 38
</span><span class="lnt"> 39
</span><span class="lnt"> 40
</span><span class="lnt"> 41
</span><span class="lnt"> 42
</span><span class="lnt"> 43
</span><span class="lnt"> 44
</span><span class="lnt"> 45
</span><span class="lnt"> 46
</span><span class="lnt"> 47
</span><span class="lnt"> 48
</span><span class="lnt"> 49
</span><span class="lnt"> 50
</span><span class="lnt"> 51
</span><span class="lnt"> 52
</span><span class="lnt"> 53
</span><span class="lnt"> 54
</span><span class="lnt"> 55
</span><span class="lnt"> 56
</span><span class="lnt"> 57
</span><span class="lnt"> 58
</span><span class="lnt"> 59
</span><span class="lnt"> 60
</span><span class="lnt"> 61
</span><span class="lnt"> 62
</span><span class="lnt"> 63
</span><span class="lnt"> 64
</span><span class="lnt"> 65
</span><span class="lnt"> 66
</span><span class="lnt"> 67
</span><span class="lnt"> 68
</span><span class="lnt"> 69
</span><span class="lnt"> 70
</span><span class="lnt"> 71
</span><span class="lnt"> 72
</span><span class="lnt"> 73
</span><span class="lnt"> 74
</span><span class="lnt"> 75
</span><span class="lnt"> 76
</span><span class="lnt"> 77
</span><span class="lnt"> 78
</span><span class="lnt"> 79
</span><span class="lnt"> 80
</span><span class="lnt"> 81
</span><span class="lnt"> 82
</span><span class="lnt"> 83
</span><span class="lnt"> 84
</span><span class="lnt"> 85
</span><span class="lnt"> 86
</span><span class="lnt"> 87
</span><span class="lnt"> 88
</span><span class="lnt"> 89
</span><span class="lnt"> 90
</span><span class="lnt"> 91
</span><span class="lnt"> 92
</span><span class="lnt"> 93
</span><span class="lnt"> 94
</span><span class="lnt"> 95
</span><span class="lnt"> 96
</span><span class="lnt"> 97
</span><span class="lnt"> 98
</span><span class="lnt"> 99
</span><span class="lnt">100
</span><span class="lnt">101
</span><span class="lnt">102
</span><span class="lnt">103
</span><span class="lnt">104
</span><span class="lnt">105
</span><span class="lnt">106
</span><span class="lnt">107
</span><span class="lnt">108
</span><span class="lnt">109
</span><span class="lnt">110
</span><span class="lnt">111
</span><span class="lnt">112
</span><span class="lnt">113
</span><span class="lnt">114
</span><span class="lnt">115
</span><span class="lnt">116
</span><span class="lnt">117
</span><span class="lnt">118
</span><span class="lnt">119
</span><span class="lnt">120
</span><span class="lnt">121
</span><span class="lnt">122
</span><span class="lnt">123
</span><span class="lnt">124
</span><span class="lnt">125
</span><span class="lnt">126
</span><span class="lnt">127
</span><span class="lnt">128
</span><span class="lnt">129
</span><span class="lnt">130
</span><span class="lnt">131
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">certifi</span>
</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">ssl</span>
</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">asyncio</span>
</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">websockets</span>
</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">requests</span>
</span></span><span class="line"><span class="cl"><span class="kn">from</span> <span class="nn">api</span> <span class="kn">import</span> <span class="n">get_player_live</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># ìœ ë‹ˆì½”ë“œ ë° ê¸°íƒ€ ìƒìˆ˜</span>
</span></span><span class="line"><span class="cl"><span class="n">F</span> <span class="o">=</span> <span class="s2">&#34;</span><span class="se">\x0c</span><span class="s2">&#34;</span>
</span></span><span class="line"><span class="cl"><span class="n">ESC</span> <span class="o">=</span> <span class="s2">&#34;</span><span class="se">\x1b\t</span><span class="s2">&#34;</span>
</span></span><span class="line"><span class="cl"><span class="n">SEPARATOR</span> <span class="o">=</span> <span class="s2">&#34;+&#34;</span> <span class="o">+</span> <span class="s2">&#34;-&#34;</span> <span class="o">*</span> <span class="mi">70</span> <span class="o">+</span> <span class="s2">&#34;+&#34;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># ì•„í”„ë¦¬ì¹´TVì—ì„œ ì œê³µí•˜ëŠ” APIë¡œ ì±„íŒ… ì •ë³´ë¥¼ ë°›ìŠµë‹ˆë‹¤.</span>
</span></span><span class="line"><span class="cl"><span class="k">def</span> <span class="nf">get_player_live</span><span class="p">(</span><span class="n">bno</span><span class="p">,</span> <span class="n">bid</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">    <span class="n">url</span> <span class="o">=</span> <span class="s1">&#39;https://live.afreecatv.com/afreeca/player_live_api.php&#39;</span>
</span></span><span class="line"><span class="cl">    <span class="n">data</span> <span class="o">=</span> <span class="p">{</span>
</span></span><span class="line"><span class="cl">        <span class="s1">&#39;bid&#39;</span><span class="p">:</span> <span class="n">bid</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="s1">&#39;bno&#39;</span><span class="p">:</span> <span class="n">bno</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="s1">&#39;type&#39;</span><span class="p">:</span> <span class="s1">&#39;live&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="s1">&#39;confirm_adult&#39;</span><span class="p">:</span> <span class="s1">&#39;false&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="s1">&#39;player_type&#39;</span><span class="p">:</span> <span class="s1">&#39;html5&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="s1">&#39;mode&#39;</span><span class="p">:</span> <span class="s1">&#39;landing&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="s1">&#39;from_api&#39;</span><span class="p">:</span> <span class="s1">&#39;0&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="s1">&#39;pwd&#39;</span><span class="p">:</span> <span class="s1">&#39;&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="s1">&#39;stream_type&#39;</span><span class="p">:</span> <span class="s1">&#39;common&#39;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">        <span class="s1">&#39;quality&#39;</span><span class="p">:</span> <span class="s1">&#39;HD&#39;</span>
</span></span><span class="line"><span class="cl">    <span class="p">}</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="k">try</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">        <span class="n">response</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">post</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">url</span><span class="si">}</span><span class="s1">?bjid=</span><span class="si">{</span><span class="n">bid</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">data</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="n">response</span><span class="o">.</span><span class="n">raise_for_status</span><span class="p">()</span>  <span class="c1"># HTTP ìš”ì²­ ì—ëŸ¬ë¥¼ í™•ì¸í•˜ê³ , ì—ëŸ¬ê°€ ìˆì„ ê²½ìš° ì˜ˆì™¸ë¥¼ ë°œìƒì‹œí‚µë‹ˆë‹¤.</span>
</span></span><span class="line"><span class="cl">        <span class="n">res</span> <span class="o">=</span> <span class="n">response</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="n">CHDOMAIN</span> <span class="o">=</span> <span class="n">res</span><span class="p">[</span><span class="s2">&#34;CHANNEL&#34;</span><span class="p">][</span><span class="s2">&#34;CHDOMAIN&#34;</span><span class="p">]</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">        <span class="n">CHATNO</span> <span class="o">=</span> <span class="n">res</span><span class="p">[</span><span class="s2">&#34;CHANNEL&#34;</span><span class="p">][</span><span class="s2">&#34;CHATNO&#34;</span><span class="p">]</span>
</span></span><span class="line"><span class="cl">        <span class="n">FTK</span> <span class="o">=</span> <span class="n">res</span><span class="p">[</span><span class="s2">&#34;CHANNEL&#34;</span><span class="p">][</span><span class="s2">&#34;FTK&#34;</span><span class="p">]</span>
</span></span><span class="line"><span class="cl">        <span class="n">TITLE</span> <span class="o">=</span> <span class="n">res</span><span class="p">[</span><span class="s2">&#34;CHANNEL&#34;</span><span class="p">][</span><span class="s2">&#34;TITLE&#34;</span><span class="p">]</span>
</span></span><span class="line"><span class="cl">        <span class="n">BJID</span> <span class="o">=</span> <span class="n">res</span><span class="p">[</span><span class="s2">&#34;CHANNEL&#34;</span><span class="p">][</span><span class="s2">&#34;BJID&#34;</span><span class="p">]</span>
</span></span><span class="line"><span class="cl">        <span class="n">CHPT</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">res</span><span class="p">[</span><span class="s2">&#34;CHANNEL&#34;</span><span class="p">][</span><span class="s2">&#34;CHPT&#34;</span><span class="p">])</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="n">CHDOMAIN</span><span class="p">,</span> <span class="n">CHATNO</span><span class="p">,</span> <span class="n">FTK</span><span class="p">,</span> <span class="n">TITLE</span><span class="p">,</span> <span class="n">BJID</span><span class="p">,</span> <span class="n">CHPT</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="k">except</span> <span class="n">requests</span><span class="o">.</span><span class="n">RequestException</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&#34;  ERROR: API ìš”ì²­ ì¤‘ ì˜¤ë¥˜ ë°œìƒ: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="kc">None</span>
</span></span><span class="line"><span class="cl">    <span class="k">except</span> <span class="ne">KeyError</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&#34;  ERROR: ì‘ë‹µì—ì„œ í•„ìš”í•œ ë°ì´í„°ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span> <span class="kc">None</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># SSL ì»¨í…ìŠ¤íŠ¸ ìƒì„±</span>
</span></span><span class="line"><span class="cl"><span class="k">def</span> <span class="nf">create_ssl_context</span><span class="p">():</span>
</span></span><span class="line"><span class="cl">    <span class="n">ssl_context</span> <span class="o">=</span> <span class="n">ssl</span><span class="o">.</span><span class="n">create_default_context</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">    <span class="n">ssl_context</span><span class="o">.</span><span class="n">load_verify_locations</span><span class="p">(</span><span class="n">certifi</span><span class="o">.</span><span class="n">where</span><span class="p">())</span>
</span></span><span class="line"><span class="cl">    <span class="n">ssl_context</span><span class="o">.</span><span class="n">check_hostname</span> <span class="o">=</span> <span class="kc">False</span>
</span></span><span class="line"><span class="cl">    <span class="n">ssl_context</span><span class="o">.</span><span class="n">verify_mode</span> <span class="o">=</span> <span class="n">ssl</span><span class="o">.</span><span class="n">CERT_NONE</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="n">ssl_context</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># ë©”ì‹œì§€ ë””ì½”ë“œ ë° ì¶œë ¥</span>
</span></span><span class="line"><span class="cl"><span class="k">def</span> <span class="nf">decode_message</span><span class="p">(</span><span class="nb">bytes</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">    <span class="n">parts</span> <span class="o">=</span> <span class="nb">bytes</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="sa">b</span><span class="s1">&#39;</span><span class="se">\x0c</span><span class="s1">&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="n">messages</span> <span class="o">=</span> <span class="p">[</span><span class="n">part</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s1">&#39;utf-8&#39;</span><span class="p">)</span> <span class="k">for</span> <span class="n">part</span> <span class="ow">in</span> <span class="n">parts</span><span class="p">]</span>
</span></span><span class="line"><span class="cl">    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">messages</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">5</span> <span class="ow">and</span> <span class="n">messages</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;-1&#39;</span><span class="p">,</span> <span class="s1">&#39;1&#39;</span><span class="p">]</span> <span class="ow">and</span> <span class="s1">&#39;|&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">messages</span><span class="p">[</span><span class="mi">1</span><span class="p">]:</span>
</span></span><span class="line"><span class="cl">        <span class="n">user_id</span><span class="p">,</span> <span class="n">comment</span><span class="p">,</span> <span class="n">user_nickname</span> <span class="o">=</span> <span class="n">messages</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="n">messages</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">messages</span><span class="p">[</span><span class="mi">6</span><span class="p">]</span>
</span></span><span class="line"><span class="cl">        <span class="nb">print</span><span class="p">(</span><span class="n">SEPARATOR</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&#34;| </span><span class="si">{</span><span class="n">user_nickname</span><span class="si">}</span><span class="s2">[</span><span class="si">{</span><span class="n">user_id</span><span class="si">}</span><span class="s2">] - </span><span class="si">{</span><span class="n">comment</span><span class="si">}</span><span class="s2">&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="k">else</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">        <span class="c1"># ì±„íŒ… ë¿ë§Œ ì•„ë‹ˆë¼ ë‹¤ë¥¸ ë©”ì„¸ì§€ë„ ë™ì‹œì— ë‚´ë ¤ì˜µë‹ˆë‹¤.</span>
</span></span><span class="line"><span class="cl">        <span class="k">pass</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># ë°”ì´íŠ¸ í¬ê¸° ê³„ì‚°</span>
</span></span><span class="line"><span class="cl"><span class="k">def</span> <span class="nf">calculate_byte_size</span><span class="p">(</span><span class="n">string</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="nb">len</span><span class="p">(</span><span class="n">string</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="s1">&#39;utf-8&#39;</span><span class="p">))</span> <span class="o">+</span> <span class="mi">6</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># ì±„íŒ…ì— ì—°ê²°</span>
</span></span><span class="line"><span class="cl"><span class="k">async</span> <span class="k">def</span> <span class="nf">connect_to_chat</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">ssl_context</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">    <span class="k">try</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">        <span class="n">BNO</span><span class="p">,</span> <span class="n">BID</span> <span class="o">=</span> <span class="n">url</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;/&#39;</span><span class="p">)[</span><span class="o">-</span><span class="mi">1</span><span class="p">],</span> <span class="n">url</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;/&#39;</span><span class="p">)[</span><span class="o">-</span><span class="mi">2</span><span class="p">]</span>
</span></span><span class="line"><span class="cl">        <span class="n">CHDOMAIN</span><span class="p">,</span> <span class="n">CHATNO</span><span class="p">,</span> <span class="n">FTK</span><span class="p">,</span> <span class="n">TITLE</span><span class="p">,</span> <span class="n">BJID</span><span class="p">,</span> <span class="n">CHPT</span> <span class="o">=</span> <span class="n">get_player_live</span><span class="p">(</span><span class="n">BNO</span><span class="p">,</span> <span class="n">BID</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&#34;</span><span class="si">{</span><span class="n">SEPARATOR</span><span class="si">}</span><span class="se">\n</span><span class="s2">&#34;</span>
</span></span><span class="line"><span class="cl">              <span class="sa">f</span><span class="s2">&#34;  CHDOMAIN: </span><span class="si">{</span><span class="n">CHDOMAIN</span><span class="si">}</span><span class="se">\n</span><span class="s2">  CHATNO: </span><span class="si">{</span><span class="n">CHATNO</span><span class="si">}</span><span class="se">\n</span><span class="s2">  FTK: </span><span class="si">{</span><span class="n">FTK</span><span class="si">}</span><span class="se">\n</span><span class="s2">&#34;</span>
</span></span><span class="line"><span class="cl">              <span class="sa">f</span><span class="s2">&#34;  TITLE: </span><span class="si">{</span><span class="n">TITLE</span><span class="si">}</span><span class="se">\n</span><span class="s2">  BJID: </span><span class="si">{</span><span class="n">BJID</span><span class="si">}</span><span class="se">\n</span><span class="s2">  CHPT: </span><span class="si">{</span><span class="n">CHPT</span><span class="si">}</span><span class="se">\n</span><span class="s2">&#34;</span>
</span></span><span class="line"><span class="cl">              <span class="sa">f</span><span class="s2">&#34;</span><span class="si">{</span><span class="n">SEPARATOR</span><span class="si">}</span><span class="s2">&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&#34;  ERROR: API í˜¸ì¶œ ì‹¤íŒ¨ - </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="k">return</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="k">try</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">        <span class="k">async</span> <span class="k">with</span> <span class="n">websockets</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">            <span class="sa">f</span><span class="s2">&#34;wss://</span><span class="si">{</span><span class="n">CHDOMAIN</span><span class="si">}</span><span class="s2">:</span><span class="si">{</span><span class="n">CHPT</span><span class="si">}</span><span class="s2">/Websocket/</span><span class="si">{</span><span class="n">BID</span><span class="si">}</span><span class="s2">&#34;</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">            <span class="n">subprotocols</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;chat&#39;</span><span class="p">],</span>
</span></span><span class="line"><span class="cl">            <span class="n">ssl</span><span class="o">=</span><span class="n">ssl_context</span><span class="p">,</span>
</span></span><span class="line"><span class="cl">            <span class="n">ping_interval</span><span class="o">=</span><span class="kc">None</span>
</span></span><span class="line"><span class="cl">        <span class="p">)</span> <span class="k">as</span> <span class="n">websocket</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">            <span class="c1"># ìµœì´ˆ ì—°ê²°ì‹œ ì „ë‹¬í•˜ëŠ” íŒ¨í‚·</span>
</span></span><span class="line"><span class="cl">            <span class="n">CONNECT_PACKET</span> <span class="o">=</span> <span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">ESC</span><span class="si">}</span><span class="s1">000100000600</span><span class="si">{</span><span class="n">F</span><span class="o">*</span><span class="mi">3</span><span class="si">}</span><span class="s1">16</span><span class="si">{</span><span class="n">F</span><span class="si">}</span><span class="s1">&#39;</span>
</span></span><span class="line"><span class="cl">            <span class="c1"># ë©”ì„¸ì§€ë¥¼ ë‚´ë ¤ë°›ê¸° ìœ„í•´ ë³´ë‚´ëŠ” íŒ¨í‚·</span>
</span></span><span class="line"><span class="cl">            <span class="n">JOIN_PACKET</span> <span class="o">=</span> <span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">ESC</span><span class="si">}</span><span class="s1">0002</span><span class="si">{</span><span class="n">calculate_byte_size</span><span class="p">(</span><span class="n">CHATNO</span><span class="p">)</span><span class="si">:</span><span class="s1">06</span><span class="si">}</span><span class="s1">00</span><span class="si">{</span><span class="n">F</span><span class="si">}{</span><span class="n">CHATNO</span><span class="si">}{</span><span class="n">F</span><span class="o">*</span><span class="mi">5</span><span class="si">}</span><span class="s1">&#39;</span>
</span></span><span class="line"><span class="cl">            <span class="c1"># ì£¼ê¸°ì ìœ¼ë¡œ í•‘ì„ ë³´ë‚´ì„œ ë©”ì„¸ì§€ë¥¼ ê³„ì† ìˆ˜ì‹ í•˜ëŠ” íŒ¨í‚·</span>
</span></span><span class="line"><span class="cl">            <span class="n">PING_PACKET</span> <span class="o">=</span> <span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">ESC</span><span class="si">}</span><span class="s1">000000000100</span><span class="si">{</span><span class="n">F</span><span class="si">}</span><span class="s1">&#39;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">            <span class="k">await</span> <span class="n">websocket</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="n">CONNECT_PACKET</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&#34;  ì—°ê²° ì„±ê³µ, ì±„íŒ…ë°© ì •ë³´ ìˆ˜ì‹  ëŒ€ê¸°ì¤‘...&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">            <span class="k">await</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">            <span class="k">await</span> <span class="n">websocket</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="n">JOIN_PACKET</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">            <span class="k">async</span> <span class="k">def</span> <span class="nf">ping</span><span class="p">():</span>
</span></span><span class="line"><span class="cl">                <span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">                    <span class="c1"># 5ë¶„ë™ì•ˆ í•‘ì´ ë³´ë‚´ì§€ì§€ ì•Šìœ¼ë©´ ì†Œì¼“ì€ ëŠì–´ì§‘ë‹ˆë‹¤.</span>
</span></span><span class="line"><span class="cl">                    <span class="k">await</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">60</span><span class="p">)</span>  <span class="c1"># 1ë¶„ = 60ì´ˆ</span>
</span></span><span class="line"><span class="cl">                    <span class="k">await</span> <span class="n">websocket</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="n">PING_PACKET</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">            <span class="k">async</span> <span class="k">def</span> <span class="nf">receive_messages</span><span class="p">():</span>
</span></span><span class="line"><span class="cl">                <span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">                    <span class="n">data</span> <span class="o">=</span> <span class="k">await</span> <span class="n">websocket</span><span class="o">.</span><span class="n">recv</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">                    <span class="n">decode_message</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">            <span class="k">await</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">gather</span><span class="p">(</span>
</span></span><span class="line"><span class="cl">                <span class="n">receive_messages</span><span class="p">(),</span>
</span></span><span class="line"><span class="cl">                <span class="n">ping</span><span class="p">(),</span>
</span></span><span class="line"><span class="cl">            <span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&#34;  ERROR: ì›¹ì†Œì¼“ ì—°ê²° ì˜¤ë¥˜ - </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">async</span> <span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
</span></span><span class="line"><span class="cl">    <span class="n">url</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s2">&#34;ì•„í”„ë¦¬ì¹´TV URLì„ ì…ë ¥í•´ì£¼ì„¸ìš”: &#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="n">ssl_context</span> <span class="o">=</span> <span class="n">create_ssl_context</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">    <span class="k">await</span> <span class="n">connect_to_chat</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">ssl_context</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&#34;__main__&#34;</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">    <span class="n">asyncio</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">main</span><span class="p">())</span>
</span></span></code></pre></td></tr></table>
</div>
</div></div>
</div>
<br />

<p>ì¤‘ìš”í•œ ì—…ë°ì´íŠ¸ëœ ë‚´ìš©ì€ 2ê°€ì§€ê°€ ìˆìŠµë‹ˆë‹¤. ì²«ë²ˆì§¸ë¡œëŠ” 5ë¶„ë§ˆë‹¤ ëŠì–´ì§€ëŠ” ê²ƒì„ ê°œì„ í•˜ê³ , ë‘ë²ˆì§¸ë¡œëŠ” ì´ì „ì— ì°¾ì§€ëª»í–ˆë˜ bjid ê¸¸ì´ì— ë”°ë¥¸ legthë¥¼ ì°¾ëŠ” ê²ƒì´ì—ˆìŠµë‹ˆë‹¤. DOCHISë‹˜ê»˜ì„œ ëŒ“ê¸€ë¡œ ë‚¨ê²¨ì£¼ì‹  ë‚´ìš©ì„ í†µí•´ì„œ ìˆ˜ì •ë˜ì—ˆìŠµë‹ˆë‹¤. ê°ì‚¬í•©ë‹ˆë‹¤. ğŸ˜€</p>
<p>ìš°ì„  ì•„í”„ë¦¬ì¹´TV ì±„íŒ… ì›¹ì†Œì¼“ì— ê·œì¹™ì´ ìˆì—ˆìŠµë‹ˆë‹¤. ì•ì˜ 12ìë¦¬ëŠ” ì–´ë–¤ ì¢…ë¥˜ë¥¼ ìˆ˜í–‰í•˜ê³  íŒ¨í‚·ì˜ ë°”ë”” ê¸¸ì´ëŠ” ëª‡ì¸ì§€ ë“±ì„ ì •í•˜ëŠ” ë°ì´í„°ë¥¼ ë‹´ê³  ìˆìŠµë‹ˆë‹¤.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">0000 &gt; 4ìë¦¬ : ì–´ë–¤ê²ƒì„ ì‹¤í–‰í• ì§€
</span></span><span class="line"><span class="cl">000000 &gt; 6ìë¦¬ : íŒ¨í‚·(ë°”ë””)ì˜ ë°ì´í„° ê¸¸ì´ (ë°”ì´íŠ¸)
</span></span><span class="line"><span class="cl">00 &gt; 2ìë¦¬ : ì–´ë–¤ ì—­í• ì¸ì§„ ëª¨ë¥´ì§€ë§Œ 12ë¹„íŠ¸ë¥¼ ë§ì¶”ê¸° ìœ„í•´ ì‚¬ìš©ë˜ëŠ” ê±¸ë¡œ ì¶”ì¸¡ë©ë‹ˆë‹¤.
</span></span></code></pre></td></tr></table>
</div>
</div><p>ìœ„ ê·œì¹™ì„ í† ëŒ€ë¡œ ì˜ˆë¥¼ ë“¤ì–´ë³´ë©´ ì±„íŒ… ì„œë²„ì— ì—°ê²°ì´ ëŠì–´ì§€ì§€ ì•Šê²Œ í™•ì¸í•˜ëŠ” íŒ¨í‚·ì€ ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">0000 &gt; í•‘ì„ ë³´ë‚´ëŠ” ì½”ë“œ
</span></span><span class="line"><span class="cl">000001 &gt; íŒ¨í‚·(ë°”ë””)ì˜ ë°ì´í„°ê¸¸ì´ëŠ” 1
</span></span><span class="line"><span class="cl">00 &gt; 12ë¹„íŠ¸ ë§ì¶”ê¸°
</span></span></code></pre></td></tr></table>
</div>
</div><p>ë©”ì„¸ì§€ë¥¼ ë°›ê² ë‹¤ëŠ” send ì—­í• ì„ í•˜ëŠ” íŒ¨í‚·ì„ ë³´ë‚¼ë•ŒëŠ” íŒ¨í‚·ì€ ê°™ìŠµë‹ˆë‹¤.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">0002 &gt; ë©”ì„¸ì§€ë¥¼ ë°›ê² ë‹¤ëŠ” ì½”ë“œ
</span></span><span class="line"><span class="cl">000123 &gt; íŒ¨í‚·(ë°”ë””)ì˜ ë°ì´í„°ê¸¸ì´ 123ì€ ì˜ˆì‹œì…ë‹ˆë‹¤.
</span></span><span class="line"><span class="cl">00 &gt; 12ë¹„íŠ¸ ë§ì¶”ê¸°
</span></span></code></pre></td></tr></table>
</div>
</div><p>ìœ„ì™€ê°™ì€ ê·œì¹™ì„ ì½”ë“œë¡œ êµ¬í˜„í•˜ë©´ ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="c1"># ìœ ë‹ˆì½”ë“œ</span>
</span></span><span class="line"><span class="cl"><span class="n">F</span> <span class="o">=</span> <span class="s2">&#34;</span><span class="se">\x0c</span><span class="s2">&#34;</span>
</span></span><span class="line"><span class="cl"><span class="n">ESC</span> <span class="o">=</span> <span class="s2">&#34;</span><span class="se">\x1b\t</span><span class="s2">&#34;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># ìµœì´ˆ ì—°ê²°ì‹œ ì „ë‹¬í•˜ëŠ” íŒ¨í‚·</span>
</span></span><span class="line"><span class="cl"><span class="c1"># 0001 - connect / 000006 - ë°”ë”” ê¸¸ì´ê°€ {F}{F}{F}16{F} ë¡œ 6 / 00 - 12ë¹„íŠ¸ ë§Œë“¤ê¸° / {F*3}16{F} - ë°”ë””</span>
</span></span><span class="line"><span class="cl"><span class="n">CONNECT_PACKET</span> <span class="o">=</span> <span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">ESC</span><span class="si">}</span><span class="s1">000100000600</span><span class="si">{</span><span class="n">F</span><span class="o">*</span><span class="mi">3</span><span class="si">}</span><span class="s1">16</span><span class="si">{</span><span class="n">F</span><span class="si">}</span><span class="s1">&#39;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># ë©”ì„¸ì§€ë¥¼ ë‚´ë ¤ë°›ê¸° ìœ„í•´ ë³´ë‚´ëŠ” íŒ¨í‚·</span>
</span></span><span class="line"><span class="cl"><span class="c1"># 0002 - JOIN / {calculate_byte_size(CHATNO):06} - CHATNO ê¸¸ì´ + {F} x 6 / 00 - 12ë¹„íŠ¸ / {F}{CHATNO}{F*5} - ë°”ë””</span>
</span></span><span class="line"><span class="cl"><span class="c1"># ì¦‰ ì•„í”„ë¦¬ì¹´ APIë¡œ ë¶€í„° ë°›ì•„ì˜¨ ì±„íŒ…ë²ˆí˜¸ + 6ì„ í•´ì¤€ê²Œ íŒ¨í‚· ë°”ë”” ì‚¬ì´ì¦ˆê°€ ë©ë‹ˆë‹¤.</span>
</span></span><span class="line"><span class="cl"><span class="n">JOIN_PACKET</span> <span class="o">=</span> <span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">ESC</span><span class="si">}</span><span class="s1">0002</span><span class="si">{</span><span class="n">calculate_byte_size</span><span class="p">(</span><span class="n">CHATNO</span><span class="p">)</span><span class="si">:</span><span class="s1">06</span><span class="si">}</span><span class="s1">00</span><span class="si">{</span><span class="n">F</span><span class="si">}{</span><span class="n">CHATNO</span><span class="si">}{</span><span class="n">F</span><span class="o">*</span><span class="mi">5</span><span class="si">}</span><span class="s1">&#39;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># ì£¼ê¸°ì ìœ¼ë¡œ í•‘ì„ ë³´ë‚´ì„œ ë©”ì„¸ì§€ë¥¼ ê³„ì† ìˆ˜ì‹ í•˜ëŠ” íŒ¨í‚·</span>
</span></span><span class="line"><span class="cl"><span class="c1"># 0000 - PING / 000001 - ë°”ë”” ê¸¸ì´ëŠ” {F} ë¡œ 1 / 00 - 12ë¹„íŠ¸ ë§Œë“¤ê¸° / {F} - ë°”ë””</span>
</span></span><span class="line"><span class="cl"><span class="n">PING_PACKET</span> <span class="o">=</span> <span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">ESC</span><span class="si">}</span><span class="s1">000000000100</span><span class="si">{</span><span class="n">F</span><span class="si">}</span><span class="s1">&#39;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ì–´ë– í•œ íŒ¨í‚·ìœ¼ë¡œ ë©”ì„¸ì§€ë¥¼ ì£¼ê³ ë°›ëŠ”ì§€ ì •í™•í•˜ê²Œ ì•Œê²Œë˜ì–´ ì „ì²´ì ì¸ ì½”ë“œë¥¼ ê°œì„ ì‹œí‚¬ ìˆ˜ ìˆì—ˆìŠµë‹ˆë‹¤.</p>
<p>ì „ì²´ì ì¸ ì§„í–‰ê³¼ì •ì€ ì•„ë˜ ê¸€ì„ í™•ì¸í•´ì£¼ì‹œë©´ ë©ë‹ˆë‹¤. ê¶ê¸ˆí•˜ì‹  ë‚´ìš©ì´ ìˆìœ¼ì‹œë©´ ì–¸ì œë“ ì§€ ëŒ“ê¸€ì„ ë‚¨ê²¨ì£¼ì‹œê¸° ë°”ëë‹ˆë‹¤. ğŸ˜€</p>
<br>
<hr>
<br>
<h3 id="ë“¤ì–´ê°€ë©°">ë“¤ì–´ê°€ë©°<a hidden class="anchor" aria-hidden="true" href="#ë“¤ì–´ê°€ë©°">#</a></h3>
<p>ë°©ì†¡í”„ë¡œê·¸ë¨ìœ¼ë¡œ OBSë¥¼ ì‚¬ìš©í•˜ê³  ìˆëŠ”ë°, ìµœê·¼ M1ë§¥ ì—…ë°ì´íŠ¸ë¡œ <strong>ë™ì‹œì†¡ì¶œ í”ŒëŸ¬ê·¸ì¸</strong> ì‚¬ìš©ì´ ê°€ëŠ¥í•´ì¡ŒìŠµë‹ˆë‹¤. ìœ íŠ¸ë¸Œì—ì„œ ìœ íŠœë¸Œ + ì•„í”„ë¦¬ì¹´TVë¡œ ë„˜ì–´ê°€ëŠ” ê³„íšì¤‘ì¸ë° ì¶”ì²¨ë°©ì†¡ì„ ê³„ì† ì´ì–´ì„œ ì§„í–‰í•˜ê¸° ìœ„í•´ ìœ íŠœë¸Œ, ì•„í”„ë¦¬ì¹´tv ë‘ê°œ ì±„íŒ…ì„ ì‹¤ì‹œê°„ìœ¼ë¡œ í¬ë¡¤ë§í•˜ë ¤ í•©ë‹ˆë‹¤.</p>
<p>ì•„í”„ë¦¬ì¹´TVì˜ ê²½ìš° ì°¸ê³ í• ë§Œí•œ ë ˆí¼ëŸ°ìŠ¤ê°€ ë§¤ìš° ë§¤ìš° ë§¤ìš° ì—†ëŠ” (ëˆ„ê°€í•˜ê² ëƒê³ ..) ë§¨ë•…ì— í•´ë”©ì´ì—ˆìŠµë‹ˆë‹¤ ğŸ¥² ë¶„ì„í•´ë³´ì•˜ì§€ë§Œ ê¸€ì— ì„¤ëª…ë˜ì–´ ìˆë“¯ì´ ì˜ˆì™¸ì¼€ì´ìŠ¤ê°€ ì¡´ì¬í•˜ë‹ˆ ì°¸ê³  ë¶€íƒë“œë¦½ë‹ˆë‹¤.</p>
<br>
<h3 id="ì•„í”„ë¦¬ì¹´tv-ì±„íŒ…ë°©-ë¶„ì„">ì•„í”„ë¦¬ì¹´TV ì±„íŒ…ë°© ë¶„ì„<a hidden class="anchor" aria-hidden="true" href="#ì•„í”„ë¦¬ì¹´tv-ì±„íŒ…ë°©-ë¶„ì„">#</a></h3>
<figure class="align-center ">
    <img loading="lazy" src="../img/1.gif#center"
         alt="íƒ­ì´ë™ í•˜ë©´ ì†Œì¼“ì—°ê²°ì´ ëŠì–´ì§€ê³  ë‹¤ì‹œ ëŒì•„ì˜¤ë©´ ìƒˆë¡œ ì—°ê²°ëœë‹¤"/> <figcaption>
            <p>íƒ­ì´ë™ í•˜ë©´ ì†Œì¼“ì—°ê²°ì´ ëŠì–´ì§€ê³  ë‹¤ì‹œ ëŒì•„ì˜¤ë©´ ìƒˆë¡œ ì—°ê²°ëœë‹¤</p>
        </figcaption>
</figure>

<p>í¬ë¡¬ì˜ ê°œë°œìë„êµ¬ ë„¤íŠ¸ì›Œí¬íƒ­ì„ ë¶„ì„í•´ë³´ë©´ ì•„í”„ë¦¬ì¹´TVì˜ ì±„íŒ…ë°©ì˜ ê²½ìš° ëŒ€ëµì ìœ¼ë¡œ ë‹¤ìŒê³¼ ê°™ì´ ì›¹ì†Œì¼“ ì„œë²„ì™€ ì—°ê²°ë¨ì„ ì•Œ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
<ol>
<li>
<p>ì‚¬ëŒì´ ë™ì˜ìƒì„ ë³´ê³ ìˆëŠ”ì§€ ê³„ì† í™•ì¸í•˜ëŠ” ì›¹ì†Œì¼“ 1ê°œ
<figure class="align-center ">
       <img loading="lazy" src="../img/10.png#center"
            alt="ì¼ì •ì‹œê°„ë§ˆë‹¤ í•¸ë“œì‰ì´í¬ë¥¼ ê¼ì† ì§„í–‰í•œë‹¤"/> <figcaption>
               <p>ì¼ì •ì‹œê°„ë§ˆë‹¤ í•¸ë“œì‰ì´í¬ë¥¼ ê¼ì† ì§„í–‰í•œë‹¤</p>
           </figcaption>
   </figure>
</p>
</li>
<li>
<p>ì‚¬ëŒì´ ë™ì˜ìƒì„ ë³´ê³ ìˆë‹¤ê³  íŒë‹¨ë˜ë©´ ì±„íŒ…ë°© ì—°ê²°í•˜ëŠ” ì›¹ì†Œì¼“ 1ê°œ
<figure class="align-center ">
       <img loading="lazy" src="../img/11.png#center"
            alt="ë§¨ ì²˜ìŒì—ë§Œ í•¸ë“œì‰ì´í¬"/> <figcaption>
               <p>ë§¨ ì²˜ìŒì—ë§Œ í•¸ë“œì‰ì´í¬</p>
           </figcaption>
   </figure>
</p>
</li>
</ol>
<p>ì‚¬ëŒì´ ë™ì˜ìƒì„ ì•ˆë³´ê³ ìˆë‹¤ê³  íŒë‹¨ë˜ë©´ ëª¨ë“  ì†Œì¼“ ì—°ê²°ì„ ëŠì–´ë²„ë¦½ë‹ˆë‹¤. ì†Œë¦¬ëŠ” ë“¤ë ¤ë„ ì±„íŒ…ì€ ë³´ì—¬ì§€ì§€ ì•ŠìŠµë‹ˆë‹¤. ë‹¤ì‹œ ë™ì˜ìƒì— ì…ì¥í•˜ë©´ ë‹¹ì—°íˆ ì²˜ìŒë¶€í„° ì†Œì¼“ì—°ê²°ì„ ì¬ì‹œì‘í•˜ê¸° ë–„ë¬¸ì— ì´ì „ ì±„íŒ… ë‚´ìš©ë“¤ì´ ì‚¬ë¼ì§€ê²Œ ë©ë‹ˆë‹¤ <em>ì…ì¥, í‡´ì¥ ì—¬ë¶€ë„ ì „ë¶€ ì†Œì¼“ì— ì°í™ë‹ˆë‹¤.</em></p>
<p>ìš°ì„  ê°€ì¥ ì¤‘ìš”í•œ ë¶€ë¶„ì€ ì‹¤ì œ ì±„íŒ…ì´ ì˜¤ê³  ê°€ëŠ” ê²ƒì´ ì°íˆëŠ” ìœ„ <strong>2ë²ˆ ì›¹ì†Œì¼“</strong>ì…ë‹ˆë‹¤. í•´ë‹¹ ì›¹ì†Œì¼“ì— ì—°ê²°í•˜ê¸° ìœ„í•´ì„œëŠ” â­ï¸<strong>ë‹¤ìŒ ê°’ë“¤ì„</strong>â­ï¸ ì•Œì•„ì•¼í•©ë‹ˆë‹¤.</p>
<ol>
<li>ì›¹ì†Œì¼“ ì£¼ì†Œ
<blockquote>
<p>ì±„íŒ…ë°© ì…ì¥ì‹œ ë°›ì•„ì˜¤ëŠ” <strong>API</strong> í˜¹ì€ <strong>1ë²ˆ ì›¹ì†Œì¼“</strong>ì—ì„œ ë¶ˆëŸ¬ì™€ì§ˆ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
</blockquote>
</li>
<li>í•¸ë“œì‰ì´í¬ë•Œ í•„ìš”í•œ ê°’
<blockquote>
<p>ìœ„ì˜ ì›¹ì†Œì¼“ ì£¼ì†Œë¥¼ ë°›ì•„ì˜¬ë•Œ ê°™ì´ ë„˜ê²¨ë°›ëŠ” ê°’ì´ íŠ¹ì • <code>bytes array</code> êµ¬ì¡°ë¡œ ë³´ë‚´ì ¸ì•¼í•©ë‹ˆë‹¤.</p>
</blockquote>
</li>
</ol>
<p>ìš°ì„ ì€ 1ë²ˆ 2ë²ˆì€ ì¬ê»´ë‘ê³  ì†Œì¼“ì— ì—°ê²°í•´ì„œ ì±„íŒ…ì„ ë„˜ê²¨ë°›ì„ ìˆ˜ ìˆëŠ”ì§€ í™•ì¸í•´ë³´ê² ìŠµë‹ˆë‹¤.</p>
<br>
<h3 id="ì–´ë–»ê²Œë“ -ì±„íŒ…ì„-ë¶ˆëŸ¬ì˜¬-ìˆ˜-ìˆì„ê¹Œ-ì†Œì¼“-ë¶„ì„">ì–´ë–»ê²Œë“  ì±„íŒ…ì„ ë¶ˆëŸ¬ì˜¬ ìˆ˜ ìˆì„ê¹Œ? (ì†Œì¼“ ë¶„ì„)<a hidden class="anchor" aria-hidden="true" href="#ì–´ë–»ê²Œë“ -ì±„íŒ…ì„-ë¶ˆëŸ¬ì˜¬-ìˆ˜-ìˆì„ê¹Œ-ì†Œì¼“-ë¶„ì„">#</a></h3>
<p>ì´ 2ë²ˆì˜ í•¸ë“œì‰ì´í¬ í˜¹ì€ ì •ë³´ë¥¼ ì „ë‹¬í•˜ëŠ” ê²ƒì„ ì•Œ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ê°ê°ì˜ í•¸ë“œì‰ì´í¬ë•Œ ì–´ë– í•œ ì •ë³´ë¥¼ ë³´ë‚´ì•¼ ì—°ê²°ì´ ì„±ê³µë˜ì–´ ë‚˜ë¨¸ì§€ ì •ë³´ë„ ì „ë‹¬ë°›ëŠ”ì§€ ë¶„ì„ì´ í•„ìš”í•©ë‹ˆë‹¤.</p>
<figure class="align-center ">
    <img loading="lazy" src="../img/12.png#center"/> 
</figure>

<p>ìš°ì„ ì€ ì±„íŒ…ë°©ì„ <strong>ì–´ë–»ê²Œë“ </strong> ì—°ê²°í•˜ì—¬ ì •ë³´ë¥¼ ì¶œë ¥í•˜ê¸° ìœ„í•´ ë°›ì€ í‚¤ê°’ ê·¸ëŒ€ë¡œ ì—°ê²°í•´ë³´ê² ìŠµë‹ˆë‹¤.</p>
<h4 id="ì²«ë²ˆì§¸-í•¸ë“œì‰ì´í¬">ì²«ë²ˆì§¸ í•¸ë“œì‰ì´í¬<a hidden class="anchor" aria-hidden="true" href="#ì²«ë²ˆì§¸-í•¸ë“œì‰ì´í¬">#</a></h4>
<p>ì²«ë²ˆì§¸ í•¸ë“œì‰ì´í¬ì˜ ê°’ì¤‘ ìœ ì˜ë¯¸í•œ ê°’ì€ <code>A32.</code>ë¡œ ì‹œì‘í•©ë‹ˆë‹¤. ë„¤íŠ¸ì›Œí¬íƒ­ì„ ë¶„ì„í•´ë³¸ ê²°ê³¼ ì•„í”„ë¦¬ì¹´TV APIë¡œ ìš”ì²­ì„ ë³´ë‚¼ë•Œ ì¿ í‚¤ë¡œ í•¨ê»˜ ë³´ë‚´ì§€ëŠ” <code>PdboxTicket</code> ê°’ì„ì„ í™•ì¸í–ˆìŠµë‹ˆë‹¤.</p>
<p><figure class="align-center ">
    <img loading="lazy" src="../img/13.png#center"/> 
</figure>

<figure class="align-center ">
    <img loading="lazy" src="../img/14.png#center"/> 
</figure>
</p>
<br>
<h4 id="ë‘ë²ˆì§¸-í•¸ë“œì‰ì´í¬">ë‘ë²ˆì§¸ í•¸ë“œì‰ì´í¬<a hidden class="anchor" aria-hidden="true" href="#ë‘ë²ˆì§¸-í•¸ë“œì‰ì´í¬">#</a></h4>
<p>ë‘ë²ˆì§¸ í•¸ë“œì‰ì´í¬ëŠ” <code>_</code> ë¡œ ë‚˜ëˆ„ì–´ì§€ê±°ë‚˜ <code>&amp;</code>ìœ¼ë¡œ ê°’ì´ ë‚˜ëˆ„ì–´ ì ¸ìˆì—ˆìŠµë‹ˆë‹¤. <code>&amp;</code>ìœ¼ë¡œ ë‚˜ëˆ„ì–´ì§„ ê²ƒì„ ë³´ë©´ ë­”ê°€ íŒŒë¼ë¯¸í„° ê°’ì„ ì „ì†¡í•˜ëŠ” ê²ƒìœ¼ë¡œ ì˜ˆì¸¡ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì „ë‹¬ë˜ëŠ” ê°’ë“¤ì€ APIì˜ ë¦¬ìŠ¤í°ìŠ¤ë‚˜ JSíŒŒì¼ì„ ë¶„ì„í•˜ë©´ ë‚˜ì˜µë‹ˆë‹¤. ìš°ì„ ì€ íŒŒì´ì¬ìœ¼ë¡œ í•¸ë“œì‰ì´í¬ë–„ ë³´ë‚´ì§€ëŠ” ê°’ì„ <strong>ê·¸ëŒ€ë¡œ</strong> ì „ì†¡í–ˆì„ë•Œ ì—°ê²°ì´ ë˜ëŠ”ì§€ í™•ì¸í•´ë´…ë‹ˆë‹¤
<figure class="align-center ">
    <img loading="lazy" src="../img/15.png#center"/> 
</figure>
</p>
<br>
<h4 id="test-code">Test Code<a hidden class="anchor" aria-hidden="true" href="#test-code">#</a></h4>
<p><figure class="align-center ">
    <img loading="lazy" src="../img/16.png#center"/> 
</figure>

í•´ë‹¹ê°’ì„ <code>UTF-8</code>ì¦‰ string í˜•íƒœë¡œ ê·¸ëŒ€ë¡œ ë³µì‚¬í•  ê²½ìš° ê¹¨ì ¸ì„œ ë³´ì—¬ì§€ì§€ ì•Šê¸° ë–„ë¬¸ì— base64 ê°’ìœ¼ë¡œ ë³µì‚¬í•œë‹¤ìŒì— ì½”ë“œì—ì„œ ë³µí˜¸í™” í•˜ëŠ” í˜•íƒœë¡œ ì§„í–‰í•©ë‹ˆë‹¤.</p>
<p>

<div class="terminal space shadow">
  <div class="top">
    <div class="btns">
      <span class="circle red"></span>
      <span class="circle yellow"></span>
      <span class="circle green"></span>
    </div>
    <div class="title">
      í•¸ë“œì‰ì´í¬ í…ŒìŠ¤íŠ¸
    </div>
  </div>
  <div class="terminalbody"><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-Python" data-lang="Python"><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">certifi</span>
</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">ssl</span>
</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">base64</span>
</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">asyncio</span>
</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">websockets</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># WSS ì—°ê²° ìœ„í•œ SSL ì„¤ì •</span>
</span></span><span class="line"><span class="cl"><span class="n">ssl_context</span> <span class="o">=</span> <span class="n">ssl</span><span class="o">.</span><span class="n">create_default_context</span><span class="p">()</span>
</span></span><span class="line"><span class="cl"><span class="n">ssl_context</span><span class="o">.</span><span class="n">load_verify_locations</span><span class="p">(</span><span class="n">certifi</span><span class="o">.</span><span class="n">where</span><span class="p">())</span>
</span></span><span class="line"><span class="cl"><span class="n">ssl_context</span><span class="o">.</span><span class="n">check_hostname</span> <span class="o">=</span> <span class="kc">False</span>
</span></span><span class="line"><span class="cl"><span class="n">ssl_context</span><span class="o">.</span><span class="n">verify_mode</span> <span class="o">=</span> <span class="n">ssl</span><span class="o">.</span><span class="n">CERT_NONE</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># ì•„ë˜ 3ê°œ ë³€ìˆ˜ê°’ì€ ì–´ë”˜ê°€ì˜ APIë¡œ ë¶€í„° ë°›ì€ ê°’ë“¤ì˜ ì¡°í•©ìœ¼ë¡œ ìš°ì„ ì€ ê·¸ëŒ€ë¡œ ì‚¬ìš©</span>
</span></span><span class="line"><span class="cl"><span class="n">Base64PdboxTicket</span> <span class="o">=</span> <span class="s1">&#39;GwkwMDAxMDAwNTg3MDAMLkEzMi43YmJUNTZ2eUhNOWZLWmsuQ1V0N0dxNXdzSW95ZGdUejRvT0JkUGJEVTRPTEJjbDNEUkFUenJUYkhrQzlYRmtiZnl1YXMwUzE3SFlyZDFjbFU1VzV4U3hpTUJYS2lmV25fVXFDQThWWUYxczVidE04QzJuenhWN3NEVzlTcHFPM2V4VHNHQUMxU3ZmNTlCNUE1bDVrUFJsZHpleHB4OGxKbkJFYXE5UXNLbW1KQ21TTExQRm1JNkc3Q0FHZ1R0UDFWcGhzaTYzTDZXUHRDdkRPalZDNTg1LXVJQV9hRGRxcTlWX1pOWUlBQ0N3d3Yxb0NDckRLeE9icldKS0xpQlNrbGs3bW1TMkkwWVdtNnhiMDB2TG53OGJuQXVyZzRyNkpHeWVma0ZDWmZaM0V6c29LTEFwRU9xeFlkX0JXMVNxRWVNM1FuNkoyc0E5Y0d5WGFZLWhySm5wblJGNmN4RzFPTWJBSi1KVGVXc2JTLTNaNUNULS1fUW1vTWJCb2stSmJwUmt1Y1oxMURJSkFpY25NZmwxaWtzU1Y4aHh6YUVqWVExb19pamI1OXVCWUNYMlNsMFdLSEwydjk4WkhSLXZGNjNRRDY5VEtqSEpjaHBIaDh0RFNzUUxJekc3WUFZbmpKYjl3cDlvV2JfVi0wSFgyRFRYVnVUSEtKRTFPMWNtbHE1bC1qaXZ6bW1HdnJ0WnVmQVVfRG1NQzA1bUpPelNxZTl0bzNKVFZmMjBJWldfWXFpW...==&#39;</span>
</span></span><span class="line"><span class="cl"><span class="n">Base64ChannelInfo</span> <span class="o">=</span> <span class="s1">&#39;GwkwMDAyMDAwMjk3MDAMOTYxOAw0NTY1MzFjMDg0YjUxMGJkOTAyYWViZDcyMjFiMjUyNl92bGZ2bGY3ODlfMjQ1NTkwMzY1X2lvcwwwDAxsb2cRBiYGc2V0X2JwcwY9BjgwMDAGJgZ2aWV3X2JwcwY9BjEwMDAGJgZxdWFsaXR5Bj0Gbm9ybWFsBiYGdXVpZAY9BjFlNDNjZjZkMzc5MTNjMzZiMzVkNTgwZTBiNTY1NmVjBiYGZ2VvX2NjBj0GS1IGJgZnZW9fcmMGPQYxMQYmBmFjcHRfbGFuZwY9BmtvX0tSBiYGc3ZjX2xhbmcGPQZrb19LUgYmBmpvaW5fY2MGPQY0MTAScHdkERJhdXRoX2luZm8RTlVMTBJwdmVyETESYWNjZXNzX3N5c3R...=&#39;</span>
</span></span><span class="line"><span class="cl"><span class="n">WSSUrl</span> <span class="o">=</span> <span class="s1">&#39;wss://chat-76dbfccf.afreecatv.com:8001/Websocket/vlfvlf789&#39;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">async</span> <span class="k">def</span> <span class="nf">connect</span><span class="p">():</span>
</span></span><span class="line"><span class="cl">    <span class="c1"># ì›¹ ì†Œì¼“ì— ì ‘ì†ì„ í•©ë‹ˆë‹¤.</span>
</span></span><span class="line"><span class="cl">    <span class="k">async</span> <span class="k">with</span> <span class="n">websockets</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="n">WSSUrl</span><span class="p">,</span> <span class="n">subprotocols</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;chat&#39;</span><span class="p">],</span> <span class="n">ssl</span><span class="o">=</span><span class="n">ssl_context</span><span class="p">,</span> <span class="n">ping_interval</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span> <span class="k">as</span> <span class="n">websocket</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="c1"># í•¸ë“œì‰ì´í¬</span>
</span></span><span class="line"><span class="cl">        <span class="k">await</span> <span class="n">websocket</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="n">base64</span><span class="o">.</span><span class="n">b64decode</span><span class="p">(</span><span class="n">Base64PdboxTicket</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">        <span class="k">await</span> <span class="n">websocket</span><span class="o">.</span><span class="n">recv</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">        <span class="k">await</span> <span class="n">websocket</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="n">base64</span><span class="o">.</span><span class="n">b64decode</span><span class="p">(</span><span class="n">Base64ChannelInfo</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">        <span class="c1"># ì´í›„ë¶€í„° ì±„íŒ…ë‚´ìš© ë°›ì•„ì™€ì§</span>
</span></span><span class="line"><span class="cl">        <span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">            <span class="k">try</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">                <span class="n">data</span> <span class="o">=</span> <span class="k">await</span> <span class="n">websocket</span><span class="o">.</span><span class="n">recv</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">                <span class="nb">print</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">                <span class="nb">print</span><span class="p">(</span><span class="s2">&#34;ERROR:&#34;</span><span class="p">,</span> <span class="n">e</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">asyncio</span><span class="o">.</span><span class="n">get_event_loop</span><span class="p">()</span><span class="o">.</span><span class="n">run_until_complete</span><span class="p">(</span><span class="n">connect</span><span class="p">())</span>
</span></span></code></pre></td></tr></table>
</div>
</div></div>
</div>
<br />

ì½”ë“œ ì‹¤í–‰ì‹œ ë°ì´í„°ë¥¼ ì„±ê³µì ìœ¼ë¡œ ì˜ ë°›ì•„ì˜¤ëŠ” ê²ƒì„ í™•ì¸ í•  ìˆ˜ ìˆì—ˆìŠµë‹ˆë‹¤.</p>
<figure class="align-center ">
    <img loading="lazy" src="../img/17.png#center"/> 
</figure>

<p>ë‹¨, ë°”ì´íŠ¸ ì½”ë“œë¡œ ë˜ì–´ìˆìœ¼ë©´ì„œ hex ê°’ì´ë‘ í‰ë¬¸ì´ë‘ ì„ì—¬ìˆê¸° ë•Œë¬¸ì— í•´ë‹¹ ë°ì´í„°ë¥¼ ë³µí˜¸í™” í•´ì¤ë‹ˆë‹¤. <code>\x0c</code> ê°’ì´ ê³„ì† ë³´ì´ëŠ” ê²ƒìœ¼ë¡œ ë³´ì•„ í•´ë‹¹ ê°’ìœ¼ë¡œ split í•´ì£¼ê³  utf-8ë¡œ ë³€í™˜í•˜ì˜€ìŠµë‹ˆë‹¤.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="k">def</span> <span class="nf">decode</span><span class="p">(</span><span class="nb">bytes</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">    <span class="n">test</span> <span class="o">=</span> <span class="nb">bytes</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="sa">b</span><span class="s1">&#39;</span><span class="se">\x0c</span><span class="s1">&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="n">res</span> <span class="o">=</span> <span class="p">[]</span>
</span></span><span class="line"><span class="cl">    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">test</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">        <span class="n">res</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="s1">&#39;utf-8&#39;</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">    <span class="nb">print</span><span class="p">(</span><span class="n">res</span><span class="p">)</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>í•´ë‹¹ ì½”ë“œë¡œ ë³µí˜¸í™” í•˜ì˜€ì„ ê²½ìš°ì— ìœ ì˜ë¯¸í•œ ê°’ì´ ë³´ì—¬ì§€ëŠ” ê²ƒì„ í™•ì¸í–ˆìŠµë‹ˆë‹¤.
<figure class="align-center ">
    <img loading="lazy" src="../img/18.png#center"/> 
</figure>
</p>
<p><code>res[1]</code> ê°’ì— ë”°ë¼ì„œ ë°°ì—´ì˜ í¬ê¸°ê°€ ë³€ê²½ë˜ëŠ” ê²ƒì„ ë³´ì•„ í•´ë‹¹ ê°’ì„ ê¸°ì¤€ìœ¼ë¡œ ì–´ë–¤ ë°ì´í„°ì¸ì§€ ìœ ì¶”í•´ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì—¬ëŸ¬ë²ˆ í…ŒìŠ¤íŠ¸í•´ë³¸ ê²°ê³¼ ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤.</p>
<ul>
<li><code>res[1] = 1</code> ì¼ë•Œ <code>res[2]=id</code> <code>res[3]=ë‹‰ë„¤ì„</code>ê°€ ì±„íŒ…ë°©ì— <strong>ì…ì¥</strong> í•˜ì˜€ìŒ</li>
<li><code>res[1] = -1</code> ì¼ë•Œ <code>res[2]=id</code> <code>res[3]=ë‹‰ë„¤ì„</code>ê°€ ì±„íŒ…ë°©ì— <strong>í‡´ì¥</strong> í•˜ì˜€ìŒ</li>
<li><code>res[1] = 'ë¬¸ìì—´'</code> ì¼ë•Œ <code>res[1]=ë‹‰ë„¤ì„</code> <code>res[2]=id</code> <code>res[6]=ì±„íŒ…ë‚´ìš©</code> ë³´ì—¬ì§€ëŠ” ì±„íŒ…ì…ë‹ˆë‹¤.</li>
</ul>
<p>ë‹¤ë¥¸ ê²½ìš°ì—ëŠ” <code>ë§¤ë‹ˆì €</code> ì´ê±°ë‚˜ <code>íŒ¬</code> ì¼ë•Œ ì•„ì´ë””ê°€ ìƒ‰ìƒìœ¼ë¡œ í‘œì‹œë˜ëŠ” ê²½ìš° ë“±ì´ ìˆì—ˆì§€ë§Œ ìœ„ 3ê°€ì§€ë§Œ ìœ¼ë¡œë„ ì¶©ë¶„íˆ ëª©í‘œë¥¼ ë‹¬ì„±í•˜ì—¬ ë”ì´ìƒ ë¶„ì„ì„ ì§„í–‰í•˜ì§„ ì•Šì•˜ìŠµë‹ˆë‹¤.</p>
<p>ìµœì¢… ë³µí˜¸í™” ì½”ë“œë¡œ ì±„íŒ… ë‚´ìš©ë§Œ ë¶ˆëŸ¬ì˜¤ê²Œ í•˜ì˜€ìŠµë‹ˆë‹¤.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="k">def</span> <span class="nf">decode</span><span class="p">(</span><span class="nb">bytes</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">    <span class="n">test</span> <span class="o">=</span> <span class="nb">bytes</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="sa">b</span><span class="s1">&#39;</span><span class="se">\x0c</span><span class="s1">&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="n">res</span> <span class="o">=</span> <span class="p">[]</span>
</span></span><span class="line"><span class="cl">    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">test</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">        <span class="n">res</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="s1">&#39;utf-8&#39;</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">    <span class="k">if</span><span class="p">(</span><span class="n">res</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">!=</span> <span class="s1">&#39;-1&#39;</span> <span class="ow">and</span> <span class="n">res</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">!=</span> <span class="s1">&#39;1&#39;</span> <span class="ow">and</span> <span class="s1">&#39;|&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">res</span><span class="p">[</span><span class="mi">1</span><span class="p">]):</span>
</span></span><span class="line"><span class="cl">        <span class="k">if</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">res</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">5</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">            <span class="nb">print</span><span class="p">(</span><span class="n">res</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">res</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="n">res</span><span class="p">[</span><span class="mi">6</span><span class="p">])</span>
</span></span><span class="line"><span class="cl">        <span class="k">else</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">            <span class="c1"># print(res)</span>
</span></span><span class="line"><span class="cl">            <span class="k">pass</span>
</span></span></code></pre></td></tr></table>
</div>
</div><br>
<h4 id="ê²°ê³¼">ê²°ê³¼<a hidden class="anchor" aria-hidden="true" href="#ê²°ê³¼">#</a></h4>
<figure class="align-center ">
    <img loading="lazy" src="../img/2.gif#center"
         alt="ì±„íŒ… ë°›ì•„ì˜¤ê¸° ì„±ê³µ!"/> <figcaption>
            <p>ì±„íŒ… ë°›ì•„ì˜¤ê¸° ì„±ê³µ!</p>
        </figcaption>
</figure>

<p>ğŸš¨ 5ë¶„ì´ ì§€ë‚˜ë©´ <code>ERROR: no close frame received or sent</code> ë©”ì„¸ì§€ì™€ í•¨ê»˜ ì†Œì¼“ ì—°ê²°ì´ ëŠì–´ì§‘ë‹ˆë‹¤.</p>
<br>
<h3 id="ì‹¬í™”-urlë§Œìœ¼ë¡œ-ì±„íŒ…ì„-ìë™ìœ¼ë¡œ-ë¶ˆëŸ¬ì˜¬-ìˆ˜-ìˆì„ê¹Œ">[ì‹¬í™”] URLë§Œìœ¼ë¡œ ì±„íŒ…ì„ ìë™ìœ¼ë¡œ ë¶ˆëŸ¬ì˜¬ ìˆ˜ ìˆì„ê¹Œ?<a hidden class="anchor" aria-hidden="true" href="#ì‹¬í™”-urlë§Œìœ¼ë¡œ-ì±„íŒ…ì„-ìë™ìœ¼ë¡œ-ë¶ˆëŸ¬ì˜¬-ìˆ˜-ìˆì„ê¹Œ">#</a></h3>
<p>ì•„í”„ë¦¬ì¹´TV ì±„íŒ…ì°½ ë‚´ìš©ì„ ë¶ˆëŸ¬ì˜¤ëŠ” ê²ƒ ê¹Œì§€ëŠ” ì„±ê³µí–ˆìŠµë‹ˆë‹¤ ! ë‹¤ë§Œ ë„¤íŠ¸ì›Œí¬íƒ­ì„ ì¼œì„œ í•„ìš”í•œ ê°’ë“¤ì„ ë³µì‚¬í•  ìˆ˜ëŠ” ì—†ê¸°ì— í•´ë‹¹ ê°’ë“¤ê¹Œì§€ ë¶„ì„í•˜ì—¬ <strong>URLë§Œ ì œê³µí•´ë„ ëª¨ë“ ê²ƒì´ ìë™</strong>ìœ¼ë¡œ ëŒì•„ê°€ì ¸ì•¼ í•©ë‹ˆë‹¤. ìœ„ì—ì„œ ì—°ê²°í•˜ê³  ì¶”ì¶œê¹Œì§€ ì„±ê³µí–ˆê¸° ë•Œë¬¸ì— ì´ì œë¶€í„° í•„ìš”í•œ ê°’ì€ <strong>ë”± 3ê°œ</strong> ì…ë‹ˆë‹¤.</p>
<ul>
<li>ğŸ‘‰ ì±„íŒ…ë°© url</li>
<li>ğŸ‘‰ ì²«ë²ˆì§¸ í•¸ë“œì‰ì´í¬</li>
<li>ğŸ‘‰ ë‘ë²ˆì§¸ í•¸ë“œì‰ì´í¬</li>
</ul>
<br>
<blockquote>
<h4 id="ì±„íŒ…ë°©-url-ì°¾ê¸°">ì±„íŒ…ë°© URL ì°¾ê¸°<a hidden class="anchor" aria-hidden="true" href="#ì±„íŒ…ë°©-url-ì°¾ê¸°">#</a></h4>
</blockquote>
<p>ì±„íŒ…ì— ì—°ê²°ë˜ë©´ì„œ ë‘ë²ˆ í•¸ë“œì‰ì´í¬í• ë•Œ ë³€í™”ë˜ëŠ” ê°’ë“¤ì„ í™•ì¸í•´ë³´ê³  í•´ë‹¹ ê°’ë“¤ì´ ì–´ë–¤ apiì—ì„œ ì™”ëŠ”ì§€ ë¶„ì„í•´ë³´ì•˜ìŠµë‹ˆë‹¤.</p>
<p>API ì£¼ì†Œ : <code>https://live.afreecatv.com/afreeca/player_live_api.php?bjid={bid}</code></p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-Python" data-lang="Python"><span class="line"><span class="cl"><span class="k">def</span> <span class="nf">player_live_api</span><span class="p">(</span><span class="n">bno</span><span class="p">,</span> <span class="n">bid</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">    <span class="c1"># type=aid ì¼ ê²½ìš° aid(.A32~~~)ë¶ˆëŸ¬ì˜´</span>
</span></span><span class="line"><span class="cl">    <span class="n">data</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;bid&#39;</span><span class="p">:</span> <span class="n">bid</span><span class="p">,</span> <span class="s1">&#39;bno&#39;</span><span class="p">:</span><span class="n">bno</span><span class="p">,</span> <span class="s1">&#39;type&#39;</span><span class="p">:</span><span class="s1">&#39;live&#39;</span><span class="p">,</span> <span class="s1">&#39;confirm_adult&#39;</span><span class="p">:</span><span class="s1">&#39;false&#39;</span><span class="p">,</span> <span class="s1">&#39;player_type&#39;</span><span class="p">:</span><span class="s1">&#39;html5&#39;</span><span class="p">,</span> <span class="s1">&#39;mode&#39;</span><span class="p">:</span><span class="s1">&#39;landing&#39;</span><span class="p">,</span> <span class="s1">&#39;from_api&#39;</span><span class="p">:</span><span class="s1">&#39;0&#39;</span><span class="p">,</span> <span class="s1">&#39;pwd&#39;</span><span class="p">:</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="s1">&#39;stream_type&#39;</span><span class="p">:</span><span class="s1">&#39;common&#39;</span><span class="p">,</span> <span class="s1">&#39;quality&#39;</span><span class="p">:</span><span class="s1">&#39;HD&#39;</span><span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="n">res</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">post</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;https://live.afreecatv.com/afreeca/player_live_api.php?bjid=</span><span class="si">{</span><span class="n">bid</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">data</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">    <span class="c1"># wssì—°ê²°í•  ì±„íŒ… Url</span>
</span></span><span class="line"><span class="cl">    <span class="n">CHDOMAIN</span> <span class="o">=</span> <span class="n">res</span><span class="p">[</span><span class="s2">&#34;CHANNEL&#34;</span><span class="p">][</span><span class="s2">&#34;CHDOMAIN&#34;</span><span class="p">]</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">    <span class="c1"># ì±„íŒ…ë°© ë²ˆí˜¸</span>
</span></span><span class="line"><span class="cl">    <span class="n">CHATNO</span> <span class="o">=</span> <span class="n">res</span><span class="p">[</span><span class="s2">&#34;CHANNEL&#34;</span><span class="p">][</span><span class="s2">&#34;CHATNO&#34;</span><span class="p">]</span>
</span></span><span class="line"><span class="cl">    <span class="c1"># ì±„íŒ…ë°© í¬íŠ¸ ë²ˆí˜¸ ì¸ë° 1ì„ ë”í•´ì£¼ì–´ì•¼í•¨</span>
</span></span><span class="line"><span class="cl">    <span class="n">CHPT</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">res</span><span class="p">[</span><span class="s2">&#34;CHANNEL&#34;</span><span class="p">][</span><span class="s2">&#34;CHPT&#34;</span><span class="p">])</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="c1"># ì²«ë²ˆì¬ í•¸ë“œì‰ì´í¬ë•Œ ì‚¬ìš©í•  í‹°ì¼“</span>
</span></span><span class="line"><span class="cl">    <span class="n">TK</span> <span class="o">=</span> <span class="n">res</span><span class="p">[</span><span class="s2">&#34;CHANNEL&#34;</span><span class="p">][</span><span class="s2">&#34;BJID&#34;</span><span class="p">]</span>
</span></span><span class="line"><span class="cl">    <span class="c1"># ë‘ë²ˆì§¸ í•¸ë“œì‰ì´í¬ë•Œ ì‚¬ìš©í•  í‹°ì¼“</span>
</span></span><span class="line"><span class="cl">    <span class="n">FTK</span> <span class="o">=</span> <span class="n">res</span><span class="p">[</span><span class="s2">&#34;CHANNEL&#34;</span><span class="p">][</span><span class="s2">&#34;FTK&#34;</span><span class="p">]</span>
</span></span><span class="line"><span class="cl">    <span class="c1"># bj ëª…</span>
</span></span><span class="line"><span class="cl">    <span class="n">BJID</span> <span class="o">=</span> <span class="n">res</span><span class="p">[</span><span class="s2">&#34;CHANNEL&#34;</span><span class="p">][</span><span class="s2">&#34;BJID&#34;</span><span class="p">]</span>
</span></span><span class="line"><span class="cl">    <span class="c1"># ì œëª©</span>
</span></span><span class="line"><span class="cl">    <span class="n">TITLE</span> <span class="o">=</span> <span class="n">res</span><span class="p">[</span><span class="s2">&#34;CHANNEL&#34;</span><span class="p">][</span><span class="s2">&#34;TITLE&#34;</span><span class="p">]</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="n">CHDOMAIN</span><span class="p">,</span> <span class="n">CHATNO</span><span class="p">,</span> <span class="n">FTK</span><span class="p">,</span> <span class="n">TITLE</span><span class="p">,</span> <span class="n">BJID</span><span class="p">,</span> <span class="n">TK</span><span class="p">,</span> <span class="n">CHPT</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ë„¤íŠ¸ì›Œí¬ íƒ­ì„ ë³´ë©´ í•´ë‹¹ APIì— 2ë²ˆ POSTìš”ì²­ì„ ë³´ëƒ…ë‹ˆë‹¤. í—¤ë”ê°’ì— ë”°ë¼ ë°›ì•„ì˜¤ëŠ” ì±„íŒ… ì—°ê²° ë„ë©”ì¸ê°’ì´ ë³€ê²½ë˜ë¯€ë¡œ í—¤ë” ì„¤ì •ì„ ê¼­ ì˜í•´ì£¼ì–´ì•¼í•©ë‹ˆë‹¤.</p>
<p><figure class="align-center ">
    <img loading="lazy" src="../img/20.png#center"
         alt="í—¤ë” ì°¸ê³ "/> <figcaption>
            <p>í—¤ë” ì°¸ê³ </p>
        </figcaption>
</figure>

í—¤ë”ëŠ” ë„¤íŠ¸ì›Œí¬íƒ­ì—ì„œ í™•ì¸í•  ìˆ˜ ìˆìœ¼ë©° ê·¸ëŒ€ë¡œ ì§„í–‰í•˜ì˜€ìŠµë‹ˆë‹¤.. ë‹¨, ì¤‘ê°„ì— PdboxSaveTicketì˜ ê²½ìš° <strong>ë¡œê·¸ì¸</strong> í˜¹ì€ <strong>ì¼ì • ì‹œê°„ ì´í›„</strong> ë³€ê²½ë˜ëŠ” ê²ƒìœ¼ë¡œ í™•ì¸í•˜ì˜€ìŠµë‹ˆë‹¤. ë”°ë¼ì„œ í…ŒìŠ¤íŠ¸ í•˜ë‹¤ê°€ ì±„íŒ… ë‚´ìš©ì„ ë¶ˆëŸ¬ ì˜¬ ìˆ˜ ì—†ì„ ê²½ìš°ì— í—¤ë”ë¥¼ ì¼ë‹¨ ë³€ê²½í•´ì£¼ë©´ ì±„íŒ…ë°© URLì„ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤ (<em>í—¤ë” ì—†ì–´ë„ ì±„íŒ…ë°© url ë°›ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤</em>)</p>
<br>
<blockquote>
<h4 id="ì²«ë²ˆì§¸-í•¸ë“œì‰ì´í¬-í‚¤ê°’-ì°¾ê¸°">ì²«ë²ˆì§¸ í•¸ë“œì‰ì´í¬ í‚¤ê°’ ì°¾ê¸°<a hidden class="anchor" aria-hidden="true" href="#ì²«ë²ˆì§¸-í•¸ë“œì‰ì´í¬-í‚¤ê°’-ì°¾ê¸°">#</a></h4>
</blockquote>
<p><figure class="align-center ">
    <img loading="lazy" src="../img/19.png#center"
         alt="ì‹œë ¥ì´ ì•½ 0.1 ì •ë„ ê°ì†Œëœë“¯ í•˜ë‹¤"/> <figcaption>
            <p>ì‹œë ¥ì´ ì•½ 0.1 ì •ë„ ê°ì†Œëœë“¯ í•˜ë‹¤</p>
        </figcaption>
</figure>

í•¸ë“œì‰ì´í¬ ê°’ì„ ë¹„êµí•´ë³´ë‹ˆ <strong>ë³€ê²½ë˜ëŠ”ë¶€ë¶„, ê³ ì •ì¸ë¶€ë¶„, APIë¡œ ë¶ˆëŸ¬ì˜¤ëŠ”ë¶€ë¶„</strong>ì´ ìˆì—ˆìŠµë‹ˆë‹¤.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="n">secret_1</span> <span class="o">=</span> <span class="sa">f</span><span class="s1">&#39;	000100058200.</span><span class="si">{</span><span class="n">tk</span><span class="si">}</span><span class="s1">16&#39;</span>
</span></span><span class="line"><span class="cl"><span class="n">secret_2</span> <span class="o">=</span> <span class="sa">f</span><span class="s1">&#39;	000200030000</span><span class="si">{</span><span class="n">chat_no</span><span class="si">}</span><span class="s1"></span><span class="si">{</span><span class="n">ftk</span><span class="si">}</span><span class="s1">0log&amp;set_bps=8000&amp;view_bps=1000&amp;quality=normal&amp;uuid=1e43cf6d37913c36b35d580e0b5656ec&amp;geo_cc=KR&amp;geo_rc=11&amp;acpt_lang=ko_KR&amp;svc_lang=ko_KR&amp;join_cc=410pwdauth_infoNULLpver1access_systemhtml5&#39;</span>
</span></span></code></pre></td></tr></table>
</div>
</div><ul>
<li>
<p>secret_1 ì˜ ê²½ìš°ì— 0001000<strong>5820</strong>0 (5820 ë¶€ë¶„)</p>
</li>
<li>
<p>secret_2 ì˜ ê²½ìš°ì— 0002000<strong>3000</strong>0 (3000 ë¶€ë¶„)</p>
</li>
</ul>
<p>ì¼ë‹¨ ë°©ì†¡ì¤‘ì¸ ë°©ì„ ì…€ë ˆëŠ„ìœ¼ë¡œ ë°›ì•„ì™€ì„œ ì•„ê¹Œ ì°¾ì€ APIì— ë‚ ë ¤ì„œ ì–´ë– í•œ ê³µí†µì ë“¤ì´ ìˆëŠ”ì§€ í™•ì¸í•´ë³´ë ¤í•©ë‹ˆë‹¤.</p>
<p>í…ŒìŠ¤íŠ¸ ì½”ë“œ</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="kn">from</span> <span class="nn">selenium</span> <span class="kn">import</span> <span class="n">webdriver</span>
</span></span><span class="line"><span class="cl"><span class="kn">from</span> <span class="nn">selenium.webdriver.common.by</span> <span class="kn">import</span> <span class="n">By</span>
</span></span><span class="line"><span class="cl"><span class="kn">from</span> <span class="nn">selenium.webdriver.chrome.service</span> <span class="kn">import</span> <span class="n">Service</span>
</span></span><span class="line"><span class="cl"><span class="kn">from</span> <span class="nn">webdriver_manager.chrome</span> <span class="kn">import</span> <span class="n">ChromeDriverManager</span>
</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">requests</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># DRIVER = webdriver.Chrome(service=Service(ChromeDriverManager().install()))</span>
</span></span><span class="line"><span class="cl"><span class="n">DRIVER</span> <span class="o">=</span> <span class="n">webdriver</span><span class="o">.</span><span class="n">Chrome</span><span class="p">(</span><span class="s1">&#39;./chromedriver&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="n">url</span> <span class="o">=</span> <span class="s1">&#39;https://www.afreecatv.com/&#39;</span>
</span></span><span class="line"><span class="cl"><span class="n">DRIVER</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="n">DRIVER</span><span class="o">.</span><span class="n">implicitly_wait</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">href</span> <span class="o">=</span> <span class="p">[]</span>
</span></span><span class="line"><span class="cl"><span class="n">cBox_info</span> <span class="o">=</span> <span class="n">DRIVER</span><span class="o">.</span><span class="n">find_elements</span><span class="p">(</span><span class="n">By</span><span class="o">.</span><span class="n">CLASS_NAME</span><span class="p">,</span> <span class="s1">&#39;cBox-info&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">cBox_info</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">    <span class="n">url</span> <span class="o">=</span> <span class="n">c</span><span class="o">.</span><span class="n">find_element</span><span class="p">(</span><span class="n">By</span><span class="o">.</span><span class="n">CLASS_NAME</span><span class="p">,</span> <span class="s1">&#39;title&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">get_attribute</span><span class="p">(</span><span class="s1">&#39;href&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="nb">print</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="n">href</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">for</span> <span class="n">h</span> <span class="ow">in</span> <span class="n">href</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">    <span class="n">bid</span> <span class="o">=</span> <span class="n">h</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;/&#39;</span><span class="p">)[</span><span class="o">-</span><span class="mi">2</span><span class="p">]</span>
</span></span><span class="line"><span class="cl">    <span class="n">bno</span> <span class="o">=</span> <span class="n">h</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;/&#39;</span><span class="p">)[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
</span></span><span class="line"><span class="cl">    <span class="n">res</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">post</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;https://live.afreecatv.com/afreeca/player_live_api.php?bjid=</span><span class="si">{</span><span class="n">bid</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;bid&#39;</span><span class="p">:</span> <span class="n">bid</span><span class="p">,</span> <span class="s1">&#39;bno&#39;</span><span class="p">:</span><span class="n">bno</span><span class="p">,</span> <span class="s1">&#39;type&#39;</span><span class="p">:</span><span class="s1">&#39;live&#39;</span><span class="p">,</span> <span class="s1">&#39;confirm_adult&#39;</span><span class="p">:</span><span class="s1">&#39;false&#39;</span><span class="p">,</span> <span class="s1">&#39;player_type&#39;</span><span class="p">:</span><span class="s1">&#39;html5&#39;</span><span class="p">,</span> <span class="s1">&#39;mode&#39;</span><span class="p">:</span><span class="s1">&#39;landing&#39;</span><span class="p">,</span> <span class="s1">&#39;from_api&#39;</span><span class="p">:</span><span class="s1">&#39;0&#39;</span><span class="p">,</span><span class="s1">&#39;pwd&#39;</span><span class="p">:</span><span class="s1">&#39;&#39;</span><span class="p">,</span><span class="s1">&#39;stream_type&#39;</span><span class="p">:</span><span class="s1">&#39;common&#39;</span><span class="p">,</span><span class="s1">&#39;quality&#39;</span><span class="p">:</span><span class="s1">&#39;HD&#39;</span><span class="p">},</span> <span class="n">headers</span><span class="o">=</span><span class="n">headers</span><span class="p">)</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">    <span class="n">CHDOMAIN</span> <span class="o">=</span> <span class="n">res</span><span class="p">[</span><span class="s2">&#34;CHANNEL&#34;</span><span class="p">][</span><span class="s2">&#34;CHDOMAIN&#34;</span><span class="p">]</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">    <span class="n">CHATNO</span> <span class="o">=</span> <span class="n">res</span><span class="p">[</span><span class="s2">&#34;CHANNEL&#34;</span><span class="p">][</span><span class="s2">&#34;CHATNO&#34;</span><span class="p">]</span>
</span></span><span class="line"><span class="cl">    <span class="n">FTK</span> <span class="o">=</span> <span class="n">res</span><span class="p">[</span><span class="s2">&#34;CHANNEL&#34;</span><span class="p">][</span><span class="s2">&#34;FTK&#34;</span><span class="p">]</span>
</span></span><span class="line"><span class="cl">    <span class="n">TITLE</span> <span class="o">=</span> <span class="n">res</span><span class="p">[</span><span class="s2">&#34;CHANNEL&#34;</span><span class="p">][</span><span class="s2">&#34;TITLE&#34;</span><span class="p">]</span>
</span></span><span class="line"><span class="cl">    <span class="n">BJID</span> <span class="o">=</span> <span class="n">res</span><span class="p">[</span><span class="s2">&#34;CHANNEL&#34;</span><span class="p">][</span><span class="s2">&#34;BJID&#34;</span><span class="p">]</span>
</span></span><span class="line"><span class="cl">    <span class="n">TK</span> <span class="o">=</span> <span class="n">res</span><span class="p">[</span><span class="s2">&#34;CHANNEL&#34;</span><span class="p">][</span><span class="s2">&#34;BJID&#34;</span><span class="p">]</span>
</span></span><span class="line"><span class="cl">    <span class="nb">print</span><span class="p">(</span><span class="n">CHDOMAIN</span><span class="p">,</span> <span class="n">CHATNO</span><span class="p">,</span> <span class="n">FTK</span><span class="p">,</span> <span class="n">TITLE</span><span class="p">,</span> <span class="n">BJID</span><span class="p">)</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>í…ŒìŠ¤íŠ¸ ê²°ê³¼</p>
<figure class="align-center ">
    <img loading="lazy" src="../img/5.gif#center"
         alt="ì…€ë ˆëŠ„&amp;hellip; ë‹¤ì‹œ ë³´ë‹ˆ ì„ ë…€ ê°™ë‹¤"/> <figcaption>
            <p>ì…€ë ˆëŠ„&hellip; ë‹¤ì‹œ ë³´ë‹ˆ ì„ ë…€ ê°™ë‹¤</p>
        </figcaption>
</figure>

<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-fallback" data-lang="fallback"><span class="line"><span class="cl">chat-dee93642.afreecatv.com 1832 b730cac99de4c43e485636cd95a95171_ahrasmall_245682917_html5 ì‹ ì…ì—¬ìº  ì˜ˆìœìŒë°© ì°¾ëŠ”ì‚¬ëŒâ™¥ì‹ ì²­ê³¡ ë¸Œê¸ˆ ë¼ì´ë¸Œ ë½‘ê¸° ìŠ¤ì¿¼íŠ¸ ahrasmall
</span></span><span class="line"><span class="cl">chat-6e0a4c42.afreecatv.com 401 ee461619bb3d078951729641e140f043_wkdtnvndeod2_245680218_html5 ì‰¬ê³ ì˜¨ í¼ ì–´ë–¨ë€ê°(ë§ë°© ë§ì¦ ë§íŒ¬ ë¯¸ì…˜ í™˜ì˜ ì‹œì°¸ ê°€ëŠ¥) wkdtnvndeod2
</span></span><span class="line"><span class="cl">chat-dee93642.afreecatv.com 8068 db550a2aa702133b90053db49559fc32_0100151_245682923_html5 [ì‹ ì…]ë¡¤ 3ì¼ì°¨ ì¹¼ë°”ëŒ ì‹œì°¸ë°©ì†¡ à·†.Ì®à·†  0100151
</span></span><span class="line"><span class="cl">chat-dee93642.afreecatv.com 8041 f771fc0888b0b5a27b6f40700c3b6d3a_truelight89_245682906_html5 ë§¤ì¼ 9am ì•„ì¤Œë§ˆ ì˜ì´ë‘ ë²šê½ƒ êµ¬ê²½ ê°ˆ ì‚¬ëŒ? truelight89
</span></span><span class="line"><span class="cl">chat-dee93642.afreecatv.com 8007 fabe810c6f46dcea461c4510eadf8dca_wkdrn0405_245677828_html5 ì‹¤ë²„ 4ì˜ ë­ê²œì—ëŠ” ì–´ë–¤ ì‚¬ëŒë“¤ì´ ìˆì„ê¹Œ? wkdrn0405
</span></span><span class="line"><span class="cl">chat-dee93642.afreecatv.com 1617 82b9432c8b887e2e53b60771e3fcf919_pmw1131_245683267_html5 ì‹ ì…ë‚¨ìº  58ì¼ì°¨ğŸ’‹ì˜¤ëŠ˜ì€ ë ˆëª¬ì¹˜ì¦ˆì˜ ë‚ ğŸ§€ pmw1131
</span></span><span class="line"><span class="cl">chat-6e0a4c42.afreecatv.com 5137 c4f178bf7263e2bd265bd76efd824556_louloumomo_245682407_html5 ë¯¸êµ­ì—¬ìì˜ ì¼ë³¸ì—¬í–‰ ë¹„í–‰ê¸°ë†“ì¹¨ louloumomo
</span></span><span class="line"><span class="cl">chat-dee93642.afreecatv.com 6986 2ecd8e2f6a77e283736425eac8eec0f9_namnice1_245682825_html5  ì—…ì‚¬ë¶€ íˆ¬ììˆ˜ì—…!! í™˜ìƒì  ìˆ˜ìµí–‰ì§„~!#ì£¼ì‹#ELW#ì„ ë¬¼ì˜µì…˜#í•´ì™¸ì„ ë¬¼!!#ì£¼ë¦°ì´#ì—…ì‚¬ë¶€#í™©ê¸ˆì•Œ#ê¹€ì„±ë‚¨#ë¶ˆê°œë¯¸#ì½”ì¸! namnice1
</span></span><span class="line"><span class="cl">chat-dee93642.afreecatv.com 1832 4026375bc10725e389daf8da51889779_ahrasmall_245682917_html5 ì‹ ì…ì—¬ìº  ì˜ˆìœìŒë°© ì°¾ëŠ”ì‚¬ëŒâ™¥ì‹ ì²­ê³¡ ë¸Œê¸ˆ ë¼ì´ë¸Œ ë½‘ê¸° ìŠ¤ì¿¼íŠ¸ ahrasmall
</span></span><span class="line"><span class="cl">chat-6e0a4c42.afreecatv.com 401 57d27877f877ef1e80f62e31fb814884_wkdtnvndeod2_245680218_html5 ì‰¬ê³ ì˜¨ í¼ ì–´ë–¨ë€ê°(ë§ë°© ë§ì¦ ë§íŒ¬ ë¯¸ì…˜ í™˜ì˜ ì‹œì°¸ ê°€ëŠ¥) wkdtnvndeod2
</span></span><span class="line"><span class="cl">chat-dee93642.afreecatv.com 8068 c629e4348ac69be8f452569494d7a869_0100151_245682923_html5 [ì‹ ì…]ë¡¤ 3ì¼ì°¨ ì¹¼ë°”ëŒ ì‹œì°¸ë°©ì†¡ à·†.Ì®à·†  0100151
</span></span><span class="line"><span class="cl">chat-dee93642.afreecatv.com 8041 904c6dc021fa1ae3fabff201d15101d2_truelight89_245682906_html5 ë§¤ì¼ 9am ì•„ì¤Œë§ˆ ì˜ì´ë‘ ë²šê½ƒ êµ¬ê²½ ê°ˆ ì‚¬ëŒ? truelight89
</span></span><span class="line"><span class="cl">chat-dee93642.afreecatv.com 8007 5b21a6ddb7a1729111762b5b39dcb56c_wkdrn0405_245677828_html5 ì‹¤ë²„ 4ì˜ ë­ê²œì—ëŠ” ì–´ë–¤ ì‚¬ëŒë“¤ì´ ìˆì„ê¹Œ? wkdrn0405
</span></span><span class="line"><span class="cl">chat-dee93642.afreecatv.com 1617 1931b0cc33b8ecf29a8569007f6f815b_pmw1131_245683267_html5 ì‹ ì…ë‚¨ìº  58ì¼ì°¨ğŸ’‹ì˜¤ëŠ˜ì€ ë ˆëª¬ì¹˜ì¦ˆì˜ ë‚ ğŸ§€ pmw1131
</span></span><span class="line"><span class="cl">chat-6e0a4c42.afreecatv.com 5137 4a71361598af0d481297fc7439aa7a76_louloumomo_245682407_html5 ë¯¸êµ­ì—¬ìì˜ ì¼ë³¸ì—¬í–‰ ë¹„í–‰ê¸°ë†“ì¹¨ louloumomo
</span></span><span class="line"><span class="cl">chat-dee93642.afreecatv.com 6986 f8967d0187c2169670e9da82005928d0_namnice1_245682825_html5  ì—…ì‚¬ë¶€ íˆ¬ììˆ˜ì—…!! í™˜ìƒì  ìˆ˜ìµí–‰ì§„~!#ì£¼ì‹#ELW#ì„ ë¬¼ì˜µì…˜#í•´ì™¸ì„ ë¬¼!!#ì£¼ë¦°ì´#ì—…ì‚¬ë¶€#í™©ê¸ˆì•Œ#ê¹€ì„±ë‚¨#ë¶ˆê°œë¯¸#ì½”ì¸! namnice1
</span></span><span class="line"><span class="cl">chat-dee93642.afreecatv.com 703 74a4437c1f784a3c32e1ce14c3fb80a0_lovely5959_245674550_html5 ìˆ˜í”¼ ìˆ˜í› ìŠ¤ë§µ ë¯¼êµ vs ë‚˜ë‹ ì‚¬ì¥ ë°§ë“œ êµìš©    í‚¬ë‚´ê¸° ì‚¬ë¹„ë¹µ lovely5959
</span></span><span class="line"><span class="cl">chat-6e0a4c42.afreecatv.com 9996 6aef02482a9b6446d4736b8ab4416d5e_townboy_245672930_html5 ìŠ¤ë§µì„ë‹ˆë‹¤ ë°°ê·¸ì˜ì‹  ^^ townboy
</span></span><span class="line"><span class="cl">chat-6e0a4c42.afreecatv.com 3761 a5be977fac8f11d27de3f7c62b8261ff_drumkyn_245683107_html5 ì£¼ì‹ì™•ìš©ëŠâ˜…ì •ì‹ ì°¨ë¦¬ê³  ì™”ìŠµë‹ˆë‹¤  drumkyn
</span></span><span class="line"><span class="cl">chat-dee93642.afreecatv.com 4320 bd63b62701fdc62dd804baae84987e4c_wnstn0905_245674053_html5 ë°•ì‚¬ì¥ í‚¬ë‚´ê¸° ^^ wnstn0905
</span></span><span class="line"><span class="cl">chat-6e0a4c42.afreecatv.com 59 070c9c5fdcc4fa5c73ba74ed03534fa5_since821_245144841_html5 [ìƒ]ìŒì•…ë°©ì†¡ ë©œë¡  ì¸ê¸°ê°€ìš” ìŠ¬í”ˆë°œë¼ë“œ 24ì‹œê°„ ë“£ê¸° ì¢‹ì€ ë…¸ë˜ ëª…ê³¡ 100 íˆíŠ¸ê³¡ ì°¨íŠ¸ìŒë°©ìµœì‹ ê°€ìš”íŒì†¡í™í•©ëŒ„ìŠ¤ê³¡ë®¤ì§ë¼ë””ì˜¤í€µë·°ì‹ ì…BJ since821
</span></span><span class="line"><span class="cl">chat-dee93642.afreecatv.com 7213 7eca7d68afba49201955e48b2114c1e6_na2un_245679460_html5 ì‚¬ë¹„ë¹µ ^ã…›^ na2un
</span></span><span class="line"><span class="cl">chat-6e0a4c42.afreecatv.com 1979 30c8f01aed8e85431af29005ebdba03e_giltae1124_245682339_html5 ë§ˆìŠ¤í„° ìŠ¹ê¸‰ì „ 1ìŠ¹1íŒ¨ giltae1124
</span></span><span class="line"><span class="cl">chat-6e0a4c42.afreecatv.com 5065 d70b5ea61501657e88a5000944275e2b_wwe1_245682996_html5 [ìƒë°©ì†¡] WWE RAW LIVE 1557íšŒ wwe1
</span></span><span class="line"><span class="cl">chat-dee93642.afreecatv.com 1595 b9fdf6637769710dcc39155c194583b0_dldmssk_245683163_html5 ëŠ¦ì—ˆìŠµë‹ˆë‹¤ dldmssk
</span></span><span class="line"><span class="cl">chat-6e0a4c42.afreecatv.com 6667 55f36f872db59d3c3db4f2e992987db0_tsoul7_245664669_html5 ëŒ€í•œë¯¼êµ­ ì–´ì£½1ë“± ëŒ€í¥ì‹ë‹¹ tsoul7
</span></span><span class="line"><span class="cl">chat-dee93642.afreecatv.com 8486 a7a7b4c0417d781f8c0a9771479b7b29_suhee0051_245677530_html5 ìˆ˜í› ìˆ˜í”¼ ìŠ¤ë§µ ë¯¼êµ vs  ë‚˜ë‹ ì‚¬ì¥ ë°§ë“œ êµìš©   í‚¬ë‚´ê¸° ì•¼ë¯¸ suhee0051
</span></span><span class="line"><span class="cl">chat-dee93642.afreecatv.com 4542 16a1bc62a4d357a422e9aa2f63f4fac0_wnddnjs3124_245682295_html5 ì˜¤ëŠ˜ íƒœêµ­ ì¶œêµ­í•©ë‹ˆë‹¤ ì €ëŠ” ë¹„í–‰ê¸°ê°’ ê²Œì´ì§€ ì•ˆì°¨ë©´ ì•ˆê°‘ë‹ˆë‹¤ ......ë¶€ì²œ ì •ì¤‘ë§Œ ì„¤ì˜ìš± ì™€ì´í¼ ì´ìˆ˜í˜ ë‚˜ë£¨í†  í’ˆë°” ë°•ê³µ í•˜ë¥´ wnddnjs3124
</span></span><span class="line"><span class="cl">chat-6e0a4c42.afreecatv.com 1779 3dd7b7d32ebe399045c639d71874d558_sunwo2534_245683271_html5 JUP ë‰´ìŠ¤ ë¶„ëŸ‰ì „ìŸ íŠ¹ë³„ê²ŒìŠ¤íŠ¸ í•¨ê»˜ Xì•¼ì˜¹ë¯¼ì§€ sunwo2534
</span></span><span class="line"><span class="cl">chat-6e0a4c42.afreecatv.com 2010 58c69912e19990fa9cc3fcf7bd3d5dd3_gjgj3274_245683016_html5 ìŠ¤íƒ€ ì†Œë£¡ì´ ë˜ë” ê°•ì˜ë°©ì†¡ ìš•í•˜ëŸ¬ì˜¤ì§€ë§ˆì„¸ìš”. gjgj3274
</span></span><span class="line"><span class="cl">chat-6e0a4c42.afreecatv.com 9853 acf465cffcb8a267607f0fcf47507432_todakman1151_245682511_html5 ë“œë¦´ë§ì”€ì´ ìˆìŠµë‹ˆë‹¤ (ì–´ê·¸ë¡œì„) ë²”í”„ë¦¬ì¹´ todakman1151
</span></span><span class="line"><span class="cl">chat-6e0a4c42.afreecatv.com 7662 ccd30ea7baa9e681d74244b058b72810_dlrnf_245683294_html5 ê¸´ê¸‰íšŒì˜ ì‹œì‘ í•©ë‹ˆë‹¤_ì„¸ìŒì»´í¼ë‹ˆ x ì„¸ì°¬ dlrnf
</span></span><span class="line"><span class="cl">chat-dee93642.afreecatv.com 7871 872ef2c55774dfcac9278408bdb2881d_o31511_245682721_html5  [ë¬´íŒŒ] ë‹¤ì´ì•„ 77ê°œ ìºê¸° [ë¡œë‚˜ì›”ë“œ:ì„œìˆ˜ê¸¸í˜•ë‹˜] o31511
</span></span><span class="line"><span class="cl">...
</span></span></code></pre></td></tr></table>
</div>
</div><p>ì±„íŒ… URLì˜ ê²½ìš° <strong>ë‘ê°€ì§€</strong>ë¡œ ì–´ë–»ê²Œ ë¶„ë¥˜í•˜ëŠ”ì§„ í™•ì¸í•  ìˆ˜ ì—†ìœ¼ë‚˜ urlì—ì„œ ì±„íŒ…ë²ˆí˜¸ë¥¼ ê¸°ì¤€ìœ¼ë¡œ ë°©ì…ì¥ì´ ë˜ëŠ” ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆì—ˆìŠµë‹ˆë‹¤. í…ŒìŠ¤íŠ¸ í¬ë¡¤ë§ìœ¼ë¡œ í•¸ë“œì‰ì´í¬ì— ëŒ€í•œ ìœ ì˜ë¯¸í•œ ê²°ê³¼ë¥¼ ì–»ì§„ ëª»í–ˆìŠµë‹ˆë‹¤.</p>
<p>ğŸ’¡ ê·¸ëŸ¬ë˜ì¤‘ PdTicket ê°’ì´ APIì—ì„œ ë¶ˆëŸ¬ì™€ì§ˆë•Œ ì¿ í‚¤ê°€ ì—†ìœ¼ë©´ ë¶ˆëŸ¬ì™€ì§€ì§ˆ ì•ŠëŠ”ë‹¤ëŠ” ê²ƒì„ ë³´ê³  <strong>ë¹„íšŒì›</strong> ì¦‰ ì¿ í‚¤ì— í‹°ì¼“ê°’ì´ ì—†ëŠ” ìƒíƒœë¡œ ì§„í–‰í•˜ê¸°ë¡œ í•˜ì˜€ìŠµë‹ˆë‹¤. ë¹„íšŒì›ì¼ ê²½ìš°ì— ì²«ë²ˆì§¸ í•¸ë“œì‰ì´í¬ë•Œ í•´ë‹¹ í‹°ì¼“ê°’ (ë¡œê·¸ì¸ ì •ë³´)ë¥¼ ë°›ì§€ ì•Šê¸° ë–„ë¬¸ì— í‹°ì¼“ê°’ì´ ê°±ì‹ ë˜ê±°ë‚˜ í—¤ë”ê°€ ë³€ê²½ë˜ëŠ” ê²½ìš°ë¥¼ ì œì™¸í•´ë„ ëœë‹¤ëŠ” ì´ì ì´ ìˆìŠµë‹ˆë‹¤.</p>
<ul>
<li>
<p>ë¹„íšŒì› í…ŒìŠ¤íŠ¸ ê²°ê³¼</p>
</li>
<li>
<p>ì²«ë²ˆì§¸ í‚¤ ê°’ secret_1</p>
<p>ì „: 0001000<strong>XX20</strong>0.A32.<strong>XXX</strong>..</p>
<p>í›„: 000100000600.16 (ê³ ì •)</p>
</li>
<li>
<p>ë‘ë²ˆì§¸ í‚¤ ê°’ secret_2</p>
<p>ì „: 0002000<strong>3XX</strong>0 (ë¡œê·¸ì¸ ì¿ í‚¤ê°’ì´ ìˆì„ ê²½ìš°ì—)</p>
<p>í›„: 0002000<strong>2XX</strong>0 (ë¹„íšŒì›)</p>
</li>
</ul>
<p>ì²«ë²ˆì§¸ í•¸ë“œì‰ì´í¬ëŠ” ê³ ì •ì´ë¯€ë¡œ í•„ìš”í•œ 3ê°œ ê°’ ì¤‘ 2ê°œëŠ” í•´ê²° ë˜ì—ˆìŠµë‹ˆë‹¤.</p>
<br>
<blockquote>
<h4 id="ë‘ë²ˆì§¸-í•¸ë“œì‰ì´í¬-í‚¤ê°’-ì°¾ê¸°">ë‘ë²ˆì§¸ í•¸ë“œì‰ì´í¬ í‚¤ê°’ ì°¾ê¸°<a hidden class="anchor" aria-hidden="true" href="#ë‘ë²ˆì§¸-í•¸ë“œì‰ì´í¬-í‚¤ê°’-ì°¾ê¸°">#</a></h4>
</blockquote>
<p>ì´ì œ ë‚¨ì€ê±´ ë‘ë²ˆì§¸ í•¸ë“œì‰ì´í¬ ì¸ë° ìœ„ ì²˜ëŸ¼ 2ìë¦¬ ìˆ«ìê°€ ê°ì´ ì˜¤ì§ˆ ì•Šì•„ì„œ ë¬´ì‘ì • ì •ë¦¬í•´ë³´ê¸° ì‹œì‘í–ˆìŠµë‹ˆë‹¤. ë„¤íŠ¸ì›Œí¬íƒ­ ë‘ë²ˆì§¸ í•¸ë“œì‰ì´í¬ í‚¤ê°’, bjë‹‰ë„¤ì„, ë‹‰ë„¤ì„ ê¸¸ì´ë¥¼ ë¬´ì‘ì • ì ì–´ë³´ê¸° ì‹œì‘í–ˆìŠµë‹ˆë‹¤.</p>
<figure class="align-center ">
    <img loading="lazy" src="../img/21.png#center"/> 
</figure>

<p>ì •ë¦¬í•´ë³´ë‹ˆ ë‹‰ë„¤ì„ ê¸¸ì´ì— ë”°ë¥¸ ê·œì¹™ì„ ì°¾ì„ ìˆ˜ ìˆì—ˆìŠµë‹ˆë‹¤.
<figure class="align-center ">
    <img loading="lazy" src="../img/22.png#center"/> 
</figure>
</p>
<p>ì—¬ê¸°ì„œ ì´ìƒí•œê±´ <code>lovely5959</code> ë§Œ ë­”ê°€ -1 ì˜¤ì°¨ê°€ ìˆì—ˆìŠµë‹ˆë‹¤. ì°œì°œí•˜ê¸°ëŠ” í•´ë„ ëœë¤í…ŒìŠ¤íŠ¸í•´ë„ ê±°ì˜ ë‹¤ ë§ê¸´ í•´ë„ <strong>100% ì •í™•í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤</strong></p>
<blockquote>
<h4 id="ì½”ë“œ">ì½”ë“œ<a hidden class="anchor" aria-hidden="true" href="#ì½”ë“œ">#</a></h4>
</blockquote>


<div class="terminal space shadow">
  <div class="top">
    <div class="btns">
      <span class="circle red"></span>
      <span class="circle yellow"></span>
      <span class="circle green"></span>
    </div>
    <div class="title">
      ì•„í”„ë¦¬ì¹´ TV ì‹¤ì‹œê°„ ì±„íŒ… ê¸ì–´ì˜¤ê¸°.ìµœì¢….ìµœì¢…,ìµœì¢….ìµœì¢…ì˜ìµœì¢…...
    </div>
  </div>
  <div class="terminalbody"><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span><span class="lnt">51
</span><span class="lnt">52
</span><span class="lnt">53
</span><span class="lnt">54
</span><span class="lnt">55
</span><span class="lnt">56
</span><span class="lnt">57
</span><span class="lnt">58
</span><span class="lnt">59
</span><span class="lnt">60
</span><span class="lnt">61
</span><span class="lnt">62
</span><span class="lnt">63
</span><span class="lnt">64
</span><span class="lnt">65
</span><span class="lnt">66
</span><span class="lnt">67
</span><span class="lnt">68
</span><span class="lnt">69
</span><span class="lnt">70
</span><span class="lnt">71
</span><span class="lnt">72
</span><span class="lnt">73
</span><span class="lnt">74
</span><span class="lnt">75
</span><span class="lnt">76
</span><span class="lnt">77
</span><span class="lnt">78
</span><span class="lnt">79
</span><span class="lnt">80
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">certifi</span>
</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">json</span>
</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">ssl</span>
</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">base64</span>
</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">asyncio</span>
</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">requests</span>
</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">websockets</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># WSS ì—°ê²° ìœ„í•œ SSL ì„¤ì •</span>
</span></span><span class="line"><span class="cl"><span class="n">ssl_context</span> <span class="o">=</span> <span class="n">ssl</span><span class="o">.</span><span class="n">create_default_context</span><span class="p">()</span>
</span></span><span class="line"><span class="cl"><span class="n">ssl_context</span><span class="o">.</span><span class="n">load_verify_locations</span><span class="p">(</span><span class="n">certifi</span><span class="o">.</span><span class="n">where</span><span class="p">())</span>
</span></span><span class="line"><span class="cl"><span class="n">ssl_context</span><span class="o">.</span><span class="n">check_hostname</span> <span class="o">=</span> <span class="kc">False</span>
</span></span><span class="line"><span class="cl"><span class="n">ssl_context</span><span class="o">.</span><span class="n">verify_mode</span> <span class="o">=</span> <span class="n">ssl</span><span class="o">.</span><span class="n">CERT_NONE</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">def</span> <span class="nf">decode</span><span class="p">(</span><span class="nb">bytes</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">    <span class="n">test</span> <span class="o">=</span> <span class="nb">bytes</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="sa">b</span><span class="s1">&#39;</span><span class="se">\x0c</span><span class="s1">&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="n">res</span> <span class="o">=</span> <span class="p">[]</span>
</span></span><span class="line"><span class="cl">    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">test</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">        <span class="n">res</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="s1">&#39;utf-8&#39;</span><span class="p">))</span>
</span></span><span class="line"><span class="cl">    <span class="k">if</span><span class="p">(</span><span class="n">res</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">!=</span> <span class="s1">&#39;-1&#39;</span> <span class="ow">and</span> <span class="n">res</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">!=</span> <span class="s1">&#39;1&#39;</span> <span class="ow">and</span> <span class="s1">&#39;|&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">res</span><span class="p">[</span><span class="mi">1</span><span class="p">]):</span>
</span></span><span class="line"><span class="cl">        <span class="k">if</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">res</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">5</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">            <span class="nb">print</span><span class="p">(</span><span class="n">res</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="s1">&#39;</span><span class="se">\t</span><span class="s1">| &#39;</span><span class="p">,</span> <span class="n">res</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="s1">&#39;|&#39;</span><span class="p">,</span> <span class="n">res</span><span class="p">[</span><span class="mi">6</span><span class="p">])</span>
</span></span><span class="line"><span class="cl">        <span class="k">else</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">            <span class="nb">print</span><span class="p">(</span><span class="n">res</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">            <span class="k">pass</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">def</span> <span class="nf">player_live_api</span><span class="p">(</span><span class="n">bno</span><span class="p">,</span> <span class="n">bid</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">    <span class="c1"># type=aid ì¼ ê²½ìš° aid(.A32~~~)ë¶ˆëŸ¬ì˜´</span>
</span></span><span class="line"><span class="cl">    <span class="n">data</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;bid&#39;</span><span class="p">:</span> <span class="n">bid</span><span class="p">,</span> <span class="s1">&#39;bno&#39;</span><span class="p">:</span><span class="n">bno</span><span class="p">,</span> <span class="s1">&#39;type&#39;</span><span class="p">:</span><span class="s1">&#39;live&#39;</span><span class="p">,</span> <span class="s1">&#39;confirm_adult&#39;</span><span class="p">:</span><span class="s1">&#39;false&#39;</span><span class="p">,</span> <span class="s1">&#39;player_type&#39;</span><span class="p">:</span><span class="s1">&#39;html5&#39;</span><span class="p">,</span> <span class="s1">&#39;mode&#39;</span><span class="p">:</span><span class="s1">&#39;landing&#39;</span><span class="p">,</span> <span class="s1">&#39;from_api&#39;</span><span class="p">:</span><span class="s1">&#39;0&#39;</span><span class="p">,</span> <span class="s1">&#39;pwd&#39;</span><span class="p">:</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="s1">&#39;stream_type&#39;</span><span class="p">:</span><span class="s1">&#39;common&#39;</span><span class="p">,</span> <span class="s1">&#39;quality&#39;</span><span class="p">:</span><span class="s1">&#39;HD&#39;</span><span class="p">}</span>
</span></span><span class="line"><span class="cl">    <span class="n">res</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">post</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;https://live.afreecatv.com/afreeca/player_live_api.php?bjid=</span><span class="si">{</span><span class="n">bid</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">,</span> <span class="n">data</span><span class="o">=</span><span class="n">data</span><span class="p">)</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">    <span class="n">CHDOMAIN</span> <span class="o">=</span> <span class="n">res</span><span class="p">[</span><span class="s2">&#34;CHANNEL&#34;</span><span class="p">][</span><span class="s2">&#34;CHDOMAIN&#34;</span><span class="p">]</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">    <span class="n">CHATNO</span> <span class="o">=</span> <span class="n">res</span><span class="p">[</span><span class="s2">&#34;CHANNEL&#34;</span><span class="p">][</span><span class="s2">&#34;CHATNO&#34;</span><span class="p">]</span>
</span></span><span class="line"><span class="cl">    <span class="n">FTK</span> <span class="o">=</span> <span class="n">res</span><span class="p">[</span><span class="s2">&#34;CHANNEL&#34;</span><span class="p">][</span><span class="s2">&#34;FTK&#34;</span><span class="p">]</span>
</span></span><span class="line"><span class="cl">    <span class="n">TITLE</span> <span class="o">=</span> <span class="n">res</span><span class="p">[</span><span class="s2">&#34;CHANNEL&#34;</span><span class="p">][</span><span class="s2">&#34;TITLE&#34;</span><span class="p">]</span>
</span></span><span class="line"><span class="cl">    <span class="n">BJID</span> <span class="o">=</span> <span class="n">res</span><span class="p">[</span><span class="s2">&#34;CHANNEL&#34;</span><span class="p">][</span><span class="s2">&#34;BJID&#34;</span><span class="p">]</span>
</span></span><span class="line"><span class="cl">    <span class="n">CHPT</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="nb">int</span><span class="p">(</span><span class="n">res</span><span class="p">[</span><span class="s2">&#34;CHANNEL&#34;</span><span class="p">][</span><span class="s2">&#34;CHPT&#34;</span><span class="p">])</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="k">return</span> <span class="n">CHDOMAIN</span><span class="p">,</span> <span class="n">CHATNO</span><span class="p">,</span> <span class="n">FTK</span><span class="p">,</span> <span class="n">TITLE</span><span class="p">,</span> <span class="n">BJID</span><span class="p">,</span> <span class="n">CHPT</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">async</span> <span class="k">def</span> <span class="nf">connect</span><span class="p">(</span><span class="n">url</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">    <span class="n">BNO</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">url</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;/&#39;</span><span class="p">)[</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span>
</span></span><span class="line"><span class="cl">    <span class="n">BID</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">url</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;/&#39;</span><span class="p">)[</span><span class="o">-</span><span class="mi">2</span><span class="p">])</span>
</span></span><span class="line"><span class="cl">    <span class="n">CHDOMAIN</span><span class="p">,</span> <span class="n">CHATNO</span><span class="p">,</span> <span class="n">FTK</span><span class="p">,</span> <span class="n">TITLE</span><span class="p">,</span> <span class="n">BJID</span><span class="p">,</span> <span class="n">CHPT</span> <span class="o">=</span> <span class="n">player_live_api</span><span class="p">(</span><span class="n">BNO</span><span class="p">,</span> <span class="n">BID</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="n">KEY</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span>
</span></span><span class="line"><span class="cl">    <span class="k">if</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">BJID</span><span class="p">)</span> <span class="o">==</span> <span class="mi">5</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">        <span class="n">KEY</span> <span class="o">=</span> <span class="s1">&#39;80&#39;</span>
</span></span><span class="line"><span class="cl">    <span class="k">elif</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">BJID</span><span class="p">)</span> <span class="o">==</span> <span class="mi">6</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">        <span class="n">KEY</span> <span class="o">=</span> <span class="s1">&#39;81&#39;</span>
</span></span><span class="line"><span class="cl">    <span class="k">elif</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">BJID</span><span class="p">)</span> <span class="o">==</span> <span class="mi">7</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">        <span class="n">KEY</span> <span class="o">=</span> <span class="s1">&#39;82&#39;</span>
</span></span><span class="line"><span class="cl">    <span class="k">elif</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">BJID</span><span class="p">)</span> <span class="o">==</span> <span class="mi">8</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">        <span class="n">KEY</span> <span class="o">=</span> <span class="s1">&#39;83&#39;</span>
</span></span><span class="line"><span class="cl">    <span class="k">elif</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">BJID</span><span class="p">)</span> <span class="o">==</span> <span class="mi">9</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">        <span class="n">KEY</span> <span class="o">=</span> <span class="s1">&#39;84&#39;</span>
</span></span><span class="line"><span class="cl">    <span class="k">elif</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">BJID</span><span class="p">)</span> <span class="o">==</span> <span class="mi">10</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">        <span class="n">KEY</span> <span class="o">=</span> <span class="s1">&#39;85&#39;</span>
</span></span><span class="line"><span class="cl">    <span class="k">elif</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">BJID</span><span class="p">)</span> <span class="o">==</span> <span class="mi">11</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">        <span class="n">KEY</span> <span class="o">=</span> <span class="s1">&#39;86&#39;</span>
</span></span><span class="line"><span class="cl">    <span class="k">elif</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">BJID</span><span class="p">)</span> <span class="o">==</span> <span class="mi">12</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">        <span class="n">KEY</span> <span class="o">=</span> <span class="s1">&#39;87&#39;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="n">handshake</span> <span class="o">=</span> <span class="sa">f</span><span class="s1">&#39;	00020002</span><span class="si">{</span><span class="n">KEY</span><span class="si">}</span><span class="s1">00</span><span class="si">{</span><span class="n">CHATNO</span><span class="si">}</span><span class="s1"></span><span class="si">{</span><span class="n">FTK</span><span class="si">}</span><span class="s1">0log&amp;set_bps=8000&amp;view_bps=1000&amp;quality=normal&amp;uuid=1e43cf6d37913c36b35d580e0b5656ec&amp;geo_cc=KR&amp;geo_rc=11&amp;acpt_lang=ko_KR&amp;svc_lang=ko_KRpwdauth_infoNULLpver1access_systemhtml5&#39;</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="k">async</span> <span class="k">with</span> <span class="n">websockets</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="sa">f</span><span class="s2">&#34;wss://</span><span class="si">{</span><span class="n">CHDOMAIN</span><span class="si">}</span><span class="s2">:</span><span class="si">{</span><span class="n">CHPT</span><span class="si">}</span><span class="s2">/Websocket/</span><span class="si">{</span><span class="n">BID</span><span class="si">}</span><span class="s2">&#34;</span><span class="p">,</span> <span class="n">subprotocols</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;chat&#39;</span><span class="p">],</span><span class="n">ssl</span><span class="o">=</span><span class="n">ssl_context</span><span class="p">,</span> <span class="n">ping_interval</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span> <span class="k">as</span> <span class="n">websocket</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">        <span class="c1"># í•¸ë“œì‰ì´í¬</span>
</span></span><span class="line"><span class="cl">        <span class="c1"># await websocket.send(secret_1)</span>
</span></span><span class="line"><span class="cl">        <span class="k">await</span> <span class="n">websocket</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="s1">&#39;	00010000060016&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="n">data</span> <span class="o">=</span> <span class="k">await</span> <span class="n">websocket</span><span class="o">.</span><span class="n">recv</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">        <span class="k">await</span> <span class="n">websocket</span><span class="o">.</span><span class="n">send</span><span class="p">(</span><span class="n">handshake</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="c1"># ì´í›„ë¶€í„° ì±„íŒ…ë‚´ìš© ë°›ì•„ì™€ì§</span>
</span></span><span class="line"><span class="cl">        <span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">            <span class="k">try</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">                <span class="n">data</span> <span class="o">=</span> <span class="k">await</span> <span class="n">websocket</span><span class="o">.</span><span class="n">recv</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">                <span class="n">decode</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">                <span class="nb">print</span><span class="p">(</span><span class="s2">&#34;ERROR:&#34;</span><span class="p">,</span> <span class="n">e</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">                <span class="c1"># break</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">url</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s2">&#34;ì•„í”„ë¦¬ì¹´TV URLì„ ì…ë ¥í•´ì£¼ì„¸ìš” : &#34;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="n">asyncio</span><span class="o">.</span><span class="n">get_event_loop</span><span class="p">()</span><span class="o">.</span><span class="n">run_until_complete</span><span class="p">(</span><span class="n">connect</span><span class="p">(</span><span class="n">url</span><span class="p">))</span>
</span></span></code></pre></td></tr></table>
</div>
</div></div>
</div>
<br />

<blockquote>
<h4 id="ê²°ê³¼-1">ê²°ê³¼<a hidden class="anchor" aria-hidden="true" href="#ê²°ê³¼-1">#</a></h4>
</blockquote>
<figure class="align-center ">
    <img loading="lazy" src="../img/3.gif#center"/> 
</figure>

<br>
<h3 id="ë§ˆë¬´ë¦¬">ë§ˆë¬´ë¦¬<a hidden class="anchor" aria-hidden="true" href="#ë§ˆë¬´ë¦¬">#</a></h3>
<p>ì±„íŒ…ë°©ê³¼ ì†Œì¼“ìœ¼ë¡œ ì—°ê²°ë˜ê¸° ë•Œë¬¸ì— ì„±ëŠ¥ì ìœ¼ë¡œ ë§¤ìš° í¸~~ì•ˆ í–ˆìŠµë‹ˆë‹¤.</p>
<p>ì†Œì¼“ ì—°ê²°ì€ 5ë¶„ë§ˆë‹¤ ëŠì–´ì§€ê¸° ë•Œë¬¸ì— whileë¬¸ ëŒë©´ì„œ ì§€ì†í•´ì„œ ìƒˆë¡œ handshake ë¶€í„° ë‹¤ì‹œ ì‹œì‘í•˜ë©´ ë©ë‹ˆë‹¤.</p>
<figure class="align-center ">
    <img loading="lazy" src="../img/43.png#center"
         alt="ê²Œì‹œê¸€ ì´ë™ë˜ì–´ archiveí•©ë‹ˆë‹¤"/> <figcaption>
            <p>ê²Œì‹œê¸€ ì´ë™ë˜ì–´ archiveí•©ë‹ˆë‹¤</p>
        </figcaption>
</figure>

<br>
<hr>
<h3 id="ë²ˆì™¸íŒ-ì•„í”„ë¦¬ì¹´ë„ìš°ë¯¸-í¬ë¡¤ë§í•˜ê¸°">ë²ˆì™¸íŒ) ì•„í”„ë¦¬ì¹´ë„ìš°ë¯¸ í¬ë¡¤ë§í•˜ê¸°<a hidden class="anchor" aria-hidden="true" href="#ë²ˆì™¸íŒ-ì•„í”„ë¦¬ì¹´ë„ìš°ë¯¸-í¬ë¡¤ë§í•˜ê¸°">#</a></h3>
<h4 id="ë“¤ì–´ê°€ë©°-1">ë“¤ì–´ê°€ë©°<a hidden class="anchor" aria-hidden="true" href="#ë“¤ì–´ê°€ë©°-1">#</a></h4>
<p>ì•„í”„ë¦¬ì¹´ë„ìš°ë¯¸ ì„œë¹„ìŠ¤ë¥¼ ì´ìš©í•˜ë©´ ìœ íŠœë¸Œ ëŒ“ê¸€ê³¼ ì•„í”„ë¦¬ì¹´ ëŒ“ê¸€ì„ í•¨ê»˜ ê¸ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
<p><strong>ì•„í”„ë¦¬ì¹´ ë„ìš°ë¯¸ëŠ” ì±„íŒ…ì´ ì¤‘ê°„ ì¤‘ê°„ ë©ˆì¶”ëŠ” í˜„ìƒì´ ìˆìŠµë‹ˆë‹¤.</strong></p>
<h4 id="ì…€ë ˆëŠ„-vs-ì†Œì¼“">ì…€ë ˆëŠ„ VS ì†Œì¼“<a hidden class="anchor" aria-hidden="true" href="#ì…€ë ˆëŠ„-vs-ì†Œì¼“">#</a></h4>
<p>ì•„í”„ë¦¬ì¹´ ë„ìš°ë¯¸ë¥¼ ë¶„ì„í•´ë³´ë©´ ì†Œì¼“ìœ¼ë¡œ í†µì‹ í•˜ê³  ìˆëŠ”ë° ì•„í”„ë¦¬ì¹´ ë„ìš°ë¯¸ì— ì—°ê²°ëœ ì†Œì¼“ ì£¼ì†Œë¡œ ë©”ì„¸ì§€ ì •ë³´ë¥¼ ë°”ë¡œ ë°›ì•„ì˜¬ ìˆ˜ ìˆê² ë‹¤ê³  ìƒê°ë˜ì–´ ë¶„ì„ì„ í•´ë³´ì•˜ìœ¼ë‚˜ í›„ì› ê´€ë ¨ëœ ë‚´ìš©ë“¤ë§Œ ë°›ì•„ì™€ì¡ŒìŠµë‹ˆë‹¤. ì•„í”„ë¦¬ì¹´ ë„ìš°ë¯¸ê°€ ìì²´ì ìœ¼ë¡œ ê³„ì† ë©ˆì¶”ê¸° ë•Œë¬¸ì— ì„±ëŠ¥ì ìœ¼ë¡œ í¬ê²Œ íš¨ê³¼ë¥¼ ë³´ì§€ ëª»í•  ê²ƒìœ¼ë¡œ ìƒê°ë©ë‹ˆë‹¤.</p>
<p>nomomo ë‹˜ê»˜ì„œ ë„ì›€ ì£¼ì…¨ìŠµë‹ˆë‹¤. <a href="https://github.com/nomomo/Twip-Toonation-Afreehp-Parser-Example/issues/4">Twip-Toonation-Afreehp-Parser-Example issues #4</a> ê°ì‚¬í•©ë‹ˆë‹¤ ğŸ™</p>
<h4 id="ì½”ë“œ-1">ì½”ë“œ<a hidden class="anchor" aria-hidden="true" href="#ì½”ë“œ-1">#</a></h4>


<div class="terminal space shadow">
  <div class="top">
    <div class="btns">
      <span class="circle red"></span>
      <span class="circle yellow"></span>
      <span class="circle green"></span>
    </div>
    <div class="title">
      main.py
    </div>
  </div>
  <div class="terminalbody"><div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span><span class="lnt">30
</span><span class="lnt">31
</span><span class="lnt">32
</span><span class="lnt">33
</span><span class="lnt">34
</span><span class="lnt">35
</span><span class="lnt">36
</span><span class="lnt">37
</span><span class="lnt">38
</span><span class="lnt">39
</span><span class="lnt">40
</span><span class="lnt">41
</span><span class="lnt">42
</span><span class="lnt">43
</span><span class="lnt">44
</span><span class="lnt">45
</span><span class="lnt">46
</span><span class="lnt">47
</span><span class="lnt">48
</span><span class="lnt">49
</span><span class="lnt">50
</span><span class="lnt">51
</span><span class="lnt">52
</span><span class="lnt">53
</span><span class="lnt">54
</span><span class="lnt">55
</span><span class="lnt">56
</span><span class="lnt">57
</span><span class="lnt">58
</span><span class="lnt">59
</span><span class="lnt">60
</span><span class="lnt">61
</span><span class="lnt">62
</span><span class="lnt">63
</span><span class="lnt">64
</span><span class="lnt">65
</span><span class="lnt">66
</span><span class="lnt">67
</span><span class="lnt">68
</span><span class="lnt">69
</span><span class="lnt">70
</span><span class="lnt">71
</span><span class="lnt">72
</span><span class="lnt">73
</span><span class="lnt">74
</span><span class="lnt">75
</span><span class="lnt">76
</span><span class="lnt">77
</span><span class="lnt">78
</span><span class="lnt">79
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-Python" data-lang="Python"><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">time</span>
</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">re</span>
</span></span><span class="line"><span class="cl"><span class="kn">import</span> <span class="nn">threading</span> <span class="k">as</span> <span class="nn">th</span>
</span></span><span class="line"><span class="cl"><span class="kn">from</span> <span class="nn">selenium</span> <span class="kn">import</span> <span class="n">webdriver</span>
</span></span><span class="line"><span class="cl"><span class="kn">from</span> <span class="nn">selenium.webdriver.common.by</span> <span class="kn">import</span> <span class="n">By</span>
</span></span><span class="line"><span class="cl"><span class="kn">from</span> <span class="nn">selenium.webdriver.chrome.service</span> <span class="kn">import</span> <span class="n">Service</span>
</span></span><span class="line"><span class="cl"><span class="kn">from</span> <span class="nn">webdriver_manager.chrome</span> <span class="kn">import</span> <span class="n">ChromeDriverManager</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># ìƒìˆ˜, ì•„í”„ë¦¬ì¹´ë„ìš°ë¯¸ ì±„íŒ… URL, ì»´í“¨í„° ì„±ëŠ¥ì— ë”°ë¼ STRESS ì¡°ì ˆ</span>
</span></span><span class="line"><span class="cl"><span class="n">URL</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s1">&#39;ì•„í”„ë¦¬ì¹´ ë„ìš°ë¯¸ ì±„íŒ… url&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl"><span class="n">STRESS</span> <span class="o">=</span> <span class="mi">3</span>
</span></span><span class="line"><span class="cl"><span class="n">DEBUG</span> <span class="o">=</span> <span class="kc">False</span>
</span></span><span class="line"><span class="cl"><span class="n">CAPTURING</span> <span class="o">=</span> <span class="kc">True</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># SELENIUM ì´ˆê¸°í™”</span>
</span></span><span class="line"><span class="cl"><span class="n">DRIVER</span> <span class="o">=</span> <span class="n">webdriver</span><span class="o">.</span><span class="n">Chrome</span><span class="p">(</span><span class="n">service</span><span class="o">=</span><span class="n">Service</span><span class="p">(</span><span class="n">ChromeDriverManager</span><span class="p">()</span><span class="o">.</span><span class="n">install</span><span class="p">()))</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="c1"># global ë³€ìˆ˜</span>
</span></span><span class="line"><span class="cl"><span class="n">USERS</span> <span class="o">=</span> <span class="p">[]</span>      <span class="c1"># ê²°ê³¼ê°’</span>
</span></span><span class="line"><span class="cl"><span class="n">CONTENTS</span> <span class="o">=</span> <span class="p">[]</span>   <span class="c1"># DEBUGì¼ë•Œ ì±„íŒ… ë‚´ìš© í„°ë¯¸ë„ì— í‘œì‹œ</span>
</span></span><span class="line"><span class="cl"><span class="n">CNT</span> <span class="o">=</span> <span class="mi">0</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">def</span> <span class="nf">stop_catpure</span><span class="p">():</span>
</span></span><span class="line"><span class="cl">    <span class="k">global</span> <span class="n">CAPTURING</span>
</span></span><span class="line"><span class="cl">    <span class="nb">input</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">    <span class="n">CAPTURING</span> <span class="o">=</span> <span class="kc">False</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">def</span> <span class="nf">start_capture</span><span class="p">():</span>
</span></span><span class="line"><span class="cl">    <span class="k">global</span> <span class="n">USERS</span>
</span></span><span class="line"><span class="cl">    <span class="k">global</span> <span class="n">CONTENTS</span>
</span></span><span class="line"><span class="cl">    <span class="k">global</span> <span class="n">CNT</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="n">DRIVER</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">URL</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="n">STRESS</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">    <span class="n">th</span><span class="o">.</span><span class="n">Thread</span><span class="p">(</span><span class="n">target</span><span class="o">=</span><span class="n">stop_catpure</span><span class="p">,</span> <span class="n">args</span><span class="o">=</span><span class="p">(),</span> <span class="n">name</span><span class="o">=</span><span class="s1">&#39;stop_catpure&#39;</span><span class="p">,</span> <span class="n">daemon</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">    <span class="k">while</span> <span class="n">CAPTURING</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">        <span class="k">try</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">            <span class="n">DRIVER</span><span class="o">.</span><span class="n">implicitly_wait</span><span class="p">(</span><span class="n">STRESS</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">            <span class="n">chat_list</span> <span class="o">=</span> <span class="n">DRIVER</span><span class="o">.</span><span class="n">find_element</span><span class="p">(</span><span class="n">By</span><span class="o">.</span><span class="n">CLASS_NAME</span><span class="p">,</span> <span class="s1">&#39;chat_list&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">            <span class="n">chats</span> <span class="o">=</span> <span class="n">chat_list</span><span class="o">.</span><span class="n">find_elements</span><span class="p">(</span><span class="n">By</span><span class="o">.</span><span class="n">TAG_NAME</span><span class="p">,</span> <span class="s1">&#39;li&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">            <span class="c1"># print(&#34;chat len &gt; &#34;, len(chats))</span>
</span></span><span class="line"><span class="cl">            <span class="k">for</span> <span class="n">chat</span> <span class="ow">in</span> <span class="n">chats</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">                <span class="n">name</span> <span class="o">=</span> <span class="n">chat</span><span class="o">.</span><span class="n">get_attribute</span><span class="p">(</span><span class="s1">&#39;data-name&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">                <span class="nb">id</span> <span class="o">=</span> <span class="n">chat</span><span class="o">.</span><span class="n">get_attribute</span><span class="p">(</span><span class="s1">&#39;data-id&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">                <span class="n">classname</span> <span class="o">=</span> <span class="n">chat</span><span class="o">.</span><span class="n">get_attribute</span><span class="p">(</span><span class="s1">&#39;class&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">                <span class="n">platform</span> <span class="o">=</span> <span class="s1">&#39;afreeca&#39;</span> <span class="k">if</span> <span class="s1">&#39;afreeca&#39;</span> <span class="ow">in</span> <span class="n">classname</span> <span class="k">else</span> <span class="s1">&#39;youtube&#39;</span>
</span></span><span class="line"><span class="cl">                <span class="n">user</span> <span class="o">=</span>  <span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s1"> | </span><span class="si">{</span><span class="n">platform</span><span class="si">}</span><span class="s1">&#39;</span> <span class="k">if</span> <span class="n">platform</span> <span class="o">==</span> <span class="s1">&#39;afreeca&#39;</span> <span class="k">else</span> <span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s1"> | @</span><span class="si">{</span><span class="nb">id</span><span class="si">}</span><span class="s1"> | </span><span class="si">{</span><span class="n">platform</span><span class="si">}</span><span class="s1">&#39;</span>
</span></span><span class="line"><span class="cl">                <span class="n">secrets</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;[^0-9]&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">classname</span><span class="p">))</span> <span class="o">+</span> <span class="n">user</span>
</span></span><span class="line"><span class="cl">                <span class="k">if</span> <span class="p">(</span><span class="n">user</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">USERS</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">name</span><span class="p">)</span> <span class="o">*</span> <span class="nb">len</span><span class="p">(</span><span class="nb">id</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">                    <span class="n">USERS</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">user</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">                    <span class="n">content</span> <span class="o">=</span> <span class="n">chat</span><span class="o">.</span><span class="n">find_element</span><span class="p">(</span><span class="n">By</span><span class="o">.</span><span class="n">CLASS_NAME</span><span class="p">,</span> <span class="s1">&#39;text&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">text</span>
</span></span><span class="line"><span class="cl">                <span class="k">if</span> <span class="n">secrets</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">CONTENTS</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">                    <span class="n">CONTENTS</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">secrets</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">                    <span class="k">if</span> <span class="n">DEBUG</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">                        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">platform</span><span class="si">}</span><span class="s1"> - </span><span class="si">{</span><span class="n">content</span><span class="si">}</span><span class="s1"> - </span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s1"> - </span><span class="si">{</span><span class="n">secrets</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">                    <span class="k">else</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">                        <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;------- </span><span class="se">\t</span><span class="s1"> ì•„ì´ë”” : </span><span class="si">{</span><span class="n">user</span><span class="si">}</span><span class="se">\n\t\t</span><span class="s1"> ë‚´ìš© : </span><span class="si">{</span><span class="n">content</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">                    <span class="n">CNT</span> <span class="o">+=</span> <span class="mi">1</span>
</span></span><span class="line"><span class="cl">            <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="n">STRESS</span> <span class="o">/</span> <span class="mi">3</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="k">except</span> <span class="ne">KeyboardInterrupt</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">            <span class="k">break</span>
</span></span><span class="line"><span class="cl">        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">            <span class="nb">print</span><span class="p">(</span><span class="s2">&#34;!&#34;</span><span class="p">,</span> <span class="n">e</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">def</span> <span class="nf">quit_capture</span><span class="p">():</span>
</span></span><span class="line"><span class="cl">    <span class="n">DRIVER</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="k">def</span> <span class="nf">print_results</span><span class="p">():</span>
</span></span><span class="line"><span class="cl">    <span class="k">global</span> <span class="n">USERS</span>
</span></span><span class="line"><span class="cl">    <span class="k">global</span> <span class="n">CONTENTS</span>
</span></span><span class="line"><span class="cl">    <span class="n">users</span> <span class="o">=</span> <span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="n">USERS</span><span class="p">)))</span>
</span></span><span class="line"><span class="cl">    <span class="nb">print</span><span class="p">(</span><span class="n">users</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl">
</span></span><span class="line"><span class="cl"><span class="n">start_capture</span><span class="p">()</span>
</span></span><span class="line"><span class="cl"><span class="n">quit_capture</span><span class="p">()</span>
</span></span><span class="line"><span class="cl"><span class="n">print_results</span><span class="p">()</span>
</span></span></code></pre></td></tr></table>
</div>
</div></div>
</div>
<br />

<h4 id="ì½”ë“œì„¤ëª…">ì½”ë“œì„¤ëª…<a hidden class="anchor" aria-hidden="true" href="#ì½”ë“œì„¤ëª…">#</a></h4>
<p>ì…€ë ˆëŠ„ì„ ì´ìš©í•˜ì—¬ ì›¹ ë“œë¼ì´ë²„ê°€ í•´ë‹¹ ì†ŒìŠ¤ë¥¼ ë Œë”ë§ í•œ ì´í›„ì— ê¸ì–´ì˜µë‹ˆë‹¤.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="c1"># line 16</span>
</span></span><span class="line"><span class="cl"><span class="n">DRIVER</span> <span class="o">=</span> <span class="n">webdriver</span><span class="o">.</span><span class="n">Chrome</span><span class="p">(</span><span class="n">service</span><span class="o">=</span><span class="n">Service</span><span class="p">(</span><span class="n">ChromeDriverManager</span><span class="p">()</span><span class="o">.</span><span class="n">install</span><span class="p">()))</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>í•´ë‹¹ í”„ë¡œê·¸ë¨ì€ <code>pyinstaller</code>ë¡œ <code>exe</code>íŒŒì¼ë¡œ ë§Œë“¤ì–´ì•¼ í•˜ê¸° ë–„ë¬¸ì— ì›¹ ë“œë¼ì´ë²„ë¥¼ ìë™ìœ¼ë¡œ ìµœì‹  ë²„ì „ìœ¼ë¡œ ë°›ì•„ì˜µë‹ˆë‹¤. ì •ì ì¸ ë“œë¼ì´ë²„ë¥¼ ì‚¬ìš©í•  ê²½ìš°ì— íŒŒì¼ì„ ì‹¤í–‰í•˜ëŠ” ì»´í“¨í„°ì˜ ë“œë¼ì´ë²„ì™€ ë§ì§€ ì•ŠëŠ” ê²ƒì„ ë°©ì§€í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span><span class="lnt">5
</span><span class="lnt">6
</span><span class="lnt">7
</span><span class="lnt">8
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="c1"># line 24</span>
</span></span><span class="line"><span class="cl"><span class="k">def</span> <span class="nf">stop_catpure</span><span class="p">():</span>
</span></span><span class="line"><span class="cl">    <span class="k">global</span> <span class="n">CAPTURING</span>
</span></span><span class="line"><span class="cl">    <span class="nb">input</span><span class="p">()</span>
</span></span><span class="line"><span class="cl">    <span class="n">CAPTURING</span> <span class="o">=</span> <span class="kc">False</span>
</span></span><span class="line"><span class="cl"><span class="o">...</span>
</span></span><span class="line"><span class="cl"><span class="c1"># line 37</span>
</span></span><span class="line"><span class="cl"><span class="n">th</span><span class="o">.</span><span class="n">Thread</span><span class="p">(</span><span class="n">target</span><span class="o">=</span><span class="n">stop_catpure</span><span class="p">,</span> <span class="n">args</span><span class="o">=</span><span class="p">(),</span> <span class="n">name</span><span class="o">=</span><span class="s1">&#39;stop_catpure&#39;</span><span class="p">,</span> <span class="n">daemon</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ë¼ì´ë¸Œ ë°©ì†¡ì´ ëë‚˜ê¸° ì „ì— ì¶”ì¶œì„ ì¢…ë£Œí•˜ê¸° ìœ„í•´ì„œ í•´ë‹¹ í•¨ìˆ˜ë¥¼ ì“°ë ˆë“œë¡œ ì‹¤í–‰ì‹œí‚µë‹ˆë‹¤. í‚¤ë³´ë“œ ì¸í’‹ì´ ìˆëŠ”ê²½ìš° ì¶”ì¶œì„ ìë™ìœ¼ë¡œ ì¢…ë£Œí•©ë‹ˆë‹¤.</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre tabindex="0" class="chroma"><code><span class="lnt"> 1
</span><span class="lnt"> 2
</span><span class="lnt"> 3
</span><span class="lnt"> 4
</span><span class="lnt"> 5
</span><span class="lnt"> 6
</span><span class="lnt"> 7
</span><span class="lnt"> 8
</span><span class="lnt"> 9
</span><span class="lnt">10
</span><span class="lnt">11
</span><span class="lnt">12
</span><span class="lnt">13
</span><span class="lnt">14
</span><span class="lnt">15
</span><span class="lnt">16
</span><span class="lnt">17
</span><span class="lnt">18
</span><span class="lnt">19
</span><span class="lnt">20
</span><span class="lnt">21
</span><span class="lnt">22
</span><span class="lnt">23
</span><span class="lnt">24
</span><span class="lnt">25
</span><span class="lnt">26
</span><span class="lnt">27
</span><span class="lnt">28
</span><span class="lnt">29
</span></code></pre></td>
<td class="lntd">
<pre tabindex="0" class="chroma"><code class="language-python" data-lang="python"><span class="line"><span class="cl"><span class="c1"># line 38</span>
</span></span><span class="line"><span class="cl"><span class="k">while</span> <span class="n">CAPTURING</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">    <span class="k">try</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">        <span class="n">DRIVER</span><span class="o">.</span><span class="n">implicitly_wait</span><span class="p">(</span><span class="n">STRESS</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="n">chat_list</span> <span class="o">=</span> <span class="n">DRIVER</span><span class="o">.</span><span class="n">find_element</span><span class="p">(</span><span class="n">By</span><span class="o">.</span><span class="n">CLASS_NAME</span><span class="p">,</span> <span class="s1">&#39;chat_list&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="n">chats</span> <span class="o">=</span> <span class="n">chat_list</span><span class="o">.</span><span class="n">find_elements</span><span class="p">(</span><span class="n">By</span><span class="o">.</span><span class="n">TAG_NAME</span><span class="p">,</span> <span class="s1">&#39;li&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">        <span class="c1"># print(&#34;chat len &gt; &#34;, len(chats))</span>
</span></span><span class="line"><span class="cl">        <span class="k">for</span> <span class="n">chat</span> <span class="ow">in</span> <span class="n">chats</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">            <span class="n">name</span> <span class="o">=</span> <span class="n">chat</span><span class="o">.</span><span class="n">get_attribute</span><span class="p">(</span><span class="s1">&#39;data-name&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">            <span class="nb">id</span> <span class="o">=</span> <span class="n">chat</span><span class="o">.</span><span class="n">get_attribute</span><span class="p">(</span><span class="s1">&#39;data-id&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">            <span class="n">classname</span> <span class="o">=</span> <span class="n">chat</span><span class="o">.</span><span class="n">get_attribute</span><span class="p">(</span><span class="s1">&#39;class&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">            <span class="n">platform</span> <span class="o">=</span> <span class="s1">&#39;afreeca&#39;</span> <span class="k">if</span> <span class="s1">&#39;afreeca&#39;</span> <span class="ow">in</span> <span class="n">classname</span> <span class="k">else</span> <span class="s1">&#39;youtube&#39;</span>
</span></span><span class="line"><span class="cl">            <span class="n">user</span> <span class="o">=</span>  <span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s1"> | </span><span class="si">{</span><span class="n">platform</span><span class="si">}</span><span class="s1">&#39;</span> <span class="k">if</span> <span class="n">platform</span> <span class="o">==</span> <span class="s1">&#39;afreeca&#39;</span> <span class="k">else</span> <span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s1"> | @</span><span class="si">{</span><span class="nb">id</span><span class="si">}</span><span class="s1"> | </span><span class="si">{</span><span class="n">platform</span><span class="si">}</span><span class="s1">&#39;</span>
</span></span><span class="line"><span class="cl">            <span class="n">secrets</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">re</span><span class="o">.</span><span class="n">sub</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;[^0-9]&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">classname</span><span class="p">))</span> <span class="o">+</span> <span class="n">user</span>
</span></span><span class="line"><span class="cl">            <span class="k">if</span> <span class="p">(</span><span class="n">user</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">USERS</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">name</span><span class="p">)</span> <span class="o">*</span> <span class="nb">len</span><span class="p">(</span><span class="nb">id</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">):</span>
</span></span><span class="line"><span class="cl">                <span class="n">USERS</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">user</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">                <span class="n">content</span> <span class="o">=</span> <span class="n">chat</span><span class="o">.</span><span class="n">find_element</span><span class="p">(</span><span class="n">By</span><span class="o">.</span><span class="n">CLASS_NAME</span><span class="p">,</span> <span class="s1">&#39;text&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">text</span>
</span></span><span class="line"><span class="cl">            <span class="k">if</span> <span class="n">secrets</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">CONTENTS</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">                <span class="n">CONTENTS</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">secrets</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">                <span class="k">if</span> <span class="n">DEBUG</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">                    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">platform</span><span class="si">}</span><span class="s1"> - </span><span class="si">{</span><span class="n">content</span><span class="si">}</span><span class="s1"> - </span><span class="si">{</span><span class="n">name</span><span class="si">}</span><span class="s1"> - </span><span class="si">{</span><span class="n">secrets</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">                <span class="k">else</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">                    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;------- </span><span class="se">\t</span><span class="s1"> ì•„ì´ë”” : </span><span class="si">{</span><span class="n">user</span><span class="si">}</span><span class="se">\n\t\t</span><span class="s1"> ë‚´ìš© : </span><span class="si">{</span><span class="n">content</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">                <span class="n">CNT</span> <span class="o">+=</span> <span class="mi">1</span>
</span></span><span class="line"><span class="cl">        <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="n">STRESS</span> <span class="o">/</span> <span class="mi">3</span><span class="p">)</span>
</span></span><span class="line"><span class="cl">    <span class="k">except</span> <span class="ne">KeyboardInterrupt</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">        <span class="k">break</span>
</span></span><span class="line"><span class="cl">    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
</span></span><span class="line"><span class="cl">        <span class="nb">print</span><span class="p">(</span><span class="s2">&#34;!&#34;</span><span class="p">,</span> <span class="n">e</span><span class="p">)</span>
</span></span></code></pre></td></tr></table>
</div>
</div><p>ì…€ë ˆëŠ„ì„ ì´ìš©í•´ì„œ ì•„í”„ë¦¬ì¹´ë„ìš°ë¯¸ í˜ì´ì§€ë¥¼ ê¸ì–´ì˜µë‹ˆë‹¤.</p>
<h4 id="ê²°ê³¼-2">ê²°ê³¼<a hidden class="anchor" aria-hidden="true" href="#ê²°ê³¼-2">#</a></h4>
<figure class="align-center ">
    <img loading="lazy" src="../img/4.gif#center"/> 
</figure>

<br>
<h3 id="ë§ˆì¹˜ë©°">ë§ˆì¹˜ë©°<a hidden class="anchor" aria-hidden="true" href="#ë§ˆì¹˜ë©°">#</a></h3>
<p>ë ˆí¼ëŸ°ìŠ¤ê°€ ì—†ì–´ì„œ ì§„í–‰í•˜ê¸° ì–´ë ¤ìš´ ë¶€ë¶„ì´ ìˆì—ˆëŠ”ë° í•´ê²°ë˜ì–´ì„œ ì„±ì·¨ê°ì„ ë§ì´ ëŠê¼ˆìŠµë‹ˆë‹¤. ê¶ê¸ˆí•˜ì‹  ì ì´ ìˆìœ¼ë©´ ëŒ“ê¸€ë¡œ ë‚¨ê²¨ì£¼ì‹œê¸° ë°”ë¼ë©° í•´ë‹¹ ê¸€ì´ ë„ì›€ì´ ë˜ì…¨ê¸¸ ë°”ëë‹ˆë‹¤ :)</p>


  </div>

  <footer class="post-footer">
    <ul class="post-tags">
      <li><a href="https://cha2hyun.blog/tags/python/">Python</a></li>
      <li><a href="https://cha2hyun.blog/tags/websockets/">Websockets</a></li>
      <li><a href="https://cha2hyun.blog/tags/bs4/">Bs4</a></li>
      <li><a href="https://cha2hyun.blog/tags/selenium/">Selenium</a></li>
      <li><a href="https://cha2hyun.blog/tags/crawling/">Crawling</a></li>
    </ul>
<nav class="paginav">
  <a class="next" href="https://cha2hyun.blog/content/algorithm/frontend-algorithm/">
    <span class="title">Next Â»</span>
    <br>
    <span>FE ê¸°ìˆ ë©´ì ‘ ì¤€ë¹„</span>
  </a>
</nav>


<div
  style="
    padding-top: 15px;
    padding-bottom: 2px;
    font-size: x-large;
    font-weight: 700;
  "
>
  ê¶ê¸ˆí•˜ì‹  ì ì´ ìˆìœ¼ì‹ ê°€ìš”? ğŸ˜€
</div>





<script
  src="https://giscus.app/client.js"
  data-repo="cha2hyun/cha2hyun.github.io"
  data-repo-id="R_kgDOICTfkg"
  data-category="Comments"
  data-category-id="DIC_kwDOICTfks4CcDAW"
  data-mapping="pathname"
  data-strict="0"
  data-reactions-enabled="1"
  data-emit-metadata="0"
  data-input-position="top"
  data-theme="dark_dimmed"
  data-lang="ko"
  crossorigin="anonymous"
  async
></script>

  </footer>
</article>
    </main>
    
<footer class="footer">
    <span>&copy; 2024 <a href="https://cha2hyun.blog/">ì±„ìˆ˜í˜„ ê°œë°œì¼ì§€</a></span>
    
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
<script>
    document.querySelectorAll('pre > code').forEach((codeblock) => {
        const container = codeblock.parentNode.parentNode;

        const copybutton = document.createElement('button');
        copybutton.classList.add('copy-code');
        copybutton.innerHTML = 'copy';

        function copyingDone() {
            copybutton.innerHTML = 'copied!';
            setTimeout(() => {
                copybutton.innerHTML = 'copy';
            }, 2000);
        }

        copybutton.addEventListener('click', (cb) => {
            if ('clipboard' in navigator) {
                navigator.clipboard.writeText(codeblock.textContent);
                copyingDone();
                return;
            }

            const range = document.createRange();
            range.selectNodeContents(codeblock);
            const selection = window.getSelection();
            selection.removeAllRanges();
            selection.addRange(range);
            try {
                document.execCommand('copy');
                copyingDone();
            } catch (e) { };
            selection.removeRange(range);
        });

        if (container.classList.contains("highlight")) {
            container.appendChild(copybutton);
        } else if (container.parentNode.firstChild == container) {
            
        } else if (codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName == "TABLE") {
            
            codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(copybutton);
        } else {
            
            codeblock.parentNode.appendChild(copybutton);
        }
    });
</script>
</body>

</html>
